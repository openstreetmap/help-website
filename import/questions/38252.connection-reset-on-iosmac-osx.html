<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Connection reset on iOS/mac osx - Wireshark Q&amp;A</title>
        <meta name="description" content="We have a weird problem that can only be reproduced with iOS and Mac OSX.  The problem occurs when the clients are redirected in a SSL-session which is done from a custom filter in a TMG. Looking at the logs in wireshark we get from the server FIN, ACK and then right after RST, ACK. The last ACK is ..." />
        <meta name="keywords" content="macosx,ios,rst+ack" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/38252/connection-reset-on-iosmac-osx" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/38252/connection-reset-on-iosmac-osx?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='d4CJyTi59CZonpScwhjUgl5ahqwQO8hj' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/38252/connection-reset-on-iosmac-osx">Connection reset on iOS/mac osx</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-38252-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/38252/up/" rel="nofollow"> </a>
<div id="post-38252-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-38252-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/38252/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/38252/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>We have a weird problem that can only be reproduced with iOS and Mac OSX. 
The problem occurs when the clients are redirected in a SSL-session which is done from a custom filter in a TMG.
Looking at the logs in wireshark we get from the server FIN, ACK and then right after RST, ACK. The last ACK is for a sequence number I cannot find.</p>
<p>The weird thing is that we can only reproduce it with iOS and Mac OSX(and it happens every time). It works fine with windows, ubuntu, windows phone and so on.
Has anyone seen these kind of problems with iOS/mac os?</p>
<pre><code>No.     Time           Source             Destination       Protocol Length Info
  1 0.000000000    client-ip          server-ip         TCP      78     50847→443 [SYN] Seq=0 Win=65535 Len=0 MSS=1460 WS=32 TSval=490636520 TSecr=0 SACK_PERM=1
  2 0.009105000    server-ip          client-ip         TCP      74     443→50847 [SYN, ACK] Seq=0 Ack=1 Win=8192 Len=0 MSS=1460 WS=256 SACK_PERM=1 TSval=103007363 TSecr=490636520
  3 0.009225000    client-ip          server-ip         TCP      66     50847→443 [ACK] Seq=1 Ack=1 Win=131744 Len=0 TSval=490636529 TSecr=103007363
  4 0.010158000    client-ip          server-ip         TLSv1    303    Client Hello
  5 0.030827000    server-ip          client-ip         TLSv1    211    Server Hello, Change Cipher Spec, Encrypted Handshake Message
  6 0.030912000    client-ip          server-ip         TCP      66     50847→443 [ACK] Seq=238 Ack=146 Win=131616 Len=0 TSval=490636550 TSecr=103007365
  7 0.031190000    client-ip          server-ip         TLSv1    72     Change Cipher Spec
  8 0.031195000    client-ip          server-ip         TLSv1    119    Encrypted Handshake Message
  9 0.032129000    client-ip          server-ip         TLSv1    519    Application Data
 10 0.049597000    server-ip          client-ip         TCP      66     443→50847 [ACK] Seq=146 Ack=297 Win=131584 Len=0 TSval=103007367 TSecr=490636550
 11 0.049773000    server-ip          client-ip         TLSv1    343    Application Data
 12 0.049857000    client-ip          server-ip         TCP      66     50847→443 [ACK] Seq=750 Ack=423 Win=131328 Len=0 TSval=490636568 TSecr=103007367
 13 0.053849000    client-ip          server-ip         TLSv1    620    Application Data, Application Data
 14 0.056073000    server-ip          client-ip         TCP      66     443→50847 [FIN, ACK] Seq=423 Ack=750 Win=131072 Len=0 TSval=103007368 TSecr=490636568
 15 0.065695000    server-ip          client-ip         TCP      60     443→50847 [RST, ACK] Seq=424 Ack=1304 Win=0 Len=0
 16 0.295689000    client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 17 0.572773000    client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 18 0.924984000    client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 19 1.430060000    client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 20 2.239149000    client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 21 3.400246000    client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 22 5.521333000    client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 23 7.642410000    client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 24 9.763488000    client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 25 11.884578000   client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 26 14.005664000   client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 27 16.126750000   client-ip          server-ip         TLSv1    620    [TCP Window Full] [TCP Retransmission] Application Data, Application Data
 28 18.247842000   client-ip          server-ip         TCP      54     50847→443 [RST, ACK] Seq=1304 Ack=423 Win=131328 Len=0
</code></pre>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/macosx/" class="post-tag tag-link-macosx"
                                        title="see questions tagged 'macosx'" rel="tag">macosx</a>
                                
                                    <a href="/tags/ios/" class="post-tag tag-link-ios"
                                        title="see questions tagged 'ios'" rel="tag">ios</a>
                                
                                    <a href="/tags/rst%252Back/" class="post-tag tag-link-rst+ack"
                                        title="see questions tagged 'rst+ack'" rel="tag">rst+ack</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>01 Dec '14, 04:48</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/66a1da34704d18984e99b76edfa3a9ed?s=32&amp;d=identicon&amp;r=g" alt="JanBanan's gravatar image" />
    <p><a href="/users/12422/janbanan">JanBanan</a><br/>
    <span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">&#9679;</span><span class="badgecount">2</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="JanBanan has no accepted answers">0&#37;</span>
    </p>
</div>


                            </div>
                            




<div class="comments-container" id="comments-container-38252">
    
</div>
<div id="comment-tools-38252" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-38252-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
        <form id="fmanswer" action="/questions/38252/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='d4CJyTi59CZonpScwhjUgl5ahqwQO8hj' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Be the first one to answer this question!
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/38252/connection-reset-on-iosmac-osx?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/38252/connection-reset-on-iosmac-osx?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/macosx/"
            class="tag-link-macosx"
            title="see questions tagged'macosx'using tags"
            rel="tag">macosx</a> <span class="tag-number">&#215;53</span><br/>
        
        <a href="/tags/rst%252Back/"
            class="tag-link-rst+ack"
            title="see questions tagged'rst+ack'using tags"
            rel="tag">rst+ack</a> <span class="tag-number">&#215;17</span><br/>
        
        <a href="/tags/ios/"
            class="tag-link-ios"
            title="see questions tagged'ios'using tags"
            rel="tag">ios</a> <span class="tag-number">&#215;10</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Dec. 1, 2014, 4:48 a.m.">01 Dec '14, 04:48</strong>
    </p>
    <p> 
     	question was seen: <strong>2,438 times</strong>
    </p>
    <p> 
        last updated: <strong title="Dec. 1, 2014, 4:48 a.m.">01 Dec '14, 04:48</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/13305/mac-os-x-106-installation-problem">Mac OS X 10.6 Installation problem</a>
        </p>
        
        <p>
            <a href="/questions/28355/is-there-any-way-to-see-the-codecs-used-in-voip-application-in-wiresharkg729amr">Is there any way to see the codecs used in voip application in wireshark(G729,AMR...)</a>
        </p>
        
        <p>
            <a href="/questions/44160/wireshark-crash-after-launch">Wireshark crash after launch</a>
        </p>
        
        <p>
            <a href="/questions/57980/how-to-update-hosts-files-for-wireshark-in-mac-os">How to update Hosts Files for Wireshark in Mac os</a>
        </p>
        
        <p>
            <a href="/questions/36281/cannot-access-network-drives-through-vpn">Cannot Access Network Drives through VPN.</a>
        </p>
        
        <p>
            <a href="/questions/15091/wireshark-wont-start-on-macos-missing-libraries">Wireshark won&#39;t start on MacOS - missing libraries?</a>
        </p>
        
        <p>
            <a href="/questions/32083/how-do-i-reassemble-monitor-mode-80211-protocol-data-into-tcpip-packets">How do I reassemble monitor mode 802.11 protocol data into TCP/IP packets?</a>
        </p>
        
        <p>
            <a href="/questions/45089/wire-shark-does-not-open">Wire shark does not Open!</a>
        </p>
        
        <p>
            <a href="/questions/58475/capture-filter-expression-always-invalid">capture filter expression always invalid</a>
        </p>
        
        <p>
            <a href="/questions/38182/getting-tcp-rstack-during-data-copy-between-2008r2client-and-nas-server-netapp">Getting TCP RST/ACK during data copy between 2008R2(Client) and NAS server (NetApp))</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
