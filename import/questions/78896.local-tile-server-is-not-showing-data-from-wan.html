<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Local tile server , is not showing data from WAN - OSM Help</title>
        <meta name="description" content="Hi Guys, I have successfully installed and setup a tile server with following guide : https://switch2osm.org/serving-tiles/manually-building-a-tile-server-18-04-lts/ Loaded a data for specific region and everything is working OK. However, when i try to access the data from outside, the tile&#39;s are no..." />
        <meta name="keywords" content="leaflet,tiles,osm,public" />
        
        <link rel="canonical" href="https://help.openstreetmap.org/questions/78896/local-tile-server-is-not-showing-data-from-wan" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/78896/local-tile-server-is-not-showing-data-from-wan?type=rss">

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <link rel="shortcut icon" href="/upfiles/favicon_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.8.24/themes/base/jquery-ui.min.css" integrity="sha512-Lzjd1ELD6YCIwIU5uaJldvbibV5Fi7HThNZjrwJHALBJRT6q2a6ndgi8TNgcKcUqGsH6bpT7xyTEi8qRzN1ASg==" crossorigin="anonymous" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.4.4/jquery.min.js" integrity="sha512-tcexmm0PBc+jOn9UwbgHVpjZIleEKXif1MCkzgNfVjhXKDxwYumrCOxhZ5tIaXHz2DpEE14hfjFn5J+tpaFSCg==" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js" integrity="sha512-leN1LJ2B5s9cBINeKL5bbT3cQvOebXsezoYGyuMq9oaytpFJgJ1uBOU86lJZObKTFLbMHqP0zFXR/1N6Nnlskw==" crossorigin="anonymous"></script>
        <script type="text/javascript">
        /*<![CDATA[*/
            var i18nLang = 'en';
            var appUrl = 'https://help.openstreetmap.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="OSM Help Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/osm_help_logo_6.png" title="back to home page" alt="OpenStreetMap Help Forum logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        <!-- <a id="nav_ask" href="/questions/ask/" class="special">ask a question</a> -->
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <iframe src="https://duckduckgo.com/search.html?site=help.openstreetmap.org&prefill=Search questions using DuckDuckGo&focus=yes" style="overflow:hidden;margin:0;padding:0;width:408px;height:40px;" frameborder="0"></iframe>
    <!--
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='FeH0I7mujEgzEbdYxitJZZHv5zxsNDiG' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
    -->
	</div>

	
  <div id="announcement">
      <p>NOTICE: <a href="https://community.openstreetmap.org/t/archiving-of-help-openstreetmap-org-1st-march-2024/108483">help.openstreetmap.org is no longer in use from 1st March 2024</a>. Please use the <a href="https://community.openstreetmap.org/">OpenStreetMap Community Forum</a></p>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/78896/local-tile-server-is-not-showing-data-from-wan">Local tile server , is not showing data from WAN</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-78896-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/78896/up/" rel="nofollow"> </a>
<div id="post-78896-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-78896-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/78896/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/78896/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>Hi Guys,</p>
<p>I have successfully installed and setup a tile server with following guide : <a href="https://switch2osm.org/serving-tiles/manually-building-a-tile-server-18-04-lts/">https://switch2osm.org/serving-tiles/manually-building-a-tile-server-18-04-lts/</a></p>
<p>Loaded a data for specific region and everything is working OK. However, when i try to access the data from outside, the tile's are not shown. </p>
<p>To be more specific on my firewall i've set up a NAT rule whenever i receive a request on port 10780, my PUBLIC_IP:10780 to forward the request to my tile server on HTTP port. Request is forwarded however on the browser nothing is shown, there're no errors in the apache's log and in the server , everything seems fine with the request its coming to the server, since i can see the public IP of the request in the access log of the apache, only with developer tools i got the following :</p>
<p><img src="https://help.openstreetmap.org/upfiles/picture.PNG" alt="alt text"></p>
<p>I am using leaflet file and the content of the file is as below :</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html style="height:100%;margin:0;padding:0;"&gt;
&lt;title&gt;Leaflet page with OSM render server selection&lt;/title&gt;
&lt;meta charset="utf-8"&gt;
&lt;link rel="stylesheet" href="https://unpkg.com/leaflet@1.3/dist/leaflet.css" /&gt;
&lt;script src="https://unpkg.com/leaflet@1.3/dist/leaflet.js"&gt;&lt;/script&gt;
&lt;script src="https://unpkg.com/leaflet-hash@0.2.1/leaflet-hash.js"&gt;&lt;/script&gt;
&lt;style type="text/css"&gt;
.leaflet-tile-container { pointer-events: auto; }
&lt;/style&gt;
&lt;/head&gt;
&lt;body style="height:100%;margin:0;padding:0;"&gt;
&lt;div id="map" style="height:100%"&gt;&lt;/div&gt;
&lt;script&gt;
//&lt;![CDATA[
var map = L.map('map').setView([47.3686498, 8.5391825], 18);

L.tileLayer('http://192.168.155.107/hot/{z}/{x}/{y}.png', {
    attribution: '&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors'
}).addTo(map);

var hash = L.hash(map)
//]]&gt;
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
index.html (END)
</code></pre>
<p>If i browse the server within my LAN , <a href="http://192.168.155.107/">http://192.168.155.107/</a> everything is fine, however from outside the tile's are not shown. Can someone help with this , or had similar situation what i need to do in order to access the tile server from outside.</p>
<p>Thanks in advance guys.</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/leaflet/" class="post-tag tag-link-leaflet"
                                        title="see questions tagged 'leaflet'" rel="tag">leaflet</a>
                                
                                    <a href="/tags/tiles/" class="post-tag tag-link-tiles"
                                        title="see questions tagged 'tiles'" rel="tag">tiles</a>
                                
                                    <a href="/tags/osm/" class="post-tag tag-link-osm"
                                        title="see questions tagged 'osm'" rel="tag">osm</a>
                                
                                    <a href="/tags/public/" class="post-tag tag-link-public"
                                        title="see questions tagged 'public'" rel="tag">public</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>17 Feb '21, 13:03</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/b4c6f7d35e4fd1b4561578e5e376ca06?s=32&amp;d=identicon&amp;r=g" alt="DavorB0's gravatar image" />
    <p><a href="/users/19676/davorb0">DavorB0</a><br/>
    <span class="score" title="22 reputation points">22</span><span title="4 badges"><span class="badge1">&#9679;</span><span class="badgecount">4</span></span><span title="4 badges"><span class="silver">&#9679;</span><span class="badgecount">4</span></span><span title="5 badges"><span class="bronze">&#9679;</span><span class="badgecount">5</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="DavorB0 has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/78896/">
                edited
                <strong>17 Feb '21, 13:38</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/52d3234f3be58156770e8a91d575bfbd?s=32&amp;d=identicon&amp;r=g" alt="scai's gravatar image" />
            <p><a href="/users/158/scai">scai ♦</a><br/>
            <span class="score" title="33317 reputation points"><span class="">33.3k</span></span><span title="21 badges"><span class="badge1">&#9679;</span><span class="badgecount">21</span></span><span title="309 badges"><span class="silver">&#9679;</span><span class="badgecount">309</span></span><span title="459 badges"><span class="bronze">&#9679;</span><span class="badgecount">459</span></span></p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-78896">
    
        <a name="78897"></a>
        <div class="comment" id="comment-78897">
            <div id="post-78897-score" class="comment-score">1</div>
            <div class="comment-text"><p>You need to use an address that can be reached from the outside. 192.168.155.107 is a private address which probably can't be reached from the outside of your LAN, certainly not from the Internet.</p></div>
            <div class="comment-info" id="comment-78897-info">
                
                
                
                

                

                <span class="comment-age">(17 Feb '21, 13:09)</span>
                <a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
                
            </div>
        </div>
    
        <a name="78898"></a>
        <div class="comment" id="comment-78898">
            <div id="post-78898-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="https://help.openstreetmap.org/users/158/scai">@Scai</a> i am using my http://${PUBLIC_IP}:{PORT} to access the server. I am achieving this with NAT (network address translation) rule set on the firewall , example i am browsing <a href="http://44.44.44.44:10780">http://44.44.44.44:10780</a> , once the request comes to my firewall its forwarded to the local server 192.168.155.107 on port 80 which apache accepts it. This is not an issue, the request goes without issues, afterwards tile's are not shown for some reason.</p></div>
            <div class="comment-info" id="comment-78898-info">
                
                
                
                

                

                <span class="comment-age">(17 Feb '21, 13:24)</span>
                <a class="comment-user userinfo" href="/users/19676/davorb0">DavorB0</a>
                
            </div>
        </div>
    
        <a name="78899"></a>
        <div class="comment" id="comment-78899">
            <div id="post-78899-score" class="comment-score">3</div>
            <div class="comment-text"><p>Still, your index.html refers to 192.168.155.107. Therefore your browser tries to contact 192.168.155.107 as can be seen in the screenshot. Your browser doesn't know that 192.168.155.107 is located behind 44.44.44.44:10780. You either need to replace 192.168.155.107 with your public IP address and port (not really a good solution in this case, since both the index.html and the tiles seem to be located on the same machine) or you need to specify a relative URL to your tiles instead of an absolute one.</p></div>
            <div class="comment-info" id="comment-78899-info">
                
                
                
                

                

                <span class="comment-age">(17 Feb '21, 13:39)</span>
                <a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
                
            </div>
        </div>
    
        <a name="78928"></a>
        <div class="comment" id="comment-78928">
            <div id="post-78928-score" class="comment-score">1</div>
            <div class="comment-text"><p><a href="https://help.openstreetmap.org/users/158/scai"></a><a href="https://help.openstreetmap.org/users/158/scai">@Scai</a> thank you for the hint and the explanation, it did help. Once i changed the leaflet as per your instruction, it worked as a charm.</p>

<p>Additionally, outbound rule needed to be configured on the Linux machine where the tile's are hosted. </p>

<p>Thanks again for the help.</p></div>
            <div class="comment-info" id="comment-78928-info">
                
                
                
                

                

                <span class="comment-age">(18 Feb '21, 13:26)</span>
                <a class="comment-user userinfo" href="/users/19676/davorb0">DavorB0</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-78896" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-78896-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
        <form id="fmanswer" action="/questions/78896/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='FeH0I7mujEgzEbdYxitJZZHv5zxsNDiG' />
            <div style="clear:both">
            </div>

            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/78896/local-tile-server-is-not-showing-data-from-wan?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/78896/local-tile-server-is-not-showing-data-from-wan?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <p>This was the support site for <a href="http://www.openstreetmap.org/">OpenStreetMap</a>. It has now been replaced by <a href="https://community.openstreetmap.org/">community.osm.org</a>.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/osm/"
            class="tag-link-osm"
            title="see questions tagged'osm'using tags"
            rel="tag">osm</a> <span class="tag-number">&#215;710</span><br/>
        
        <a href="/tags/tiles/"
            class="tag-link-tiles"
            title="see questions tagged'tiles'using tags"
            rel="tag">tiles</a> <span class="tag-number">&#215;287</span><br/>
        
        <a href="/tags/leaflet/"
            class="tag-link-leaflet"
            title="see questions tagged'leaflet'using tags"
            rel="tag">leaflet</a> <span class="tag-number">&#215;74</span><br/>
        
        <a href="/tags/public/"
            class="tag-link-public"
            title="see questions tagged'public'using tags"
            rel="tag">public</a> <span class="tag-number">&#215;17</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Feb. 17, 2021, 1:03 p.m.">17 Feb '21, 13:03</strong>
    </p>
    <p> 
     	question was seen: <strong>1,524 times</strong>
    </p>
    <p> 
        last updated: <strong title="Feb. 18, 2021, 1:43 p.m.">18 Feb '21, 13:43</strong>
    </p>
</div>



<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/33317/osm-tiles-png-generation">OSM Tiles (png) generation</a>
        </p>
        
        <p>
            <a href="/questions/46003/leaflet-tiles-offline">leaflet tiles offline</a>
        </p>
        
        <p>
            <a href="/questions/30621/can-i-install-nominatim-and-switch2osm-tile-server-on-same-machine">Can i install nominatim and switch2osm tile server on same machine ?</a>
        </p>
        
        <p>
            <a href="/questions/31038/guide-me-how-to-getting-started-with-osm-offline-map">Guide me how to getting started with OSM Offline Map ?</a>
        </p>
        
        <p>
            <a href="/questions/36484/osm-map-loaded-onto-etrex20-sd-card-does-not-work">OSM map loaded onto etrex20 sd card does not work</a>
        </p>
        
        <p>
            <a href="/questions/44498/how-to-disable-draggingwhen-reach-top-or-bottom">how to disable dragging,when reach top or bottom</a>
        </p>
        
        <p>
            <a href="/questions/21801/tile-server-not-displaying-tiles">tile server not displaying tiles</a>
        </p>
        
        <p>
            <a href="/questions/26158/how-to-generate-list-of-tiles-from-bbox">How to generate list of tiles from bbox</a>
        </p>
        
        <p>
            <a href="/questions/30698/switch2osm-tile-server-insert-more-countries">Switch2osm tile server insert more countries</a>
        </p>
        
        <p>
            <a href="/questions/50921/how-to-show-openstreet-map-in-ios-programmatically">how to show openstreet map in ios programmatically</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            
            <div id="ground">
                
                    <p>NOTICE: <a href="https://community.openstreetmap.org/t/archiving-of-help-openstreetmap-org-1st-march-2024/108483">help.openstreetmap.org is no longer in use from 1st March 2024</a>. Please use the <a href="https://community.openstreetmap.org/">OpenStreetMap Community Forum</a></p>
                
            </div>
            
        
        

        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
