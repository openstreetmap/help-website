<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>How TCP handle small packets - Wireshark Q&amp;A</title>
        <meta name="description" content="How does TCP handle application&#39;s small packets? We are currently using an application which is generating small packets all the time. Data length are 98% at 50 Bytes for each packets. On the LAN, it&#39;s not too bad, 16 seconds for a single session. However for those remote users(through MPLS WAN), it..." />
        <meta name="keywords" content="performance,issue,mss,network,tcp" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/21491/how-tcp-handle-small-packets" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/21491/how-tcp-handle-small-packets?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='HvVqy07Cd3QYks81drM4fnVlzXz7vqEj' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/21491/how-tcp-handle-small-packets">How TCP handle small packets</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-21491-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/21491/up/" rel="nofollow"> </a>
<div id="post-21491-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-21491-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/21491/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/21491/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>How does TCP handle application's small packets? We are currently using an application which is generating small packets all the time. Data length are 98% at 50 Bytes for each packets. On the LAN, it's not too bad, 16 seconds for a single session. However for those remote users(through MPLS WAN), it takes 3 minutes to finish a single session.</p>
<p>I am just woundering what I can adjust to let the application get better performance.</p>
<p>So far I'v tried:
 1. Increased TCP windows size(later I found out it won't work for this case)
 2. Reduced MSS/MTU from 1460/1500 to 1340/1380(got better result, but still takes 90 seconds for a single session, should I try reduce further more? But I need a theory to support this idea)</p>
<p>Thank all</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/performance/" class="post-tag tag-link-performance"
                                        title="see questions tagged 'performance'" rel="tag">performance</a>
                                
                                    <a href="/tags/issue/" class="post-tag tag-link-issue"
                                        title="see questions tagged 'issue'" rel="tag">issue</a>
                                
                                    <a href="/tags/mss/" class="post-tag tag-link-mss"
                                        title="see questions tagged 'mss'" rel="tag">mss</a>
                                
                                    <a href="/tags/network/" class="post-tag tag-link-network"
                                        title="see questions tagged 'network'" rel="tag">network</a>
                                
                                    <a href="/tags/tcp/" class="post-tag tag-link-tcp"
                                        title="see questions tagged 'tcp'" rel="tag">tcp</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>27 May '13, 08:52</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/a670731fa3957adc81444c55aec03be1?s=32&amp;d=identicon&amp;r=g" alt="Lei's gravatar image" />
    <p><a href="/users/4919/lei">Lei</a><br/>
    <span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">&#9679;</span><span class="badgecount">2</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Lei has no accepted answers">0&#37;</span>
    </p>
</div>


                            </div>
                            




<div class="comments-container" id="comments-container-21491">
    
        <a name="21499"></a>
        <div class="comment" id="comment-21499">
            <div id="post-21499-score" class="comment-score"></div>
            <div class="comment-text"><p>what kind of application is this? Why is it sending so many small packets? Are those request/response cycles (queries to a database with a huge amount of single SELECT statements)?</p></div>
            <div class="comment-info" id="comment-21499-info">
                
                
                
                

                

                <span class="comment-age">(27 May '13, 14:06)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="21520"></a>
        <div class="comment" id="comment-21520">
            <div id="post-21520-score" class="comment-score"></div>
            <div class="comment-text"><p>It's an finance application. Spoke to the vendor, they seemed to be no clue on how their software designed.</p></div>
            <div class="comment-info" id="comment-21520-info">
                
                
                
                

                

                <span class="comment-age">(28 May '13, 07:18)</span>
                <a class="comment-user userinfo" href="/users/4919/lei">Lei</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-21491" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-21491-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    3 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/21491/how-tcp-handle-small-packets?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/21491/how-tcp-handle-small-packets?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/21491/how-tcp-handle-small-packets?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/21491/how-tcp-handle-small-packets?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="21494"></a>
                    <div id="answer-container-21494" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-21494-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/21494/up/" rel="nofollow"> </a>
<div id="post-21494-score" class="post-score"
    title="current number of votes">
    2
</div>
<a id="post-21494-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/21494/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Without looking at the pcap file it is hard to give a thorough advice. But most likely you are bit by the amount of application turns and/or the nagle-delayed-ack problem.</p>
<p>Since the LAN users are doing fine and the WAN users are not, I suspect it is the amount of application turns that is killing you over the higher-latency WAN. Is your protocol written in a way where each piece of data that is sent is acknowledged at the application level? And there are a lot of pieces of data that need to be exchanged, then this is the problem. Every acknowledgement will cost you a RTT. </p>
<p>A rough estimate: Considering a 16 seconds session on the LAN, this could be caused by 8000 application turns with 2 ms RTT. If on the WAN, the RTT is 25 ms, then you will see 8000 x 25 ms = 200 seconds for the same session.</p>
<p>TCP works best when data is being streamed instead of being sent one chunk at the time. If this is a database application, then you will rather send a whole table in one go, then send the table row by row or even cell by cell.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/21494/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>27 May '13, 09:17</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7901a94d8fdd1f9f47cda9a32fcfa177?s=32&amp;d=identicon&amp;r=g" alt="SYN-bit's gravatar image" />
    <p><a href="/users/5/syn-bit">SYN-bit ♦♦</a><br/>
    <span class="score" title="17094 reputation points"><span class="">17.1k</span></span><span title="9 badges"><span class="badge1">&#9679;</span><span class="badgecount">9</span></span><span title="57 badges"><span class="silver">&#9679;</span><span class="badgecount">57</span></span><span title="245 badges"><span class="bronze">&#9679;</span><span class="badgecount">245</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="SYN-bit has 174 accepted answers">20&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-21494">
    
        <a name="21495"></a>
        <div class="comment" id="comment-21495">
            <div id="post-21495-score" class="comment-score"></div>
            <div class="comment-text"><p>"then send the table row by row" is probably a typo, right? I guess you mean "than", or better "in one go instead of sending...". Not trying to be a wiseguy, just seeing there may be confusion on the other end ;-)</p></div>
            <div class="comment-info" id="comment-21495-info">
                
                
                
                

                

                <span class="comment-age">(27 May '13, 09:21)</span>
                <a class="comment-user userinfo" href="/users/145/jasper">Jasper ♦♦</a>
                
            </div>
        </div>
    
        <a name="21496"></a>
        <div class="comment" id="comment-21496">
            <div id="post-21496-score" class="comment-score"></div>
            <div class="comment-text"><p>Thank you both of you,</p>

<p>Jasper,
The latency on the WAN is around 20MS, witch is very high. Vendor just changed recently, from L2 MPLS to L3 MPLS. Before we are running on a LAN extension, now we are on Pseudo Wire, by any chance you know that LAN extension(pure L2) has lower latency then Pseudo Wire(L2 on a L3 technology)?</p>

<p>SYN-bit,</p>

<p>Since the pcap is caught on the real life, which is with high privacy, I cannot load it, sorry for that. But I see exactly what you said. It is an application that keep exchanging the data, on the LAN, 8000 packets back and forth in one seconds, on the WAN, 370 packets back and forth in one seconds. Is that means nothing we can do?</p>

<p>Thanks</p>

<p>Lei</p></div>
            <div class="comment-info" id="comment-21496-info">
                
                
                
                

                

                <span class="comment-age">(27 May '13, 09:34)</span>
                <a class="comment-user userinfo" href="/users/4919/lei">Lei</a>
                
            </div>
        </div>
    
        <a name="21497"></a>
        <div class="comment" id="comment-21497">
            <div id="post-21497-score" class="comment-score"></div>
            <div class="comment-text"><p>Thanks for the correction Jasper. Yes, I meant to say "than" :-)</p></div>
            <div class="comment-info" id="comment-21497-info">
                
                
                
                

                

                <span class="comment-age">(27 May '13, 09:36)</span>
                <a class="comment-user userinfo" href="/users/5/syn-bit">SYN-bit ♦♦</a>
                
            </div>
        </div>
    
        <a name="21498"></a>
        <div class="comment" id="comment-21498">
            <div id="post-21498-score" class="comment-score"></div>
            <div class="comment-text"><p>Please use "add a comment" to the answer you want to respond to, that is the way this site works best (see the FAQ).</p>

<p>I converted the answer to a comment to my answer, to continue the discussion on the application turns, which I believe is the culprit as latency over a WAN is usually something you don't have control over.</p>

<p>There is one thing you can do. Talk to the application developers and tell them to test their software over a WAN (simulator) before deploying it live. They can optimize their code to not do so many application turns and so reduce the effect of a higher latency network connection.</p></div>
            <div class="comment-info" id="comment-21498-info">
                
                
                
                

                

                <span class="comment-age">(27 May '13, 09:39)</span>
                <a class="comment-user userinfo" href="/users/5/syn-bit">SYN-bit ♦♦</a>
                
            </div>
        </div>
    
        <a name="21570"></a>
        <div class="comment" id="comment-21570">
            <div id="post-21570-score" class="comment-score"></div>
            <div class="comment-text"><p>IMHO the steps forward would be:</p>

<p>1) Analyze the traces thoroughly to pinpoint the cause of the delay (without speculation as we have done till now :-)) If it is indeed application turns, then follow with the next steps:</p>

<p>2) Try to convince the vendor to rewrite their software, but that will be tricky.</p>

<p>3) If you can't reduce the latency, which you normally can't. You can let remote users use a remote desktop session on your central location to use the application as the application is not written for WAN (high latency) access.</p></div>
            <div class="comment-info" id="comment-21570-info">
                
                
                
                

                

                <span class="comment-age">(29 May '13, 09:18)</span>
                <a class="comment-user userinfo" href="/users/5/syn-bit">SYN-bit ♦♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-21494" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-21494-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="21492"></a>
                    <div id="answer-container-21492" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-21492-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/21492/up/" rel="nofollow"> </a>
<div id="post-21492-score" class="post-score"
    title="current number of votes">
    1
</div>
<a id="post-21492-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/21492/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>My guess is that the accumulated latency is killing you, because small packets have to run back and forth all the time, which makes the round trip time a rather large factor.</p>
<ol>
<li>increasing or decreasing the Window size will not really help with latency</li>
<li>MTU reduction does not really help with latency</li>
</ol>
<p>What you need is to reduce the latency, which means that you need to find a way to get lower round trip times. That is hard to achieve; sometimes you can remove slow devices that forward packets with some millisecond delay by ones that can do it in microseconds. Remove slow proxies, reverse proxies, load balancers etc - best would be to only have routers and switches with microsecond latencies, but even then the distance delay can be a problem. I had customers move database servers back to the same switch where the application server was for exactly this reason: low latency.</p>
<p>Check your latency in the LAN, and you'll probably see RTT below 1ms. Check the same for the WAN, and it is probably a two digit number of ms.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/21492/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>27 May '13, 09:00</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/c578ba2967741f25aebd6afef702f432?s=32&amp;d=identicon&amp;r=g" alt="Jasper's gravatar image" />
    <p><a href="/users/145/jasper">Jasper ♦♦</a><br/>
    <span class="score" title="23806 reputation points"><span class="">23.8k</span></span><span title="5 badges"><span class="badge1">&#9679;</span><span class="badgecount">5</span></span><span title="51 badges"><span class="silver">&#9679;</span><span class="badgecount">51</span></span><span title="284 badges"><span class="bronze">&#9679;</span><span class="badgecount">284</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Jasper has 263 accepted answers">18&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-21492">
    
</div>
<div id="comment-tools-21492" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-21492-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="21522"></a>
                    <div id="answer-container-21522" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-21522-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/21522/up/" rel="nofollow"> </a>
<div id="post-21522-score" class="post-score"
    title="current number of votes">
    1
</div>
<a id="post-21522-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/21522/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <blockquote>
<p>It's an finance application.</p>
</blockquote>
<p>can you post the name here? </p>
<blockquote>
<p>Spoke to the vendor, they seemed to be no clue on how their software designed.</p>
</blockquote>
<p>well... that's absolutely normal today. Some of those 'coding experts' use huge code libraries without thinking or knowing about the internals of those code beasts and definitely without knowing and thinking about the network behavior of their software. The usual test works like this: The developer runs a copy of the web server (or server software) on his laptop. If he/she is able to connect to localhost, the software works in his/her eyes. 'Sometimes' there are tests over the local developer Gigabit LAN (client on laptop 1, server on laptop 2). There are almost no tests at all over any WAN connection.</p>
<p>So, your only chance is to search for the product name and 'network problems' on google. If you are lucky, others have found (hidden) options of the software to run it faster on a WAN connection. If your are out of luck, the software will never run fast enough on a WAN connection, due to design errors. The only option then is to use an even faster connection (smaller RTT), or to run a clone of the server system locally (however that is done with that product).</p>
<p>Maybe it is also possible to tweak the TCP/IP stack of the server/client, depending on some conditions (as <a href="/users/5/syn-bit"><a href="/users/5/syn-bit">@SYN-bit</a></a> mentioned - Nagle algorithm together with Delayed ACK). But for any advice in that direction, we would need the capture file, at least up to the TCP header (including flags). You don't have to post any sensitive data, just the communication up to the TCP layer. If you like, you can obfuscate the IP addresses as well, then it's impossible to extract any data from the capture file.</p>
<p>See the following artice of <a href="/users/145/jasper"><a href="/users/145/jasper">@Jasper</a></a>: <a href="http://sharkfest.wireshark.org/sharkfest.11/presentations/A-11_Bongertz-Trace_File_Anonymization.pdf">http://sharkfest.wireshark.org/sharkfest.11/presentations/A-11_Bongertz-Trace_File_Anonymization.pdf</a></p>
<p>Regards<br>
Kurt</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/21522/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>28 May '13, 07:35</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" alt="Kurt%20Knochner's gravatar image" />
    <p><a href="/users/2593/kurt-knochner">Kurt Knochner ♦</a><br/>
    <span class="score" title="24767 reputation points"><span class="">24.8k</span></span><span title="10 badges"><span class="badge1">&#9679;</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">&#9679;</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">&#9679;</span><span class="badgecount">237</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Kurt Knochner has 344 accepted answers">15&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/21522/">
                edited
                <strong>28 May '13, 07:45</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-21522">
    
        <a name="21525"></a>
        <div class="comment" id="comment-21525">
            <div id="post-21525-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi Kurt,</p>

<p>Thanks for the help. How can I load the capture without data part? I am not worry about the IP address, but don't know how to load it here without the data in each packet.</p></div>
            <div class="comment-info" id="comment-21525-info">
                
                
                
                

                

                <span class="comment-age">(28 May '13, 09:11)</span>
                <a class="comment-user userinfo" href="/users/4919/lei">Lei</a>
                
            </div>
        </div>
    
        <a name="21537"></a>
        <div class="comment" id="comment-21537">
            <div id="post-21537-score" class="comment-score"></div>
            <div class="comment-text"><p>You need to strip off the payload. You can do it with editcap.</p>

<blockquote>
<p><code>editcap -s 54 original.pcap truncated.pcap</code><br>
</p>
</blockquote>

<p>Then post <code>truncated.pcap</code> somewhere, i.e. google docs, dropbox, etc. Please check first if the payload was removed (with Wireshark)!!</p></div>
            <div class="comment-info" id="comment-21537-info">
                
                
                
                

                

                <span class="comment-age">(28 May '13, 12:41)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="21561"></a>
        <div class="comment" id="comment-21561">
            <div id="post-21561-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi Kurt, the application is Razor's Edge.</p></div>
            <div class="comment-info" id="comment-21561-info">
                
                
                
                

                

                <span class="comment-age">(29 May '13, 07:01)</span>
                <a class="comment-user userinfo" href="/users/4919/lei">Lei</a>
                
            </div>
        </div>
    
        <a name="21564"></a>
        <div class="comment" id="comment-21564">
            <div id="post-21564-score" class="comment-score"></div>
            <div class="comment-text"><p>I'm sorry, but I can't find any information about that application. Who is the vendor (link to their website)?</p></div>
            <div class="comment-info" id="comment-21564-info">
                
                
                
                

                

                <span class="comment-age">(29 May '13, 07:36)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="21566"></a>
        <div class="comment" id="comment-21566">
            <div id="post-21566-score" class="comment-score"></div>
            <div class="comment-text"><p>Is this <strong>The Raiser's Edge</strong>?</p>

<blockquote>
<p><code><a href="https://www.blackbaud.com/fundraising-crm/raisers-edge-donor-management">https://www.blackbaud.com/fundraising-crm/raisers-edge-donor-management</a></code></p>
</blockquote></div>
            <div class="comment-info" id="comment-21566-info">
                
                
                
                

                

                <span class="comment-age">(29 May '13, 08:28)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="21647"></a>
        <div class="comment not_top_scorer" id="comment-21647">
            <div id="post-21647-score" class="comment-score"></div>
            <div class="comment-text"><p>any update?</p></div>
            <div class="comment-info" id="comment-21647-info">
                
                
                
                

                

                <span class="comment-age">(31 May '13, 03:09)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-21522" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 6
        </span>
        <a href="#" class="show-all-comments-link">show 1 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-21522-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/21491/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='HvVqy07Cd3QYks81drM4fnVlzXz7vqEj' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/21491/how-tcp-handle-small-packets?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/21491/how-tcp-handle-small-packets?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/tcp/"
            class="tag-link-tcp"
            title="see questions tagged'tcp'using tags"
            rel="tag">tcp</a> <span class="tag-number">&#215;752</span><br/>
        
        <a href="/tags/network/"
            class="tag-link-network"
            title="see questions tagged'network'using tags"
            rel="tag">network</a> <span class="tag-number">&#215;146</span><br/>
        
        <a href="/tags/performance/"
            class="tag-link-performance"
            title="see questions tagged'performance'using tags"
            rel="tag">performance</a> <span class="tag-number">&#215;55</span><br/>
        
        <a href="/tags/mss/"
            class="tag-link-mss"
            title="see questions tagged'mss'using tags"
            rel="tag">mss</a> <span class="tag-number">&#215;23</span><br/>
        
        <a href="/tags/issue/"
            class="tag-link-issue"
            title="see questions tagged'issue'using tags"
            rel="tag">issue</a> <span class="tag-number">&#215;10</span><br/>
        
    </p>
    <p>
        question asked: <strong title="May 27, 2013, 8:52 a.m.">27 May '13, 08:52</strong>
    </p>
    <p> 
     	question was seen: <strong>6,491 times</strong>
    </p>
    <p> 
        last updated: <strong title="May 31, 2013, 3:09 a.m.">31 May '13, 03:09</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/63683/tcp-mss-in-uplink-and-downlink-speed">TCP MSS in uplink and downlink speed</a>
        </p>
        
        <p>
            <a href="/questions/24316/tcp-window-size">TCP window Size</a>
        </p>
        
        <p>
            <a href="/questions/56730/how-to-find-the-latency-of-rtps-real-time-publish-subscribe-in-wireshark">How to find the latency of RTPS (Real Time Publish-Subscribe) in Wireshark</a>
        </p>
        
        <p>
            <a href="/questions/4932/not-honoring-own-mss">Not honoring own MSS?</a>
        </p>
        
        <p>
            <a href="/questions/7763/network-issue-about-fsk-ack">[closed] network issue about fsk ack</a>
        </p>
        
        <p>
            <a href="/questions/27648/how-can-i-get-congestion-window-from-traces">how can i get congestion window from traces</a>
        </p>
        
        <p>
            <a href="/questions/16052/why-data-transfer-gets-capped-around-37k">Why data transfer gets capped around 37k?</a>
        </p>
        
        <p>
            <a href="/questions/22558/finding-the-sequence-of-closing-tcp-connection">Finding the sequence of closing TCP connection</a>
        </p>
        
        <p>
            <a href="/questions/25678/asymmetric-tcp-performance-between-data-centers">Asymmetric TCP performance between data centers</a>
        </p>
        
        <p>
            <a href="/questions/28241/flooded-network-due-to-tcp-retransmission-localinfosrvr-hp-pdl-datastr-syn-packets">Flooded network due to [TCP Retransmission] localinfosrvr &gt; hp-pdl-datastr [SYN] packets</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
