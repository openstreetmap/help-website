<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Analyzing slow file transfers - Wireshark Q&amp;A</title>
        <meta name="description" content="I have a S2S VPN connection between 2 sites on different continents. I used to get excellent transfer rates until about a week ago when it all started spiking all over the place. I&#39;m rather new to Wireshark so please bare with me. I understand the meaning of the Retransmissions but what I dont get i..." />
        <meta name="keywords" content="continuation,smb2,retransmissions" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/48488/analyzing-slow-file-transfers" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/48488/analyzing-slow-file-transfers?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='KacwYBAso9Hf4lx0f5vIiZHKBeEzr9Oi' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/48488/analyzing-slow-file-transfers">Analyzing slow file transfers</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-48488-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/48488/up/" rel="nofollow"> </a>
<div id="post-48488-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-48488-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/48488/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/48488/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>I have a S2S VPN connection between 2 sites on different continents.
I used to get excellent transfer rates until about a week ago when it all started spiking all over the place.</p>
<p>I'm rather new to Wireshark so please bare with me.</p>
<p>I understand the meaning of the Retransmissions but what I dont get is when it retransmits in "Continuation to #679" about a million times. Also what does it say when all the ACKs are in this context "Continuation to #679"?</p>
<p>pcap attached, thanks
<a href="https://www.dropbox.com/s/njm72lks6p2xvo0/smb1.pcapng?dl=0">https://www.dropbox.com/s/njm72lks6p2xvo0/smb1.pcapng?dl=0</a></p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/continuation/" class="post-tag tag-link-continuation"
                                        title="see questions tagged 'continuation'" rel="tag">continuation</a>
                                
                                    <a href="/tags/smb2/" class="post-tag tag-link-smb2"
                                        title="see questions tagged 'smb2'" rel="tag">smb2</a>
                                
                                    <a href="/tags/retransmissions/" class="post-tag tag-link-retransmissions"
                                        title="see questions tagged 'retransmissions'" rel="tag">retransmissions</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>13 Dec '15, 07:06</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/764f1cef4862ffac48685215afef4d71?s=32&amp;d=identicon&amp;r=g" alt="xcalibur's gravatar image" />
    <p><a href="/users/21763/xcalibur">xcalibur</a><br/>
    <span class="score" title="6 reputation points">6</span><span title="2 badges"><span class="badge1">&#9679;</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">&#9679;</span><span class="badgecount">2</span></span><span title="3 badges"><span class="bronze">&#9679;</span><span class="badgecount">3</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="xcalibur has no accepted answers">0&#37;</span>
    </p>
</div>


                            </div>
                            




<div class="comments-container" id="comments-container-48488">
    
</div>
<div id="comment-tools-48488" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-48488-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    2 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/48488/analyzing-slow-file-transfers?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/48488/analyzing-slow-file-transfers?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/48488/analyzing-slow-file-transfers?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/48488/analyzing-slow-file-transfers?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="48506"></a>
                    <div id="answer-container-48506" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-48506-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/48506/up/" rel="nofollow"> </a>
<div id="post-48506-score" class="post-score"
    title="current number of votes">
    2
</div>
<a id="post-48506-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/48506/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>The <em>'poor'</em> performance is caused by packet loss. </p>
<p>The Bandwidth Delay Product BDP determines how fast your SMB write can be.<br>
The RTT is around 131 ms and the bandwidth seems to be limited to 48Mbps so you will be able to transmit at full speed when you have an open window of a 780000 bytes.
<img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/Selection_315.png">
Assuming the Window-Scaling factor from the SMB Server was 64 it can be seen that it is not the window_size offered by the receiver that is slowing you down but the congestion window at the sender caused by packet loss and required re-transmissions.</p>
<p>In the graph below you can see the number of bytes_in_flight dropping after SACKs were received indicating a GAP was detected at the receiver.<br>
<img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/Selection_326.png"></p>
<p>So - as Sindy pointed out - a 0% packet loss rate in pings doesn't really tell much about the packet loss on your TCP session.  When this all started to get slow a week ago, something in your network must have changed </p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/48506/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>14 Dec '15, 04:30</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/5500bd1decb766660522dfb347eedc49?s=32&amp;d=identicon&amp;r=g" alt="mrEEde's gravatar image" />
    <p><a href="/users/4668/mreede">mrEEde</a><br/>
    <span class="score" title="3892 reputation points"><span class="">3.9k</span></span><span title="15 badges"><span class="badge1">&#9679;</span><span class="badgecount">15</span></span><span title="22 badges"><span class="silver">&#9679;</span><span class="badgecount">22</span></span><span title="70 badges"><span class="bronze">&#9679;</span><span class="badgecount">70</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="mrEEde has 48 accepted answers">20&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/48506/">
                edited
                <strong>16 Dec '15, 07:37</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-48506">
    
        <a name="48573"></a>
        <div class="comment" id="comment-48573">
            <div id="post-48573-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/4668/mreede">@mrEEde</a></p>

<p>Any chance of expanding the image of your second graph to show all the graph setup fields as this is an interesting setup?</p></div>
            <div class="comment-info" id="comment-48573-info">
                
                
                
                

                

                <span class="comment-age">(16 Dec '15, 06:38)</span>
                <a class="comment-user userinfo" href="/users/1225/grahamb">grahamb ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-48506" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-48506-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="48494"></a>
                    <div id="answer-container-48494" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-48494-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/48494/up/" rel="nofollow"> </a>
<div id="post-48494-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-48494-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/48494/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Not sure I understand exactly what you mean by "Continuation to #679", because I cannot see anything like that in your capture. Can you give the order number (the leftmost column of the packet list pane) of a frame (packet) in the capture where you can see this "Continuation to #679"?</p>
<p>But leaving that aside, I'd say that the root cause of your transmission slowdown is very simple: high packet loss causes frequent need for retransmissions, and the path delay causes the negotiation of these retransmissions to slow down the resulting transmission speed (because it takes long for the sender to learn that a retransmission is necessary). As the path delay is really high at an inter-continental link, the resulting slowdown is really high too.</p>
<p>Now why you can see "a million times the same ack number" is because Wireshark's tcp analysis and default coloring rules take care only about ack numbers and ignore the SACK values. So if you take a closer look at those packets with the same ack number (which is the reason why Wireshark marks the packet with black background and "Dup ACK" text), you'll see that while their ack number stands still, indicating to the sender the position in the session data after which the loss began, the SLE and SRE values keep changing, telling the sender which parts of the session data after the lost part(s) have been received, i.e. that those data need not be retransmitted.</p>
<p>See more about how SACK works in <a href="http://packetlife.net/blog/2010/jun/17/tcp-selective-acknowledgments-sack/">this illustrative blog post</a>.</p>
<p>Another point is that the calculation of relative seq numbers is not synchronised between the two directions of the session because the tcp session establishment is missing in the capture. So to be able to match seq and ack between directions properly, you have to switch over to absolute seq values, which are far less comfortable to read but the only real ones.</p>
<p>When you do so, you can see that:
the last packet which has been delivered successfully is in frame 864, with relative (to the beginning of the capture) time 7.05 seconds. The one which has been lost follows it almost immediately, in 18 μs. Now the first packet informing about the loss (in frame 1299) has arrived some 160 ms later. So the missing packet is retransmitted in frame 1305 (relative time 7.217205), but it takes until relative time 7.350896 (i.e., another about 130 ms) that its reception is confirmed. In the meantime you can therefore observe those "million acks" coming at a rate of several packets per millisecond. But it is still not the end of the story because even the packet confirming reception of the one in frame 1305 contains SLE and SRE, meaning that the receiving side still has gaps in what has been received.</p>
<p>When you apply a display filter <code>tcp.stream == 1 and tcp.analysis.duplicate_ack</code> and scroll through the packet list pane, you'll find that there were several events like that during that session, each contributing at least 150 ms (but often more) to the operation completion time.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/48494/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>13 Dec '15, 10:53</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/00fc6e2633725bd871ff636f0175eabc?s=32&amp;d=identicon&amp;r=g" alt="sindy's gravatar image" />
    <p><a href="/users/19586/sindy">sindy</a><br/>
    <span class="score" title="6049 reputation points"><span class="">6.0k</span></span><span title="4 badges"><span class="badge1">&#9679;</span><span class="badgecount">4</span></span><span title="8 badges"><span class="silver">&#9679;</span><span class="badgecount">8</span></span><span title="51 badges"><span class="bronze">&#9679;</span><span class="badgecount">51</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="sindy has 110 accepted answers">24&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-48494">
    
        <a name="48495"></a>
        <div class="comment" id="comment-48495">
            <div id="post-48495-score" class="comment-score"></div>
            <div class="comment-text"><p>Thanks for the educated reply!</p>

<p>Here's a sample of the "Continuation" I had mentioned earlier:
<img alt="alt text" src="http://i.imgur.com/69r2YpD.png"></p>

<p>Latency is the first thing I thought about.
I get a very constant 130ms connection but it's VERY steady.
Out of 3827 packets transmitted I got 0%(!) packet loss.
How does this make any sense?</p></div>
            <div class="comment-info" id="comment-48495-info">
                
                
                
                

                

                <span class="comment-age">(13 Dec '15, 13:17)</span>
                <a class="comment-user userinfo" href="/users/21763/xcalibur">xcalibur</a>
                
            </div>
        </div>
    
        <a name="48496"></a>
        <div class="comment" id="comment-48496">
            <div id="post-48496-score" class="comment-score"></div>
            <div class="comment-text"><p>OK, as for the [Continuation to #xxx], let's agree that you are probably using a different version of Wireshark than me, because for the same packet, my Info column in the packet list doesn't show that.</p>

<p>As for your "VERY steady" connection - are you saying that you were sending pings for more than an hour, one per second, and none got lost? If yes, please think about the packet rate and the amount of the data:</p>

<ul>
<li>
<p>1 packet per second may pass through, but for hundreds of packets per second (as seen in the capture), the probability of loss of one of them multiplies accordingly.</p>
</li>
<li>
<p>the size of the packet matters as well, as longer packets have higher probability of being hit by a bit error and thus invalidated. Normally about 60 bytes are used for pinging, and about 1400 bytes for tcp transmission of large amounts of data.</p>
</li>
<li>
<p>the last but not least thing to think about is that if there is a traffic shaper somewhere along the path, your flow may have bumped into the limit - which causes the excess packets to be dropped. The "dup ack" events often (not always) start to come at multiples of 7 seconds - which, with fairly constant packet rate and size, may translate into reaching some threshold of amount of data sent per unit of time.</p>
</li>
</ul>

<p>Your trace illustrates more than clearly that the packet loss happens. If you need a stronger proof, take the capture simultaneously at both ends, and compare the two captures.</p>

<p>The latency would be harmless without the packet loss.</p></div>
            <div class="comment-info" id="comment-48496-info">
                
                
                
                

                

                <span class="comment-age">(13 Dec '15, 13:59)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="48498"></a>
        <div class="comment" id="comment-48498">
            <div id="post-48498-score" class="comment-score"></div>
            <div class="comment-text"><p>Not every second.
It's "ping -A" in Linux. It's much faster.</p>

<p>--- 10.11.11.222 ping statistics ---
10000 packets transmitted, 9996 received, 0% packet loss, time 1310345ms
rtt min/avg/max/mdev = 130.643/130.917/145.566/0.404 ms, pipe 2, ipg/ewma 131.04                    7/130.884 ms</p>

<p>But I suppose those packets are indeed small as you claim.
How big would you recommend me to send them?</p>

<p>Appreciate the help!</p></div>
            <div class="comment-info" id="comment-48498-info">
                
                
                
                

                

                <span class="comment-age">(13 Dec '15, 15:04)</span>
                <a class="comment-user userinfo" href="/users/21763/xcalibur">xcalibur</a>
                
            </div>
        </div>
    
        <a name="48503"></a>
        <div class="comment" id="comment-48503">
            <div id="post-48503-score" class="comment-score"></div>
            <div class="comment-text"><blockquote>
<p>ping statistics --- 10000 packets transmitted, 9996 received, 0% packet loss</p>
</blockquote>

<p>should have drawn your attention to the fact that the linux ping cannot handle fractions of percent, so any loss ratio below 0.5 % (or 0.1 % at best) is displayed as zero. I assume you've limited the number of packets beforehand using -c (because otherwise you are a cyborg to hit ^C exactly after 10000 packets sent), so the ping had its time to wait for responses to the last requests sent, and still 4 pings have not been responded.</p>

<p>So bearing this in mind,</p>

<blockquote>
<p>Out of 3827 packets transmitted I got 0%(!) packet loss.</p>
</blockquote>

<p>doesn't say more than "Out of 3827 packets transmitted, not more than 19 packets got lost" without the "3827 transmitted, 3827 received".</p>

<p>To simulate the channel load coming from the tcp transmission using ping, you would need to use both</p>

<ul>
<li>
<p><code>-s 1460</code> to set the packet size equal to that of a tcp packet in continuous stream and</p>
</li>
<li>
<p><code>-i 0.0003</code> to simulate the packet rate of the tcp session excluding the retransmitted packets (258115 packets in 90 seconds). You must be root to be able to set such a short inter-packet interval, and still your kernel may not be able to send the ping packets nearly that fast. Use Wireshark or common sense (before using -c 258115, use <code>-c 2581</code> and see whether the job gets done in less than a second) to check that.</p>
</li>
</ul>

<p>Or simply stop playing with ping and start believing what Wireshark is telling you :-)</p></div>
            <div class="comment-info" id="comment-48503-info">
                
                
                
                

                

                <span class="comment-age">(14 Dec '15, 02:01)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-48494" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-48494-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/48488/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='KacwYBAso9Hf4lx0f5vIiZHKBeEzr9Oi' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/48488/analyzing-slow-file-transfers?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/48488/analyzing-slow-file-transfers?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/retransmissions/"
            class="tag-link-retransmissions"
            title="see questions tagged'retransmissions'using tags"
            rel="tag">retransmissions</a> <span class="tag-number">&#215;104</span><br/>
        
        <a href="/tags/smb2/"
            class="tag-link-smb2"
            title="see questions tagged'smb2'using tags"
            rel="tag">smb2</a> <span class="tag-number">&#215;27</span><br/>
        
        <a href="/tags/continuation/"
            class="tag-link-continuation"
            title="see questions tagged'continuation'using tags"
            rel="tag">continuation</a> <span class="tag-number">&#215;11</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Dec. 13, 2015, 7:06 a.m.">13 Dec '15, 07:06</strong>
    </p>
    <p> 
     	question was seen: <strong>6,674 times</strong>
    </p>
    <p> 
        last updated: <strong title="Dec. 16, 2015, 7:37 a.m.">16 Dec '15, 07:37</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/354/suspected-retransmissions">Suspected Retransmissions</a>
        </p>
        
        <p>
            <a href="/questions/17420/losing-packets">Losing Packets??</a>
        </p>
        
        <p>
            <a href="/questions/25557/can-re-transmissions-from-a-single-ip-identify-the-source-of-a-problem">Can re-transmissions from a single ip identify the source of a problem?</a>
        </p>
        
        <p>
            <a href="/questions/35277/too-many-tcp-retransmissions">Too many tcp retransmissions</a>
        </p>
        
        <p>
            <a href="/questions/43460/tcp-retransmission">TCP Retransmission</a>
        </p>
        
        <p>
            <a href="/questions/50170/tcp-dups-on-virtually-every-ssl-package-but-not-on-regular-tcp-where-to-look">TCP DUPs on virtually every SSL package, but not on regular TCP. Where to look?</a>
        </p>
        
        <p>
            <a href="/questions/59906/tcp-retransmission-issue-2">TCP Retransmission Issue (2)</a>
        </p>
        
        <p>
            <a href="/questions/62035/ssl-continuation-data">ssl continuation data?</a>
        </p>
        
        <p>
            <a href="/questions/48423/smb2-and-http-objects-extractions-with-tshark">SMB2 and HTTP objects extractions with Tshark</a>
        </p>
        
        <p>
            <a href="/questions/562/lots-of-retransmissions-and-out-of-order-frames">Lots of retransmissions and out of order frames</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
