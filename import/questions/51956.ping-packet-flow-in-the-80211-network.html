<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>ping packet flow in the 802.11 network - Wireshark Q&amp;A</title>
        <meta name="description" content="We are trying to capture the 802.11 ping packet flow over the air between 2 STAs connected to the same AP. steps: connect STA1 to AP ---&amp;gt; connection successful and gets the IP address 192.168.1.252, MAC address: 18:FF:0F:11:64:46 connect STA2 to AP ----&amp;gt; connection successful and gets the IP a..." />
        <meta name="keywords" content="ping,flow,packet" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/51956/ping-packet-flow-in-the-80211-network" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/51956/ping-packet-flow-in-the-80211-network?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='4MbCjLsVlcK0wA2DImdDgMIoNWqcGFUG' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/51956/ping-packet-flow-in-the-80211-network">ping packet flow in the 802.11 network</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-51956-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/51956/up/" rel="nofollow"> </a>
<div id="post-51956-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-51956-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/51956/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/51956/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>We are trying to capture the 802.11 ping packet flow over the air between 2 STAs connected to the same AP.</p>
<p>steps:</p>
<p>connect STA1 to AP ---&gt; connection successful and gets the IP address 192.168.1.252, MAC address: 18:FF:0F:11:64:46<br>
connect STA2 to AP ----&gt; connection successful and gets the IP address 192.168.1.230  MAC address: 18:FF:0F:11:45:22<br>
use the "ping -c 1 192.168.1.230 on STA1 ( from STA 1 to STA2)</p>
<p>We could observe that ping command is successful on the STA1 with 0% packet loss.</p>
<p>We expected packet flow based on the <a href="https://wiki.wireshark.org/Wi-Fi">https://wiki.wireshark.org/Wi-Fi</a></p>
<p>for ICMP echo request:<br>
1) ICMP request from STA1 to AP<br>
2) ACK from AP to STA1<br>
3) AP sending the ICMP packet to STA2<br>
4) STA2 sending the response to AP<br>
</p>
<p>for ICMP echo response:<br>
5) STA2 sending the response to AP<br>
6) AP sending the ACK to STA2<br>
7) AP sending the ICMP reply packet to STA1<br>
8) STA1 sending the ACK to AP<br>
</p>
<p>But from the packet capture file(ping_packet_flow.png 194 -210 ), we observed:</p>
<p>ICMP request is going from STA1 to STA2<br>
ICMP reply from STA2 to STA1 via AP</p>
<p>We are not able to the intermediate packets as mentioned in steps 2,3,4 and 6,7,8.</p>
<p>Is this expected flow or we are missing some Wireshark configuration to capture the intermediate packets. Wireshark packets are attached for reference</p>
<p>Please do let me know</p>
<p>Note:
1. AP configuration: 2.4Ghz, channel 6, open security, shield room with no interference
alt text</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/ping/" class="post-tag tag-link-ping"
                                        title="see questions tagged 'ping'" rel="tag">ping</a>
                                
                                    <a href="/tags/flow/" class="post-tag tag-link-flow"
                                        title="see questions tagged 'flow'" rel="tag">flow</a>
                                
                                    <a href="/tags/packet/" class="post-tag tag-link-packet"
                                        title="see questions tagged 'packet'" rel="tag">packet</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>26 Apr '16, 04:06</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/736c2561295a20843009b8c9a7fc210a?s=32&amp;d=identicon&amp;r=g" alt="rajeshrao's gravatar image" />
    <p><a href="/users/23990/rajeshrao">rajeshrao</a><br/>
    <span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">&#9679;</span><span class="badgecount">2</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="rajeshrao has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/51956/">
                edited
                <strong>26 Apr '16, 08:46</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/00fc6e2633725bd871ff636f0175eabc?s=32&amp;d=identicon&amp;r=g" alt="sindy's gravatar image" />
            <p><a href="/users/19586/sindy">sindy</a><br/>
            <span class="score" title="6049 reputation points"><span class="">6.0k</span></span><span title="4 badges"><span class="badge1">&#9679;</span><span class="badgecount">4</span></span><span title="8 badges"><span class="silver">&#9679;</span><span class="badgecount">8</span></span><span title="51 badges"><span class="bronze">&#9679;</span><span class="badgecount">51</span></span></p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-51956">
    
        <a name="51966"></a>
        <div class="comment" id="comment-51966">
            <div id="post-51966-score" class="comment-score"></div>
            <div class="comment-text"><p>Please publish the capture, login-free, somewhere like at Cloudshark (preferred at this site), Google drive, MS One drive, Dropbox, ... and edit your Question with a link to it. Screenshots are almost useless for any analysis.</p></div>
            <div class="comment-info" id="comment-51966-info">
                
                
                
                

                

                <span class="comment-age">(26 Apr '16, 08:50)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="51980"></a>
        <div class="comment" id="comment-51980">
            <div id="post-51980-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi Sindy,</p>

<p>thanks for the response. i have uploaded the wire shark packets to cloudshark. link is <a href="https://www.cloudshark.org/captures/85182b2c8b43">https://www.cloudshark.org/captures/85182b2c8b43</a></p>

<p>thanks
Rajesh</p></div>
            <div class="comment-info" id="comment-51980-info">
                
                
                
                

                

                <span class="comment-age">(26 Apr '16, 22:58)</span>
                <a class="comment-user userinfo" href="/users/23990/rajeshrao">rajeshrao</a>
                
            </div>
        </div>
    
        <a name="51982"></a>
        <div class="comment" id="comment-51982">
            <div id="post-51982-score" class="comment-score">1</div>
            <div class="comment-text"><p>To follow your list:</p>

<p>1) ICMP request from STA1 to AP - frame #194 (IP addresses are the topmost ones)<br>
2) ACK from AP to STA1 - frame #195 (only MAC address of STA1 is present, correct)<br>
3) AP sending the ICMP packet to STA2 - not seen in the capture<br>
4) STA2 sending the response to AP - not seen in the capture<br>
</p>

<p>5) STA2 sending the response to AP - frame #210 (IP addresses are the topmost ones)<br>
6) AP sending the ACK to STA2 - frame #211 (only MAC address of STA1 is present, correct)<br>
7) AP sending the ICMP reply packet to STA1 - not seen in the capture<br>
8) STA1 sending the ACK to AP - not seen in the capture<br>
</p>

<p>I would have several possible explanations:</p>

<p>1 - the STAs are also connected by Ethernet so the AP forwards the frames received through WiFi using Ethernet,</p>

<p>2 - (the antenna of) your monitoring equipment is too close to (the antenna of) the AP, so the monitoring receiver is overloaded by the strong signal of the AP so the frames sent by the AP often cannot be demodulated. This is supported by the fact that frames sent or forwarded by the AP indicate RF levels around 0 dBm which is much higher than those of the STAs,</p>

<p>3 - the monitoring mode of the driver used at the monitoring equipment doesn't work properly and doesn't report some frames</p>

<p>Can you please repeat the exercise after placing the capturing device farther from the AP (or throttle the AP transmit power about 10 dB) to exclude possibility #2 (and, of course, disconnect any eventual Ethernet cables to exclude possibility #1)?</p>

<p>Is the capturing device using a Realtek chipset?</p></div>
            <div class="comment-info" id="comment-51982-info">
                
                
                
                

                

                <span class="comment-age">(26 Apr '16, 23:48)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="51988"></a>
        <div class="comment not_top_scorer" id="comment-51988">
            <div id="post-51988-score" class="comment-score"></div>
            <div class="comment-text"><p>in the step 6) mentioned above  "AP sending the ACK to STA2 - frame #211 (only MAC address of STA1 is present, correct)" is incorrect. it should be "only MAC address on STA2"</p>

<p>these are my comments on your explanations</p>

<p>1) STAs are connected to each other through AP, so there is no Ethernet connection at all.</p>

<p>2) we have conducted this experiment in a shield room keeping the both STAs and APs, monitoring receiver very near. we can try to keep the receiving device away from the AP and check the behavior<br>
</p>

<p>3) same behavior is observed with the omnipeek tool also. so i dont think there is any issue with the receiving device.</p></div>
            <div class="comment-info" id="comment-51988-info">
                
                
                
                

                

                <span class="comment-age">(27 Apr '16, 02:04)</span>
                <a class="comment-user userinfo" href="/users/23990/rajeshrao">rajeshrao</a>
                
            </div>
        </div>
    
        <a name="51992"></a>
        <div class="comment not_top_scorer" id="comment-51992">
            <div id="post-51992-score" class="comment-score"></div>
            <div class="comment-text"><blockquote>
<p>it should be "only MAC address on STA2"</p>
</blockquote>

<p>copy-paste without postprocessing, sorry for adding confusion.</p>

<blockquote>
<p>keeping the both STAs and APs, monitoring receiver very near.</p>
</blockquote>

<p>Nevertheless, the reported levels from the STAs and from the AP differ significantly - around 0 dBm for the AP and between -30 - -40 dBm for the STAs. As the signal strength decreases proportionally to the square of the distance between antennas, a small difference in distance between signal source and monitor may cause a large difference of signal strength at the monitoring receiver even if all sources transmit with the same power.</p>

<blockquote>
<p>same behavior is observed with the omnipeek tool</p>
</blockquote>

<p>If by "the Omnipeek tool" you mean hardware, it is a supportive argument for the monitoring to be fine; if you mean just the Omnipeek software replacing Wireshark, it is not an argument as the WLAN card driver and its monitoring mode are the same for both.</p>

<p>An additional chance (which doesn't seem much likely to me but cannot be excluded) is that the WLAN uses several radio channels or even bands simultaneously and the monitoring device only listens at one of them.</p>

<p>The reverse scenario, i.e. that the monitoring device would be hopping from channel to channel and thus miss part of the frames, does not seem likely when looking at the inter-frame times.</p>

<p>Yet another possibility could be that when forwarding the frames received from one STA to the other one, the AP uses some modulation scheme which the monitoring device (or both of them) is unable to demodulate.</p></div>
            <div class="comment-info" id="comment-51992-info">
                
                
                
                

                

                <span class="comment-age">(27 Apr '16, 02:28)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="52010"></a>
        <div class="comment not_top_scorer" id="comment-52010">
            <div id="post-52010-score" class="comment-score"></div>
            <div class="comment-text"><p>tried the following things:</p>

<p>1) Keeping the monitoring device from the AP(around 5m): No change in the behavior still intermediate packets are not captured</p>

<p>2) reduced the AP transmission power by 50% : No effect - No intermediate packets</p>

<p>3) made the monitoring device to listen for channel 1, 6 and 11 - No effect and no intermediate packets </p></div>
            <div class="comment-info" id="comment-52010-info">
                
                
                
                

                

                <span class="comment-age">(27 Apr '16, 06:14)</span>
                <a class="comment-user userinfo" href="/users/23990/rajeshrao">rajeshrao</a>
                
            </div>
        </div>
    
        <a name="52012"></a>
        <div class="comment not_top_scorer" id="comment-52012">
            <div id="post-52012-score" class="comment-score"></div>
            <div class="comment-text"><p>In cases 1) and 2), what is the signal receive level reported for packets sent by the AP? You can use display filter <code>wlan.ta == e0:3f:49:28:9e:90</code> to limit display to such frames.</p>

<p>If you haven't already, can you use for monitoring the same type of WLAN adaptor which you use as STAs? That should exclude the possibility that an advanced modulation scheme is the reason (as the STA's WLAN adaptor must understand it as the icmp request and response have been delivered).</p>

<p>Otherwise I've ran out of ideas.</p></div>
            <div class="comment-info" id="comment-52012-info">
                
                
                
                

                

                <span class="comment-age">(27 Apr '16, 06:27)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="52031"></a>
        <div class="comment not_top_scorer" id="comment-52031">
            <div id="post-52031-score" class="comment-score"></div>
            <div class="comment-text"><p>is it correct to expect the packets 3, 4, 5 and 6 (refer original question) to see in the air when the ping transaction takes place?</p>

<p>it would be great if you can share the ping packets transaction in your machines. </p></div>
            <div class="comment-info" id="comment-52031-info">
                
                
                
                

                

                <span class="comment-age">(28 Apr '16, 00:44)</span>
                <a class="comment-user userinfo" href="/users/23990/rajeshrao">rajeshrao</a>
                
            </div>
        </div>
    
        <a name="52035"></a>
        <div class="comment not_top_scorer" id="comment-52035">
            <div id="post-52035-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/23990/rajeshrao">@rajeshrao</a></p>

<p>Your "answer" has been converted to a comment as that's how this site works. Please read the FAQ for more information.</p></div>
            <div class="comment-info" id="comment-52035-info">
                
                
                
                

                

                <span class="comment-age">(28 Apr '16, 02:06)</span>
                <a class="comment-user userinfo" href="/users/1225/grahamb">grahamb ♦</a>
                
            </div>
        </div>
    
        <a name="52039"></a>
        <div class="comment not_top_scorer" id="comment-52039">
            <div id="post-52039-score" class="comment-score"></div>
            <div class="comment-text"><p>Aren't we looking at <a href="http://www.thinktube.com/tech/android/wifi-direct">Direct or Ad-Hoc mode</a> here?</p></div>
            <div class="comment-info" id="comment-52039-info">
                
                
                
                

                

                <span class="comment-age">(28 Apr '16, 02:38)</span>
                <a class="comment-user userinfo" href="/users/4/jaap">Jaap ♦</a>
                
            </div>
        </div>
    
        <a name="52042"></a>
        <div class="comment not_top_scorer" id="comment-52042">
            <div id="post-52042-score" class="comment-score"></div>
            <div class="comment-text"><p>I don't think so as the icmp request shows</p>

<pre><code>Receiver address: AsustekC_28:9e:90 (e0:3f:49:28:9e:90)
Destination address: IntelCor_11:45:22 (18:ff:0f:11:45:22)
Transmitter address: IntelCor_11:64:46 (18:ff:0f:11:64:46)
Source address: IntelCor_11:64:46 (18:ff:0f:11:64:46)
BSS Id: AsustekC_28:9e:90 (e0:3f:49:28:9e:90)
STA address: IntelCor_11:64:46 (18:ff:0f:11:64:46)
</code></pre>

<p>So the receiver and destination differ, which would not be the case in any of the AP-less modes.</p></div>
            <div class="comment-info" id="comment-52042-info">
                
                
                
                

                

                <span class="comment-age">(28 Apr '16, 02:47)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="52043"></a>
        <div class="comment not_top_scorer" id="comment-52043">
            <div id="post-52043-score" class="comment-score"></div>
            <div class="comment-text"><p>This ping test is not for the ad-hoc mode. its for the infrastructure mode where 2 devices are connected to same AP and ping test is conducted between the devices.</p></div>
            <div class="comment-info" id="comment-52043-info">
                
                
                
                

                

                <span class="comment-age">(28 Apr '16, 03:12)</span>
                <a class="comment-user userinfo" href="/users/23990/rajeshrao">rajeshrao</a>
                
            </div>
        </div>
    
        <a name="52044"></a>
        <div class="comment" id="comment-52044">
            <div id="post-52044-score" class="comment-score">1</div>
            <div class="comment-text"><p>This looks like a case of not being able to decode the FromDS unicast data packets because of the modulation (as has been floated already).  When I look at the beacons for this SSID, I see 802.11n with 3 spatial streams supported:</p>

<p>wlan.bssid == e0:3f:49:28:9e:90
Rx Modulation and Coding Scheme (One bit per modulation): 3 spatial streams</p>

<p>I don't see in any of the notes where you told us exactly how you were capturing traffic.  When using OmniPeek on Windows, I need to use specific adapter chipsets that don't seem to work with Wireshark (for me, anyway).  With Windows, I use AirPcap adapters sometimes but these have issues.  They integrate easily into Wireshark, but, for instance, with AirPcap Nx, I found it does not support SGI with 802.11n frames, so these are not captured.  I can see MCS7/1SS/20MHz up to 65Mbps, but not 72.2Mbps.</p>

<p>On Linux, more devices support monitor mode + promiscuous mode, but there is even more variability in what is picked up.  It seems clear, though, that the frames ARE there, as you claim no packet loss at application layer (i.e. ping results are good).  So we infer the frames exist, but your capture technique cannot pick them up.</p>

<p>I don't see the probes for the devices under test to know what they support - are they multi-stream as well?  I can only see that they send frames at 802.11g rates, so you see these fine in the ToDS direction.  Propose next test: tune your AP to so it does NOT support 802.11n, only b/g.  Do you see the frames now?  The other packets from this BSSID in the FromDS direction that are data are all broadcast/multicast, so are sent at some basic rate, so we need to look for unicast packets.</p></div>
            <div class="comment-info" id="comment-52044-info">
                
                
                
                

                

                <span class="comment-age">(28 Apr '16, 04:11)</span>
                <a class="comment-user userinfo" href="/users/112/bob-jones">Bob Jones</a>
                
            </div>
        </div>
    
        <a name="52058"></a>
        <div class="comment" id="comment-52058">
            <div id="post-52058-score" class="comment-score">1</div>
            <div class="comment-text"><p><a href="/users/112/bob-jones"></a><a href="/users/112/bob-jones">@Bob Jones</a> = very good suggestion.  Configuring the AP to operate in 802.11g will remove the variable of the capturing adapter not being able to demodulate the frames.  It should also remove any Block-Acknowledgements (BA).<br>
</p>

<p>Some other suggestions:</p>

<ol>
<li>
<p>Ensure your capturing machine is running on a separate machine and not being utilized as part of the test equipment.  That means your set-up should include an AP, 2 WiFi stations connected to the AP and the capturing computer.  Do not use the capturing computer to send/receive frames.</p>
</li>
<li>
<p>You mentioned that the test was took place in a shielded room.  Then why do we see all the other WLAN's?  You should have a clean environment with only SSID "TSIE_CWS_ASUS_RF2_2.4" (BSSID =  e0:3f:49:28:9e:90) being broadcasted.</p>
</li>
</ol>

<p>Items #1 and #2 might seem trivial, but they are not.  Many frames in a WiFi capture are not captured because of a busy WiFi environment and/or a busy processor (i.e., capture machine is busy doing other processes instead of capturing your traffic!).</p>

<p>Finally, as Bob Jones suggested, the driver used to capture WiFi traffic is very important.  You mentioned OmniPeek.  Great tool, but they only support a limited number of WiFi adapters:</p>

<p><a href="https://mypeek.wildpackets.com/driver_downloads.php#bestPractices">https://mypeek.wildpackets.com/driver_downloads.php#bestPractices</a></p>

<p>If you are not using these adapters, then the drivers will not work correctly.  If you want to use Wireshark, you will run into the same problem.  Some drivers do not support monitoring mode, which makes them useless for WiFi capturing.  (NO promiscuous mode in WiFi is NOT a solution.  It causes more confusion then it solves!!)</p></div>
            <div class="comment-info" id="comment-52058-info">
                
                
                
                

                

                <span class="comment-age">(28 Apr '16, 08:58)</span>
                <a class="comment-user userinfo" href="/users/3386/amato_c">Amato_C</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-51956" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 14
        </span>
        <a href="#" class="show-all-comments-link">show 9 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-51956-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    One Answer:
                    </div>
                    
<div class="tabsA"><a href="/questions/51956/ping-packet-flow-in-the-80211-network?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/51956/ping-packet-flow-in-the-80211-network?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/51956/ping-packet-flow-in-the-80211-network?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/51956/ping-packet-flow-in-the-80211-network?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="52391"></a>
                    <div id="answer-container-52391" class="answer answered-by-owner">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-52391-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/52391/up/" rel="nofollow"> </a>
<div id="post-52391-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-52391-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/52391/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Hi All,</p>
<p>After configuring the AP in the 802.11g only mode, i am able to see the ICMP req packet being sent by the AP to the STA2.  Thanks all for your great support.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/52391/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>10 May '16, 06:48</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/736c2561295a20843009b8c9a7fc210a?s=32&amp;d=identicon&amp;r=g" alt="rajeshrao's gravatar image" />
    <p><a href="/users/23990/rajeshrao">rajeshrao</a><br/>
    <span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">&#9679;</span><span class="badgecount">2</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="rajeshrao has no accepted answers">0&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-52391">
    
</div>
<div id="comment-tools-52391" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-52391-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/51956/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='4MbCjLsVlcK0wA2DImdDgMIoNWqcGFUG' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/51956/ping-packet-flow-in-the-80211-network?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/51956/ping-packet-flow-in-the-80211-network?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/packet/"
            class="tag-link-packet"
            title="see questions tagged'packet'using tags"
            rel="tag">packet</a> <span class="tag-number">&#215;248</span><br/>
        
        <a href="/tags/ping/"
            class="tag-link-ping"
            title="see questions tagged'ping'using tags"
            rel="tag">ping</a> <span class="tag-number">&#215;43</span><br/>
        
        <a href="/tags/flow/"
            class="tag-link-flow"
            title="see questions tagged'flow'using tags"
            rel="tag">flow</a> <span class="tag-number">&#215;35</span><br/>
        
    </p>
    <p>
        question asked: <strong title="April 26, 2016, 4:06 a.m.">26 Apr '16, 04:06</strong>
    </p>
    <p> 
     	question was seen: <strong>4,017 times</strong>
    </p>
    <p> 
        last updated: <strong title="May 10, 2016, 6:48 a.m.">10 May '16, 06:48</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/3032/monitoring-packet-flow">monitoring packet flow</a>
        </p>
        
        <p>
            <a href="/questions/520/is-there-a-way-to-show-all-packet-captures-for-one-site-capture">Is there a way to show all packet captures for one site capture</a>
        </p>
        
        <p>
            <a href="/questions/2255/separating-the-header-from-the-packet">separating the header from the packet</a>
        </p>
        
        <p>
            <a href="/questions/6547/how-to-scrape-packet-data">How to scrape packet data?</a>
        </p>
        
        <p>
            <a href="/questions/10022/making-a-dissector-that-filters-packets">Making a dissector that filters packets</a>
        </p>
        
        <p>
            <a href="/questions/14075/can-not-see-packets-from-local-machine">Can not see packets from local machine</a>
        </p>
        
        <p>
            <a href="/questions/18239/wireshark-packet-forwarding">Wireshark Packet Forwarding</a>
        </p>
        
        <p>
            <a href="/questions/23522/capture-packets-from-my-broadband-modem">Capture packets from my Broadband Modem</a>
        </p>
        
        <p>
            <a href="/questions/27862/extra-octets-in-packets-in-a-capture-file">Extra octets in packets in a capture file</a>
        </p>
        
        <p>
            <a href="/questions/31412/getting-tcp-rstack-and-appliction-does-not-handle-this-well">Getting TCP RST,ACK and appliction does not handle this well</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
