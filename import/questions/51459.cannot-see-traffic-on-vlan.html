<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Cannot see traffic on VLAN - Wireshark Q&amp;A</title>
        <meta name="description" content="Hello I am running Wireshark v1.12.10 on a Windows 7 Samsung computer, with a Marvell Yukon 88E8040 Fast Ethernet card. I have modified the registry so that *PriorityVLANTag is set to 0, and the SkDisableVlanStrip is set to 1. When I run a capture I am using the ip.addr filter, the relation is &quot;is p..." />
        <meta name="keywords" content="vlan" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/51459/cannot-see-traffic-on-vlan" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/51459/cannot-see-traffic-on-vlan?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='CYoVQa81qpBgQo1aF9yRgnTf7h6lA3O1' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/51459/cannot-see-traffic-on-vlan">Cannot see traffic on VLAN</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-51459-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/51459/up/" rel="nofollow"> </a>
<div id="post-51459-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-51459-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/51459/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/51459/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>Hello</p>
<p>I am running Wireshark v1.12.10 on a Windows 7 Samsung computer, with a Marvell Yukon 88E8040 Fast Ethernet card. I have modified the registry so that *PriorityVLANTag is set to 0, and the SkDisableVlanStrip is set to 1. When I run a capture I am using the ip.addr filter, the relation is "is present" I am doing the capture on a Netgear FS726TP switch, which uses VLANs, using port mirroring. But when I do the capture, I am not getting any network traffic, except for DHCP broadcasts and NBNS Name queries. What is it I must do to get the real traffic running on the port. I know that the port is being used for access to the Internet and other traffic.</p>
<p>Thanks</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/vlan/" class="post-tag tag-link-vlan"
                                        title="see questions tagged 'vlan'" rel="tag">vlan</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>07 Apr '16, 03:25</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/64884cb419bb3531b03e82f593b93eac?s=32&amp;d=identicon&amp;r=g" alt="skeating's gravatar image" />
    <p><a href="/users/23809/skeating">skeating</a><br/>
    <span class="score" title="6 reputation points">6</span><span title="2 badges"><span class="badge1">&#9679;</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">&#9679;</span><span class="badgecount">2</span></span><span title="3 badges"><span class="bronze">&#9679;</span><span class="badgecount">3</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="skeating has no accepted answers">0&#37;</span>
    </p>
</div>


                            </div>
                            




<div class="comments-container" id="comments-container-51459">
    
        <a name="51463"></a>
        <div class="comment" id="comment-51463">
            <div id="post-51463-score" class="comment-score"></div>
            <div class="comment-text"><p>What happens it you don't apply the ip.addr filter?</p></div>
            <div class="comment-info" id="comment-51463-info">
                
                
                
                

                

                <span class="comment-age">(07 Apr '16, 04:52)</span>
                <a class="comment-user userinfo" href="/users/4/jaap">Jaap ♦</a>
                
            </div>
        </div>
    
        <a name="51464"></a>
        <div class="comment" id="comment-51464">
            <div id="post-51464-score" class="comment-score"></div>
            <div class="comment-text"><p>I still get the same results.</p></div>
            <div class="comment-info" id="comment-51464-info">
                
                
                
                

                

                <span class="comment-age">(07 Apr '16, 04:59)</span>
                <a class="comment-user userinfo" href="/users/23809/skeating">skeating</a>
                
            </div>
        </div>
    
        <a name="51486"></a>
        <div class="comment" id="comment-51486">
            <div id="post-51486-score" class="comment-score"></div>
            <div class="comment-text"><p>Can you see the VLAN headers on those packets you do capture (DHCP broadcasts etc.)?</p>

<p>Because you claim a VLAN issue but to me it seems like a normal behaviour if you've connected your capturing machine to an ordinary port of a switch and there is no traffic for the capturing machine itself.</p></div>
            <div class="comment-info" id="comment-51486-info">
                
                
                
                

                

                <span class="comment-age">(07 Apr '16, 10:36)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="51487"></a>
        <div class="comment" id="comment-51487">
            <div id="post-51487-score" class="comment-score"></div>
            <div class="comment-text"><p>And as you wrote that the port is used for access to internet, do you mean you have replaced the original counterpart of that switch port with the capturing PC and you expect to see the attempts of other PCs to access internet servers?</p></div>
            <div class="comment-info" id="comment-51487-info">
                
                
                
                

                

                <span class="comment-age">(07 Apr '16, 10:38)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="51489"></a>
        <div class="comment" id="comment-51489">
            <div id="post-51489-score" class="comment-score"></div>
            <div class="comment-text"><p>I'm not sure what you mean about the port. I was using port mirroring, in which I am plugged into port #1, which is mirroring port #16, which is the live port. So I have not replaced any PCs, just attempting to capture the traffic going to them.</p></div>
            <div class="comment-info" id="comment-51489-info">
                
                
                
                

                

                <span class="comment-age">(07 Apr '16, 11:16)</span>
                <a class="comment-user userinfo" href="/users/23809/skeating">skeating</a>
                
            </div>
        </div>
    
        <a name="51493"></a>
        <div class="comment not_top_scorer" id="comment-51493">
            <div id="post-51493-score" class="comment-score"></div>
            <div class="comment-text"><p>Sorry, I've missed the part about port mirroring in your question, and have only noticed</p>

<blockquote>
<p>What is it I must do to get the real traffic running on the port. I know that the port is being used for access to the Internet and other traffic.</p>
</blockquote>

<p>The point is that getting just DHCP and NBNS name queries is a typical case when you are connected to an ordinary (i.e. not mirroring) port, while the setting on your network card's driver regarding VLAN header stripping would normally affect only whether the VLAN headers make it to the level inside the network stack where the frames are actually captured. So if tagged frames are coming, you normally can see them even if you don't use that "don't strip" setting, except that the 802.1 Q headers are removed before the frame is captured.</p>

<p>So I can imagine three possibilities:</p>

<ul>
<li>
<p>the mirroring doesn't work as expected on the switch,</p>
</li>
<li>
<p>the driver settings regarding VLANs cause something to go wrong,</p>
</li>
<li>
<p>some security/firewall software interferes with your WinPcap operation.</p>
</li>
</ul>

<p>Can you capture your own traffic in both directions if connected to an ordinary port and default VLAN-related settings are used on the network card driver? If yes, is it still true after you activate the "don't strip" settings? If not, can you disable all firewall/anti-virus/even VPN software for the time of taking the capture (see other similar questions "I can see only XXX traffic" on this site for details)?</p></div>
            <div class="comment-info" id="comment-51493-info">
                
                
                
                

                

                <span class="comment-age">(07 Apr '16, 13:03)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="51511"></a>
        <div class="comment not_top_scorer" id="comment-51511">
            <div id="post-51511-score" class="comment-score"></div>
            <div class="comment-text"><p>I found the problem. I was mirroring from port 16 to port 1, and getting no where. Then I remembered that if I needed to setup a trunk, I had to do so to another port near 16. So I mirrored to port 20, and I got all the packets I needed. Netgear, go figure.</p></div>
            <div class="comment-info" id="comment-51511-info">
                
                
                
                

                

                <span class="comment-age">(08 Apr '16, 06:50)</span>
                <a class="comment-user userinfo" href="/users/23809/skeating">skeating</a>
                
            </div>
        </div>
    
        <a name="51551"></a>
        <div class="comment not_top_scorer" id="comment-51551">
            <div id="post-51551-score" class="comment-score"></div>
            <div class="comment-text"><p>Well, in the case of Cisco, for the destination Port to maintain the DOT 1Q portion of the encapsulation when the packet is reassembled the command "Encapsulation DOT 1Q replicate" has to be added as part of the destination configuration. But this is because most good Cisco switches can work on a layer 3 level. .if you don't have a router in place, a Layer 3 device that can route the other network and add the dot1Q tag, then you don't truly have a VLAN / segmentation / 2 separate networks. The netgear is a true layer 2 device. Do you have a router if so what model?  What is the ip  of the first and second network?  What does your capture  show?</p></div>
            <div class="comment-info" id="comment-51551-info">
                
                
                
                

                

                <span class="comment-age">(11 Apr '16, 06:12)</span>
                <a class="comment-user userinfo" href="/users/23174/msmorten">msmorten</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-51459" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 8
        </span>
        <a href="#" class="show-all-comments-link">show 3 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-51459-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    2 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/51459/cannot-see-traffic-on-vlan?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/51459/cannot-see-traffic-on-vlan?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/51459/cannot-see-traffic-on-vlan?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/51459/cannot-see-traffic-on-vlan?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="51540"></a>
                    <div id="answer-container-51540" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-51540-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/51540/up/" rel="nofollow"> </a>
<div id="post-51540-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-51540-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/51540/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Are you sure your interface on the Windows machine is in promiscuous mode? Are you sure you port is mirroring traffic? What is on the VLAN? what should it be seeing?</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/51540/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>09 Apr '16, 18:37</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7dc1fee5b4e29c4e6cc3d5059312aac7?s=32&amp;d=identicon&amp;r=g" alt="msmorten's gravatar image" />
    <p><a href="/users/23174/msmorten">msmorten</a><br/>
    <span class="score" title="4 reputation points">4</span><span title="5 badges"><span class="badge1">&#9679;</span><span class="badgecount">5</span></span><span title="5 badges"><span class="silver">&#9679;</span><span class="badgecount">5</span></span><span title="8 badges"><span class="bronze">&#9679;</span><span class="badgecount">8</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="msmorten has no accepted answers">0&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-51540">
    
        <a name="51549"></a>
        <div class="comment" id="comment-51549">
            <div id="post-51549-score" class="comment-score"></div>
            <div class="comment-text"><p>I have found the solution to part of the problem. Netgear, for some reason, will not allow port mirroring to any port. I was trying to mirror port 16 onto port 1, but no luck. But if I mirrored port 16 onto port 20, then I would get the traffic on port 16. What I cannot get is the VLAN traffic. I see the IPs of the VLAN, but there are no VLAN packets in captured packets. Any ideas why I cannot see the VLAN packets?</p></div>
            <div class="comment-info" id="comment-51549-info">
                
                
                
                

                

                <span class="comment-age">(11 Apr '16, 05:37)</span>
                <a class="comment-user userinfo" href="/users/23809/skeating">skeating</a>
                
            </div>
        </div>
    
        <a name="51553"></a>
        <div class="comment" id="comment-51553">
            <div id="post-51553-score" class="comment-score"></div>
            <div class="comment-text"><p>For instance, with Cisco, to get the VLAN tag to be included in the reassembly of the packet on the destination port it has to be written in as part of the command on the destination port "encapsulation dot1q replicate" and this adds the tag back to the packet from buffer on the destination port. But this is only because most good Cisco switches operate on layer 3. The Netgear switch you're using is a true layer 2 device. So if you don't have a router that is handling the segmentation and routing of the virtual network, then you don't have true vlan or separate networks. What are you using as your CSU or router?  What are your captures showing you? I am not sure if the netgear is capable of mirroring the vlan tag , passing it to the destination port. If so, then the destination port would have IP coming from two networks. </p>

<p>I wouldn't normally ask questions like this in a Cisco environment but when it comes to this netgear, you never know. What is the gateway to your two networks ? Can you ping them? Can you verify that you have two networks?</p></div>
            <div class="comment-info" id="comment-51553-info">
                
                
                
                

                

                <span class="comment-age">(11 Apr '16, 07:09)</span>
                <a class="comment-user userinfo" href="/users/23174/msmorten">msmorten</a>
                
            </div>
        </div>
    
        <a name="51560"></a>
        <div class="comment" id="comment-51560">
            <div id="post-51560-score" class="comment-score"></div>
            <div class="comment-text"><p>Also, from you router to the port that connects to the switch, you have to make sure you're trunking the vlan(s) you want to see on this switch. If the port that connecting the router to the switch isn't truncking and is only an access port, then the switch will only have traffic for the vlan that it has access too.</p></div>
            <div class="comment-info" id="comment-51560-info">
                
                
                
                

                

                <span class="comment-age">(11 Apr '16, 10:38)</span>
                <a class="comment-user userinfo" href="/users/23174/msmorten">msmorten</a>
                
            </div>
        </div>
    
        <a name="51582"></a>
        <div class="comment" id="comment-51582">
            <div id="post-51582-score" class="comment-score"></div>
            <div class="comment-text"><blockquote>
<p>What I cannot get is the VLAN traffic. I see the IPs of the VLAN</p>
</blockquote>

<p>This sounds a bit confusing to me. If you can see "the IPs", it means to me that you can see the frames from/to those IPs, but without knowledge of the overall architecture of the network, it is hard to say anything.</p>

<p>But let's suppose that a frame sent by a device which is only connected to the VLAN of interest to some device in the internet only passes through your switch once and it is visible in the capture. In this case, the question is whether VLANs and their monitoring do not work the way you expect on the switch (as <a href="/users/23174/msmorten">@msmorten</a> suggests) or whether the Marvell driver ignores the <code>SkDisableVlanStrip</code> setting and thus strips the 802.1Q headers before WinPcap or Npcap can read the frames.</p>

<p>To find out which one is true, I'd suggest to make an ordinary (<strong>not</strong> monitoring) port a member of the VLAN of interest and configure it as a "trunk" one (using Cisco terminology) or (using the terminology of most other switch vendors) so that this VLAN's frames would be sent out tagged, connect your PC to that port and run the capture with the <code>SkDisableVlanStrip</code> of the driver set to 1. If the broadcast frames (ARP requests, DHCP discoveries, NBNS name requests etc.) which you are going to capture this way have the 802.1Q headers in this case, the Marvell driver and WinPcap/Npcap are fine and the issue is the Netgear (or its setting); if you cannot see the 802.1Q headers even this way, the issue is the Marvell driver or the ?Pcap filter.</p>

<p>Just for the case, I assume you look for the VLAN ID into the dissection pane of a single frame, not just to the packet list which does not show the VLAN IDs by default - you would have to manually add a column to the packet list to see it there (which is easiest to do by right-clicking the field in the dissection pane and choosing <code>Apply as Column</code>).</p></div>
            <div class="comment-info" id="comment-51582-info">
                
                
                
                

                

                <span class="comment-age">(12 Apr '16, 01:55)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="51592"></a>
        <div class="comment" id="comment-51592">
            <div id="post-51592-score" class="comment-score"></div>
            <div class="comment-text"><p>Is there a specific capture filter in Wireshark I should be using along with registry changes for the Marvell. I have read this:
<a href="https://wiki.wireshark.org/CaptureSetup/VLAN#Capture_filters">https://wiki.wireshark.org/CaptureSetup/VLAN#Capture_filters</a>
but do not understand the section on Capture Filters. Do I need to create one, or is there one already in the collection of filters in Wireshark?</p></div>
            <div class="comment-info" id="comment-51592-info">
                
                
                
                

                

                <span class="comment-age">(12 Apr '16, 04:22)</span>
                <a class="comment-user userinfo" href="/users/23809/skeating">skeating</a>
                
            </div>
        </div>
    
        <a name="51599"></a>
        <div class="comment not_top_scorer" id="comment-51599">
            <div id="post-51599-score" class="comment-score"></div>
            <div class="comment-text"><blockquote>
<p>capture filter in Wireshark I should be using along with registry changes for the Marvell</p>
</blockquote>

<p>These two things are independent. </p>

<p>A capture filter <em>restricts</em> the capture to packets which match the expression, and no expression at all means everything is captured. But the capture filter does not <em>modify</em> the packets in any way, so it is unable to remove the 802.1Q headers even if used.</p>

<p>So if </p>

<ul>
<li>
<p>you are capturing on an ordinary port about which you are 100% sure that it sends out tagged frames,</p>
</li>
<li>
<p>SkDisableVlanStrip` is set to 1,</p>
</li>
<li>
<p>you use no capture filter at all,</p>
</li>
<li>
<p>you can see only frames without <code>802.1Q Virtual LAN</code> layer between <code>Ethernet II</code> and <code>Internet Protocol Version n</code> layers</p>
</li>
</ul>

<p>are all true, then the driver ignores the <code>SkDisableVlanStrip</code>. It may, however, require a restart so that this option would come into effect.</p></div>
            <div class="comment-info" id="comment-51599-info">
                
                
                
                

                

                <span class="comment-age">(12 Apr '16, 06:36)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-51540" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 6
        </span>
        <a href="#" class="show-all-comments-link">show 1 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-51540-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="51571"></a>
                    <div id="answer-container-51571" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-51571-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/51571/up/" rel="nofollow"> </a>
<div id="post-51571-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-51571-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/51571/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Hi, you can try Npcap: <a href="https://github.com/nmap/npcap/releases">https://github.com/nmap/npcap/releases</a>. It's a update to original WinPcap (which is the capturing driver for Windows) and supports VLAN tag for capturing and sending.</p>
<p>Make sure you checked the "Support 802.1Q VLAN tag when capturing and sending data" option in the installer.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/51571/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>11 Apr '16, 17:46</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/0f8ec58f46e4af3a67f768675c20aac8?s=32&amp;d=identicon&amp;r=g" alt="Yang%20Luo's gravatar image" />
    <p><a href="/users/20301/yang-luo">Yang Luo</a><br/>
    <span class="score" title="91 reputation points">91</span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="7 badges"><span class="bronze">&#9679;</span><span class="badgecount">7</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Yang Luo has one accepted answer">4&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/51571/">
                edited
                <strong>11 Apr '16, 17:47</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-51571">
    
        <a name="51590"></a>
        <div class="comment" id="comment-51590">
            <div id="post-51590-score" class="comment-score"></div>
            <div class="comment-text"><p>The Npcap only works on WIFI, right? I need to connect with a cable. Is there something that does the same update for WinPcap using Ethernet?</p></div>
            <div class="comment-info" id="comment-51590-info">
                
                
                
                

                

                <span class="comment-age">(12 Apr '16, 04:13)</span>
                <a class="comment-user userinfo" href="/users/23809/skeating">skeating</a>
                
            </div>
        </div>
    
        <a name="51594"></a>
        <div class="comment" id="comment-51594">
            <div id="post-51594-score" class="comment-score"></div>
            <div class="comment-text"><p>npcap works on wired Ethernet as well as WiFi.</p></div>
            <div class="comment-info" id="comment-51594-info">
                
                
                
                

                

                <span class="comment-age">(12 Apr '16, 04:29)</span>
                <a class="comment-user userinfo" href="/users/1225/grahamb">grahamb ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-51571" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-51571-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/51459/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='CYoVQa81qpBgQo1aF9yRgnTf7h6lA3O1' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/51459/cannot-see-traffic-on-vlan?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/51459/cannot-see-traffic-on-vlan?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/vlan/"
            class="tag-link-vlan"
            title="see questions tagged'vlan'using tags"
            rel="tag">vlan</a> <span class="tag-number">&#215;66</span><br/>
        
    </p>
    <p>
        question asked: <strong title="April 7, 2016, 3:25 a.m.">07 Apr '16, 03:25</strong>
    </p>
    <p> 
     	question was seen: <strong>3,897 times</strong>
    </p>
    <p> 
        last updated: <strong title="April 12, 2016, 6:36 a.m.">12 Apr '16, 06:36</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/50/make-wireshark-analysis-vlan-aware">make Wireshark analysis vlan aware</a>
        </p>
        
        <p>
            <a href="/questions/10868/adding-vlan-tag-on-wireshark-capture">Adding VLAN Tag on Wireshark capture</a>
        </p>
        
        <p>
            <a href="/questions/26641/realtek-pcie-gbe-vlan-stripping">Realtek PCIe GBE vlan stripping</a>
        </p>
        
        <p>
            <a href="/questions/43757/how-can-i-get-spanning-tree-protocols-originating-vlan-pvid-section-to-appear">How can I get Spanning Tree Protocol&#39;s &quot;Originating Vlan (PVID):&quot; section to appear???</a>
        </p>
        
        <p>
            <a href="/questions/63052/how-do-i-capture-iscsi-traffic-on-a-vlan">How do I capture iscsi traffic on a VLAN?</a>
        </p>
        
        <p>
            <a href="/questions/112/whats-the-best-way-to-capture-packets-on-a-trunked-port-cisco-catalyst">What&#39;s the best way to capture packets on a trunked port (Cisco Catalyst)?</a>
        </p>
        
        <p>
            <a href="/questions/11175/tshark-filters-using-and-vs">tshark filters using &quot;and&quot; vs &quot;&amp;&amp;&quot;</a>
        </p>
        
        <p>
            <a href="/questions/26867/outer-vlan-tag-removed-windows-7">Outer vlan tag removed (Windows 7)</a>
        </p>
        
        <p>
            <a href="/questions/43879/bpf-for-protocol-exclude-list">BPF for protocol exclude list</a>
        </p>
        
        <p>
            <a href="/questions/793/six-byte-vlan-tag">six byte VLAN tag?</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
