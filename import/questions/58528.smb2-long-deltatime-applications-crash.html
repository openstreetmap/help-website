<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>SMB2 Long Deltatime - Applications Crash - Wireshark Q&amp;A</title>
        <meta name="description" content="I am a newbee using Wireshark, so hope for a little help :-) I have an issue with an SQL DB application which craches. I my tracefile I see very high Delta Time on SMB2 and a max SRT(s) of 625.347497 on Notify on SMB2 Service Response Time. Where should I start to look? Is it the network, server or ..." />
        <meta name="keywords" content="smb2,database" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/58528/smb2-long-deltatime-applications-crash" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/58528/smb2-long-deltatime-applications-crash?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='DDBbPCIv2OciJOpmI8K5T5pti02eF3wL' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/58528/smb2-long-deltatime-applications-crash">SMB2 Long Deltatime - Applications Crash</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-58528-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/58528/up/" rel="nofollow"> </a>
<div id="post-58528-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-58528-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/58528/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/58528/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>I am a newbee using Wireshark, so hope for a little help :-)
I have an issue with an SQL DB application which craches.
I my tracefile I see very high Delta Time on SMB2 and a max SRT(s) of 625.347497 on Notify on SMB2 Service Response Time.</p>
<p>Where should I start to look? Is it the network, server or Client?
</p><pre>===========================================================================
SMB2 Service Response Time Statistics - sql-db-issue_00001_20170103094009_00006_20170103145622_00001_20170104090747:
Index  Procedure  Calls  Min SRT (s)  Max SRT (s)  Avg SRT (s)  Sum SRT (s)<p></p>
<hr>
<p>SMB2            <br>
Close                       6    361     0.000291     0.146918     0.001722     0.621558
Create                      5    371     0.000331     1.787312     0.009587     3.556769
Find                       14    271     0.000600     0.194669     0.005546     1.502843
Flush                       7      1     0.165415     0.165415     0.165415     0.165415
GetInfo                    16     58     0.000330     0.009854     0.002310     0.133973
Ioctl                      11     51     0.000420     0.182926     0.010477     0.534342
Negotiate Protocol          0      3     0.000743     0.000900     0.000814     0.002442
Notify                     15     18     0.000661   625.347497    71.007926  1278.142673
Read                        8    601     0.000328     0.302919     0.028557    17.163042
Session Logoff              2      3     0.000797     0.004081     0.001950     0.005849
Session Setup               1      4     0.000784     0.007014     0.002552     0.010209
SetInfo                    17      9     0.000598     0.000858     0.000745     0.006704
Tree Connect                3      5     0.000346     0.001530     0.000663     0.003313
Tree Disconnect             4      5     0.000816     0.009827     0.004345     0.021723
Write                       9     13     0.000331     0.008499     0.002117     0.027518</p>
<hr>
<p>13686   4.777025    10.34.80.11 10.34.80.165    SMB2    162 29.962738000        256 Notify Response
</p></pre>
Thanks in advance.<p></p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/smb2/" class="post-tag tag-link-smb2"
                                        title="see questions tagged 'smb2'" rel="tag">smb2</a>
                                
                                    <a href="/tags/database/" class="post-tag tag-link-database"
                                        title="see questions tagged 'database'" rel="tag">database</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>04 Jan '17, 23:55</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7b3030eb06fbd7c1b53adf865d3964e1?s=32&amp;d=identicon&amp;r=g" alt="bachsec's gravatar image" />
    <p><a href="/users/27207/bachsec">bachsec</a><br/>
    <span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">&#9679;</span><span class="badgecount">2</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="bachsec has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/58528/">
                edited
                <strong>07 Jan '17, 11:04</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/d2a7e24ca66604c749c7c88c1da8ff78?s=32&amp;d=identicon&amp;r=g" alt="grahamb's gravatar image" />
            <p><a href="/users/1225/grahamb">grahamb ♦</a><br/>
            <span class="score" title="19834 reputation points"><span class="">19.8k</span></span><span title="3 badges"><span class="badge1">&#9679;</span><span class="badgecount">3</span></span><span title="30 badges"><span class="silver">&#9679;</span><span class="badgecount">30</span></span><span title="206 badges"><span class="bronze">&#9679;</span><span class="badgecount">206</span></span></p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-58528">
    
        <a name="58581"></a>
        <div class="comment" id="comment-58581">
            <div id="post-58581-score" class="comment-score"></div>
            <div class="comment-text"><p>Could you explain the topology of the system a little?  Is it:</p>

<p>Client PC ---- Database Server ---- SMB File Server</p>

<p>or</p>

<p>Client PC / Access ---- SMB File Server</p>

<p>or</p>

<p>????</p></div>
            <div class="comment-info" id="comment-58581-info">
                
                
                
                

                

                <span class="comment-age">(07 Jan '17, 10:49)</span>
                <a class="comment-user userinfo" href="/users/7690/paulofford">PaulOfford</a>
                
            </div>
        </div>
    
        <a name="58590"></a>
        <div class="comment" id="comment-58590">
            <div id="post-58590-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi PaulOfford</p>

<p>It is Client(with developed frontend) ----&gt; SMB Server with SQL Express as DB for the frontend Application</p>

<p>The application connects to the SQL express instance in the SMB server.</p></div>
            <div class="comment-info" id="comment-58590-info">
                
                
                
                

                

                <span class="comment-age">(08 Jan '17, 00:11)</span>
                <a class="comment-user userinfo" href="/users/27207/bachsec">bachsec</a>
                
            </div>
        </div>
    
        <a name="58592"></a>
        <div class="comment" id="comment-58592">
            <div id="post-58592-score" class="comment-score">1</div>
            <div class="comment-text"><p>There are two ways to connect to a Microsoft SQL database; named pipes or TDS over TCP.  You could be using named pipes but Find and Notify are SMB2 commands that I wouldn't expect to see.</p>

<p>By the way, Notify response times might be long as Notify is used to notify a client if a change has been made to a file or directory.  See <a href="https://wiki.wireshark.org/SMB2/Notify">https://wiki.wireshark.org/SMB2/Notify</a> </p>

<p>Can you confirm that the client application connects to the database using named pipes?  If you are not sure, check to see if there is any traffic in your trace between the client and port 1433 on your server with the filter expression:</p>

<p>ip.addr==<em>the_client_ip_address</em> and tcp.port=1433</p>

<p>TCP port 1433 is the default port number for Microsoft SQL Server.  Although it can be set to a different value and so you might want to check with whoever supports the database.</p>

<p>Sorry to keep asking dumb questions but I don't want to send you off on a wild goose chase.</p></div>
            <div class="comment-info" id="comment-58592-info">
                
                
                
                

                

                <span class="comment-age">(08 Jan '17, 01:57)</span>
                <a class="comment-user userinfo" href="/users/7690/paulofford">PaulOfford</a>
                
            </div>
        </div>
    
        <a name="58598"></a>
        <div class="comment" id="comment-58598">
            <div id="post-58598-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi PaulOfford</p>

<p>In the tracefile I see at lot of traffic between the client and the serve on port 1433. 80% of the packages in the trace is that, when I filter with the filet you wrote.</p></div>
            <div class="comment-info" id="comment-58598-info">
                
                
                
                

                

                <span class="comment-age">(08 Jan '17, 12:04)</span>
                <a class="comment-user userinfo" href="/users/27207/bachsec">bachsec</a>
                
            </div>
        </div>
    
        <a name="58599"></a>
        <div class="comment" id="comment-58599">
            <div id="post-58599-score" class="comment-score"></div>
            <div class="comment-text"><p><img src="https://osqa-ask.wireshark.org/upfiles/grahp.jpg" width="600"></p>

<p>Does this graph say anything.</p></div>
            <div class="comment-info" id="comment-58599-info">
                
                
                
                

                

                <span class="comment-age">(08 Jan '17, 12:21)</span>
                <a class="comment-user userinfo" href="/users/27207/bachsec">bachsec</a>
                
            </div>
        </div>
    
        <a name="58600"></a>
        <div class="comment not_top_scorer" id="comment-58600">
            <div id="post-58600-score" class="comment-score"></div>
            <div class="comment-text"><p>no. sorry.</p></div>
            <div class="comment-info" id="comment-58600-info">
                
                
                
                

                

                <span class="comment-age">(08 Jan '17, 13:16)</span>
                <a class="comment-user userinfo" href="/users/416/packethunter">packethunter</a>
                
            </div>
        </div>
    
        <a name="58602"></a>
        <div class="comment not_top_scorer" id="comment-58602">
            <div id="post-58602-score" class="comment-score"></div>
            <div class="comment-text"><p>It has answered the question I had.  So, although your client application may use SMB file services, the connection to the database is via TDS/TCP.</p>

<p>You say in the title that the application crashes.  Do you literally mean that?  Does it throw an exception, dump and then exit?  Or do you get an error message?  If so, what's the message and have you determined what it means?</p></div>
            <div class="comment-info" id="comment-58602-info">
                
                
                
                

                

                <span class="comment-age">(08 Jan '17, 14:29)</span>
                <a class="comment-user userinfo" href="/users/7690/paulofford">PaulOfford</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-58528" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 7
        </span>
        <a href="#" class="show-all-comments-link">show 2 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-58528-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    One Answer:
                    </div>
                    
<div class="tabsA"><a href="/questions/58528/smb2-long-deltatime-applications-crash?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/58528/smb2-long-deltatime-applications-crash?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/58528/smb2-long-deltatime-applications-crash?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/58528/smb2-long-deltatime-applications-crash?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="58541"></a>
                    <div id="answer-container-58541" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-58541-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/58541/up/" rel="nofollow"> </a>
<div id="post-58541-score" class="post-score"
    title="current number of votes">
    1
</div>
<a id="post-58541-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/58541/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Hello bachsec, and welcome to ask.wireshark</p>
<p>Application errors like missing access rights or lock conflicts are easily spotted with this display filter:  <strong><code>smb2.flags.response == 1 and not smb2.nt_status == 0</code></strong></p>
<p>Looking at the Service Response Time Statistics can be helpful. Alas, in this case we only get marginal info.</p>
<p>The most remarkable part in the statistics from your trace file is one instance of a long time for the Create command. The Create function is called to obtain a file handle. This can be used to either create a file or to open an existing file. 1.7 seconds is considered "long" for most cases. However, a a virus scanner checking a 4 GB ISO image in 1.7 seconds would be impressive. So we have a number, but no unit to measure against. The delay could also be caused a TCP retransmissions or other network issues. The long response times for the notify request are usually not a problem, as this an asynchronous message from the server like "Hey client, a time stamp on a file has changed".</p>
<p>A trace file would help a lot. Depending on the configuration (DFS, Branch Cache etc.) a full network trace from the client view would be the best option. Certain problems might require two traces taken simultaneously with client and server.</p>
<p>Please bear in mind, that SMB traffic usually reveals the file contents and (depending on the configuration of workstation and server) could also reveal users passwords. To investigate that problem we need at least the SMB or SMB2 headers with the return codes. I am not aware of a tool that sanitizes SMB traffic as one might desire.</p>
<p>If you can not share the trace file with the general public a network consultant might be your best option.</p>
<p>Good hunting</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/58541/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>05 Jan '17, 10:32</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/3b60e92020a427bb24332efc0b560943?s=32&amp;d=identicon&amp;r=g" alt="packethunter's gravatar image" />
    <p><a href="/users/416/packethunter">packethunter</a><br/>
    <span class="score" title="2137 reputation points"><span class="">2.1k</span></span><span title="7 badges"><span class="badge1">&#9679;</span><span class="badgecount">7</span></span><span title="15 badges"><span class="silver">&#9679;</span><span class="badgecount">15</span></span><span title="48 badges"><span class="bronze">&#9679;</span><span class="badgecount">48</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="packethunter has 8 accepted answers">8&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-58541">
    
        <a name="58591"></a>
        <div class="comment" id="comment-58591">
            <div id="post-58591-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi Packethunter</p>

<p>With the filter you gave me, I can see something is that errors
E.G. Error: STATUS_BUFFER_TOO_SMALL</p></div>
            <div class="comment-info" id="comment-58591-info">
                
                
                
                

                

                <span class="comment-age">(08 Jan '17, 00:14)</span>
                <a class="comment-user userinfo" href="/users/27207/bachsec">bachsec</a>
                
            </div>
        </div>
    
        <a name="58595"></a>
        <div class="comment" id="comment-58595">
            <div id="post-58595-score" class="comment-score"></div>
            <div class="comment-text"><p>Hmmmm. "Buffer too small" is a regular message for certain protocols, that use named pipes. The client sends a request and a default buffer size, say 1kByte. If the server's response exceeds 1 kB the response will have the return code "Buffer too small". Another field will hold the required buffer size for the response.</p>

<p>Here are a few root causes for performance problems, that I have encountered during various analysis projects:</p>

<ul>
<li>Missing index or too many indices (like, 300+ fields for a single row)</li>
<li>Disk errors or other hardware problems -&gt; Check the System event log</li>
<li>A virus scanner interfering with the application -&gt; Try to put the DB file on an exclusion list. Remove the DB-file(s) from the list if the virus scanner is not involved</li>
<li>Bad application design no 1: Too many greedy locks (like exclusive write lock, if a shared read would do)</li>
<li>Bad application design no 2: Keep on reading the same data within milliseconds (in the magnitude of 5'000 unnecessary reads per transaction)</li>
<li>Bad application design no 3: Using a file share, when a database would be preferable</li>
<li>Bad system design no 1: Use RAID-5 storage for files or databases that are written frequently.</li>
<li>Bad system design no 2: Too little memory, CPU too weak, (time-) critical data on a USB-2 attached device, other hardware bottleneck</li>
<li>Poor system maintenance: Backup application has consumed 12 days of CPU time (guess, when the problem started; then guess who got blamed)</li>
<li>Wrong video adapter for the client (on-board Graphics adapter work no so well for CAD applications)</li>
<li>Poor network design (round trip times exceeding 10 msec when 100 microseconds are easy to achieve without investment)</li>
<li>Half-duplex / full-duplex mismatch (manifests itself in serious retransmissions, easy to spot with wireshark)</li>
</ul>

<p>After a day at the Sharkfest conference you will certainly have a list that is five times this long. The majority of these issues is best found with diagnostic tools on the server, like the Performance Monitor. Wireshark will help you in many situations to identify the culprit (server, client, network ...). Getting to the root cause requires other tools, once you have arrived at the server.</p>

<p>I am not sure, if I can help you further without a trace file.</p>

<p>Good hunting</p></div>
            <div class="comment-info" id="comment-58595-info">
                
                
                
                

                

                <span class="comment-age">(08 Jan '17, 09:16)</span>
                <a class="comment-user userinfo" href="/users/416/packethunter">packethunter</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-58541" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-58541-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/58528/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='DDBbPCIv2OciJOpmI8K5T5pti02eF3wL' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/58528/smb2-long-deltatime-applications-crash?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/58528/smb2-long-deltatime-applications-crash?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/smb2/"
            class="tag-link-smb2"
            title="see questions tagged'smb2'using tags"
            rel="tag">smb2</a> <span class="tag-number">&#215;27</span><br/>
        
        <a href="/tags/database/"
            class="tag-link-database"
            title="see questions tagged'database'using tags"
            rel="tag">database</a> <span class="tag-number">&#215;10</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Jan. 4, 2017, 11:55 p.m.">04 Jan '17, 23:55</strong>
    </p>
    <p> 
     	question was seen: <strong>3,894 times</strong>
    </p>
    <p> 
        last updated: <strong title="Jan. 8, 2017, 3:01 p.m.">08 Jan '17, 15:01</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/17911/can-you-create-a-geoip-database-of-your-own-companies-rfc1918-ips">Can you create a GEOIP database of your own companies RFC1918 IP&#39;s?</a>
        </p>
        
        <p>
            <a href="/questions/36124/smb2filename-wildcard-filter">smb2.filename wildcard filter</a>
        </p>
        
        <p>
            <a href="/questions/58970/analysing-performance-issues-with-storage-smb2">Analysing Performance Issues with Storage (SMB2)</a>
        </p>
        
        <p>
            <a href="/questions/18601/sql-database-store">SQL Database Store</a>
        </p>
        
        <p>
            <a href="/questions/36439/domain-controller-sending-smb2-protocol-over-tcp445-congesting-network">Domain controller sending SMB2 protocol over TCP445 congesting network</a>
        </p>
        
        <p>
            <a href="/questions/59445/mysteryprotocol-and-speed-depend-on-how-long-you-wait-to-query">Mystery...protocol and speed depend on how long you wait to query</a>
        </p>
        
        <p>
            <a href="/questions/26676/i-have-installed-wireshark-on-ubuntu-i-need-to-store-all-the-packets-that-wireshark-detects-into-a-database-is-that-possible-and-how">I have installed wireshark on Ubuntu, i need to store all the packets that wireshark detects into a database. is that possible? and how?</a>
        </p>
        
        <p>
            <a href="/questions/37818/smb-troubleshooting-status_lock_not_granted">SMB Troubleshooting STATUS_LOCK_NOT_GRANTED</a>
        </p>
        
        <p>
            <a href="/questions/59864/how-to-filter-out-a-specific-smb-operation">how to filter out a specific SMB operation?</a>
        </p>
        
        <p>
            <a href="/questions/27991/captured-data-into-mysql">Captured data into MySQL</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
