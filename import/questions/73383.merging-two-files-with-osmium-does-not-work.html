<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>[closed] Merging two files with osmium does not work - OSM Help</title>
        <meta name="description" content="So as adviced, I merged several files with osmium, to update the whole database together, instead of doing --append, and after I tried to import the resulting file into the database, I got this error: Processing: Node(1255048k 1457.7k/s) Way(156069k 11.50k/s) Relation(0 0.00/s)result COPY END for pl..." />
        <meta name="keywords" content="osmium,merge,osm2pgsql,error" />
        
        <link rel="canonical" href="https://help.openstreetmap.org/questions/73383/merging-two-files-with-osmium-does-not-work" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/73383/merging-two-files-with-osmium-does-not-work?type=rss">

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <link rel="shortcut icon" href="/upfiles/favicon_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.8.24/themes/base/jquery-ui.min.css" integrity="sha512-Lzjd1ELD6YCIwIU5uaJldvbibV5Fi7HThNZjrwJHALBJRT6q2a6ndgi8TNgcKcUqGsH6bpT7xyTEi8qRzN1ASg==" crossorigin="anonymous" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.4.4/jquery.min.js" integrity="sha512-tcexmm0PBc+jOn9UwbgHVpjZIleEKXif1MCkzgNfVjhXKDxwYumrCOxhZ5tIaXHz2DpEE14hfjFn5J+tpaFSCg==" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js" integrity="sha512-leN1LJ2B5s9cBINeKL5bbT3cQvOebXsezoYGyuMq9oaytpFJgJ1uBOU86lJZObKTFLbMHqP0zFXR/1N6Nnlskw==" crossorigin="anonymous"></script>
        <script type="text/javascript">
        /*<![CDATA[*/
            var i18nLang = 'en';
            var appUrl = 'https://help.openstreetmap.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="OSM Help Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/osm_help_logo_6.png" title="back to home page" alt="OpenStreetMap Help Forum logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        <!-- <a id="nav_ask" href="/questions/ask/" class="special">ask a question</a> -->
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <iframe src="https://duckduckgo.com/search.html?site=help.openstreetmap.org&prefill=Search questions using DuckDuckGo&focus=yes" style="overflow:hidden;margin:0;padding:0;width:408px;height:40px;" frameborder="0"></iframe>
    <!--
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='0boOEGOVLR2vN8vg95RhE9Hvz8UR8fuU' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
    -->
	</div>

	
  <div id="announcement">
      <p>NOTICE: <a href="https://community.openstreetmap.org/t/archiving-of-help-openstreetmap-org-1st-march-2024/108483">help.openstreetmap.org is no longer in use from 1st March 2024</a>. Please use the <a href="https://community.openstreetmap.org/">OpenStreetMap Community Forum</a></p>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/73383/merging-two-files-with-osmium-does-not-work">[closed] Merging two files with osmium does not work</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-73383-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/73383/up/" rel="nofollow"> </a>
<div id="post-73383-score" class="post-score"
    title="current number of votes">
    -4
</div>
<a id="post-73383-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/73383/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/73383/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>So as adviced, I merged several files with osmium, to update the whole database together, instead of doing --append, and after I tried to import the resulting file into the database, I got this error:</p>
<p>Processing: Node(1255048k 1457.7k/s) Way(156069k 11.50k/s) Relation(0 0.00/s)result COPY END for planet_osm_ways failed: ERROR:  duplicate key value violates unique constraint "planet_osm_ways_pkey"
DETAIL:  Key (id)=(23535867) already exists.
CONTEXT:  COPY planet_osm_ways, line 119375
DB copy thread failed: Ending COPY mode</p>
<p>It appears that osmium can't handle overlapping nodes. The worst part of this is that I had to wait 
4 hours to discover this.</p>
<p>The question is, how to merge several pbf files so that overlapping tiles are correctly handled? So that I can finally load the map?</p>
<p>AND WHY RUSSIA IN THE COMPLETE ASIA MAPS IS MISSING HALF ITS TERRITORY (THOUGH IF YOU OPOEN ASIA LISTING ALL ITS TERRITORY IS SHOWED AS BEING INCLUDED)?</p>
<p>P.S. 
@(6 mins ago)SK53</p>
<p>I have no doubt that there must be some magical incantation to make osmosis work. Like in all things.</p>
<p>It's just that a straightforward "osmium merge ./asia-latest.osm.pbf ./northwestern-fed-district-latest.osm.pbf  ./central-fed-district-latest.osm.pbf  -o merged.pbf" yielded and invalid result.</p>
<p>The whole point of question is to find somebody knowledgable enough to identify the issue. It sucks though that people got so sensitive, like it is not the internet anymore.</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/osmium/" class="post-tag tag-link-osmium"
                                        title="see questions tagged 'osmium'" rel="tag">osmium</a>
                                
                                    <a href="/tags/merge/" class="post-tag tag-link-merge"
                                        title="see questions tagged 'merge'" rel="tag">merge</a>
                                
                                    <a href="/tags/osm2pgsql/" class="post-tag tag-link-osm2pgsql"
                                        title="see questions tagged 'osm2pgsql'" rel="tag">osm2pgsql</a>
                                
                                    <a href="/tags/error/" class="post-tag tag-link-error"
                                        title="see questions tagged 'error'" rel="tag">error</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>05 Mar '20, 07:57</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7d9dea8db6c9981b45d28f28bb29f49d?s=32&amp;d=identicon&amp;r=g" alt="kartman1's gravatar image" />
    <p><a href="/users/17942/kartman1">kartman1</a><br/>
    <span class="score" title="38 reputation points">38</span><span title="6 badges"><span class="badge1">&#9679;</span><span class="badgecount">6</span></span><span title="7 badges"><span class="silver">&#9679;</span><span class="badgecount">7</span></span><span title="11 badges"><span class="bronze">&#9679;</span><span class="badgecount">11</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="kartman1 has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/73383/">
                edited
                <strong>05 Mar '20, 11:56</strong>
            </a>
        </p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-73383">
    
        <a name="73386"></a>
        <div class="comment" id="comment-73386">
            <div id="post-73386-score" class="comment-score"></div>
            <div class="comment-text"><p>Yeah, nice minuses. 
Good thing you can just crap on somebody and walk away feeling smart.+
Guess you are too chicken to at least show your name.</p></div>
            <div class="comment-info" id="comment-73386-info">
                
                
                
                

                

                <span class="comment-age">(05 Mar '20, 09:03)</span>
                <a class="comment-user userinfo" href="/users/17942/kartman1">kartman1</a>
                
            </div>
        </div>
    
        <a name="73390"></a>
        <div class="comment" id="comment-73390">
            <div id="post-73390-score" class="comment-score">3</div>
            <div class="comment-text"><p>People here are helpful but they're not going to help someone who keeps shouting and yelling. If you can ask your questions calmly and without pejorative language like "the worst part is", then you're more likely to get answers and not downvotes.</p></div>
            <div class="comment-info" id="comment-73390-info">
                
                
                
                

                

                <span class="comment-age">(05 Mar '20, 10:17)</span>
                <a class="comment-user userinfo" href="/users/5/richard">Richard ♦</a>
                
            </div>
        </div>
    
        <a name="73391"></a>
        <div class="comment" id="comment-73391">
            <div id="post-73391-score" class="comment-score">3</div>
            <div class="comment-text"><p>I can only advise re-evaluating the attitude which you are expressing in your text. I think you have been hinted this before in one of your previous questions. If you like people taking their time for you and getting serious responses it does not help to shout (text in capitals), demand, use words like wtf and OMG, or make totally unrelated and accusing comments to other peoples' questions. There are a lot of folks here who are eager to help and promote the use of OSM but they are doing that for their own good and in their spare time. Stick to the rules/etiquette and you get helped.  </p>

<p>And btw: nobody is hiding anything. You can see the votes in your profile.</p></div>
            <div class="comment-info" id="comment-73391-info">
                
                
                
                

                

                <span class="comment-age">(05 Mar '20, 10:25)</span>
                <a class="comment-user userinfo" href="/users/10133/tzorn">TZorn</a>
                
            </div>
        </div>
    
        <a name="73392"></a>
        <div class="comment" id="comment-73392">
            <div id="post-73392-score" class="comment-score">2</div>
            <div class="comment-text"><p><a href="https://help.openstreetmap.org/users/17942/kartman1">@kartman1</a> : your general tone is not suitable for this forum. Consider that osmosis has been in use for well over a decade for this very purpose: it just might be you that are in error not the programme.</p></div>
            <div class="comment-info" id="comment-73392-info">
                
                
                
                

                

                <span class="comment-age">(05 Mar '20, 11:41)</span>
                <a class="comment-user userinfo" href="/users/647/sk53">SK53 ♦</a>
                
            </div>
        </div>
    
        <a name="73403"></a>
        <div class="comment" id="comment-73403">
            <div id="post-73403-score" class="comment-score"></div>
            <div class="comment-text"><p>(to second what SK53 said earlier about osmosis) <a href="https://github.com/SomeoneElseOSM/SomeoneElse-style/blob/master/update_render.sh">https://github.com/SomeoneElseOSM/SomeoneElse-style/blob/master/update_render.sh</a> is the script that I use to load data for <a href="https://map.atownsend.org.uk/">https://map.atownsend.org.uk/</a> and similar sites.  I've just tested that it doesn't have a problem by using it to load both ends of the ferry route that ends at <a href="https://www.openstreetmap.org/node/4342493001">https://www.openstreetmap.org/node/4342493001</a> together.  That node is in both files, and no error occurs/</p></div>
            <div class="comment-info" id="comment-73403-info">
                
                
                
                

                

                <span class="comment-age">(05 Mar '20, 23:05)</span>
                <a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-73383" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-73383-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            <div class="question-status" style="margin-bottom:15px">
            <h3>
                The question has been closed for the following reason "Too subjective and argumentative" by
                <a href="/users/647/sk53">SK53</a>
                 05 Mar '20, 11:42
            </h3>
            </div>
            
            
        <form id="fmanswer" action="/questions/73383/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='0boOEGOVLR2vN8vg95RhE9Hvz8UR8fuU' />
            <div style="clear:both">
            </div>

            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/73383/merging-two-files-with-osmium-does-not-work?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/73383/merging-two-files-with-osmium-does-not-work?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <p>This was the support site for <a href="http://www.openstreetmap.org/">OpenStreetMap</a>. It has now been replaced by <a href="https://community.openstreetmap.org/">community.osm.org</a>.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/error/"
            class="tag-link-error"
            title="see questions tagged'error'using tags"
            rel="tag">error</a> <span class="tag-number">&#215;293</span><br/>
        
        <a href="/tags/osm2pgsql/"
            class="tag-link-osm2pgsql"
            title="see questions tagged'osm2pgsql'using tags"
            rel="tag">osm2pgsql</a> <span class="tag-number">&#215;263</span><br/>
        
        <a href="/tags/merge/"
            class="tag-link-merge"
            title="see questions tagged'merge'using tags"
            rel="tag">merge</a> <span class="tag-number">&#215;41</span><br/>
        
        <a href="/tags/osmium/"
            class="tag-link-osmium"
            title="see questions tagged'osmium'using tags"
            rel="tag">osmium</a> <span class="tag-number">&#215;38</span><br/>
        
    </p>
    <p>
        question asked: <strong title="March 5, 2020, 7:57 a.m.">05 Mar '20, 07:57</strong>
    </p>
    <p> 
     	question was seen: <strong>2,386 times</strong>
    </p>
    <p> 
        last updated: <strong title="March 5, 2020, 11:05 p.m.">05 Mar '20, 23:05</strong>
    </p>
</div>



<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/76029/error-while-extracting-merged-database-for-nominatim-help">Error while extracting merged database for Nominatim. Help!</a>
        </p>
        
        <p>
            <a href="/questions/11542/mapnik-error-column-generatorsource-does-not-exist">Mapnik error:  column &quot;generator:source&quot; does not exist</a>
        </p>
        
        <p>
            <a href="/questions/19904/merging-osm-files-with-osmosis-and-import-to-postgres-with-osm2pgsql">Merging OSM files with OSMOSIS and import to Postgres with OSM2PGSQL</a>
        </p>
        
        <p>
            <a href="/questions/73414/russian-states-are-missing-in-the-whole-asia-map">Russian states are missing in the whole asia map</a>
        </p>
        
        <p>
            <a href="/questions/60190/osm2plsql-error-importing-osm-file-into-the-database">OSM2PLSQL : Error Importing OSM File into the Database</a>
        </p>
        
        <p>
            <a href="/questions/12516/error-reading-blob-content-segmentation-fault">error reading blob content Segmentation fault</a>
        </p>
        
        <p>
            <a href="/questions/2040/red-error-tiles-in-josm">Red error tiles in JOSM</a>
        </p>
        
        <p>
            <a href="/questions/1301/ajax-issues-with-nominatim">[closed] Ajax issues with nominatim?</a>
        </p>
        
        <p>
            <a href="/questions/816/how-can-i-draw-attention-of-other-osm-users-to-unnamed-and-missing-streets-in-a-city">How can I draw attention of other OSM users to unnamed and missing streets in a city?</a>
        </p>
        
        <p>
            <a href="/questions/2211/error-in-acount-edit">Error in acount edit</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            
            <div id="ground">
                
                    <p>NOTICE: <a href="https://community.openstreetmap.org/t/archiving-of-help-openstreetmap-org-1st-march-2024/108483">help.openstreetmap.org is no longer in use from 1st March 2024</a>. Please use the <a href="https://community.openstreetmap.org/">OpenStreetMap Community Forum</a></p>
                
            </div>
            
        
        

        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
