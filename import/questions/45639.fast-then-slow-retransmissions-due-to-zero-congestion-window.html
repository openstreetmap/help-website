<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Fast then Slow Retransmissions - Due to zero Congestion Window? - Wireshark Q&amp;A</title>
        <meta name="description" content="Hello... We are having a &quot;latency&quot; problem with a particular application, and it raises some questions about Fast Retransmissions and Congestion Window. Here is a typical scenario... Server &#39;A&#39; is sending a 10MB file to server &#39;B&#39;. During the transfer, there is a small amount of packet loss (4 packe..." />
        <meta name="keywords" content="congestion-control,retransmission" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/45639/fast-then-slow-retransmissions-due-to-zero-congestion-window" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/45639/fast-then-slow-retransmissions-due-to-zero-congestion-window?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='bMwZu7iuwjgAPxGhKumV76IHpfc8DUvH' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/45639/fast-then-slow-retransmissions-due-to-zero-congestion-window">Fast then Slow Retransmissions - Due to zero Congestion Window?</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-45639-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/45639/up/" rel="nofollow"> </a>
<div id="post-45639-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-45639-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/45639/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/45639/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>Hello...  We are having a "latency" problem with a particular application, and it raises some questions about Fast Retransmissions and Congestion Window.  Here is a typical scenario...</p>
<p>Server 'A' is sending a 10MB file to server 'B'.  During the transfer, there is a small amount of packet loss (4 packets dropped out of 1700 sent), but the impact is large:  it increases the overall file transfer time from ~0.3 seconds to ~1.7 seconds.</p>
<p>My questions have to do with how the sender retransmits the missing packets.  It seems to take much longer than necessary.  Specifically...</p>
<p>1) 'A' sends about 400 packets before the first of the packet drops occur.  Up to this point, the ACK's from 'B' are keeping up with the Sequence Numbers from 'A'.</p>
<p>2) 'A' continues to send more packets, while 'B' is now sending duplicate ACK's, looking for the dropped packet.  While in this state, 3 more packets are dropped.</p>
<p>3) After 'A' sends several more packets, it reacts to the duplicate ACK's by doing a Fast Retransmission of the 1st dropped packet.  At this point, things seem to be working as they should, and ~290ms have elapsed from the start of the file transfer.</p>
<p>4) After the Fast Retransmission, 'B' sends an ACK that reflects that it has received the first of the dropped packets, but now is looking for the 2nd of the dropped packets.<br>
</p>
<p>5) HERE IS WHERE THE SLOWDOWN BEGINS.  'A' stops sending packets at this point, and 'B' stops sending ACK's.<br>
</p>
<p>6) <em>AFTER 200ms</em>, 'A' Retransmits the 2nd of the dropped packets.  'B' responds by sending an ACK showing it has gotten the 2nd dropped packet, and is now looking for the 3rd dropped packet.</p>
<p>7) Once again, 'A' stops sending packets, and 'B' stops sending ACK's.</p>
<p>8) <em>AFTER 400ms</em>, 'A' Retransmits the 3rd of the dropped packets.  'B' responds by sending an ACK showing it has gotten the 3rd dropped packet, and is now looking for the 4th dropped packet.</p>
<p>9) Once again, 'A' stops sending packets, and 'B' stops sending ACK's.</p>
<p>10) <em>AFTER 800ms</em>, 'A' Retransmits the 4th of the dropped packets.  'B' responds by sending an ACK showing it has gotten the 4th dropped packet.</p>
<p>11) From this point on, 'A' resumes sending packets without delay, and 'B' keeps up by ACK'g those new packets, and the transfer completes about 80 ms later.</p>
<p>The delays above (200ms, 400ms, 800ms) add up to 1.4 seconds.  Only the first Retransmission is a Fast Retransmission.  The remaining Retransmissions apparently wait for the Retransmission Timers to expire.<br>
</p>
<p>So here come my questions...</p>
<p>After the Retransmissions, why does 'A' stop sending packets?  I'm thinking it is because 'A's Congestion Window has shrunk to zero, due to all the Duplicate ACK's.  Is that plausible?  Is there any way to confirm that?</p>
<p>And, is the "retransmission time backoff" (200ms, then 400ms, then 800ms) further evidence of a zero Congestion Window?</p>
<p>If the "stop sending after Retransmitting" behavior is due to a zero Congestion Window, are their TCP parameter settings that we should consider changing?  Perhaps a larger initial Congestion Window?  (These are Red Hat Linux servers.)</p>
<p>Well, I know I have said a mouthful.  I hope one or more of you have had the patience to go through all of it, and have some sage advice :-).</p>
<p>Thx much!</p>
<p>feenyman99</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/congestion-control/" class="post-tag tag-link-congestion-control"
                                        title="see questions tagged 'congestion-control'" rel="tag">congestion-control</a>
                                
                                    <a href="/tags/retransmission/" class="post-tag tag-link-retransmission"
                                        title="see questions tagged 'retransmission'" rel="tag">retransmission</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>04 Sep '15, 21:53</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/ba0791e3a82c059268b46a45ae90989f?s=32&amp;d=identicon&amp;r=g" alt="feenyman99's gravatar image" />
    <p><a href="/users/98/feenyman99">feenyman99</a><br/>
    <span class="score" title="96 reputation points">96</span><span title="22 badges"><span class="badge1">&#9679;</span><span class="badgecount">22</span></span><span title="22 badges"><span class="silver">&#9679;</span><span class="badgecount">22</span></span><span title="26 badges"><span class="bronze">&#9679;</span><span class="badgecount">26</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="feenyman99 has one accepted answer">25&#37;</span>
    </p>
</div>


                            </div>
                            




<div class="comments-container" id="comments-container-45639">
    
        <a name="45640"></a>
        <div class="comment" id="comment-45640">
            <div id="post-45640-score" class="comment-score"></div>
            <div class="comment-text"><p>Hm, how about sharing a pcap on Cloudshark? It's much better to look at a capture than reading tons of descriptions that may be biased.</p>

<p>If you have privacy concerns use TraceWrangler and replace all IP addresses as well as cutting the payload after the TCP layer.</p></div>
            <div class="comment-info" id="comment-45640-info">
                
                
                
                

                

                <span class="comment-age">(05 Sep '15, 00:33)</span>
                <a class="comment-user userinfo" href="/users/145/jasper">Jasper ♦♦</a>
                
            </div>
        </div>
    
        <a name="45740"></a>
        <div class="comment" id="comment-45740">
            <div id="post-45740-score" class="comment-score"></div>
            <div class="comment-text"><p>Jasper,</p>

<p>Your points are very good.  But, even after anonymizing the pcap w/ TraceWrangler, it was deemed a security risk, by my mgmt, to post it on CloudShark.  VERY security sensitive environment.</p>

<p>Can anyone else comment on my description &amp; questions above?</p>

<p>OR...</p>

<p>What other suggestions might there be for me to securely communicate the TCP behavior I'm seeing, in this forum?<br>
</p>

<p>I truly value the collective Wireshar.org expertise, and would love some suggestions/thoughts from the TCP SME's?</p>

<p>Thx,
feenyman99</p></div>
            <div class="comment-info" id="comment-45740-info">
                
                
                
                

                

                <span class="comment-age">(09 Sep '15, 12:40)</span>
                <a class="comment-user userinfo" href="/users/98/feenyman99">feenyman99</a>
                
            </div>
        </div>
    
        <a name="45750"></a>
        <div class="comment" id="comment-45750">
            <div id="post-45750-score" class="comment-score"></div>
            <div class="comment-text"><p>Interesting - can you elaborate on what may still be seen as a security risk? If you cut TCP payloads, replace all IPs and MACs with something else there is nothing specific left unless you're doing really crazy things :-)</p></div>
            <div class="comment-info" id="comment-45750-info">
                
                
                
                

                

                <span class="comment-age">(10 Sep '15, 02:28)</span>
                <a class="comment-user userinfo" href="/users/145/jasper">Jasper ♦♦</a>
                
            </div>
        </div>
    
        <a name="45769"></a>
        <div class="comment" id="comment-45769">
            <div id="post-45769-score" class="comment-score"></div>
            <div class="comment-text"><p>Are there no SACKs in your capture?</p>

<p>I don't work with TCP much but IIRC with SCTP (where SACKs were built into it from the beginning) the SACKs coming from 'B' would (eventually) indicate that all 4 packets were missed so 'A' could Fast Retransmit all 4 packets in a timely manner (without having to wait for the ACK for a retransmitted packet in order to find out that some later packet was also missed--and so on one packet at a time).  I'm not sure if TCP SACK and FR work the same or not...</p>

<p>I'm not sure if your congestion window idea is correct or not; once the missed packet is retransmitted + acked I think the congestion window should open up again (admittedly the cwnd will be smaller thanks to the packet loss but I think it should still be open).</p>

<p>I assume B's advertised window is open during all of this?</p></div>
            <div class="comment-info" id="comment-45769-info">
                
                
                
                

                

                <span class="comment-age">(10 Sep '15, 13:32)</span>
                <a class="comment-user userinfo" href="/users/655/jeffmorriss">JeffMorriss ♦</a>
                
            </div>
        </div>
    
        <a name="45796"></a>
        <div class="comment" id="comment-45796">
            <div id="post-45796-score" class="comment-score"></div>
            <div class="comment-text"><p>Jeff,</p>

<p>Thx for the response...</p>

<p>SACK is NOT enabled between A and B.  (I'll look into enabling it though, thx.)</p>

<p>"once the missed packet is retransmitted + acked I think the congestion window should open up again"...<br>
</p>

<p>Good point!  After the Fast Retransmission and its ACK, if the sender would send just a few more packets, he would receive 3 more ACK's (triple duplicate ACK) for the next missing packet, which would trigger another Fast Retransmission.  But the sender just stops sending after the Fast Retransmission, so he only gets 1 ACK, and then he waits for his retransmission timer to expire.  I'm at a loss on why the sender stops sending, if it's not his Congestion Window.</p>

<p>In answer to your other question, during all of this, the receiver's advertised window is HUGE - just under a megabyte.</p>

<p>feenyman99</p></div>
            <div class="comment-info" id="comment-45796-info">
                
                
                
                

                

                <span class="comment-age">(11 Sep '15, 11:56)</span>
                <a class="comment-user userinfo" href="/users/98/feenyman99">feenyman99</a>
                
            </div>
        </div>
    
        <a name="45797"></a>
        <div class="comment not_top_scorer" id="comment-45797">
            <div id="post-45797-score" class="comment-score"></div>
            <div class="comment-text"><p>Jasper,</p>

<p>You and I agree that removing the IP's, MAC's and payloads eliminates an actual security risk.  But the politics/process of getting approval to put the anonymized trace on Cloudshark makes it too time consuming.</p>

<p>thx,</p>

<p>feenyman99</p></div>
            <div class="comment-info" id="comment-45797-info">
                
                
                
                

                

                <span class="comment-age">(11 Sep '15, 12:17)</span>
                <a class="comment-user userinfo" href="/users/98/feenyman99">feenyman99</a>
                
            </div>
        </div>
    
        <a name="45803"></a>
        <div class="comment not_top_scorer" id="comment-45803">
            <div id="post-45803-score" class="comment-score"></div>
            <div class="comment-text"><p>As you said after fast retransmission,B sends another dup ack but A took 200 ms to retransmit.I think because A only received one dup ack it didnt do fast retransmit.It looks normal and maybe enabling SACK will solve this.</p></div>
            <div class="comment-info" id="comment-45803-info">
                
                
                
                

                

                <span class="comment-age">(11 Sep '15, 22:37)</span>
                <a class="comment-user userinfo" href="/users/4851/kishan-pandey">kishan pandey</a>
                
            </div>
        </div>
    
        <a name="45804"></a>
        <div class="comment not_top_scorer" id="comment-45804">
            <div id="post-45804-score" class="comment-score"></div>
            <div class="comment-text"><p>Feenyman99,</p>

<p>alright, that's something I do understand - those additional non-technical obstacles are hard to get out of the way. No worries; I was just wondering :-)</p>

<p>Cheers,
Jasper</p></div>
            <div class="comment-info" id="comment-45804-info">
                
                
                
                

                

                <span class="comment-age">(12 Sep '15, 04:02)</span>
                <a class="comment-user userinfo" href="/users/145/jasper">Jasper ♦♦</a>
                
            </div>
        </div>
    
        <a name="45805"></a>
        <div class="comment not_top_scorer" id="comment-45805">
            <div id="post-45805-score" class="comment-score"></div>
            <div class="comment-text"><p>Huge receiver window again may point to buffer bloat by the way. The receiver allows the sender to "overload" the infrastructure with a flood of packets it cannot process fast enough. </p>

<p>It's a common misconception that, when that "overload" happens, the speed will still reach the throughput of the slowest link. It doesn't; in most cases I've seen it reaches between 10-40% of the theoretical throughput of the slowest link. This is caused by the long delays of the retransmissions making it through.</p></div>
            <div class="comment-info" id="comment-45805-info">
                
                
                
                

                

                <span class="comment-age">(12 Sep '15, 04:03)</span>
                <a class="comment-user userinfo" href="/users/145/jasper">Jasper ♦♦</a>
                
            </div>
        </div>
    
        <a name="45806"></a>
        <div class="comment not_top_scorer" id="comment-45806">
            <div id="post-45806-score" class="comment-score"></div>
            <div class="comment-text"><p>TCP Reno can not recover from multiple losses in one window without a timeout. Found this link <a href="http://ssfnet.org/Exchange/tcp/test/f14.html">http://ssfnet.org/Exchange/tcp/test/f14.html</a>  Just curious to figure out this behaviour.</p></div>
            <div class="comment-info" id="comment-45806-info">
                
                
                
                

                

                <span class="comment-age">(12 Sep '15, 04:25)</span>
                <a class="comment-user userinfo" href="/users/4851/kishan-pandey">kishan pandey</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-45639" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 10
        </span>
        <a href="#" class="show-all-comments-link">show 5 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-45639-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    2 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/45639/fast-then-slow-retransmissions-due-to-zero-congestion-window?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/45639/fast-then-slow-retransmissions-due-to-zero-congestion-window?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/45639/fast-then-slow-retransmissions-due-to-zero-congestion-window?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/45639/fast-then-slow-retransmissions-due-to-zero-congestion-window?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="45751"></a>
                    <div id="answer-container-45751" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-45751-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/45751/up/" rel="nofollow"> </a>
<div id="post-45751-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-45751-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/45751/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Maybe you're experiencing buffer bloat. If you have different line speeds from sender to receiver, e.g. going from 10G down to 1G, or from 1G down to 100 Mbit you may experience packet loss when the switch/router buffers fill up. Retransmissions are sent but have to "get in line" at the end of the full buffers, so they'll take a while to get through to the client.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/45751/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>10 Sep '15, 02:33</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/c578ba2967741f25aebd6afef702f432?s=32&amp;d=identicon&amp;r=g" alt="Jasper's gravatar image" />
    <p><a href="/users/145/jasper">Jasper ♦♦</a><br/>
    <span class="score" title="23806 reputation points"><span class="">23.8k</span></span><span title="5 badges"><span class="badge1">&#9679;</span><span class="badgecount">5</span></span><span title="51 badges"><span class="silver">&#9679;</span><span class="badgecount">51</span></span><span title="284 badges"><span class="bronze">&#9679;</span><span class="badgecount">284</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Jasper has 263 accepted answers">18&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-45751">
    
        <a name="45901"></a>
        <div class="comment" id="comment-45901">
            <div id="post-45901-score" class="comment-score"></div>
            <div class="comment-text"><p>Sorry for the delay.  Lots going on...</p>

<p>The sender and receiver are both on the same switch, in fact, and are both on 1Gbps ports.  But, thanx for the suggestion - all of this is very helpful!</p></div>
            <div class="comment-info" id="comment-45901-info">
                
                
                
                

                

                <span class="comment-age">(17 Sep '15, 00:29)</span>
                <a class="comment-user userinfo" href="/users/98/feenyman99">feenyman99</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-45751" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-45751-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="45810"></a>
                    <div id="answer-container-45810" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-45810-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/45810/up/" rel="nofollow"> </a>
<div id="post-45810-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-45810-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/45810/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>If you have access to the servers, you can look at live statistics e.g. cwnd, ssthresh ... using:</p>
<p><code>watch -n1 "ss -i dst X.X.X.X"<code></code></code></p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/45810/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>12 Sep '15, 06:42</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/721b9692d2a30fc3b386b7fae9a44220?s=32&amp;d=identicon&amp;r=g" alt="Roland's gravatar image" />
    <p><a href="/users/6889/roland">Roland</a><br/>
    <span class="score" title="764 reputation points">764</span><span title="2 badges"><span class="badge1">&#9679;</span><span class="badgecount">2</span></span><span title="4 badges"><span class="silver">&#9679;</span><span class="badgecount">4</span></span><span title="15 badges"><span class="bronze">&#9679;</span><span class="badgecount">15</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Roland has 9 accepted answers">13&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-45810">
    
        <a name="45902"></a>
        <div class="comment" id="comment-45902">
            <div id="post-45902-score" class="comment-score"></div>
            <div class="comment-text"><p>Roland - Great info.  This will be very telling.</p>

<p>I have requested that this query be executed the next time we test, so we can rule in/out a zero CWND.</p></div>
            <div class="comment-info" id="comment-45902-info">
                
                
                
                

                

                <span class="comment-age">(17 Sep '15, 00:32)</span>
                <a class="comment-user userinfo" href="/users/98/feenyman99">feenyman99</a>
                
            </div>
        </div>
    
        <a name="46064"></a>
        <div class="comment" id="comment-46064">
            <div id="post-46064-score" class="comment-score"></div>
            <div class="comment-text"><p>Roland,</p>

<p>I am using the ss command and loving it.  I have a "while true" loop that issues ss every 100ms, and records the values to a file.  I can see cwnd's initial value, then watch it grow, and then see it shrink when a Dupe ACK occurs.  Very cool!</p>

<p>But, I have a question (of course)...</p>

<p>Reading RFC 5681, it seems clear to me that cwnd, as used by TCP, is measured in bytes...</p>

<p>"...At any given time, a TCP MUST NOT send data with a sequence number higher than the sum of the highest acknowledged sequence number and the minimum of cwnd and rwnd."</p>

<p>However, the values returned by the ss command look to be specifying the number of segments that can be sent.  (It starts at 4, then increases over time to 300+).</p>

<p>Also, the TCP Tuning articles I have seen describe setting the initial congestion window to some number of segments (not bytes).</p>

<p>Am I correct in inferring that, although TCP calculates it as a number of bytes, we humans describe it as a number of segments, when we configure it or display it?</p>

<p>thx,
feenyman99</p></div>
            <div class="comment-info" id="comment-46064-info">
                
                
                
                

                

                <span class="comment-age">(22 Sep '15, 11:45)</span>
                <a class="comment-user userinfo" href="/users/98/feenyman99">feenyman99</a>
                
            </div>
        </div>
    
        <a name="46065"></a>
        <div class="comment" id="comment-46065">
            <div id="post-46065-score" class="comment-score"></div>
            <div class="comment-text"><p>The ss command displays the value of CWND in segments. 1 segment = MSS bytes. The MSS size can vary so it makes more sense to use segments.</p></div>
            <div class="comment-info" id="comment-46065-info">
                
                
                
                

                

                <span class="comment-age">(22 Sep '15, 12:22)</span>
                <a class="comment-user userinfo" href="/users/6889/roland">Roland</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-45810" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-45810-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/45639/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='bMwZu7iuwjgAPxGhKumV76IHpfc8DUvH' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/45639/fast-then-slow-retransmissions-due-to-zero-congestion-window?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/45639/fast-then-slow-retransmissions-due-to-zero-congestion-window?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/retransmission/"
            class="tag-link-retransmission"
            title="see questions tagged'retransmission'using tags"
            rel="tag">retransmission</a> <span class="tag-number">&#215;56</span><br/>
        
        <a href="/tags/congestion-control/"
            class="tag-link-congestion-control"
            title="see questions tagged'congestion-control'using tags"
            rel="tag">congestion-control</a> <span class="tag-number">&#215;8</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Sept. 4, 2015, 9:53 p.m.">04 Sep '15, 21:53</strong>
    </p>
    <p> 
     	question was seen: <strong>2,269 times</strong>
    </p>
    <p> 
        last updated: <strong title="Sept. 22, 2015, 12:22 p.m.">22 Sep '15, 12:22</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/6706/basic-question-on-tcp-function">basic question on tcp function</a>
        </p>
        
        <p>
            <a href="/questions/24429/diagnosing-tcp-retransmission-with-ever-increasing-delays">Diagnosing TCP Retransmission with ever increasing delays</a>
        </p>
        
        <p>
            <a href="/questions/37928/why-single-ssl-packet-contains-multiple-app_data-sections">why single SSL packet contains multiple app_data sections</a>
        </p>
        
        <p>
            <a href="/questions/54591/transmitting-a-spreadsheet-of-wi-fi-mac-addresses-for-bulk-validation-testing">Transmitting a spreadsheet of Wi-Fi MAC addresses for bulk validation testing</a>
        </p>
        
        <p>
            <a href="/questions/8490/tcp-retransmission-is-detected-instead-of-a-duplicate-ip-packet">TCP Retransmission is detected instead of a duplicate ip packet</a>
        </p>
        
        <p>
            <a href="/questions/24701/handling-tcp-retransmission-in-a-wireshark-dissector">Handling TCP Retransmission in a Wireshark Dissector</a>
        </p>
        
        <p>
            <a href="/questions/39185/tcp-ack-and-retransmission">tcp ack and retransmission</a>
        </p>
        
        <p>
            <a href="/questions/54959/too-many-retransmission-packets-defect-ok-or-bad">Too many retransmission packets defect - ok or bad?</a>
        </p>
        
        <p>
            <a href="/questions/9765/how-to-know-the-maximum-number-of-tcp-retransmission">how to know the maximum number of TCP retransmission?</a>
        </p>
        
        <p>
            <a href="/questions/25609/how-does-wireshark-detect-tcp-retransmissions">How does wireshark detect TCP retransmissions?</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
