<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Tshark stops working at random times - Wireshark Q&amp;A</title>
        <meta name="description" content="Hi All, First off, i am running Kali 2. on a Raspberry Pi 2b with a TP-Link TL-WN722N USB WiFi Dongle. Running tshark -v displays version 1.12.6 and running on Linux 3.18.16v7 with locale, with libpcap version 1.6.2 with libz 1.2.8. I hope that helps... So on to the problem. I ( myself and a buddy )..." />
        <meta name="keywords" content="out-of-memory,crash,tshark,linux" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/53501/tshark-stops-working-at-random-times" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/53501/tshark-stops-working-at-random-times?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='ufNUM8dt2tHZ4aUqMZOY8rVpSCRP6JyC' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/53501/tshark-stops-working-at-random-times">Tshark stops working at random times</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-53501-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/53501/up/" rel="nofollow"> </a>
<div id="post-53501-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-53501-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/53501/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/53501/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>Hi All,</p>
<p>First off, i am running Kali 2. on a Raspberry Pi 2b with a TP-Link TL-WN722N USB WiFi Dongle.</p>
<p>Running tshark -v displays version 1.12.6 and running on Linux 3.18.16v7 with locale, with libpcap version 1.6.2 with libz 1.2.8.</p>
<p>I hope that helps...</p>
<p>So on to the problem.</p>
<p>I ( myself and a buddy ) are trying to use the RPI to capture the number of wireless devices in a street for a study we are working on. Before anyone asks... yes i do have permission :-)</p>
<p>The RPI works great, it feeds the data back to a mini web portal we had written that displays the data graphically and on first boot up everything works great. ** disclaimer... We had quite a bit of help setting this up and unfortunately the guy helping has since moved on and no longer contactable.. hence the question here and also why parts of it may come across as being a noob... which we are to using Tshark / Wireshark.</p>
<p>After random periods the RPI stops sending data, we can log into it, ping the web server plus lots of other web related sites, the memory card is only around 30 % full... ( 16Gb in total ) and a memory check suggests there is plenty available... in essence everything seems fine.</p>
<p>If we stop and start Tshark service it makes no difference, we still do not receive any data. The only way to resolve it is to reboot the RPI. </p>
<p>Although i can not prove it i think the issue is related to the amount of data the RPI is receiving / sending. Reason being is throughout a night time the RPI lasts hours.. however on a normal day around lunch time when the street is at its busiest the data transmit stops and we have to reboot.</p>
<p>The command line we are running is as follows</p>
<pre><code>/usr/bin/nohup /usr/bin/tshark -l -I -i wlan1 -T fields -e frame.time_epoch -e wlan.sa -e radiotap.dbm_antsignal -e wlan_mgt.ssid -E occurrence=f type mgt subtype probe-req | /usr/bin/php /opt/dronecapture/tsharkparser.php&amp;
</code></pre>
<p>The tsharkparser.php file the command line refers to is as follows</p>
<pre><code>&lt;?php
/*
This script parses the output from tshark command line

load the configuration file
*/
require('config.php');

/*
maybe we need to do some experimenting with this option.....?
*/
//stream_set_blocking(STDIN, 0);

while (false !== ($line = fgets(STDIN))) {
    $fields = preg_split('/\s+/', $line);

    /*
    we only process the data under certain conditions
    - valid mac address is submitted
    - transmission method is set to "rest"
    */
    if(filter_var($fields[1], FILTER_VALIDATE_MAC)) {
        /*
        POST a json message to a REST API
        - first assign the values collected from the probe request, to the vars
        */
        $ts     = $fields[0];
        $mac    = $fields[1];
        $rssi   = $fields[2];

        /*
        calculate the hash of the data to be submitted
        */
        $string_to_hash = $ts . '|' . $mac . '|' . $rssi . '|' . $drone_id . '|' . $public_key . '|' . $secret_key;
        $hash_of_string = sha1($string_to_hash);

        /*
        construct the json POST data to be submitted
        */
        $raw_data = array("ts" =&gt; $ts, "mac" =&gt; $mac, "rssi" =&gt; $rssi, "drone_id" =&gt; $drone_id, "public_key" =&gt; $public_key, "hash" =&gt; $hash_of_string);
        $data_string = json_encode($raw_data);

        $ch = curl_init($probe_api_url);
        curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
        curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array(
            'Content-Type: application/json',
            'Content-Length: ' . strlen($data_string))
        );

        $result = curl_exec($ch);
    }
}
?&gt;
</code></pre>
<p>I have read the articles re memory consumption ( <a href="https://wiki.wireshark.org/KnownBugs/OutOfMemory">https://wiki.wireshark.org/KnownBugs/OutOfMemory</a> )and possibly switching to "dumpcap" but i have also read several questions on here from people with similar issues saying it makes no difference. Obviously as we are using an RPI i have no way to increase the physical RAM.</p>
<p>If anyone can offer any suggestions on what to do... at the moment i'm not even sure how to / if i can create a log file to find out whats happening i would really appreciate it.</p>
<p>In order to finish my study i need the RPI to run for around 4 days.. preferably a full week. At the moment i am having to reboot it 2 -3 times a day :-(</p>
<p>Many Thanks and apologies for such a long post.</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/out-of-memory/" class="post-tag tag-link-out-of-memory"
                                        title="see questions tagged 'out-of-memory'" rel="tag">out-of-memory</a>
                                
                                    <a href="/tags/crash/" class="post-tag tag-link-crash"
                                        title="see questions tagged 'crash'" rel="tag">crash</a>
                                
                                    <a href="/tags/tshark/" class="post-tag tag-link-tshark"
                                        title="see questions tagged 'tshark'" rel="tag">tshark</a>
                                
                                    <a href="/tags/linux/" class="post-tag tag-link-linux"
                                        title="see questions tagged 'linux'" rel="tag">linux</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>16 Jun '16, 12:11</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/73514d77c921e9443a1a3d4f425c2301?s=32&amp;d=identicon&amp;r=g" alt="Pigsfoot's gravatar image" />
    <p><a href="/users/24520/pigsfoot">Pigsfoot</a><br/>
    <span class="score" title="6 reputation points">6</span><span title="2 badges"><span class="badge1">&#9679;</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">&#9679;</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">&#9679;</span><span class="badgecount">4</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Pigsfoot has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/53501/">
                edited
                <strong>16 Jun '16, 13:01</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/d2a7e24ca66604c749c7c88c1da8ff78?s=32&amp;d=identicon&amp;r=g" alt="grahamb's gravatar image" />
            <p><a href="/users/1225/grahamb">grahamb ♦</a><br/>
            <span class="score" title="19834 reputation points"><span class="">19.8k</span></span><span title="3 badges"><span class="badge1">&#9679;</span><span class="badgecount">3</span></span><span title="30 badges"><span class="silver">&#9679;</span><span class="badgecount">30</span></span><span title="206 badges"><span class="bronze">&#9679;</span><span class="badgecount">206</span></span></p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-53501">
    
        <a name="53508"></a>
        <div class="comment" id="comment-53508">
            <div id="post-53508-score" class="comment-score">1</div>
            <div class="comment-text"><p>Okay, a lot of context, but what you basically say is that you loose reception on your wireless interface, which you can only recover by rebooting the Pi.</p>

<p>So, have a closer look at the wireless interface. Does the driver give out? Is it modular? Can you reload it?</p></div>
            <div class="comment-info" id="comment-53508-info">
                
                
                
                

                

                <span class="comment-age">(16 Jun '16, 14:59)</span>
                <a class="comment-user userinfo" href="/users/4/jaap">Jaap ♦</a>
                
            </div>
        </div>
    
        <a name="53509"></a>
        <div class="comment" id="comment-53509">
            <div id="post-53509-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi thanks for the reply. I can't be 100% certain but I don't think the issue is related to the adaptor or loosing reception. When we stop receiving data ... I. E. The rpi stops sending data to to our Web portal I have dropped and brought up the wlan interface and it makes no difference.</p>

<p>I have read more about simular problems and it's seems the issue that tshark may not be the right tool to use for long term scans when handling large amounts of data.</p>

<p>When we have managed to collect a good day of data, with several reboots we are seeing around 20,000 individual mac addresses... some of which multiple time as they go back and forth. As you can see from the script we run we send this data in real time to our Web server with 3 main segments. Mac address, rssi and a time stamp.</p>

<p>I hope this provides some more insight.</p>

<p>Thanks</p></div>
            <div class="comment-info" id="comment-53509-info">
                
                
                
                

                

                <span class="comment-age">(16 Jun '16, 15:16)</span>
                <a class="comment-user userinfo" href="/users/24520/pigsfoot">Pigsfoot</a>
                
            </div>
        </div>
    
        <a name="53510"></a>
        <div class="comment" id="comment-53510">
            <div id="post-53510-score" class="comment-score"></div>
            <div class="comment-text"><blockquote>
<blockquote>
<p>TP-Link TL-WN722N USB WiFi Dongle</p>
</blockquote>
</blockquote>

<p>I have several of these on an embedded Linux system to sniff channels 1/6/11, with the goal of 24/7 capture on a ring buffer with dumpcap.   However, they routinely hang.  Only recovery for me is to power cycle the device or remove/reinsert the USB adapter.  However, I reboot as I also feed the data into a network manager and that likes to have the interface index constant, and resetting the USB device will index the SNMP interface index.  So reboot it is...</p>

<p>I found Intel-based devices to have slightly better drivers than the ARM stuff.</p>

<p>For me, I put the interface into monitor mode then monitor the number of packets with ifconfig.  Run ifconfig a couple of times and when the Rx packets does not change, it's hung.  I wrote a shell script to automate this, but then my box can reset a lot.  So I live without the data if it hangs and only use it as a best-effort back up source :(</p></div>
            <div class="comment-info" id="comment-53510-info">
                
                
                
                

                

                <span class="comment-age">(16 Jun '16, 15:27)</span>
                <a class="comment-user userinfo" href="/users/112/bob-jones">Bob Jones</a>
                
            </div>
        </div>
    
        <a name="53515"></a>
        <div class="comment" id="comment-53515">
            <div id="post-53515-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/24520/pigsfoot">@Pigsfoot</a>: You're jumping to conclusions. ifdown/ifup doesn't help if the device or driver is in trouble. These are hardware/software underneath the interface you bring down and up. It won't necessary fix them.</p>

<p>Indeed dissection engines are prone to Out-Of-Memory (OOM) because they keep state. Using -1 option should alleviate that. If this is indeed a problem then should be able to pick up on that by monitoring memory usage during operations at daytime.</p>

<p>Setup the kernel OOM killer. That would kill tshark if it consumes ever more memory. </p>

<p>If it's tshark causing problems you should simply change your script. Have it relaunch every hour, stopping it from causing trouble. </p>

<p>So there are may options available, if your analysis is right.</p></div>
            <div class="comment-info" id="comment-53515-info">
                
                
                
                

                

                <span class="comment-age">(16 Jun '16, 22:55)</span>
                <a class="comment-user userinfo" href="/users/4/jaap">Jaap ♦</a>
                
            </div>
        </div>
    
        <a name="53520"></a>
        <div class="comment" id="comment-53520">
            <div id="post-53520-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/4/jaap">@Jaap</a>: Thanks for the feedback, much appreciated. Thinking about what your saying does make some sense because when the web portal reports its not receiving any traffic i have logged into the RPI as per my original comment, checked the memory use and it would appear that i haven't ran out, i also restarted my capture script which didn't make any difference which kind of suggests it's not a memory issue at all.</p>

<p>I will however add the -1 option to my command line and also as suggested set up the OOM killer kernel just to see if it helps. I still think the issue is attributed to the amount of traffic being processed because on a quiet day / night time we have no issues, i just need to work out which bit is causing the problem :-). On the pus side the issue happens all the time during the day so i will know if its fixed it or not pretty quickly. If it continues to happen i will have to look into trying to do something with the wlan.... any suggestions ?</p>

<p>Thanks</p></div>
            <div class="comment-info" id="comment-53520-info">
                
                
                
                

                

                <span class="comment-age">(17 Jun '16, 01:26)</span>
                <a class="comment-user userinfo" href="/users/24520/pigsfoot">Pigsfoot</a>
                
            </div>
        </div>
    
        <a name="53521"></a>
        <div class="comment not_top_scorer" id="comment-53521">
            <div id="post-53521-score" class="comment-score"></div>
            <div class="comment-text"><p>The RPI has actually stopped working this morning so i have just ran the following and and received the displayed responses</p>

<pre><code><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="63110c0c172327110c0d062a275150">[email&#160;protected]</a>:~# free -m
             total       used       free     shared    buffers     cached
Mem:           744        245        499          5          9        168
-/+ buffers/cache:         67        677
Swap:            0          0          0

ps aux | grep tshark
root       362  0.0  7.1  97632 54544 ?        S    Jun16   0:17 /usr/bin/tshark -l -I -i wlan3 -T fields -e frame.time_epoch -e wlan.sa -e radiotap.dbm_antsignal -e wlan_mgt.ssid -E occurrence f type mgt subtype probe-req
root       363  0.0  1.7  37436 13076 ?        S    Jun16   0:18 /usr/bin/php /opt/dronecapture/tsharkparser.php
root      2823  0.0  0.0   2060   548 pts/0    S+   08:08   0:00 grep tshark
</code></pre>

<p>Also</p>

<pre><code>systemctl status dronecapture.service -l
â dronecapture.service - Probe Request capture tool
Loaded: loaded (/lib/systemd/system/dronecapture.service; enabled)
Active: active (running) since Thu 2016-06-16 19:31:18 UTC; 12h ago
Process: 351 ExecStart=/opt/dronecapture/php-tshark.sh (code=exited, status=0/SUCCESS)
CGroup: /system.slice/dronecapture.service
       ââ362 /usr/bin/tshark -l -I -i wlan3 -T fields -e frame.time_epoch -e wlan.sa -e radiotap.dbm_antsignal -e wlan_mgt.ssid -E occurrence f type mgt subtype probe-req
       ââ363 /usr/bin/php /opt/dronecapture/tsharkparser.php
       ââ418 /usr/bin/dumpcap -n -i wlan3 -f type mgt subtype probe-req -I -Z none

Jun 16 19:31:18 DroneID23 systemd[1]: Started Probe Request capture tool.
Jun 16 19:31:23 DroneID23 php-tshark.sh[351]: tshark: Lua: Error during loading:
Jun 16 19:31:23 DroneID23 php-tshark.sh[351]: [string "/usr/share/wireshark/init.lua"]:46: dofile has been disabled due to running Wireshark as superuser. See     <a href="http://wiki.wireshark.org/CaptureSetup/CapturePrivileges">http://wiki.wireshark.org/CaptureSetup/CapturePrivileges</a> for help in running Wireshark as an unprivileged user.
Jun 16 19:31:24 DroneID23 php-tshark.sh[351]: Running as user "root" and group "root". This could be dangerous.
Jun 16 19:31:25 DroneID23 php-tshark.sh[351]: Capturing on 'wlan3'
</code></pre>

<p>Finally i ran - "systemctl restart dronecapture.service" which restarts the capture service and unfortunately it made no difference. The only way to bring the RPI back online is to reboot it.</p></div>
            <div class="comment-info" id="comment-53521-info">
                
                
                
                

                

                <span class="comment-age">(17 Jun '16, 01:27)</span>
                <a class="comment-user userinfo" href="/users/24520/pigsfoot">Pigsfoot</a>
                
            </div>
        </div>
    
        <a name="53525"></a>
        <div class="comment not_top_scorer" id="comment-53525">
            <div id="post-53525-score" class="comment-score"></div>
            <div class="comment-text"><p>OKe, more post-mortem to do. Once the system fails, don't simply restart dronecapture, start looking at the wlan3 device. Look at system logs, see if anything pops. You could already look into the driver, see what options it provides to investigate further, and what's published on this combination on the PI2. </p>

<p>PS: Did you overclock this Pi? Might want to be careful with that as well.</p></div>
            <div class="comment-info" id="comment-53525-info">
                
                
                
                

                

                <span class="comment-age">(17 Jun '16, 04:55)</span>
                <a class="comment-user userinfo" href="/users/4/jaap">Jaap ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-53501" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 7
        </span>
        <a href="#" class="show-all-comments-link">show 2 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-53501-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    2 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/53501/tshark-stops-working-at-random-times?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/53501/tshark-stops-working-at-random-times?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/53501/tshark-stops-working-at-random-times?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/53501/tshark-stops-working-at-random-times?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="53523"></a>
                    <div id="answer-container-53523" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-53523-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/53523/up/" rel="nofollow"> </a>
<div id="post-53523-score" class="post-score"
    title="current number of votes">
    1
</div>
<a id="post-53523-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/53523/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>I think your system is failing due to hardware issues.  It is likely throughput dependent: we can guess that whatever 'event' or specific scenario is causing the USB wifi adapter to fail is more likely to occur when more traffic is passed.  I also recommend using tcpdump or dumpcap as the long term traffic collector, not one of the *sharks.</p>
<p>I have had better luck with these USB devices to do what you want:</p>
<p>Bus 002 Device 004: ID 0846:9012 NetGear, Inc. WNDA4100 802.11abgn 3x3:3 [Ralink RT3573]</p>
<p>In addition, they are more capable than the TP Link, but they cost more - I recall about $US40 on amazon.com, compared to $US13 for the TPLink.  Make sure you use a recent kernel to get a good Ralink driver, but I don't know how that will work with the ARM chip.  I moved away from ARM for these very reasons - to improve the quality of the Wifi captures on Linux.  Note that these still crash, but I can get a couple of weeks out of them, instead of hours to days for the TP Link.</p>
<p>Example of system with Ralink wifi chips for packet capture:</p>
<p><img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/RemoteCapture_-_Copy.jpg"></p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/53523/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>17 Jun '16, 02:57</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/0a47ef51dd9c9996d194a4983295f5a4?s=32&amp;d=identicon&amp;r=g" alt="Bob%20Jones's gravatar image" />
    <p><a href="/users/112/bob-jones">Bob Jones</a><br/>
    <span class="score" title="1014 reputation points"><span class="">1.0k</span></span><span title="2 badges"><span class="badge1">&#9679;</span><span class="badgecount">2</span></span><span title="5 badges"><span class="silver">&#9679;</span><span class="badgecount">5</span></span><span title="15 badges"><span class="bronze">&#9679;</span><span class="badgecount">15</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Bob Jones has 19 accepted answers">21&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/53523/">
                edited
                <strong>17 Jun '16, 05:15</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-53523">
    
        <a name="53524"></a>
        <div class="comment" id="comment-53524">
            <div id="post-53524-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi Bob, That's very helpful thank you. So are you suggesting do away with the RPI and move to an Intel platform? I will get one of the WiFi adapters suggested and try that to see what difference it makes on the RPI.</p>

<p>I have had a look at a site i use and they offer a few Intel based alternatives to the RPI - <a href="http://uk.farnell.com/webapp/wcs/stores/servlet/Search?catalogId=15001&amp;langId=44&amp;storeId=10151&amp;categoryId=700000005178&amp;showResults=true&amp;aa=true&amp;sf=731&amp;pf=110181927">http://uk.farnell.com/webapp/wcs/stores/servlet/Search?catalogId=15001&amp;langId=44&amp;storeId=10151&amp;categoryId=700000005178&amp;showResults=true&amp;aa=true&amp;sf=731&amp;pf=110181927</a></p>

<p>Is there one there you would recommend or do you have a preferred platform you have tried?</p>

<p>One other question... if the issue is hardware related would having a script to drop and bring back up the wlan adapter on a regular basis make any difference? If not is there anything i can do short term while i try a different hardware platform.</p>

<p>Thanks</p></div>
            <div class="comment-info" id="comment-53524-info">
                
                
                
                

                

                <span class="comment-age">(17 Jun '16, 04:49)</span>
                <a class="comment-user userinfo" href="/users/24520/pigsfoot">Pigsfoot</a>
                
            </div>
        </div>
    
        <a name="53526"></a>
        <div class="comment" id="comment-53526">
            <div id="post-53526-score" class="comment-score"></div>
            <div class="comment-text"><blockquote>
<blockquote>
<p>Is there one there you would recommend or do you have a preferred platform you have tried?</p>
</blockquote>
</blockquote>

<p>I have tried the Intel NUC and the Compulab stuff.  I currently use the Compulab gear for 'spot' wifi captures with three+ USB NICs and have these distributed around the globe where I need them.  I would attach a picture if I could, but I cannot to a comment.</p>

<p>I have had mixed success with cycling the adapter - I tried:</p>

<p>ifconfig wlanX down
ifconfig wlanx up</p>

<p>and sometimes it works, but not always.  There are several cases:</p>

<ol>
<li>No effect</li>
<li>Device comes back in monitor mode, but not in promiscuous mode anymore (i.e. only see broadcast/multicast now, until reboot)</li>
<li>Comes back fully until it crashes again...</li>
</ol>

<p>Result 2 is worst case - looks like it is up but it really isn't.</p>

<p>So I automated the checking of the adapters through ifconfig with cron/bash script but only reliable way to recover is a reboot.  However, this was not true for the TP Link: a reboot did not always correct the issue - on some occasions I need to power cycle the USB device so I need to pull it from the socket, or kill power to the USB interface somehow.  I would bet different systems handle power to usb bus differently.</p>

<p>I have Raspberry PIs, Udoo boards, Beagle boards.  All cool, all cheap, but to get latest kernel with latest WiFi updates to improve stability, I moved to i386 embedded devices.  YMMV.</p></div>
            <div class="comment-info" id="comment-53526-info">
                
                
                
                

                

                <span class="comment-age">(17 Jun '16, 05:08)</span>
                <a class="comment-user userinfo" href="/users/112/bob-jones">Bob Jones</a>
                
            </div>
        </div>
    
        <a name="53527"></a>
        <div class="comment" id="comment-53527">
            <div id="post-53527-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/112/bob-jones">@Bob Jones</a>, the problem with pictures in comments is not so much how to post them but that in Comments, they are not auto-sized like in Questions and Answers so if you post them in the original (high) resolution, they make the whole page look ugly.</p>

<p>But you can edit your original answer and add the picture there. Or (pssst!) you can post another Answer with a picture in it and then convert it into a comment to another Answer - your karma should already allow that at least for your own Answers, but please first check whether the option "more -&gt; convert to comment" is available for your existing Answer.</p></div>
            <div class="comment-info" id="comment-53527-info">
                
                
                
                

                

                <span class="comment-age">(17 Jun '16, 05:44)</span>
                <a class="comment-user userinfo" href="/users/19586/sindy">sindy</a>
                
            </div>
        </div>
    
        <a name="53531"></a>
        <div class="comment" id="comment-53531">
            <div id="post-53531-score" class="comment-score"></div>
            <div class="comment-text"><p>First things first... awesome forum... getting some great help on here. Thanks guys.</p>

<p>To start off with.. Nope the RPI 2b is straight out of the box.. not overclocked at all.</p>

<p>The RPI has just stopped working again so before a reboot i ran a couple of commands</p>

<p>This is where i start to suffer... I'm not really sure what to look for or how to get the Wlan logs...</p>

<p>I have just ran the following ... not sure if it is of any help
</p>

<pre><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2654494952666254494843">[email&#160;protected]</a>:~# dmesg | grep -i wlan3
[    5.539336] ath9k_htc 1-1.3:1.0 wlan3: renamed from wlan0
[    5.608374] systemd-udevd[160]: renamed network interface wlan0 to wlan3
[   21.144337] device wlan3 entered promiscuous mode<p></p>
<p>[    2.273783] usb 1-1.3: Product: USB2.0 WLAN
[    2.275528] usb 1-1.3: Manufacturer: ATHEROS
[    2.277204] usb 1-1.3: SerialNumber: 12345
[    4.513412] usb 1-1.3: ath9k_htc: Firmware htc_9271.fw requested
[    4.515626] usbcore: registered new interface driver ath9k_htc
[    4.818512] usb 1-1.3: ath9k_htc: Transferred FW: htc_9271.fw, size: 50980<code></code></p><code>
<p>Also, :- ifconfig shows this
</p><pre>wlan3     Link encap:UNSPEC  HWaddr F4-F2-6D-13-EC-41-30-30-00-00-00-00-00-00-00-00
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:4945759 errors:0 dropped:8 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:1181209635 (1.1 GiB)  TX bytes:0 (0.0 B)<code><p></p></code></pre></code></pre></div>
            <div class="comment-info" id="comment-53531-info">
                
                
                
                

                

                <span class="comment-age">(17 Jun '16, 06:33)</span>
                <a class="comment-user userinfo" href="/users/24520/pigsfoot">Pigsfoot</a>
                
            </div>
        </div>
    
        <a name="53532"></a>
        <div class="comment not_top_scorer" id="comment-53532">
            <div id="post-53532-score" class="comment-score"></div>
            <div class="comment-text"><p>I also ran this</p>

<pre><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="65170a0a112521170a0b00">[email&#160;protected]</a>:~# dmesg | grep -i usb
[    0.285161] usbcore: registered new interface driver usbfs
[    0.285293] usbcore: registered new interface driver hub
[    0.285461] usbcore: registered new device driver usb
[    0.414090] usbcore: registered new interface driver smsc95xx
[    0.843470] dwc_otg bcm2708_usb: DWC OTG Controller
[    0.845027] dwc_otg bcm2708_usb: new USB bus registered, assigned bus number 1
[    0.846612] dwc_otg bcm2708_usb: irq 32, io mem 0x00000000
[    0.851416] usb usb1: New USB device found, idVendor=1d6b, idProduct=0002
[    0.852954] usb usb1: New USB device strings: Mfr=3, Product=2, SerialNumber=1
[    0.854479] usb usb1: Product: DWC OTG Controller
[    0.855967] usb usb1: Manufacturer: Linux 3.18.16-v7 dwc_otg_hcd
[    0.857493] usb usb1: SerialNumber: bcm2708_usb
[    0.859878] hub 1-0:1.0: USB hub found
[    0.863722] usbcore: registered new interface driver usb-storage
[    0.917692] usbcore: registered new interface driver usbhid
[    0.919294] usbhid: USB HID core driver
[    1.257587] usb 1-1: new high-speed USB device number 2 using dwc_otg
[    1.457889] usb 1-1: New USB device found, idVendor=0424, idProduct=9514
[    1.459777] usb 1-1: New USB device strings: Mfr=0, Product=0, SerialNumber=0
[    1.462411] hub 1-1:1.0: USB hub found
[    1.737681] usb 1-1.1: new high-speed USB device number 3 using dwc_otg
[    1.840097] usb 1-1.1: New USB device found, idVendor=0424, idProduct=ec00
[    1.840110] usb 1-1.1: New USB device strings: Mfr=0, Product=0, SerialNumber=0
[    1.911682] smsc95xx 1-1.1:1.0 eth0: register 'smsc95xx' at usb-bcm2708_usb-1.1, smsc95xx USB 2.0 Ethernet, b8:27:eb:6d:19:c4
[    2.147844] usb 1-1.3: new high-speed USB device number 4 using dwc_otg
[    2.268382] usb 1-1.3: New USB device found, idVendor=0cf3, idProduct=9271
[    2.270269] usb 1-1.3: New USB device strings: Mfr=16, Product=32, SerialNumber=48
[    2.273783] usb 1-1.3: Product: USB2.0 WLAN
[    2.275528] usb 1-1.3: Manufacturer: ATHEROS
[    2.277204] usb 1-1.3: SerialNumber: 12345
[    4.513412] usb 1-1.3: ath9k_htc: Firmware htc_9271.fw requested
[    4.515626] usbcore: registered new interface driver ath9k_htc
[    4.818512] usb 1-1.3: ath9k_htc: Transferred FW: htc_9271.fw, size: 50980
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="deacb1b1aa9e9aacb1b0bb979aece6">[email&#160;protected]</a>:~#<code></code></pre></div>
            <div class="comment-info" id="comment-53532-info">
                
                
                
                

                

                <span class="comment-age">(17 Jun '16, 06:35)</span>
                <a class="comment-user userinfo" href="/users/24520/pigsfoot">Pigsfoot</a>
                
            </div>
        </div>
    
        <a name="53535"></a>
        <div class="comment not_top_scorer" id="comment-53535">
            <div id="post-53535-score" class="comment-score"></div>
            <div class="comment-text"><p>Have you polled <a href="http://raspberrypi.stackexchange.com/">StackExchange</a>?, because this is getting a bit out of scope.</p></div>
            <div class="comment-info" id="comment-53535-info">
                
                
                
                

                

                <span class="comment-age">(17 Jun '16, 07:18)</span>
                <a class="comment-user userinfo" href="/users/4/jaap">Jaap ♦</a>
                
            </div>
        </div>
    
        <a name="53536"></a>
        <div class="comment" id="comment-53536">
            <div id="post-53536-score" class="comment-score">1</div>
            <div class="comment-text"><p>Try:</p>

<p>iw dev</p>

<p>iwconfig</p>

<p>ifconfig (run multiple times, see if Rx packets is changing)</p>

<p>With WiFi, usually 2.4GHz is very busy so there are always networks out there and they beacon (usually) at ~100ms.  So I typically expect to always see packets; even if the channel happens to be perfectly clear of networks, you should still catch probes now and again.</p></div>
            <div class="comment-info" id="comment-53536-info">
                
                
                
                

                

                <span class="comment-age">(17 Jun '16, 07:56)</span>
                <a class="comment-user userinfo" href="/users/112/bob-jones">Bob Jones</a>
                
            </div>
        </div>
    
        <a name="53554"></a>
        <div class="comment not_top_scorer" id="comment-53554">
            <div id="post-53554-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi, Based on suggestions of where the issue could be I have been looking into different Wireless adapters to try, I have an Alfa awus036nh, would that be better than the current TP-Link ? The Alfa range seems to be very popular in network sniffing and well supported for monitor mode.</p>

<p>Can anyone point me in the right direction on where to look within Linux to see if it is the wireless adapter that has stopped working.</p>

<p>Thanks</p></div>
            <div class="comment-info" id="comment-53554-info">
                
                
                
                

                

                <span class="comment-age">(18 Jun '16, 08:04)</span>
                <a class="comment-user userinfo" href="/users/24520/pigsfoot">Pigsfoot</a>
                
            </div>
        </div>
    
        <a name="53561"></a>
        <div class="comment not_top_scorer" id="comment-53561">
            <div id="post-53561-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi <a href="/users/112/bob-jones"></a><a href="/users/112/bob-jones">@bob</a>-jones</p>

<p>Thanks for the feedback, thats just what i needed to know. I have done as suggested and when the drone goes "off line" as in the web portal reports its not receiving any traffic from the RPI i checked it and ran the ifconfig command several times and the RX packets are not changing. However if i do the same when it is working the number of packets change every time i run the command, literally one after the other. </p>

<p>I'm going to the Alfa AWUS036NH tomorrow and swap it out from the TP Link. From what i have read thats the better adapter and it uses a different chipset, on the plus side it shouldn't take long to see if it makes a difference. I have tried it on a spare RPI i have at home and it is recognized straight away when i plug it in so fingers crossed.</p>

<p>Thanks</p></div>
            <div class="comment-info" id="comment-53561-info">
                
                
                
                

                

                <span class="comment-age">(19 Jun '16, 07:33)</span>
                <a class="comment-user userinfo" href="/users/24520/pigsfoot">Pigsfoot</a>
                
            </div>
        </div>
    
        <a name="53563"></a>
        <div class="comment not_top_scorer" id="comment-53563">
            <div id="post-53563-score" class="comment-score"></div>
            <div class="comment-text"><p>This is probably best continued on the RPi stack exchange site as <a href="/users/4/jaap">@Jaap</a> says.  It's really a hardware/OS issue, not really a packet capture issue.  I have better results with the RT chipsets so maybe the performance will better when you switch.  Note they have issues too, so no guarantees.</p>

<p>Some points to move forward:</p>

<p><a href="https://lists.ath9k.org/mailman/listinfo/ath9k-devel">https://lists.ath9k.org/mailman/listinfo/ath9k-devel</a>
<a href="https://wireless.wiki.kernel.org/en/users/drivers/ath9k">https://wireless.wiki.kernel.org/en/users/drivers/ath9k</a>
<a href="https://wireless.wiki.kernel.org/en/users/drivers/ath9k/debug">https://wireless.wiki.kernel.org/en/users/drivers/ath9k/debug</a></p></div>
            <div class="comment-info" id="comment-53563-info">
                
                
                
                

                

                <span class="comment-age">(19 Jun '16, 10:46)</span>
                <a class="comment-user userinfo" href="/users/112/bob-jones">Bob Jones</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-53523" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 10
        </span>
        <a href="#" class="show-all-comments-link">show 5 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-53523-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="53565"></a>
                    <div id="answer-container-53565" class="answer answered-by-owner">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-53565-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/53565/up/" rel="nofollow"> </a>
<div id="post-53565-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-53565-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/53565/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Thanks for all your help guys... at least i know where to concentrate my efforts now.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/53565/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>19 Jun '16, 14:07</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/73514d77c921e9443a1a3d4f425c2301?s=32&amp;d=identicon&amp;r=g" alt="Pigsfoot's gravatar image" />
    <p><a href="/users/24520/pigsfoot">Pigsfoot</a><br/>
    <span class="score" title="6 reputation points">6</span><span title="2 badges"><span class="badge1">&#9679;</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">&#9679;</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">&#9679;</span><span class="badgecount">4</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Pigsfoot has no accepted answers">0&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-53565">
    
</div>
<div id="comment-tools-53565" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-53565-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/53501/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='ufNUM8dt2tHZ4aUqMZOY8rVpSCRP6JyC' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/53501/tshark-stops-working-at-random-times?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/53501/tshark-stops-working-at-random-times?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/tshark/"
            class="tag-link-tshark"
            title="see questions tagged'tshark'using tags"
            rel="tag">tshark</a> <span class="tag-number">&#215;832</span><br/>
        
        <a href="/tags/linux/"
            class="tag-link-linux"
            title="see questions tagged'linux'using tags"
            rel="tag">linux</a> <span class="tag-number">&#215;154</span><br/>
        
        <a href="/tags/crash/"
            class="tag-link-crash"
            title="see questions tagged'crash'using tags"
            rel="tag">crash</a> <span class="tag-number">&#215;84</span><br/>
        
        <a href="/tags/out-of-memory/"
            class="tag-link-out-of-memory"
            title="see questions tagged'out-of-memory'using tags"
            rel="tag">out-of-memory</a> <span class="tag-number">&#215;10</span><br/>
        
    </p>
    <p>
        question asked: <strong title="June 16, 2016, 12:11 p.m.">16 Jun '16, 12:11</strong>
    </p>
    <p> 
     	question was seen: <strong>2,779 times</strong>
    </p>
    <p> 
        last updated: <strong title="June 19, 2016, 2:07 p.m.">19 Jun '16, 14:07</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/47671/lua-script-segmentation-fault-11-in-200rc3-on-os-x">Lua script - Segmentation fault 11 in 2.0.0rc3 on OS X</a>
        </p>
        
        <p>
            <a href="/questions/27688/tshark-stops-output-redirection-on-linux">Tshark stops output redirection on Linux</a>
        </p>
        
        <p>
            <a href="/questions/53514/remote-pcap-capture-with-tshark-on-linux">Remote pcap capture with tshark on Linux</a>
        </p>
        
        <p>
            <a href="/questions/43707/how-to-get-individual-vlan-information-of-same-frame-from-a-wireshark-8021q-packet">How to get individual vlan information of same frame from a Wireshark 802.1q packet</a>
        </p>
        
        <p>
            <a href="/questions/61023/tshark-226-doesnt-display-datatext-field-on-some-computer">tshark 2.2.6 doesn&#39;t display data.text field on some computer</a>
        </p>
        
        <p>
            <a href="/questions/26515/wireshark-setup-linux-for-nonroot-user-in-amazon-ec2">Wireshark setup Linux for nonroot user in Amazon Ec2</a>
        </p>
        
        <p>
            <a href="/questions/47902/putting-tshark-on-rhel-without-installing-a-wireshark-rpm">Putting tshark on RHEL without installing a Wireshark RPM?</a>
        </p>
        
        <p>
            <a href="/questions/28224/tshark-crashed-without-any-reason-in-output-log">tshark crashed without any reason in output log</a>
        </p>
        
        <p>
            <a href="/questions/18953/tshark-running-background-linux">tshark running background linux</a>
        </p>
        
        <p>
            <a href="/questions/49728/tshark-dumpcap-stops-writing-files-during-capture-red-hat-linux">tshark / dumpcap stops writing files during capture (Red Hat Linux)</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
