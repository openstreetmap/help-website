<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Finding and merging parallel ways that are part of the same street in OSM file - OSM Help</title>
        <meta name="description" content="I am using OSM data for a programming task I&#39;m working on, and one thing I&#39;ve noticed is that often, major streets that have a barrier or divider in the middle are represented as two separate, parallel ways - one way for each direction. This behavior is not desirable for the particular program I&#39;m w..." />
        <meta name="keywords" content="programing,geojson" />
        
        <link rel="canonical" href="/questions/43654/finding-and-merging-parallel-ways-that-are-part-of-the-same-street-in-osm-file" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/43654/finding-and-merging-parallel-ways-that-are-part-of-the-same-street-in-osm-file?type=rss">

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <link rel="shortcut icon" href="/upfiles/favicon_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.8.24/themes/base/jquery-ui.min.css" integrity="sha512-Lzjd1ELD6YCIwIU5uaJldvbibV5Fi7HThNZjrwJHALBJRT6q2a6ndgi8TNgcKcUqGsH6bpT7xyTEi8qRzN1ASg==" crossorigin="anonymous" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.4.4/jquery.min.js" integrity="sha512-tcexmm0PBc+jOn9UwbgHVpjZIleEKXif1MCkzgNfVjhXKDxwYumrCOxhZ5tIaXHz2DpEE14hfjFn5J+tpaFSCg==" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js" integrity="sha512-leN1LJ2B5s9cBINeKL5bbT3cQvOebXsezoYGyuMq9oaytpFJgJ1uBOU86lJZObKTFLbMHqP0zFXR/1N6Nnlskw==" crossorigin="anonymous"></script>
        <script type="text/javascript">
        /*<![CDATA[*/
            var i18nLang = 'en';
            var appUrl = 'https://help.openstreetmap.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="OSM Help Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/osm_help_logo_6.png" title="back to home page" alt="OpenStreetMap Help Forum logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        <!-- <a id="nav_ask" href="/questions/ask/" class="special">ask a question</a> -->
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <iframe src="https://duckduckgo.com/search.html?site=help.openstreetmap.org&prefill=Search questions using DuckDuckGo&focus=yes" style="overflow:hidden;margin:0;padding:0;width:408px;height:40px;" frameborder="0"></iframe>
    <!--
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='PJkKL3EQKvVO8XsuEcQ5cTB5LrII3v3D' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
    -->
	</div>

	
  <div id="announcement">
      <p>NOTICE: <a href="https://community.openstreetmap.org/t/archiving-of-help-openstreetmap-org-1st-march-2024/108483">help.openstreetmap.org is no longer in use from 1st March 2024</a>. Please use the <a href="https://community.openstreetmap.org/">OpenStreetMap Community Forum</a></p>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/43654/finding-and-merging-parallel-ways-that-are-part-of-the-same-street-in-osm-file">Finding and merging parallel ways that are part of the same street in OSM file</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-43654-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/43654/up/" rel="nofollow"> </a>
<div id="post-43654-score" class="post-score"
    title="current number of votes">
    2
</div>
<a id="post-43654-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/43654/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/43654/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>I am using OSM data for a programming task I'm working on, and one thing I've noticed is that often, major streets that have a barrier or divider in the middle are represented as two separate, parallel ways - one way for each direction. This behavior is not desirable for the particular program I'm writing, so I want parallel ways to be merged into a single way running down the center of the street. It seems like a fairly simple problem, but I'm having a trouble getting the program to identify ways that need to be merged and then merge them properly.</p>
<p>Right now, the program looks for ways that need to be merged by looking at pairs of ways, using the first and last node of each way to figure out the angle at which it is oriented. If the ways are oriented at a similar angle and are close enough that small rectangles drawn around them would overlap, then the program will try to merge the two ways.</p>
<p>Unfortunately this technique doesn't work as well as I'd like it to in practice - it's pretty inefficient (as it would need to compare lots of pairs in a large map) and there are many edge cases in which it fails, like when one side consists of a single long way and the other side consists of multiple short ways.</p>
<p>Is there an easier way to accomplish this? Perhaps with an existing tool, or something obvious I haven't thought of?</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/programing/" class="post-tag tag-link-programing"
                                        title="see questions tagged 'programing'" rel="tag">programing</a>
                                
                                    <a href="/tags/geojson/" class="post-tag tag-link-geojson"
                                        title="see questions tagged 'geojson'" rel="tag">geojson</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>19 Jun '15, 21:19</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/1884f079651ae2f214e9795ba46947a0?s=32&amp;d=identicon&amp;r=g" alt="tongning's gravatar image" />
    <p><a href="/users/11129/tongning">tongning</a><br/>
    <span class="score" title="46 reputation points">46</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="6 badges"><span class="bronze">&#9679;</span><span class="badgecount">6</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="tongning has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/43654/">
                edited
                <strong>19 Jun '15, 21:22</strong>
            </a>
        </p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-43654">
    
        <a name="43655"></a>
        <div class="comment" id="comment-43655">
            <div id="post-43655-score" class="comment-score"></div>
            <div class="comment-text"><p>I'd be interested in hearing about what you are doing where merging those ways would be advantageous.</p>

<p>In OSM those parallel ways will generally be marked with a oneway tag, perhaps that can help identify the ways of interest.</p></div>
            <div class="comment-info" id="comment-43655-info">
                
                
                
                

                

                <span class="comment-age">(19 Jun '15, 21:40)</span>
                <a class="comment-user userinfo" href="/users/5918/n76">n76</a>
                
            </div>
        </div>
    
        <a name="43657"></a>
        <div class="comment" id="comment-43657">
            <div id="post-43657-score" class="comment-score"></div>
            <div class="comment-text"><p>Interesting suggestion, thanks! As for the program, it tries to predict where sidewalks and crosswalks should be located, as part of a project to improve accessibility. It's written in Python and generates geojson output showing predicted crosswalk and sidewalk locations when fed an OSM file as input. It should be putting sidewalks on each side of a street, of course, but when there are two parallel ways it tries to put four sidewalks rather than two.</p></div>
            <div class="comment-info" id="comment-43657-info">
                
                
                
                

                

                <span class="comment-age">(19 Jun '15, 22:30)</span>
                <a class="comment-user userinfo" href="/users/11129/tongning">tongning</a>
                
            </div>
        </div>
    
        <a name="43668"></a>
        <div class="comment" id="comment-43668">
            <div id="post-43668-score" class="comment-score"></div>
            <div class="comment-text"><p>Tags should be a good option, no? I've just checked such a double-way next to my place and realized that it was also tagged &lt; lane=2 &gt;. A combination of tags could help reduce the number of ways to compare... But you certainly have looked at tags carefully yet.</p></div>
            <div class="comment-info" id="comment-43668-info">
                
                
                
                

                

                <span class="comment-age">(20 Jun '15, 21:04)</span>
                <a class="comment-user userinfo" href="/users/10989/wiltomap">wiltomap</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-43654" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-43654-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    3 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/43654/finding-and-merging-parallel-ways-that-are-part-of-the-same-street-in-osm-file?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/43654/finding-and-merging-parallel-ways-that-are-part-of-the-same-street-in-osm-file?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/43654/finding-and-merging-parallel-ways-that-are-part-of-the-same-street-in-osm-file?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/43654/finding-and-merging-parallel-ways-that-are-part-of-the-same-street-in-osm-file?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="43688"></a>
                    <div id="answer-container-43688" class="answer accepted-answer">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-43688-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/43688/up/" rel="nofollow"> </a>
<div id="post-43688-score" class="post-score"
    title="current number of votes">
    2
</div>
<a id="post-43688-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/43688/down/" rel="nofollow"> </a>

                                        


    
      <a class="accept-answer on"
        title="tongning has selected this answer as the correct answer"
        href="/accept_answer/43688/" rel="nofollow">
      </a>
    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <blockquote>
<p>major streets that have a barrier or divider in the middle are represented as two separate, parallel ways - one way for each direction</p>
</blockquote>
<p>Yep this is intentional. The idea being that if you could <em>physically</em> (as opposed to legally) do a U-turn in a road, then you should map it as one OSM way, if you cannot (due to walls/barriers) then it should be 2 separate ways in OSM, with appropriate one way tags. This also makes much more sense for motorways, which will have complicated junctions which only merge into one "lane".</p>
<p>To solve your problem, I can give some hints: Many of these "split roads" will have <code>oneway</code> tags, they will have the same road classification (i.e. the <code>highway</code> tag), they will almost certainly have the same <code>ref</code> tag (e.g. <code>ref=A8</code>). They <em>may</em> have the same <code>name</code> tag. Perhaps this could help find candidate roads. It's also much less common the further down the road hierachy you go. <a href="http://taginfo.openstreetmap.org/tags/highway=motorway#combinations">97.5% of <code>highway=motorway</code> are <code>oneway=yes</code></a>, whereas only <a href="http://taginfo.openstreetmap.org/tags/highway=trunk#combinations">54% of <code>highway=trunk</code> are <code>oneway=yes</code></a>.</p>
<p>For example, <a href="https://www.openstreetmap.org/way/78025193#map=15/48.6335/2.1532">this road</a> and <a href="https://www.openstreetmap.org/way/131297913#map=15/48.6335/2.1422">this road</a> are one "split road". You'll notice they both are mapped <code>oneway=yes</code>, <code>highway=motorway</code>, <code>ref=A 10</code>, and both have the same <code>name</code> (<code>L'Aquitaine</code>).</p>
<blockquote>
<p>As for the program, it tries to predict where sidewalks and crosswalks should be located, as part of a project to improve accessibility. ... It should be putting sidewalks on each side of a street, of course, but when there are two parallel ways it tries to put four sidewalks rather than two.</p>
</blockquote>
<p>Perhaps, rather than trying to merge the 2 OSM ways, you could just use the approach I gave to detect "probably split roads", and then only add the sidewalk in one direction? i.e. the direction of the road itself?</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/43688/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>22 Jun '15, 09:04</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/16e12e337f6edc3750681492656097ed?s=32&amp;d=identicon&amp;r=g" alt="rorym's gravatar image" />
    <p><a href="/users/30/rorym">rorym</a><br/>
    <span class="score" title="5358 reputation points"><span class="">5.4k</span></span><span title="14 badges"><span class="badge1">&#9679;</span><span class="badgecount">14</span></span><span title="49 badges"><span class="silver">&#9679;</span><span class="badgecount">49</span></span><span title="100 badges"><span class="bronze">&#9679;</span><span class="badgecount">100</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="rorym has 18 accepted answers">11&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-43688">
    
</div>
<div id="comment-tools-43688" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-43688-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="43660"></a>
                    <div id="answer-container-43660" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-43660-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/43660/up/" rel="nofollow"> </a>
<div id="post-43660-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-43660-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/43660/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>I suspect that first merging ways that have been split along the length of the road would help a bit, naturally there is no guaranteee that the geometry of say a footway actually is parallel to the real road surface.</p>
<p>ASCII art of such a situation:</p>
<pre><code>                F
                F
FFFFFFFFFFFFFFFFXfffffffffffffffff
                f
RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR
</code></pre>
<p>F=footway 1
f=footway 2
R=Road</p>
<p>F and f woudn't be mergeable without splitting at X.</p>
<p>PS: in an answer becase markdown doesn't work in comments.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/43660/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>20 Jun '15, 07:45</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/ad2513d6f8e3d709d576ace900c12fa5?s=32&amp;d=identicon&amp;r=g" alt="SimonPoole's gravatar image" />
    <p><a href="/users/2053/simonpoole">SimonPoole â™¦</a><br/>
    <span class="score" title="44667 reputation points"><span class="">44.7k</span></span><span title="13 badges"><span class="badge1">&#9679;</span><span class="badgecount">13</span></span><span title="326 badges"><span class="silver">&#9679;</span><span class="badgecount">326</span></span><span title="701 badges"><span class="bronze">&#9679;</span><span class="badgecount">701</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="SimonPoole has 209 accepted answers">18&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-43660">
    
</div>
<div id="comment-tools-43660" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-43660-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="43864"></a>
                    <div id="answer-container-43864" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-43864-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/43864/up/" rel="nofollow"> </a>
<div id="post-43864-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-43864-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/43864/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Your question/issue is just a trivial case of the problem what we inevitably meet in vector map-making. Namely, in a road class, road sections are often presented by two "parallel" poly-line segments, one per direction. More precisely, the distance between the two "parallel" poly-line segments is never larger than a critical (parameter) distance "d". For illustration assume the primary road class and d=10m. In the data preparation, when creating the vector scale-levels, when the scale factor is less than 1:20000 the distance will vary between 0 and 2 pixels on a 120dpi rendering display. This has a bad aesthetic consequence end data redundancy in transmission and client rendering. Therefore, in the data preparation we try to detect and eliminate the parallel cases (the phase/step just before the vector smoothing).  <br>
You have already got some suggestions how you can cope with the "parallel" issue. Here is one  geometry/topology based option. Assume, for the mentioned illustration, we have two ways/poly-lines AC where B is an inner point and MP where N is an inner point. Assume that the distance d(B,M) and d(C,N) both are less than d. In an early version we have used a surface criterion for checking the parallel property between the BC and MN polylines. So, if the surface enclosed by the polygon BCNMB was less than the surface length(BC)*d, then we replaced the BC and MN poly-lines with only one keeping the proper connectivity. Occasionally this criterion was not enough strong and in the current version a corridor model is used. Assume that AC is longer than MP and a circular pen with radius d. Now, if you move this pen along the AC ply-line (as the skeleton) the contour of the thick line (in a vector format) is the border of an area we call for corridor. Now, if an edge vector of MN is inside the corridor of BC this is to be ignored/deleted from MN. The rest poly-lie(s) of MN and the NP poly-line with proper connections to AC create the new road segment.  <br>
Of course, there are many, many fine details missing. But note that the same model might be used for bulk upload of a road class (or other line-work data types). E.g. a government suddenly makes public a road class in a country. The local OSM community would like to upload this more accurate road data by eliminating "parallel" cases from the older manual uploads. </p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/43864/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>30 Jun '15, 11:53</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/03cd9ea0efd97a7040fda0d6a76aba8e?s=32&amp;d=identicon&amp;r=g" alt="sanser's gravatar image" />
    <p><a href="/users/3194/sanser">sanser</a><br/>
    <span class="score" title="695 reputation points">695</span><span title="38 badges"><span class="badge1">&#9679;</span><span class="badgecount">38</span></span><span title="39 badges"><span class="silver">&#9679;</span><span class="badgecount">39</span></span><span title="55 badges"><span class="bronze">&#9679;</span><span class="badgecount">55</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="sanser has 2 accepted answers">5&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-43864">
    
</div>
<div id="comment-tools-43864" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-43864-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/43654/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='PJkKL3EQKvVO8XsuEcQ5cTB5LrII3v3D' />
            <div style="clear:both">
            </div>

            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/43654/finding-and-merging-parallel-ways-that-are-part-of-the-same-street-in-osm-file?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/43654/finding-and-merging-parallel-ways-that-are-part-of-the-same-street-in-osm-file?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <p>This was the support site for <a href="https://www.openstreetmap.org/">OpenStreetMap</a>. It has now been replaced by <a href="https://community.openstreetmap.org/">community.osm.org</a>.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/geojson/"
            class="tag-link-geojson"
            title="see questions tagged'geojson'using tags"
            rel="tag">geojson</a> <span class="tag-number">&#215;36</span><br/>
        
        <a href="/tags/programing/"
            class="tag-link-programing"
            title="see questions tagged'programing'using tags"
            rel="tag">programing</a> <span class="tag-number">&#215;5</span><br/>
        
    </p>
    <p>
        question asked: <strong title="June 19, 2015, 9:19 p.m.">19 Jun '15, 21:19</strong>
    </p>
    <p> 
     	question was seen: <strong>8,254 times</strong>
    </p>
    <p> 
        last updated: <strong title="June 30, 2015, 11:53 a.m.">30 Jun '15, 11:53</strong>
    </p>
</div>



<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/22588/is-there-any-way-to-get-list-data-location-from-osm-around-a-location-by-poi-types-eg-restaurants-banks-as-geojson">Is there any way to get list data location from OSM around a location by POI types (e.g: restaurants , banks , ...) as geoJson?</a>
        </p>
        
        <p>
            <a href="/questions/24126/overpassapi-different-json-formats">OverpassAPI: different json formats</a>
        </p>
        
        <p>
            <a href="/questions/31929/geojson-file-edit">Geojson file edit</a>
        </p>
        
        <p>
            <a href="/questions/32024/coding-in-geojsonio-for-clustermarker">[closed] Coding in geojson.io for clustermarker</a>
        </p>
        
        <p>
            <a href="/questions/36890/importing-cleaned-trail-data-from-local-agencies-in-anchorage-ak">Importing Cleaned trail data from local agencies in Anchorage, AK</a>
        </p>
        
        <p>
            <a href="/questions/37874/any-advices-on-osrm-server-api">Any advices on OSRM Server API</a>
        </p>
        
        <p>
            <a href="/questions/38445/experiment-about-location-cloaking-with-java-using-osm">Experiment about Location Cloaking with Java using OSM</a>
        </p>
        
        <p>
            <a href="/questions/40059/are-radio-coverage-areas-as-polygons-of-interest-or-allowed-on-osm">Are Radio coverage areas as polygons of interest or allowed on OSM?</a>
        </p>
        
        <p>
            <a href="/questions/43853/how-to-get-polygon_geojson-for-administrative">how to get polygon_geojson for administrative</a>
        </p>
        
        <p>
            <a href="/questions/18255/softwarelibraries-to-convert-osm-data-to-geojson-without-using-api">Software/Libraries to Convert OSM Data to Geojson (without using API)</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            
            <div id="ground">
                
                    <p>NOTICE: <a href="https://community.openstreetmap.org/t/archiving-of-help-openstreetmap-org-1st-march-2024/108483">help.openstreetmap.org is no longer in use from 1st March 2024</a>. Please use the <a href="https://community.openstreetmap.org/">OpenStreetMap Community Forum</a></p>
                
            </div>
            
        
        

        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
