<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>TCP: How many re-transmissions are acceptable (embedded device) - Wireshark Q&amp;A</title>
        <meta name="description" content="First let me state I an extremely new to networking. My situation is I am using an embedded ARM device with some custom hardware and Ethernet driver chip and a third party TCP-IP stack as well as a third party SMTP client application for that stack. My ultimate goal is just to be able to send emails..." />
        <meta name="keywords" content="device,ip,smtp,embedded,tcp" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/32323/tcp-how-many-re-transmissions-are-acceptable-embedded-device" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/32323/tcp-how-many-re-transmissions-are-acceptable-embedded-device?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='EWtvp2WZl8SbVjiZv4w7MzrIKB58HUOP' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/32323/tcp-how-many-re-transmissions-are-acceptable-embedded-device">TCP: How many re-transmissions are acceptable (embedded device)</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-32323-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/32323/up/" rel="nofollow"> </a>
<div id="post-32323-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-32323-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/32323/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/32323/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>First let me state I an extremely new to networking. My situation is I am using an embedded ARM device with some custom hardware and Ethernet driver chip and a third party TCP-IP stack as well as a third party SMTP client application for that stack. My ultimate goal is just to be able to send emails.</p>
<p>I was experiencing previously odd behavior where connecting to a 'hostmonter.com' email server and sending emails to myself would work sometime and not others.</p>
<p>I started my search by forgetting SMTP and just issuing a TCP connect sequence with the mail server. I saw similar behavior where it would work fine once but after resetting my embedded device I started getting lots of TCP retransmissions and out of orders warnings and other oddities.</p>
<p>I setup hMailServer on my laptop to take 'hostmonster.com' out of the equation but proceeded to get the same TCP re-transmissions and out of orders warnings and even some duplicate ACKs.</p>
<p>The device always connects to the server but it just seems to me that for a hardwired connection all on my desk I should be experiencing 0 re-transmissions or other oddities. But is it possible that having a slow (&lt;50MHz) ARM processor could be the cause of those re-transmissions etc when connected to a much faster server and much faster internet in general?</p>
<p>Here is the condensed log from wireshark: <a href="http://lookoutportablesecurity.com/tcp.txt">http://lookoutportablesecurity.com/tcp.txt</a></p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/device/" class="post-tag tag-link-device"
                                        title="see questions tagged 'device'" rel="tag">device</a>
                                
                                    <a href="/tags/ip/" class="post-tag tag-link-ip"
                                        title="see questions tagged 'ip'" rel="tag">ip</a>
                                
                                    <a href="/tags/smtp/" class="post-tag tag-link-smtp"
                                        title="see questions tagged 'smtp'" rel="tag">smtp</a>
                                
                                    <a href="/tags/embedded/" class="post-tag tag-link-embedded"
                                        title="see questions tagged 'embedded'" rel="tag">embedded</a>
                                
                                    <a href="/tags/tcp/" class="post-tag tag-link-tcp"
                                        title="see questions tagged 'tcp'" rel="tag">tcp</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>30 Apr '14, 14:45</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/d10b4a16cda08123bdeafd8686342d41?s=32&amp;d=identicon&amp;r=g" alt="wes000000's gravatar image" />
    <p><a href="/users/7231/wes000000">wes000000</a><br/>
    <span class="score" title="21 reputation points">21</span><span title="4 badges"><span class="badge1">&#9679;</span><span class="badgecount">4</span></span><span title="5 badges"><span class="silver">&#9679;</span><span class="badgecount">5</span></span><span title="9 badges"><span class="bronze">&#9679;</span><span class="badgecount">9</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="wes000000 has no accepted answers">0&#37;</span>
    </p>
</div>


                            </div>
                            




<div class="comments-container" id="comments-container-32323">
    
</div>
<div id="comment-tools-32323" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-32323-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    3 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/32323/tcp-how-many-re-transmissions-are-acceptable-embedded-device?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/32323/tcp-how-many-re-transmissions-are-acceptable-embedded-device?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/32323/tcp-how-many-re-transmissions-are-acceptable-embedded-device?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/32323/tcp-how-many-re-transmissions-are-acceptable-embedded-device?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="32335"></a>
                    <div id="answer-container-32335" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-32335-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/32335/up/" rel="nofollow"> </a>
<div id="post-32335-score" class="post-score"
    title="current number of votes">
    2
</div>
<a id="post-32335-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/32335/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>I don't think that these are real re-transmissions but just traced twice. 
Looking at the delta times of the suspected packets - they 'retransmissions' occur in the same ms. </p>
<ul>
<li>166,167 is the SYN_ACK occuring 15.777 seconds into the trace (note the slightly different size)</li>
<li>170,171 is the SMTP Welcome message occuring 15.933</li>
<li>615,616 is an ACK to the client's FIN occuring 55.239 into the trace</li>
</ul>
<p>I suggest yo look at the ip.id of those packets to verify whether it's the same packet traced twice or a real re-transmission</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/32335/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>01 May '14, 00:50</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/5500bd1decb766660522dfb347eedc49?s=32&amp;d=identicon&amp;r=g" alt="mrEEde's gravatar image" />
    <p><a href="/users/4668/mreede">mrEEde</a><br/>
    <span class="score" title="3892 reputation points"><span class="">3.9k</span></span><span title="15 badges"><span class="badge1">&#9679;</span><span class="badgecount">15</span></span><span title="22 badges"><span class="silver">&#9679;</span><span class="badgecount">22</span></span><span title="70 badges"><span class="bronze">&#9679;</span><span class="badgecount">70</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="mrEEde has 48 accepted answers">20&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-32335">
    
        <a name="32341"></a>
        <div class="comment" id="comment-32341">
            <div id="post-32341-score" class="comment-score"></div>
            <div class="comment-text"><p>200ms delay between two packets is way too slow for duplicates, they usually have a delta of only a couple of microseconds. But without a capture and a description of the capture setup it can't be completely ignored as an option.</p></div>
            <div class="comment-info" id="comment-32341-info">
                
                
                
                

                

                <span class="comment-age">(01 May '14, 06:35)</span>
                <a class="comment-user userinfo" href="/users/145/jasper">Jasper ♦♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-32335" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-32335-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="32329"></a>
                    <div id="answer-container-32329" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-32329-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/32329/up/" rel="nofollow"> </a>
<div id="post-32329-score" class="post-score"
    title="current number of votes">
    1
</div>
<a id="post-32329-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/32329/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>I guess your ARM processor might be too slow when talking to your mailserver. If you look at packet 170 you see that the mail server sends "S: 220 WESLEY-LAPTOP ESMTP" to the client", but there is no acknowledge or answer coming back. I guess this triggers a retransmission after 200ms in packet 171, because the server assumes the packet 170 got lost since it didn't get acknowledged. The only reason I can think of in a network as small and simple as the one you're describing is that the client is having trouble answering in time.</p>
<p>The same happens again in packets 1086 and 1087, again with over 200ms delta. </p>
<p>So again, my money is on the ARM processor being too slow (or the code not fast enough, however you want to look at it :-))</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/32329/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>30 Apr '14, 16:54</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/c578ba2967741f25aebd6afef702f432?s=32&amp;d=identicon&amp;r=g" alt="Jasper's gravatar image" />
    <p><a href="/users/145/jasper">Jasper ♦♦</a><br/>
    <span class="score" title="23806 reputation points"><span class="">23.8k</span></span><span title="5 badges"><span class="badge1">&#9679;</span><span class="badgecount">5</span></span><span title="51 badges"><span class="silver">&#9679;</span><span class="badgecount">51</span></span><span title="284 badges"><span class="bronze">&#9679;</span><span class="badgecount">284</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Jasper has 263 accepted answers">18&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-32329">
    
</div>
<div id="comment-tools-32329" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-32329-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="32370"></a>
                    <div id="answer-container-32370" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-32370-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/32370/up/" rel="nofollow"> </a>
<div id="post-32370-score" class="post-score"
    title="current number of votes">
    1
</div>
<a id="post-32370-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/32370/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>As <a href="/users/4668/mreede"><a href="/users/4668/mreede"><a href="/users/4668/mreede"><a href="/users/4668/mreede">@mrEEde</a></a></a></a> indicated, there are duplicate frames in the capture file coming from 10.0.0.65 (the SMTP server). I don't think they are re-transmissions. I believe they are just duplicates due to the way the capture file was taken (probably on the SMTP server itself or on a mirror port of the switch duplicating the server traffic). </p>
<p>I believe the capture file was taken on the server, because of the duplicate frames 125,126. Frame 125 was captured before padding (on the server), frame 126 was captured after padding.</p>
<p><code>
 125 12.636354000  Pegatron_ad:34:d3  1e:30:6c:a2:45:5c  ARP  42  10.0.0.65 is at 4c:72:b9:ad:34:d3
 126 12.636598000  Pegatron_ad:34:d3  1e:30:6c:a2:45:5c  ARP  60  10.0.0.65 is at 4c:72:b9:ad:34:d3
</code></p>
<p>So, those duplicate frames are not going to cause a problem on the embedded device, because <strong>there are no duplicates (re-transmission) on the wire</strong>.</p>
<p>After you remove the duplicate frames, you'll get this:</p>
<p><code>
  162 15.690765000   10.0.0.187  10.0.0.65   TCP  60  1024 &gt; smtp [SYN] Seq=0 Win=4380 Len=0 MSS=1460
  166 15.777702000   10.0.0.65   10.0.0.187  TCP  58  smtp &gt; 1024 [SYN, ACK] Seq=0 Ack=1 Win=8192 Len=0 MSS=1460
  169 15.931764000   10.0.0.187  10.0.0.65   TCP  60  1024 &gt; smtp [ACK] Seq=1 Ack=1 Win=4380 Len=0
  170 15.933402000   10.0.0.65   10.0.0.187  SMTP 79  S: 220 WESLEY-LAPTOP ESMTP
  173 16.076656000   10.0.0.187  10.0.0.65   TCP  60  1024 &gt; smtp [ACK] Seq=1 Ack=26 Win=4380 Len=0
  614 55.239381000   10.0.0.187  10.0.0.65   TCP  60  1024 &gt; smtp [FIN, ACK] Seq=1 Ack=26 Win=4380 Len=0
</code></p>
<p>Everything is well until frame 173, where the client ACKs frame 170. But then, the server does not answer, which makes the client close the connection in frame 614.</p>
<p>The same thing happens in the second attempt.</p>
<p><s>So, currently everything points into the direction of the SMTP server. Maybe there is something in frame 173, that the server does not like, but we cannot see in the text output - like checksum errors, or the client ACKs the wrong number of bytes, etc., which in effect would make the embedded device the guilty party. Otherwise, it's the SMTP server (software, OS, security software on the systems, etc.). </s></p>
<p>According to the hint of <a href="/users/4668/mreede"><a href="/users/4668/mreede"><a href="/users/4668/mreede"><a href="/users/4668/mreede">@mrEEde</a></a></a></a>, the client should send the HELO/EHLO after it received frame 170. However, it does not. It simply ACKs the data in frame 173 and then closes the connection in frame 614. So, the problem is (probably) within the SMTP library of the embedded devices or the software that uses the SMTP library.</p>
<p><s>We would need the real capture file to analyze that. If possible, please post the pcap file instead of a text file.</s></p>
<p>There isn't much we can analyze in the capture file. The best thing is to enable debugging on the embedded device or check the software logic if possible.</p>
<p>Regards<br>
Kurt</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/32370/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>01 May '14, 16:56</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" alt="Kurt%20Knochner's gravatar image" />
    <p><a href="/users/2593/kurt-knochner">Kurt Knochner ♦</a><br/>
    <span class="score" title="24767 reputation points"><span class="">24.8k</span></span><span title="10 badges"><span class="badge1">&#9679;</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">&#9679;</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">&#9679;</span><span class="badgecount">237</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Kurt Knochner has 344 accepted answers">15&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/32370/">
                edited
                <strong>02 May '14, 00:47</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-32370">
    
        <a name="32374"></a>
        <div class="comment" id="comment-32374">
            <div id="post-32374-score" class="comment-score"></div>
            <div class="comment-text"><p>the capture file was generated using the same computer the server is running on. Is that bad practice generally? And I will post the pcap file next week (sorry for the delay) but the computer with the server on it as well as my ARM device is unavailable until then.</p></div>
            <div class="comment-info" id="comment-32374-info">
                
                
                
                

                

                <span class="comment-age">(01 May '14, 20:14)</span>
                <a class="comment-user userinfo" href="/users/7231/wes000000">wes000000</a>
                
            </div>
        </div>
    
        <a name="32378"></a>
        <div class="comment" id="comment-32378">
            <div id="post-32378-score" class="comment-score">1</div>
            <div class="comment-text"><p>"Everything is well until frame 173, where the client ACKs frame 170. But then, the server does not answer, which makes the client close the connection in frame 614." 
Wouldn't the next expected packet be the client's HELO packet?</p></div>
            <div class="comment-info" id="comment-32378-info">
                
                
                
                

                

                <span class="comment-age">(01 May '14, 23:04)</span>
                <a class="comment-user userinfo" href="/users/4668/mreede">mrEEde</a>
                
            </div>
        </div>
    
        <a name="32381"></a>
        <div class="comment" id="comment-32381">
            <div id="post-32381-score" class="comment-score">1</div>
            <div class="comment-text"><blockquote>
<p>Wouldn't the next expected packet be the client's HELO packet?</p>
</blockquote>

<p>Ah, sure. It was very late when I answered the question. Thanks for the hint. </p>

<p>So, yes the client should send the HELO. As a result, it's a problem with the embedded smtp client, instead of the server as I said in my answer. Sorry for the confusion.</p></div>
            <div class="comment-info" id="comment-32381-info">
                
                
                
                

                

                <span class="comment-age">(02 May '14, 00:36)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="32382"></a>
        <div class="comment" id="comment-32382">
            <div id="post-32382-score" class="comment-score">1</div>
            <div class="comment-text"><blockquote>
<p>Is that bad practice generally?</p>
</blockquote>

<p>Not in general. Sometimes there is no other option than to capture on one of the involved systems. But sometimes you'll get false results, as in your case. We have had similar problems in other questions. Duplicate frames when captured on the server, but there was no common reason observable (yet). Could be a driver issue or some software on the capturing system (VPN, Firewall, IDS/IPS, Endpoint Security, etc.).</p>

<p>Anyway, please see the very good comment of <a href="/users/4668/mreede"></a><a href="/users/4668/mreede">@mrEEde</a> and my comment above. The problem is most likely <strong>not the server</strong>, but the client, because it does not send the HELO/EHLO.</p></div>
            <div class="comment-info" id="comment-32382-info">
                
                
                
                

                

                <span class="comment-age">(02 May '14, 00:41)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="32463"></a>
        <div class="comment" id="comment-32463">
            <div id="post-32463-score" class="comment-score"></div>
            <div class="comment-text"><p>Thank you guys for all the help! We are currently in the process of debugging and working with the client software and are in communication with the support team responsible for the third party smtp client and stack. Thanks again!</p></div>
            <div class="comment-info" id="comment-32463-info">
                
                
                
                

                

                <span class="comment-age">(03 May '14, 17:19)</span>
                <a class="comment-user userinfo" href="/users/7231/wes000000">wes000000</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-32370" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-32370-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/32323/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='EWtvp2WZl8SbVjiZv4w7MzrIKB58HUOP' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/32323/tcp-how-many-re-transmissions-are-acceptable-embedded-device?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/32323/tcp-how-many-re-transmissions-are-acceptable-embedded-device?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/tcp/"
            class="tag-link-tcp"
            title="see questions tagged'tcp'using tags"
            rel="tag">tcp</a> <span class="tag-number">&#215;752</span><br/>
        
        <a href="/tags/ip/"
            class="tag-link-ip"
            title="see questions tagged'ip'using tags"
            rel="tag">ip</a> <span class="tag-number">&#215;178</span><br/>
        
        <a href="/tags/smtp/"
            class="tag-link-smtp"
            title="see questions tagged'smtp'using tags"
            rel="tag">smtp</a> <span class="tag-number">&#215;25</span><br/>
        
        <a href="/tags/device/"
            class="tag-link-device"
            title="see questions tagged'device'using tags"
            rel="tag">device</a> <span class="tag-number">&#215;15</span><br/>
        
        <a href="/tags/embedded/"
            class="tag-link-embedded"
            title="see questions tagged'embedded'using tags"
            rel="tag">embedded</a> <span class="tag-number">&#215;5</span><br/>
        
    </p>
    <p>
        question asked: <strong title="April 30, 2014, 2:45 p.m.">30 Apr '14, 14:45</strong>
    </p>
    <p> 
     	question was seen: <strong>3,655 times</strong>
    </p>
    <p> 
        last updated: <strong title="May 3, 2014, 5:19 p.m.">03 May '14, 17:19</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/7082/what-does-the-8-stand-for-in-tcpstream-eq-8">What does the 8 stand for in (tcp.stream eq 8)?</a>
        </p>
        
        <p>
            <a href="/questions/19124/is-it-possible-to-find-how-data-are-encoded-on-a-lan-connection">Is it possible to find how data are encoded on a LAN connection?</a>
        </p>
        
        <p>
            <a href="/questions/44296/sniff-packets-for-wireless-thermostat">Sniff packets for wireless thermostat</a>
        </p>
        
        <p>
            <a href="/questions/19125/is-it-possible-to-find-out-how-data-are-encrypted-on-a-lan-connection">[closed] Is it possible to find out how data are encrypted on a LAN connection?</a>
        </p>
        
        <p>
            <a href="/questions/58309/why-are-the-ack-packets-getting-lost">Why are the ACK packets getting lost?</a>
        </p>
        
        <p>
            <a href="/questions/21540/rst-ack-sent-to-both-server-and-client-but-neither-is-the-sender">[RST, ACK] Sent to both Server and client, but neither is the sender</a>
        </p>
        
        <p>
            <a href="/questions/16365/get-most-common-sender-of-packets-in-a-trace-file">get most common sender of packets in a trace file</a>
        </p>
        
        <p>
            <a href="/questions/37898/how-to-to-understand-tcpip-packets-output">How to to understand TCP/IP packets output?</a>
        </p>
        
        <p>
            <a href="/questions/4095/how-do-i-create-a-statistic-which-side-closes-the-most-connections">How do I create a statistic which side closes the most connections?</a>
        </p>
        
        <p>
            <a href="/questions/41488/how-to-capture-tcp-stream-from-ip-address">how to capture tcp stream from ip address,,,</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
