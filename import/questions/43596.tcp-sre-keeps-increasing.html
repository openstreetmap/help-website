<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>TCP SRE keeps increasing - Wireshark Q&amp;A</title>
        <meta name="description" content="Hi there, I&#39;m running wireshark to try and sort out what is going wrong with my tcp connections to my server. It runs fine for the first while and loads a few small files but for a big file I think it eventually drops a packet. Which should be fine except the SRE value of the DupAck keeps increasing..." />
        <meta name="keywords" content="dup-ack,tcp,packetloss" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/43596/tcp-sre-keeps-increasing" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/43596/tcp-sre-keeps-increasing?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='KsV7bEWbSK7MAFhC0hndcQz2cehNQFtC' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/43596/tcp-sre-keeps-increasing">TCP SRE keeps increasing</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-43596-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/43596/up/" rel="nofollow"> </a>
<div id="post-43596-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-43596-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/43596/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/43596/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>Hi there, I'm running wireshark to try and sort out what is going wrong with my tcp connections to my server. It runs fine for the first while and loads a few small files but for a big file I think it eventually drops a packet. Which should be fine except the SRE value of the DupAck keeps increasing as the server sends more packets, It finally triggers a fast retransmit, after DupAck #12 and he sends back the initial missed packet, bytes 3073 to 4097, but by then its too late as the DupAck already wants SLE 3073 to SRE 15361 so he just keeps DupAck-ing and eventually the server seems to just stop trying, there's a lot of keep-alive and retransmission attempts. Here's a picture of the suspected packet loss point. Any ideas? I've been working on this connection for days and have no idea what's going wrong. <img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/sre.png"></p>
<p>Thanks!</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/dup-ack/" class="post-tag tag-link-dup-ack"
                                        title="see questions tagged 'dup-ack'" rel="tag">dup-ack</a>
                                
                                    <a href="/tags/tcp/" class="post-tag tag-link-tcp"
                                        title="see questions tagged 'tcp'" rel="tag">tcp</a>
                                
                                    <a href="/tags/packetloss/" class="post-tag tag-link-packetloss"
                                        title="see questions tagged 'packetloss'" rel="tag">packetloss</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>26 Jun '15, 12:25</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7ce108aed6391008eb3c8ba7c05dd982?s=32&amp;d=identicon&amp;r=g" alt="Graeme's gravatar image" />
    <p><a href="/users/18045/graeme">Graeme</a><br/>
    <span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="4 badges"><span class="bronze">&#9679;</span><span class="badgecount">4</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Graeme has no accepted answers">0&#37;</span>
    </p>
</div>


                            </div>
                            




<div class="comments-container" id="comments-container-43596">
    
        <a name="43597"></a>
        <div class="comment" id="comment-43597">
            <div id="post-43597-score" class="comment-score"></div>
            <div class="comment-text"><p>Can you please upload a small capture file somewhere (google drive, dropbox, cloudshark.org) and post the link here?</p>

<p>Because I can´t see the sequence number at the picture.</p>

<p>The SLE and SRE parameters are part of the SACK and D-SACK techniques and are described here: RFC 2018 and RFC 2883</p>

<p>And maybe this hint could help you too:
Go to Edit &gt; Preferences &gt; Protocols &gt; TCP and uncheck "Allow subdissector to reassemble TCP streams."</p></div>
            <div class="comment-info" id="comment-43597-info">
                
                
                
                

                

                <span class="comment-age">(26 Jun '15, 12:52)</span>
                <a class="comment-user userinfo" href="/users/16160/christian_r">Christian_R</a>
                
            </div>
        </div>
    
        <a name="43598"></a>
        <div class="comment" id="comment-43598">
            <div id="post-43598-score" class="comment-score"></div>
            <div class="comment-text"><p>"It finally triggers a fast retransmit, after DupAck #12" 
... so this seems to be the the view at the receiver side  as the sender should retransmit after having seen the 3rd dupAck.<br>
Of course it takes half of the RTT for the sender to see this 3rd dupACK and in the meantime there were 9 additional segments arriving  "out_of_order" triggering the additional dupACKs
- 
"as the DupAck already wants SLE 3073 to SRE 15361"<br>
the SLE-SRE indicate which bytes have been received after the gap occured.</p>

<p>As Christian_R indicated we would need to see the capture to really be able to understand what is going on. editcap -s 90 can be used to stripp off  the data - if it contains confidential data ... </p>

<p>Regards Matthias</p></div>
            <div class="comment-info" id="comment-43598-info">
                
                
                
                

                

                <span class="comment-age">(26 Jun '15, 13:14)</span>
                <a class="comment-user userinfo" href="/users/4668/mreede">mrEEde</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-43596" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-43596-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    One Answer:
                    </div>
                    
<div class="tabsA"><a href="/questions/43596/tcp-sre-keeps-increasing?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/43596/tcp-sre-keeps-increasing?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/43596/tcp-sre-keeps-increasing?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/43596/tcp-sre-keeps-increasing?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="43602"></a>
                    <div id="answer-container-43602" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-43602-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/43602/up/" rel="nofollow"> </a>
<div id="post-43602-score" class="post-score"
    title="current number of votes">
    2
</div>
<a id="post-43602-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/43602/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>You were losing a segment early ( the 3rd segment tcp.seq==2049 tcp.nxtseq==3073) in a batch of segments coming in from your server. </p>
<p>As your client offered a 64K window_size the server was sending 15 segments in a row 1024 bytes each immediately after your initial GET request. 
So seeing the SRE value increasing with the SLE value staying at 3073 is normal. 
The server should eventually retransmit the lost segment tcp.seq==2049 tcp.nxtseq==3073 </p>
<hr>
<p>If it doesn't do this as you indicated - seeing keepalive packets it might not be getting your ACKs at all ...<br>
</p>
<p>The IP addresses indicate the server is in your local network, however the server sending 1024 MSS segments indicates that he saw your MSS offering as 1024. </p>
<p>What is the MSS value offered in the client's SYN packet?<br>
</p>
<p>If you don't see 1460 then check your MTU size. <br>
If you see 1460 then some box is turning it down in flight.<br>
And this box might not handle SACK very well so it may be better to turn it off then </p>
<hr>
<p>Reading through this again, you say 
"after DupAck #12 and he sends back the initial missed packet, bytes 3073 to 4097," </p>
<p>This segment was never lost, it arrived at the client. If you still see it re-transmitted it 
the server did/could not read the SLE-SRE information correctly/at all and it might be due to <br>
<a href="https://support.microsoft.com/en-us/kb/2525390">https://support.microsoft.com/en-us/kb/2525390</a></p>
<p>Regards Matthias </p>
<hr>
<p>The latest trace shows SACK no longer being used. <br>
Still there are too many retranmsissions, obviously caused by too much bytes flooding the serial line in too short a time because too many tcp sessions are started each offering a too large receive window.<br>
<a href="http://www.cerberussystems.com/~belleisl/tune_faq/intro.htm">-&gt; see nice article about COM_OVERRUNS</a><br>
Here is the IO Graph showing the amount of bytes arriving on all parallel HTTP sessions and the number of bytes in flight in the retransmissions...</p>
<p><img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/Screenshot_yq25x4h.png"> </p>
<p>The circumvention will be to slow down the sender by a combination of </p>
<ul>
<li>reducing the MTU to 576 bytes</li>
<li>reducing rwin in the windows client</li>
<li>limit the number of concurrent http sessions</li>
</ul>
<p>For windows to reduce the windowsize you can disable auto-tuning to disable window-scaling . </p>
<p>Open elevated command prompt with administrator’s privileges.</p>
<pre><code>netsh interface tcp set global autotuning=disabled
</code></pre>
<p>To reduce the rwin to less than 64k you need to change the speed of your adapter to 10M
<img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/Adapter10M.png"></p>
<p>In firefox multiple requests can be sent before any responses are received. <br>
This is known as pipelining.<br>
In your latest trace there are 7 sessions starting<br>
You can turn this off by setting <a href="http://kb.mozillazine.org/Network.http.pipelining">Network.http.pipelining</a> to false<br>
</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/43602/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>27 Jun '15, 09:27</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/5500bd1decb766660522dfb347eedc49?s=32&amp;d=identicon&amp;r=g" alt="mrEEde's gravatar image" />
    <p><a href="/users/4668/mreede">mrEEde</a><br/>
    <span class="score" title="3892 reputation points"><span class="">3.9k</span></span><span title="15 badges"><span class="badge1">&#9679;</span><span class="badgecount">15</span></span><span title="22 badges"><span class="silver">&#9679;</span><span class="badgecount">22</span></span><span title="70 badges"><span class="bronze">&#9679;</span><span class="badgecount">70</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="mrEEde has 48 accepted answers">20&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/43602/">
                edited
                <strong>03 Jul '15, 07:31</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-43602">
    
        <a name="43661"></a>
        <div class="comment" id="comment-43661">
            <div id="post-43661-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi Matthias, Thank you for your answers. Here is a link to the captured ip/tcp headers:
<a href="https://drive.google.com/file/d/0BynRhiTlgNo9Nm1fc01sd2tLN00/view?usp=sharing">https://drive.google.com/file/d/0BynRhiTlgNo9Nm1fc01sd2tLN00/view?usp=sharing</a>
I'm trying to communicate over a slip connection so I set the MTU size, on both sides of the connection, to that becuase it was the smallest, power of two plus 40 size that my adapter would allow. Should I make it bigger? </p>

<p>In terms of the SACK is it likely to be my adapter that's not liking that or the server side of things? I'll try turning off the SACK for my adapter and see how that goes.</p></div>
            <div class="comment-info" id="comment-43661-info">
                
                
                
                

                

                <span class="comment-age">(29 Jun '15, 06:04)</span>
                <a class="comment-user userinfo" href="/users/18045/graeme">Graeme</a>
                
            </div>
        </div>
    
        <a name="43667"></a>
        <div class="comment" id="comment-43667">
            <div id="post-43667-score" class="comment-score"></div>
            <div class="comment-text"><p>Also I'm not sure how to turn SACK off, I tried adding the SackOpts registry value as all googling has suggested but it seems to have no effect</p></div>
            <div class="comment-info" id="comment-43667-info">
                
                
                
                

                

                <span class="comment-age">(29 Jun '15, 08:33)</span>
                <a class="comment-user userinfo" href="/users/18045/graeme">Graeme</a>
                
            </div>
        </div>
    
        <a name="43680"></a>
        <div class="comment" id="comment-43680">
            <div id="post-43680-score" class="comment-score"></div>
            <div class="comment-text"><p>The packets are cut off after 54 bytes so they don't contain the TCP SACK options. We would need at least 66 bytes to see SLE_SRE ...</p></div>
            <div class="comment-info" id="comment-43680-info">
                
                
                
                

                

                <span class="comment-age">(29 Jun '15, 10:46)</span>
                <a class="comment-user userinfo" href="/users/4668/mreede">mrEEde</a>
                
            </div>
        </div>
    
        <a name="43682"></a>
        <div class="comment" id="comment-43682">
            <div id="post-43682-score" class="comment-score"></div>
            <div class="comment-text"><p>Sorry! yes that was foolish of me, here's more info <a href="https://drive.google.com/file/d/0BynRhiTlgNo9TENfODROMXVXaGc/view?usp=sharing">https://drive.google.com/file/d/0BynRhiTlgNo9TENfODROMXVXaGc/view?usp=sharing</a></p>

<p>Though this capture is after I've attempted to shutoff the SACK so might not have all the info, though still has the same initial problem that the conversation breaks down</p></div>
            <div class="comment-info" id="comment-43682-info">
                
                
                
                

                

                <span class="comment-age">(29 Jun '15, 11:55)</span>
                <a class="comment-user userinfo" href="/users/18045/graeme">Graeme</a>
                
            </div>
        </div>
    
        <a name="43687"></a>
        <div class="comment not_top_scorer" id="comment-43687">
            <div id="post-43687-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/4668/mreede">@mrEEde</a> (here is the chance to earn extra points)
I assume we are tracing at the IP-Address 192.168.1.129.
So for this I can´t explain me with the root-cause of "WindowSizing" why the host 1.129 inititiates the DUP-ACK row. Because I can see packet 165 and 166 correctly arriving at the capture point  (still assuming capture point is stack 1.129) in the trace. And at this moment (FRAME 167) I can´t see a lot of bytes in flight. So I personal think that something goes wrong at the host 1.129 at this moment FRAME 167. 
Please correct me if I am wrong. And as I told I will honor it.
<img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/SREt2.PNG"></p></div>
            <div class="comment-info" id="comment-43687-info">
                
                
                
                

                

                <span class="comment-age">(29 Jun '15, 15:05)</span>
                <a class="comment-user userinfo" href="/users/16160/christian_r">Christian_R</a>
                
            </div>
        </div>
    
        <a name="43701"></a>
        <div class="comment not_top_scorer" id="comment-43701">
            <div id="post-43701-score" class="comment-score"></div>
            <div class="comment-text"><p>The trace was taken at the windows client as Statistics Comments Summary shows. </p>

<p>The 'root cause' is a high number  lost packets and retransmissions, obviously because we are receiving (and sending btw) more packets than the networking infrastructure ( a serial line in this case ?) can handle. </p>

<p>The offered window_size of 65536 is already too high to get a smooth transmission.<br>
</p>

<p>Reducing the window_size is one workaround to slow the sender down, the other one is reducing the number of concurrent sessions.</p>

<p>Regards Matthias</p></div>
            <div class="comment-info" id="comment-43701-info">
                
                
                
                

                

                <span class="comment-age">(29 Jun '15, 22:19)</span>
                <a class="comment-user userinfo" href="/users/4668/mreede">mrEEde</a>
                
            </div>
        </div>
    
        <a name="43706"></a>
        <div class="comment not_top_scorer" id="comment-43706">
            <div id="post-43706-score" class="comment-score"></div>
            <div class="comment-text"><p>Don't know why my prev comment is not shown here. So I repeat it: As I promised I voted up your. Because I think you are right.</p></div>
            <div class="comment-info" id="comment-43706-info">
                
                
                
                

                

                <span class="comment-age">(29 Jun '15, 23:38)</span>
                <a class="comment-user userinfo" href="/users/16160/christian_r">Christian_R</a>
                
            </div>
        </div>
    
        <a name="43794"></a>
        <div class="comment not_top_scorer" id="comment-43794">
            <div id="post-43794-score" class="comment-score"></div>
            <div class="comment-text"><p>Matthias, </p>

<p>Thanks again for you help. Is there any way you know to set the max window size? I've shut off the scaling and heuristics but it still seems to have a window size of 65500. I tried setting registry values for TcpWindowSize and and max window size but they had no effect (I'm working on windows 7). </p>

<p>Here are my latest captures (from both sides) with a smaller mtu and the limited connection requests (the setting is something like pipelining connections in Firefox now btw)</p>

<p>Client side: <a href="https://drive.google.com/file/d/0BynRhiTlgNo9dWN0YkFIYmVsWVU/view?usp=sharing">https://drive.google.com/file/d/0BynRhiTlgNo9dWN0YkFIYmVsWVU/view?usp=sharing</a>
Server side: <a href="https://drive.google.com/file/d/0BynRhiTlgNo9M0hUUmhRRDRReUE/view?usp=sharing">https://drive.google.com/file/d/0BynRhiTlgNo9M0hUUmhRRDRReUE/view?usp=sharing</a></p>

<p>Yes the network infrastructure is my program (to do the SLIP encapsulation) that is using a serial line.</p></div>
            <div class="comment-info" id="comment-43794-info">
                
                
                
                

                

                <span class="comment-age">(01 Jul '15, 10:41)</span>
                <a class="comment-user userinfo" href="/users/18045/graeme">Graeme</a>
                
            </div>
        </div>
    
        <a name="43818"></a>
        <div class="comment not_top_scorer" id="comment-43818">
            <div id="post-43818-score" class="comment-score"></div>
            <div class="comment-text"><p>I found some bugs that were causing checksum errors, Causeing the seemingly random package dropping, so things are working much much better now. Still interested if anyone knows how to set the rwin size though, haven't found a working solution for that anywhere</p></div>
            <div class="comment-info" id="comment-43818-info">
                
                
                
                

                

                <span class="comment-age">(02 Jul '15, 07:42)</span>
                <a class="comment-user userinfo" href="/users/18045/graeme">Graeme</a>
                
            </div>
        </div>
    
        <a name="43827"></a>
        <div class="comment not_top_scorer" id="comment-43827">
            <div id="post-43827-score" class="comment-score"></div>
            <div class="comment-text"><p>Maybe this will help: <a href="http://smallvoid.com/article/winnt-winsock-buffer.html">http://smallvoid.com/article/winnt-winsock-buffer.html</a> 
... A small AFD-Receive-Window will constantly be saturating the application receiving data (And blocking the remote sender). 
Don't know if it is still valid with win7 though. 
I believe FF sets the SO_RCVBUF socket option - which will take precedence :-(</p></div>
            <div class="comment-info" id="comment-43827-info">
                
                
                
                

                

                <span class="comment-age">(02 Jul '15, 10:04)</span>
                <a class="comment-user userinfo" href="/users/4668/mreede">mrEEde</a>
                
            </div>
        </div>
    
        <a name="43837"></a>
        <div class="comment" id="comment-43837">
            <div id="post-43837-score" class="comment-score">1</div>
            <div class="comment-text"><p>The windows networking stack selects RWIN based on the link media type, 
so if your Windows machine thinks it's connected to a gigabit switch, Windows will set RWIN at 64k at least.
If you pretend to be connected to a 10Mbit hub, Windows will set RWIN at around 16k. 
I also tried forcing my Windows 7 machine's network driver to use 10Mbit, which apparently reduced the RWIN to about 16k.
Also, you now have TCP timestamps enabled which steals you another 12 bytes in every segment... 
So I suggest you issue 
netsh int tcp set global timestamps=disabled
netsh int tcp set global autotuning=disabled
netsh int tcp show global 
and reduce the speed of your adapter to 10M . 
Regards Matthias</p></div>
            <div class="comment-info" id="comment-43837-info">
                
                
                
                

                

                <span class="comment-age">(03 Jul '15, 00:06)</span>
                <a class="comment-user userinfo" href="/users/4668/mreede">mrEEde</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-43602" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 11
        </span>
        <a href="#" class="show-all-comments-link">show 6 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-43602-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/43596/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='KsV7bEWbSK7MAFhC0hndcQz2cehNQFtC' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/43596/tcp-sre-keeps-increasing?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/43596/tcp-sre-keeps-increasing?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/tcp/"
            class="tag-link-tcp"
            title="see questions tagged'tcp'using tags"
            rel="tag">tcp</a> <span class="tag-number">&#215;752</span><br/>
        
        <a href="/tags/packetloss/"
            class="tag-link-packetloss"
            title="see questions tagged'packetloss'using tags"
            rel="tag">packetloss</a> <span class="tag-number">&#215;45</span><br/>
        
        <a href="/tags/dup-ack/"
            class="tag-link-dup-ack"
            title="see questions tagged'dup-ack'using tags"
            rel="tag">dup-ack</a> <span class="tag-number">&#215;42</span><br/>
        
    </p>
    <p>
        question asked: <strong title="June 26, 2015, 12:25 p.m.">26 Jun '15, 12:25</strong>
    </p>
    <p> 
     	question was seen: <strong>3,834 times</strong>
    </p>
    <p> 
        last updated: <strong title="July 3, 2015, 7:31 a.m.">03 Jul '15, 07:31</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/43361/why-retransmission-occured-before-duplicated-ack">Why retransmission occured before duplicated ACK ?</a>
        </p>
        
        <p>
            <a href="/questions/60703/info-about-this-capture">info about this capture</a>
        </p>
        
        <p>
            <a href="/questions/47747/tcp-package-loss-via-vpn-connection">TCP package loss? via VPN connection</a>
        </p>
        
        <p>
            <a href="/questions/17859/router-retransmitting-packets">router retransmitting packets</a>
        </p>
        
        <p>
            <a href="/questions/48019/tcp-dup-ack-tcp-retransmission">TCP Dup ACK / TCP Retransmission</a>
        </p>
        
        <p>
            <a href="/questions/61455/tcp-packet-length-and-congestion">TCP packet length and congestion</a>
        </p>
        
        <p>
            <a href="/questions/44474/hostel-lan-tcp-retransmission-and-dupack-problem">Hostel lan TCP retransmission and DupACK problem</a>
        </p>
        
        <p>
            <a href="/questions/36646/tcp-dup-and-resetting-phone">TCP DUP and resetting phone</a>
        </p>
        
        <p>
            <a href="/questions/20723/please-check-for-me">please check for me.</a>
        </p>
        
        <p>
            <a href="/questions/55743/over-1000-duplicate-acks-without-tcp-retransmission">Over 1,000 duplicate ACKs without TCP retransmission</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
