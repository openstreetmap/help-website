<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Problem with our Web site - Wireshark Q&amp;A</title>
        <meta name="description" content="Thank you. I have a small Web site that makes a Ajax &quot;GET&quot; request every 200ms to a Web server. The Web site wait for a small document (750 bytes) from the server, it displays the document data before to send a new request to the server.  The document is updated periodically every 200ms by another p..." />
        <meta name="keywords" content="http" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/17776/problem-with-our-web-site" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/17776/problem-with-our-web-site?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='lXAhNO9bMkVTLa2a3EGhfTgL5yzHbd3f' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/17776/problem-with-our-web-site">Problem with our Web site</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-17776-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/17776/up/" rel="nofollow"> </a>
<div id="post-17776-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-17776-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/17776/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/17776/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>Thank you.
I have a small Web site that makes a Ajax "GET" request every 200ms to a Web server. The Web site wait for a small document (750 bytes) from the server, it displays the document data before to send a new request to the server. 
The document is updated periodically every 200ms by another process (priority superior than web server'one). There is no synchronization between two processes.
So, the reading task (web server) may be interrupted from time to time by the writing task, but not for long time.
The data in the document could be error some times, but it is not a big problem, because the data is only for display, in addition we check data and display only if data is good.
The problem is that our application is stopped after some hours of run, and always after reception of a "Continuation or non-HTTP traffic" packet. And the web site doesn't know to detect this case. As the packet "says" the data is not finished, it is keeped to wait some packets more that never arrive, so it is blocked. I think it is an error coming from the server side, but is it possible to fix it in the web site or not ? 
Case OK from Wireshark (during some hours) :</p>
<pre><code>HTTP/1.1 200 OK (application/octet-stream)
</code></pre>
<p>case not OK from Whireshark :</p>
<pre><code>HTTP/1.1 200 OK (application/octet-stream)
Continuation or non-HTTP traffic.
</code></pre>
<p>Following is the source code of the web site :</p>
<pre><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt;
&lt;head&gt;
&lt;title&gt;XPS-Q8 - Test AJAX&lt;/title&gt;
&lt;meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1" /&gt;
&lt;script type="text/javascript"&gt;

var req=null;
var timeout=null;
function requestGetAJAX()
{
document.FP_MoveFormRefresh.test2.value = "-1  -1";
timeout=null;
var url = "/lnkXpsdata.json?nocache=" + Math.random();
req=createRequest();
req.onreadystatechange=stateChange;
req.open("GET", url, true);
req.send(null);
timeout=setTimeout("treatmentTimeout()", 5000);
}
function treatmentTimeout()
{
req.abort();
document.FP_MoveFormRefresh.test.value = "Ajax request timeout";
requestGetAJAX();
}
function treatmentDataError()
{
req.abort();
requestGetAJAX();
}
function treatmentDataOK()
{
req.abort();
requestGetAJAX();
}
function createRequest()
{
var request=null;
if (window.XMLHttpRequest) {
    request=new XMLHttpRequest();
    if (request.overrideMimeType)
        request.overrideMimeType("text/xml");
}
else if (window.ActiveXObject) {
    try {
        request=new ActiveXObject("Msxml2.XMLHTTP");
    }
    catch(e) {
        try {
            request=new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch(e) {
            alert("Browser doesn't support AJAX");
        }
    }
}
return request;
}
function stateChange(dataText)
{
document.FP_MoveFormRefresh.test2.value = req.readyState + "  " + req.status;
if(req.readyState == 4) {
    if(req.status == 200) {
        if(timeout != null) {
            clearTimeout(timeout);
            timeout=null;
        }
        if(req.getResponseHeader("Content-Length") &gt; 0) {
            if((req.responseText.indexOf("{\n") &gt;= 0) &amp;&amp; (req.responseText.indexOf("]\n}") &gt; 0)) {
                var contenttype=req.getResponseHeader("Content-Type");
                if(contenttype.indexOf("Continuation or non-HTTP traffic") &gt;= 0) {  &lt;! This line doesn't work !!!!! /&gt;
                    document.FP_MoveFormRefresh.test.value = "Continu/non-HTTP traffic";
                    setTimeout("treatmentDataOK()", 2000);
                }
                else {
                    document.FP_MoveFormRefresh.test.value = contenttype;
                    parseRequestData(req.responseText);
                    setTimeout("treatmentDataOK()", 200);
                }
            }
            else {
                document.FP_MoveFormRefresh.test.value = "Ajax data error";
                setTimeout("treatmentDataError()", 2000);
            }
        }
        else {
            document.FP_MoveFormRefresh.test.value = "Ajax data length zero";
            setTimeout("treatmentDataError()", 2000);
        }
    }
    else {
        document.FP_MoveFormRefresh.test.value = "Error status(!=200)=" + req.status;
        setTimeout("treatmentDataError()", 2000);
    }
}
}
function parseRequestData(dataText)
{
var aPos1=null;
aPos1=document.getElementById("ajpos1");
var aStat1=null;
aStat1=document.getElementById("ajstate1");
var aPos2=null;
aPos2=document.getElementById("ajpos2");
var aStat2=null;
aStat2=document.getElementById("ajstate2");
var aPos3=null;
aPos3=document.getElementById("ajpos3");
var aStat3=null;
aStat3=document.getElementById("ajstate3");
var aPos4=null;
aPos4=document.getElementById("ajpos4");
var aStat4=null;
aStat4=document.getElementById("ajstate4");
var aPos5=null;
aPos5=document.getElementById("ajpos5");
var aStat5=null;
aStat5=document.getElementById("ajstate5");
var aPos6=null;
aPos6=document.getElementById("ajpos6");
var aStat6=null;
aStat6=document.getElementById("ajstate6");
var aPos7=null;
aPos7=document.getElementById("ajpos7");
var aStat7=null;
aStat7=document.getElementById("ajstate7");
var data=null;
data=eval("(" + dataText + ")");
if(data != null) {
    if(aPos1 != null)
        aPos1.value=data.positioners[0].position;
    if(aStat1 != null)
        aStat1.value=data.positioners[0].state;
    if(aPos2 != null)
        aPos2.value=data.positioners[1].position;
    if(aStat2 != null)
        aStat2.value=data.positioners[1].state;
    if(aPos3 != null)
        aPos3.value=data.positioners[2].position;
    if(aStat3 != null)
        aStat3.value=data.positioners[2].state;
    if(aPos4 != null)
        aPos4.value=data.positioners[3].position;
    if(aStat4 != null)
        aStat4.value=data.positioners[3].state;
    if(aPos5 != null)
        aPos5.value=data.positioners[4].position;
    if(aStat5 != null)
        aStat5.value=data.positioners[4].state;
    if(aPos6 != null)
        aPos6.value=data.positioners[5].position;
    if(aStat6 != null)
        aStat6.value=data.positioners[5].state;
    if(aPos7 != null)
        aPos7.value=data.positioners[6].position;
    if(aStat7 != null)
        aStat7.value=data.positioners[6].state;
}
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body onload="requestGetAJAX()"&gt;
&lt;form action="/cgi-bin/post.cgi" method="post" name="FP_MoveFormRefresh"&gt;
&lt;input type="hidden" name="step" value="131" /&gt;
&lt;input type="hidden" name="numoption" value="141" /&gt;
&lt;input type="hidden" name="cmd" value="0" /&gt;
&lt;input type="hidden" name="posStat0" value="0" /&gt;
&lt;input type="hidden" name="posStat1" value="0" /&gt;
&lt;input type="hidden" name="posStat2" value="0" /&gt;
&lt;input type="hidden" name="posStat3" value="0" /&gt;
&lt;input type="hidden" name="posStat4" value="0" /&gt;
&lt;input type="hidden" name="posStat5" value="0" /&gt;
&lt;input type="hidden" name="posStat6" value="0" /&gt;
&lt;div id="calqueMoveRefresh"&gt;
&lt;h2&gt;TEST AJAX REQUESTS&lt;/h2&gt;
&lt;table width="50%" border="0" cellspacing="1" cellpadding="0"&gt;
&lt;tr&gt;
&lt;td&gt;&lt;b&gt;Position&lt;/b&gt;&lt;/td&gt;
&lt;td&gt;&lt;b&gt;State&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;input type="text" name="position1" id="ajpos1" size="20" value="0"/&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;input type="text" name="state1" id="ajstate1" size="4" value="0"/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;input type="text" name="position2" id="ajpos2" size="20" value="0"/&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;input type="text" name="state2" id="ajstate2" size="4" value="0"/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;input type="text" name="position3" id="ajpos3" size="20" value="0"/&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;input type="text" name="state3" id="ajstate3" size="4" value="0"/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;input type="text" name="position4" id="ajpos4" size="20" value="0"/&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;input type="text" name="state4" id="ajstate4" size="4" value="0"/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;input type="text" name="position5" id="ajpos5" size="20" value="0"/&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;input type="text" name="state5" id="ajstate5" size="4" value="0"/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;input type="text" name="position6" id="ajpos6" size="20" value="0"/&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;input type="text" name="state6" id="ajstate6" size="4" value="0"/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;input type="text" name="position7" id="ajpos7" size="20" value="0"/&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;input type="text" name="state7" id="ajstate7" size="4" value="0"/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;
&lt;table width="50%" border="0" cellspacing="1" cellpadding="0"&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;input type="text" name="test" size="50" maxlength="50" value=""/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;input type="text" name="test2" size="50" maxlength="50" value=""/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;
&lt;/table&gt;
&lt;table width="50%" border="0" cellspacing="1" cellpadding="0"&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;input type="button" name="restart" value="Re-Start" onclick="requestGetAJAX()"/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Thank you very much for help.
NewportMicro</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/http/" class="post-tag tag-link-http"
                                        title="see questions tagged 'http'" rel="tag">http</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>18 Jan '13, 06:41</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/f10a82d78508c185a8fcd3588f9ffab7?s=32&amp;d=identicon&amp;r=g" alt="NewportMicro's gravatar image" />
    <p><a href="/users/4225/newportmicro">NewportMicro</a><br/>
    <span class="score" title="16 reputation points">16</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">&#9679;</span><span class="badgecount">3</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="NewportMicro has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/17776/">
                edited
                <strong>18 Jan '13, 10:47</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/f93de7000747ab5efb5acd3034b2ebd7?s=32&amp;d=identicon&amp;r=g" alt="Guy%20Harris's gravatar image" />
            <p><a href="/users/79/guy-harris">Guy Harris ♦♦</a><br/>
            <span class="score" title="17443 reputation points"><span class="">17.4k</span></span><span title="3 badges"><span class="badge1">&#9679;</span><span class="badgecount">3</span></span><span title="35 badges"><span class="silver">&#9679;</span><span class="badgecount">35</span></span><span title="196 badges"><span class="bronze">&#9679;</span><span class="badgecount">196</span></span></p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-17776">
    
        <a name="18025"></a>
        <div class="comment" id="comment-18025">
            <div id="post-18025-score" class="comment-score"></div>
            <div class="comment-text"><p>Thank you. It is done. Below is the link :</p>

<p><a href="http://www.cloudshark.org/captures/c4b78426649d">http://www.cloudshark.org/captures/c4b78426649d</a></p>

<p>The IP of the Web server target is 192.168.33.242. The IP of the client web site is 192.168.32.109.</p>

<p>Thank you very much for taking a look at it.</p></div>
            <div class="comment-info" id="comment-18025-info">
                
                
                
                

                

                <span class="comment-age">(29 Jan '13, 03:28)</span>
                <a class="comment-user userinfo" href="/users/4225/newportmicro">NewportMicro</a>
                
            </div>
        </div>
    
        <a name="18029"></a>
        <div class="comment" id="comment-18029">
            <div id="post-18029-score" class="comment-score"></div>
            <div class="comment-text"><p>I converted your "answer" to a comment as that's how this site works, see the FAQ for more info.</p></div>
            <div class="comment-info" id="comment-18029-info">
                
                
                
                

                

                <span class="comment-age">(29 Jan '13, 03:37)</span>
                <a class="comment-user userinfo" href="/users/1225/grahamb">grahamb ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-17776" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-17776-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    3 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/17776/problem-with-our-web-site?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/17776/problem-with-our-web-site?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/17776/problem-with-our-web-site?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/17776/problem-with-our-web-site?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="17808"></a>
                    <div id="answer-container-17808" class="answer accepted-answer">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-17808-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/17808/up/" rel="nofollow"> </a>
<div id="post-17808-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-17808-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/17808/down/" rel="nofollow"> </a>

                                        


    
      <a class="accept-answer on"
        title="NewportMicro has selected this answer as the correct answer"
        href="/accept_answer/17808/" rel="nofollow">
      </a>
    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <blockquote>
<p>The document is updated periodically every 200ms by another process (priority superior than web server'one). <strong>There is no synchronization</strong> between two processes.</p>
</blockquote>
<p>without knowing any details about your OS (realtime or not), and the file update process, I believe you are running </p>
<ul>
<li>either into a race condition of the two processes</li>
<li>or into a bug of the update process</li>
</ul>
<p><strong>Race condition:</strong></p>
<p>One process opens the file for a write operation and possibly writes some bytes, then the next process (web server) opens the file for reading. This will end up in unpredictable results. </p>
<p>I suggest to redesign the whole process of updating the information in the file. From the information you gave, there <strong>should be</strong> some synchronization between the update process and the web server process.</p>
<p><strong>Bug of the update process:</strong></p>
<p>Another possible error could be: the update process itself is buggy and writes a bogus file after some time (did you check that?), which would explain why you run into this only after a few hours. </p>
<p>As <a href="/users/5/syn-bit"><a href="/users/5/syn-bit">@SYN-bit</a></a> said, without a capture file it is hard to analyze. But even <strong>with</strong> a capture file, you may not see the real reason for the problem, without analyzing the problem on the system itself.</p>
<p>Regards<br>
Kurt</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/17808/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>21 Jan '13, 07:34</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" alt="Kurt%20Knochner's gravatar image" />
    <p><a href="/users/2593/kurt-knochner">Kurt Knochner ♦</a><br/>
    <span class="score" title="24767 reputation points"><span class="">24.8k</span></span><span title="10 badges"><span class="badge1">&#9679;</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">&#9679;</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">&#9679;</span><span class="badgecount">237</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Kurt Knochner has 344 accepted answers">15&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/17808/">
                edited
                <strong>21 Jan '13, 07:40</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-17808">
    
</div>
<div id="comment-tools-17808" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-17808-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="18036"></a>
                    <div id="answer-container-18036" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-18036-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/18036/up/" rel="nofollow"> </a>
<div id="post-18036-score" class="post-score"
    title="current number of votes">
    2
</div>
<a id="post-18036-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/18036/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>I have looked at your tracefile and found the cause of the problem. If you filter with "tcp.stream==1308" you will see that the server responds with a "Content-Length:754" header, while in fact the content is 756 bytes long. </p>
<p>The webserver should respond with the correct content-length. So you have to be aware that the file can get written to between functions. So if your code looks something like this:</p>
<pre><code>len=getLengthOfFile("file");
printf("Content-Length: %d\n", len);
printf("\r\n\r\n");
data=readFile("file");
printf("%s",data);
</code></pre>
<p>You might get into this kind of problem (when a new file is being written between the getLengthOfFile() and readFile()).</p>
<p>Also, your client code could be made more robust in handling errors and exceptions.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/18036/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>29 Jan '13, 06:33</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7901a94d8fdd1f9f47cda9a32fcfa177?s=32&amp;d=identicon&amp;r=g" alt="SYN-bit's gravatar image" />
    <p><a href="/users/5/syn-bit">SYN-bit ♦♦</a><br/>
    <span class="score" title="17094 reputation points"><span class="">17.1k</span></span><span title="9 badges"><span class="badge1">&#9679;</span><span class="badgecount">9</span></span><span title="57 badges"><span class="silver">&#9679;</span><span class="badgecount">57</span></span><span title="245 badges"><span class="bronze">&#9679;</span><span class="badgecount">245</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="SYN-bit has 174 accepted answers">20&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-18036">
    
        <a name="18080"></a>
        <div class="comment" id="comment-18080">
            <div id="post-18080-score" class="comment-score"></div>
            <div class="comment-text"><p>Great.</p>

<p>Thank you very much for the excellent analyse. I will do as you did and then inform to you the result.</p>

<p>Have a nice day.</p></div>
            <div class="comment-info" id="comment-18080-info">
                
                
                
                

                

                <span class="comment-age">(30 Jan '13, 01:10)</span>
                <a class="comment-user userinfo" href="/users/4225/newportmicro">NewportMicro</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-18036" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-18036-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="17796"></a>
                    <div id="answer-container-17796" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-17796-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/17796/up/" rel="nofollow"> </a>
<div id="post-17796-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-17796-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/17796/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>I can think of a couple of reasons why wireshark displays the HTTP in those two ways. But I'd like to not guess but look at the packets to determine what the cause might be.</p>
<p>Could you please post the wireshark pcap file to www.cloudshark.org and paste the link here in a comment?</p>
<p>(Only if you are not revealing privacy sensitive information in the pcap file)</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/17796/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>20 Jan '13, 01:53</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7901a94d8fdd1f9f47cda9a32fcfa177?s=32&amp;d=identicon&amp;r=g" alt="SYN-bit's gravatar image" />
    <p><a href="/users/5/syn-bit">SYN-bit ♦♦</a><br/>
    <span class="score" title="17094 reputation points"><span class="">17.1k</span></span><span title="9 badges"><span class="badge1">&#9679;</span><span class="badgecount">9</span></span><span title="57 badges"><span class="silver">&#9679;</span><span class="badgecount">57</span></span><span title="245 badges"><span class="bronze">&#9679;</span><span class="badgecount">245</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="SYN-bit has 174 accepted answers">20&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-17796">
    
        <a name="18021"></a>
        <div class="comment" id="comment-18021">
            <div id="post-18021-score" class="comment-score"></div>
            <div class="comment-text"><p>Thank you for your comments. I tried to upload a pcap file that showing the problem but  I don't know how to do. Could you show me how to upload a pcap file to www.cloudshark.org ?</p></div>
            <div class="comment-info" id="comment-18021-info">
                
                
                
                

                

                <span class="comment-age">(29 Jan '13, 00:45)</span>
                <a class="comment-user userinfo" href="/users/4225/newportmicro">NewportMicro</a>
                
            </div>
        </div>
    
        <a name="18022"></a>
        <div class="comment" id="comment-18022">
            <div id="post-18022-score" class="comment-score"></div>
            <div class="comment-text"><p>Open 'cloudshark.org' in your browser, click the button (large panel really) with the label "Drag and Drop a capture file to upload" and then a file browser dialog should open which allows you to choose a capture to upload.  Post a link back to the uploaded capture file by editing your question, or adding a comment to an existing answer.</p></div>
            <div class="comment-info" id="comment-18022-info">
                
                
                
                

                

                <span class="comment-age">(29 Jan '13, 01:40)</span>
                <a class="comment-user userinfo" href="/users/1225/grahamb">grahamb ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-17796" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-17796-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/17776/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='lXAhNO9bMkVTLa2a3EGhfTgL5yzHbd3f' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/17776/problem-with-our-web-site?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/17776/problem-with-our-web-site?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/http/"
            class="tag-link-http"
            title="see questions tagged'http'using tags"
            rel="tag">http</a> <span class="tag-number">&#215;293</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Jan. 18, 2013, 6:41 a.m.">18 Jan '13, 06:41</strong>
    </p>
    <p> 
     	question was seen: <strong>4,009 times</strong>
    </p>
    <p> 
        last updated: <strong title="Jan. 30, 2013, 1:15 a.m.">30 Jan '13, 01:15</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/53747/scripting-follow-tcp-stream-save-as-raw">Scripting Follow TCP Stream -&gt; Save As [Raw]</a>
        </p>
        
        <p>
            <a href="/questions/57217/problem-with-http-dissector-on-204-with-content-type">Problem with http dissector on 204 with Content-type</a>
        </p>
        
        <p>
            <a href="/questions/62474/just-tcp-but-no-http-packet">Just TCP but no HTTP packet</a>
        </p>
        
        <p>
            <a href="/questions/701/display-all-streams-with-a-matching-uri">Display all streams with a matching URI</a>
        </p>
        
        <p>
            <a href="/questions/3658/http-packets">HTTP packets</a>
        </p>
        
        <p>
            <a href="/questions/7268/http-continuation-vs-tcp-segment">HTTP Continuation vs. TCP segment</a>
        </p>
        
        <p>
            <a href="/questions/8997/how-can-i-tell-which-http-get-a-particular-response-belongs-to">How can I tell which HTTP GET a particular response belongs to?</a>
        </p>
        
        <p>
            <a href="/questions/10282/how-do-i-extract-the-cookie-path">How do I Extract the cookie path?</a>
        </p>
        
        <p>
            <a href="/questions/13622/how-decode-a-gzip-url">How decode a gzip url</a>
        </p>
        
        <p>
            <a href="/questions/16964/analyzing-http-protocol-using-tshark">Analyzing HTTP protocol using Tshark</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
