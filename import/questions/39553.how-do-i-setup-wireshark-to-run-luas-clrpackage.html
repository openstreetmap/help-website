<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>How do I setup Wireshark to run Lua&#39;s CLRPackage - Wireshark Q&amp;A</title>
        <meta name="description" content="I previously asked this question about Wireshark setup for running Lua&#39;s CLRPackage and it was answered here. The problem is, after version 1.10.9, it appears that some startup search paths or something related have changed. Could someone provide the changes that occurred after 1.10.9 that affect wh..." />
        <meta name="keywords" content="lua,error,startup,clrpackage,wireshark" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/39553/how-do-i-setup-wireshark-to-run-luas-clrpackage" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/39553/how-do-i-setup-wireshark-to-run-luas-clrpackage?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='NPN2BueuBrb2lRYC8QCcOSAxRN4J9YVX' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/39553/how-do-i-setup-wireshark-to-run-luas-clrpackage">How do I setup Wireshark to run Lua&#39;s CLRPackage</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-39553-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/39553/up/" rel="nofollow"> </a>
<div id="post-39553-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-39553-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/39553/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/39553/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   1
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>I previously asked this question about Wireshark setup for running Lua's CLRPackage and it was answered <a href="https://ask.wireshark.org/questions/5868/how-do-i-setup-wireshark-to-run-luas-clrpackage">here</a>.  The problem is, after version 1.10.9, it appears that some startup search paths or something related have changed.  Could someone provide the changes that occurred after 1.10.9 that affect where libraries and other scripts are searched?</p>
<p>I receive the following error if I run the setup with any version after 1.10.9:</p>
<p><img alt="Loading Error" src="https://osqa-ask.wireshark.org/upfiles/error.bmp"></p>
<p>The line in init.lua is:</p>
<p><code>DATA_DIR = datafile_path()</code></p>
<p><strong>Update</strong></p>
<p>I looks like this is from a previous init.lua file that was being copied, after updating to the latest version, the error is now:</p>
<p><img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/error2.bmp"></p>
<p><strong>Update 2</strong>
To answer some of the questions:</p>
<ul>
<li>How did you load the "CLRPackage.lua" file? Did you put it in Wireshark's personal plugins directory, or load it using "dofile()", or load it from the command line using the "-X lua_script:..." command? </li>
</ul>
<p>It was placed in the <code>C:\Program Files (x86)\Wireshark\lua</code> directory</p>
<ul>
<li>Where exactly is the "luanet.lua" file?</li>
</ul>
<p>I actually dont see this file anywhere, but there is a <code>luanet.dll</code> in the clibs directory (<code>C:\Program Files (x86)\Wireshark\clibs</code>)</p>
<ul>
<li>What is line 15 of CLRPackage.lua?</li>
</ul>
<p>This is the code: <code>if not luanet then require 'luanet' end</code></p>
<p><strong>Update 3</strong> Update for additional questions</p>
<ul>
<li>I don't know how this worked even before 1.11.3, unless CLRPackage.lua amended the cpath.</li>
</ul>
<p>I looked inside of the CLRPackage.lua and I dont see any place it appends to the cpath.  The test program that is included does however append the <code>LUA_DEV</code>\clibs directory to <code>package.cpath</code>, but I dont think thats part of the core dll's.</p>
<ul>
<li>How did you get CLRPackage installed? Did you need to compile Wireshark from source code to use CLRPackage? Or did you need to install LuaRocks or some other package?</li>
</ul>
<p>I didnt compile any of the files provided, I just copied them from the zip file provided.  I've tried to compile them using VS2010 but I havent had any luck.</p>
<ul>
<li>What are your Wireshark personal and global plugins directories named? Open Wireshark, go to Help-&gt;About Wireshark, and click on the Folders tab. It will list a personal and global plugins directories.</li>
</ul>
<p>Here is the complete list:</p>
<p><img alt="Folders" src="https://osqa-ask.wireshark.org/upfiles/folders_XD3x8i3.bmp"></p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/lua/" class="post-tag tag-link-lua"
                                        title="see questions tagged 'lua'" rel="tag">lua</a>
                                
                                    <a href="/tags/error/" class="post-tag tag-link-error"
                                        title="see questions tagged 'error'" rel="tag">error</a>
                                
                                    <a href="/tags/startup/" class="post-tag tag-link-startup"
                                        title="see questions tagged 'startup'" rel="tag">startup</a>
                                
                                    <a href="/tags/clrpackage/" class="post-tag tag-link-clrpackage"
                                        title="see questions tagged 'clrpackage'" rel="tag">clrpackage</a>
                                
                                    <a href="/tags/wireshark/" class="post-tag tag-link-wireshark"
                                        title="see questions tagged 'wireshark'" rel="tag">wireshark</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>02 Feb '15, 06:29</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=32&amp;d=identicon&amp;r=g" alt="SwDevMan81's gravatar image" />
    <p><a href="/users/1499/swdevman81">SwDevMan81</a><br/>
    <span class="score" title="36 reputation points">36</span><span title="3 badges"><span class="badge1">&#9679;</span><span class="badgecount">3</span></span><span title="6 badges"><span class="silver">&#9679;</span><span class="badgecount">6</span></span><span title="12 badges"><span class="bronze">&#9679;</span><span class="badgecount">12</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="SwDevMan81 has one accepted answer">50&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/39553/">
                edited
                <strong>02 Feb '15, 11:52</strong>
            </a>
        </p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-39553">
    
        <a name="39562"></a>
        <div class="comment" id="comment-39562">
            <div id="post-39562-score" class="comment-score"></div>
            <div class="comment-text"><p>Just to be clear: it was working fine in 1.10.9 but failed in 1.10.10?</p></div>
            <div class="comment-info" id="comment-39562-info">
                
                
                
                

                

                <span class="comment-age">(02 Feb '15, 08:25)</span>
                <a class="comment-user userinfo" href="/users/4318/hadriel">Hadriel</a>
                
            </div>
        </div>
    
        <a name="39568"></a>
        <div class="comment" id="comment-39568">
            <div id="post-39568-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/4318/hadriel">@Hadriel</a> - So I went through all the revisions to determine when it actually broke. It looks like it stopped working at 1.11.3, which looks like a change from Lua 5.1 to 5.2.</p></div>
            <div class="comment-info" id="comment-39568-info">
                
                
                
                

                

                <span class="comment-age">(02 Feb '15, 09:27)</span>
                <a class="comment-user userinfo" href="/users/1499/swdevman81">SwDevMan81</a>
                
            </div>
        </div>
    
        <a name="39572"></a>
        <div class="comment" id="comment-39572">
            <div id="post-39572-score" class="comment-score"></div>
            <div class="comment-text"><p>A lot changed for Wireshark's Lua in version 1.11.3. I'm not sure this is related to the change to Lua 5.2, though, because the error message above appears to show wireshark can't find the "luanet" Lua module in the path. The various directory paths that it's trying are missing the subdirectory that file is in, presumably.</p>

<p>So some questions: How did you load the "CLRPackage.lua" file?  Did you put it in Wireshark's personal plugins directory, or load it using "<code>dofile()</code>", or load it from the command line using the "<code>-X lua_script:...</code>" command?  And where exactly is the "luanet.lua" file?  And what is line 15 of CLRPackage.lua?</p></div>
            <div class="comment-info" id="comment-39572-info">
                
                
                
                

                

                <span class="comment-age">(02 Feb '15, 10:13)</span>
                <a class="comment-user userinfo" href="/users/4318/hadriel">Hadriel</a>
                
            </div>
        </div>
    
        <a name="39573"></a>
        <div class="comment" id="comment-39573">
            <div id="post-39573-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/4318/hadriel">@Hadriel</a> - I update the question to address your questions.  Let me know if you need more.  All the locations and files that I copied match the answer provided <a href="https://ask.wireshark.org/questions/5868/how-do-i-setup-wireshark-to-run-luas-clrpackage/5880">here</a></p></div>
            <div class="comment-info" id="comment-39573-info">
                
                
                
                

                

                <span class="comment-age">(02 Feb '15, 10:38)</span>
                <a class="comment-user userinfo" href="/users/1499/swdevman81">SwDevMan81</a>
                
            </div>
        </div>
    
        <a name="39574"></a>
        <div class="comment" id="comment-39574">
            <div id="post-39574-score" class="comment-score"></div>
            <div class="comment-text"><p>OK, so the problem is that "<code>luanet.dll</code>" is a binary module, which means its directory (the "clibs" one) needs to be in Lua's "<code>package.cpath</code>" global variable, and it's not.  There was a change in 1.11.3 to handle the various changes to environments, Lua 5.2., and module paths... but it only changed/fixed the Lua "<code>package.path</code>" variable, not "<code>package.cpath</code>" (<a href="https://code.wireshark.org/review/841">this change</a>).</p>

<p>So I can fix that, but I'm not sure it will be enough, because it won't add "<code>clibs</code>" because that's not a default directory, of either Lua or Wireshark.  I don't know how this worked even before 1.11.3, unless CLRPackage.lua amended the cpath.</p>

<p>So some more questions:
How did you get CLRPackage installed?  Did you need to compile Wireshark from source code to use CLRPackage? Or did you need to install LuaRocks or some other package?</p>

<p>What are your Wireshark personal and global plugins directories named?  Open Wireshark, go to Help-&gt;About Wireshark, and click on the Folders tab. It will list a personal and global plugins directories.</p></div>
            <div class="comment-info" id="comment-39574-info">
                
                
                
                

                

                <span class="comment-age">(02 Feb '15, 11:34)</span>
                <a class="comment-user userinfo" href="/users/4318/hadriel">Hadriel</a>
                
            </div>
        </div>
    
        <a name="39575"></a>
        <div class="comment not_top_scorer" id="comment-39575">
            <div id="post-39575-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/4318/hadriel">@Hadriel</a> - Updated with more information, thanks for the help on this.</p></div>
            <div class="comment-info" id="comment-39575-info">
                
                
                
                

                

                <span class="comment-age">(02 Feb '15, 11:55)</span>
                <a class="comment-user userinfo" href="/users/1499/swdevman81">SwDevMan81</a>
                
            </div>
        </div>
    
        <a name="39577"></a>
        <div class="comment not_top_scorer" id="comment-39577">
            <div id="post-39577-score" class="comment-score"></div>
            <div class="comment-text"><p>Well those plugin directories look normal, so I can't figure out why "<code>CLRPackage.lua</code>" was loaded at all to begin with, since it's not in one of those plugin directories. Are there any Lua files in those plugin directories? (even an "<code>init.lua</code>")</p></div>
            <div class="comment-info" id="comment-39577-info">
                
                
                
                

                

                <span class="comment-age">(02 Feb '15, 12:58)</span>
                <a class="comment-user userinfo" href="/users/4318/hadriel">Hadriel</a>
                
            </div>
        </div>
    
        <a name="39580"></a>
        <div class="comment not_top_scorer" id="comment-39580">
            <div id="post-39580-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/4318/hadriel">@Hadriel</a> - If I navigate to the <code>Personal Plugins</code> and <code>Global Plugins</code>, there are no lua scripts in those folders.</p></div>
            <div class="comment-info" id="comment-39580-info">
                
                
                
                

                

                <span class="comment-age">(02 Feb '15, 13:37)</span>
                <a class="comment-user userinfo" href="/users/1499/swdevman81">SwDevMan81</a>
                
            </div>
        </div>
    
        <a name="39582"></a>
        <div class="comment not_top_scorer" id="comment-39582">
            <div id="post-39582-score" class="comment-score"></div>
            <div class="comment-text"><p>Do you remember where you got the CLRPackage zip file?  I googled but got various hits, none of which look like the definitive source.</p></div>
            <div class="comment-info" id="comment-39582-info">
                
                
                
                

                

                <span class="comment-age">(02 Feb '15, 13:57)</span>
                <a class="comment-user userinfo" href="/users/4318/hadriel">Hadriel</a>
                
            </div>
        </div>
    
        <a name="39584"></a>
        <div class="comment not_top_scorer" id="comment-39584">
            <div id="post-39584-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/4318/hadriel">@Hadriel</a> - I downloaded it from <a href="https://luaforwindows.googlecode.com/issues/attachment?aid=-5151554520907055534&amp;name=LuaInterface_203_LuaForWindows.zip&amp;token=ABZ6GAdJ23ZUGRfUwya7K8CNeNfGEHsMcg%3A1422914799901">here</a>.  Inside the zip file, its <code>LuaInterface &gt; LuaInterface &gt; lua &gt; CLRPackage.lua</code></p></div>
            <div class="comment-info" id="comment-39584-info">
                
                
                
                

                

                <span class="comment-age">(02 Feb '15, 14:08)</span>
                <a class="comment-user userinfo" href="/users/1499/swdevman81">SwDevMan81</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-39553" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 10
        </span>
        <a href="#" class="show-all-comments-link">show 5 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-39553-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    One Answer:
                    </div>
                    
<div class="tabsA"><a href="/questions/39553/how-do-i-setup-wireshark-to-run-luas-clrpackage?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/39553/how-do-i-setup-wireshark-to-run-luas-clrpackage?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/39553/how-do-i-setup-wireshark-to-run-luas-clrpackage?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/39553/how-do-i-setup-wireshark-to-run-luas-clrpackage?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="39588"></a>
                    <div id="answer-container-39588" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-39588-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/39588/up/" rel="nofollow"> </a>
<div id="post-39588-score" class="post-score"
    title="current number of votes">
    1
</div>
<a id="post-39588-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/39588/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>I doubt that Luainterface will work with Wireshark anymore, because it looks like it was compiled for Lua 5.0 and 5.1 compatibility, but not 5.2. But you can find out... to get past the current issue of not finding the "<code>luanet.dll</code>" file, put this in your <code>init.lua</code> file, at the <strong>end</strong> of the <code>init.lua</code> file:</p>
<pre><code>package.cpath = DATA_DIR .. "\\clibs\\?.dll;" .. package.cpath
</code></pre>
<p>Hopefully that should make Wireshark's Lua find the <code>luanet.dll</code> file when it loads <code>CLRPackage.lua</code>, but again my guess is at that point you'll hit another problem because it's not compiled for Lua 5.2 compatibility.  You might have to upgrade to the current fork of Luainterface, which appears to be <a href="https://github.com/NLua/NLua">NLua</a>.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/39588/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>02 Feb '15, 19:35</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/d02f20c18a7742ec73a666f1974bf6dc?s=32&amp;d=identicon&amp;r=g" alt="Hadriel's gravatar image" />
    <p><a href="/users/4318/hadriel">Hadriel</a><br/>
    <span class="score" title="2652 reputation points"><span class="">2.7k</span></span><span title="2 badges"><span class="badge1">&#9679;</span><span class="badgecount">2</span></span><span title="9 badges"><span class="silver">&#9679;</span><span class="badgecount">9</span></span><span title="39 badges"><span class="bronze">&#9679;</span><span class="badgecount">39</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Hadriel has 30 accepted answers">18&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-39588">
    
        <a name="39605"></a>
        <div class="comment" id="comment-39605">
            <div id="post-39605-score" class="comment-score"></div>
            <div class="comment-text"><p>I think you are right.  I also added <code>package.path = DATA_DIR .. "\\lua\\?.lua;" .. package.path</code> to <code>init.lua</code> to get it to not error on startup, but now it just hangs at 99% at <code>Handing off plugins...</code>.  So I'm guessing its because of the Lua incompatibility you mentioned.</p></div>
            <div class="comment-info" id="comment-39605-info">
                
                
                
                

                

                <span class="comment-age">(03 Feb '15, 05:32)</span>
                <a class="comment-user userinfo" href="/users/1499/swdevman81">SwDevMan81</a>
                
            </div>
        </div>
    
        <a name="39673"></a>
        <div class="comment" id="comment-39673">
            <div id="post-39673-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/4318/hadriel"></a><a href="/users/4318/hadriel">@Hadriel</a> - I'm trying to build against Lua 5.2, but I'm having some porting issues.  Is there any chance you could help with conversion.  I tried NLua and it doesnt appear to support the stock Lua 5.2 source (I think theyve made modifications, which wont help when using the Lua thats built in Wireshark).  The questions are <a href="http://stackoverflow.com/q/28332452/95573">here</a></p></div>
            <div class="comment-info" id="comment-39673-info">
                
                
                
                

                

                <span class="comment-age">(05 Feb '15, 11:13)</span>
                <a class="comment-user userinfo" href="/users/1499/swdevman81">SwDevMan81</a>
                
            </div>
        </div>
    
        <a name="39836"></a>
        <div class="comment" id="comment-39836">
            <div id="post-39836-score" class="comment-score"></div>
            <div class="comment-text"><p>Unfortunately I don't use Windows nor have a Windows system.</p></div>
            <div class="comment-info" id="comment-39836-info">
                
                
                
                

                

                <span class="comment-age">(12 Feb '15, 10:44)</span>
                <a class="comment-user userinfo" href="/users/4318/hadriel">Hadriel</a>
                
            </div>
        </div>
    
        <a name="39838"></a>
        <div class="comment" id="comment-39838">
            <div id="post-39838-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/4318/hadriel">@Hadriel</a> - No problem, I've actually got it to work now.  I took the LuaInterface code and updated it for Lua 5.2 and compiled with VS 2010 targeting .NET 4.0 and Lua52.dll.  I actually went back and built the LuaInterface for Lua 5.1 with VS 2010 targeting .NET 2.0 and Lua5.1.dll.  I dont have a good place to host these but I could put them somewhere if you have a recommendation.  Then I'll provide an answer to how to install like the previous question detailed.  Thanks for the support on this, the answer you provided led me in the right direction.</p></div>
            <div class="comment-info" id="comment-39838-info">
                
                
                
                

                

                <span class="comment-age">(12 Feb '15, 11:18)</span>
                <a class="comment-user userinfo" href="/users/1499/swdevman81">SwDevMan81</a>
                
            </div>
        </div>
    
        <a name="40324"></a>
        <div class="comment" id="comment-40324">
            <div id="post-40324-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/1499/swdevman81">@SwDevMan81</a> Hi could you elaborate on how you did it exactely so that we could try to build LuaInterface code and update it for Lua 5.2 as well? Thank you</p></div>
            <div class="comment-info" id="comment-40324-info">
                
                
                
                

                

                <span class="comment-age">(06 Mar '15, 05:40)</span>
                <a class="comment-user userinfo" href="/users/14958/smuellener">smuellener</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-39588" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-39588-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/39553/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='NPN2BueuBrb2lRYC8QCcOSAxRN4J9YVX' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/39553/how-do-i-setup-wireshark-to-run-luas-clrpackage?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/39553/how-do-i-setup-wireshark-to-run-luas-clrpackage?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/wireshark/"
            class="tag-link-wireshark"
            title="see questions tagged'wireshark'using tags"
            rel="tag">wireshark</a> <span class="tag-number">&#215;1,620</span><br/>
        
        <a href="/tags/lua/"
            class="tag-link-lua"
            title="see questions tagged'lua'using tags"
            rel="tag">lua</a> <span class="tag-number">&#215;431</span><br/>
        
        <a href="/tags/error/"
            class="tag-link-error"
            title="see questions tagged'error'using tags"
            rel="tag">error</a> <span class="tag-number">&#215;193</span><br/>
        
        <a href="/tags/startup/"
            class="tag-link-startup"
            title="see questions tagged'startup'using tags"
            rel="tag">startup</a> <span class="tag-number">&#215;32</span><br/>
        
        <a href="/tags/clrpackage/"
            class="tag-link-clrpackage"
            title="see questions tagged'clrpackage'using tags"
            rel="tag">clrpackage</a> <span class="tag-number">&#215;3</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Feb. 2, 2015, 6:29 a.m.">02 Feb '15, 06:29</strong>
    </p>
    <p> 
     	question was seen: <strong>3,697 times</strong>
    </p>
    <p> 
        last updated: <strong title="March 6, 2015, 5:40 a.m.">06 Mar '15, 05:40</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/5868/how-do-i-setup-wireshark-to-run-luas-clrpackage">How do I setup Wireshark to run Lua&#39;s CLRPackage</a>
        </p>
        
        <p>
            <a href="/questions/43709/error-while-launching-wireshshark">Error while launching wireshshark</a>
        </p>
        
        <p>
            <a href="/questions/34524/lua-how-can-i-detect-a-change-of-capture-file">Lua: How can I detect a change of capture file?</a>
        </p>
        
        <p>
            <a href="/questions/40241/how-we-can-add-browse-button-in-preferences-for-a-lua-dissector">How we can add Browse button in preferences for a Lua dissector?</a>
        </p>
        
        <p>
            <a href="/questions/42690/why-all-the-elements-are-shown-in-dissection-tree">Why all the elements are shown in dissection tree?</a>
        </p>
        
        <p>
            <a href="/questions/43205/failed-to-connect-to-mir-failed-to-connect-to-server-socket-no-such-file-or-directory-when-trying-to-run-wireshark">&quot;Failed to connect to Mir: Failed to connect to server socket: No such file or directory&quot; when trying to run Wireshark</a>
        </p>
        
        <p>
            <a href="/questions/44562/update-decryption-table-from-lua">update decryption table from Lua</a>
        </p>
        
        <p>
            <a href="/questions/54042/how-to-create-multiple-dissectors-for-same-port-number">How to create multiple dissectors for same port number</a>
        </p>
        
        <p>
            <a href="/questions/54672/is-there-any-way-to-optimize-lua-dissectors">Is there any way to optimize lua dissectors</a>
        </p>
        
        <p>
            <a href="/questions/41697/automatically-exporting-csv-info">Automatically exporting csv info</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
