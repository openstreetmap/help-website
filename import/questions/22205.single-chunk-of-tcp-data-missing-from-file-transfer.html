<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Single chunk of TCP data missing from file transfer - Wireshark Q&amp;A</title>
        <meta name="description" content="Hi everyone, I am performing a file transfer using some off the shelf COTS TCP libraries in a C# program. I am transferring a 5Mb randomly generated file. The transmission path traverses a virtual NIC (TAP/TUN), over a radio, and back out another virtual NIC. Sometimes the file is transmitted correc..." />
        <meta name="keywords" content="data,tcp,error" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/22205/single-chunk-of-tcp-data-missing-from-file-transfer" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/22205/single-chunk-of-tcp-data-missing-from-file-transfer?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='xvH6qSW3wg0qy1gF8DKPYtEVvNVM6SXA' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/22205/single-chunk-of-tcp-data-missing-from-file-transfer">Single chunk of TCP data missing from file transfer</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-22205-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/22205/up/" rel="nofollow"> </a>
<div id="post-22205-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-22205-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/22205/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/22205/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>Hi everyone,</p>
<p>I am performing a file transfer using some off the shelf COTS TCP libraries in a C# program.  I am transferring a 5Mb randomly generated file.  The transmission path traverses a virtual NIC (TAP/TUN), over a radio, and back out another virtual NIC.  Sometimes the file is transmitted correctly but sometimes the file is missing one contiguous chunk of data.  It could be in the middle somewhere, and can be of varying size.  The example I am using has a missing chuck of 16141 bytes.  I have wireshark captures of both the sender and receiver.  I would love to know if this might indicate an issue with the underlying virtual NIC and radio hardware, or something that happening in the stack.  Here are the notes I have taken regarding my observations of the issue and the wireshark captures.  I hope to be able to post the captures on here once this gets posted.</p>
<p>Notes:</p>
<p>The file is contiguous until:</p>
<p>46 46 41 85 C4 ED 24 9D    @ Offset 1883080, 
 - Packet #1799 in wireshark sender Capture (01D0)
    - Note:  This is a smaller packet than the norm.  THe packet data is truncated right after the 9D <br>
 - Packet #6778 in Wireshark receive capture </p>
<p>Then...</p>
<p>next bytes Should be:</p>
<p>3B 89 04 83 B6 34 9C 14   @ Offset 1883087
 - Packet #1799 in wireshark sender Capture (01E0)
 - No Receive PAcket with that data </p>
<p>but in the received file it is:</p>
<p>A3 D5 0F D9 10 B6 43 F3   @ Offset 1883087
 - Packet #1814 in wireshark Sender Capture (0030)
 - Packet #6804 in Wireshark Receive Capture (0030)</p>
<p>This received string of bytes is found in the original file @ offset 1899228</p>
<p>1899228 - 1883087 = 16141 bytes of contiguous missing data</p>
<p>File size 5242880 byte (Sent) - 5226739 bytes (Received) = 16141 bytes, so this lines up too.</p>
<p>Is it looks like just his one big chunck is missing.  Everything else, before and after, lines up.</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/data/" class="post-tag tag-link-data"
                                        title="see questions tagged 'data'" rel="tag">data</a>
                                
                                    <a href="/tags/tcp/" class="post-tag tag-link-tcp"
                                        title="see questions tagged 'tcp'" rel="tag">tcp</a>
                                
                                    <a href="/tags/error/" class="post-tag tag-link-error"
                                        title="see questions tagged 'error'" rel="tag">error</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>20 Jun '13, 10:58</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/b2300d01123e2ab3c9fe9f099c4d447a?s=32&amp;d=identicon&amp;r=g" alt="Tom%20Kuhn's gravatar image" />
    <p><a href="/users/5154/tom-kuhn">Tom Kuhn</a><br/>
    <span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">&#9679;</span><span class="badgecount">3</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Tom Kuhn has no accepted answers">0&#37;</span>
    </p>
</div>


                            </div>
                            




<div class="comments-container" id="comments-container-22205">
    
        <a name="22211"></a>
        <div class="comment" id="comment-22211">
            <div id="post-22211-score" class="comment-score"></div>
            <div class="comment-text"><p>Ah Thanks!  Good to Know...</p>

<p>Sender Capture: <a href="http://cloudshark.org/captures/45f3ed36d2a5">http://cloudshark.org/captures/45f3ed36d2a5</a></p>

<p>Receiver Capture: <a href="http://cloudshark.org/captures/1a8fff96948c">http://cloudshark.org/captures/1a8fff96948c</a></p></div>
            <div class="comment-info" id="comment-22211-info">
                
                
                
                

                

                <span class="comment-age">(20 Jun '13, 12:18)</span>
                <a class="comment-user userinfo" href="/users/5154/tom-kuhn">Tom Kuhn</a>
                
            </div>
        </div>
    
        <a name="22212"></a>
        <div class="comment" id="comment-22212">
            <div id="post-22212-score" class="comment-score"></div>
            <div class="comment-text"><p>I moved your comment to a more appropriate place under your question.</p></div>
            <div class="comment-info" id="comment-22212-info">
                
                
                
                

                

                <span class="comment-age">(20 Jun '13, 13:10)</span>
                <a class="comment-user userinfo" href="/users/1225/grahamb">grahamb ♦</a>
                
            </div>
        </div>
    
        <a name="22294"></a>
        <div class="comment" id="comment-22294">
            <div id="post-22294-score" class="comment-score"></div>
            <div class="comment-text"><p>Here is a graphical representation of whats going on.  All traffic on the linux virtual NIC is forwarded out of the physical port (and Vice Versa).</p>

<p><img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/IP_Issue_1.jpg"></p></div>
            <div class="comment-info" id="comment-22294-info">
                
                
                
                

                

                <span class="comment-age">(24 Jun '13, 09:57)</span>
                <a class="comment-user userinfo" href="/users/5154/tom-kuhn">Tom Kuhn</a>
                
            </div>
        </div>
    
        <a name="22333"></a>
        <div class="comment" id="comment-22333">
            <div id="post-22333-score" class="comment-score"></div>
            <div class="comment-text"><p>Thanks for providing the picture.
The data flows through 2 cascaded TCP connections, both of which seem to be happy with the amount of data flowing as they both orderly terminate with 2 FIN packets that get ack'ed, which means all lost packets have been dutifully retransmitted. 
That leaves only one conclusion: The missing data actually gets lost in the IP stack 'in the middle' that is receiving the data on socket_left (from 20.0.1.22 (port 1065) and is sending the data over socket_right towards 20.40.1.12:5020 (using client port number 2025). 
Whatever this TCP/IP stack is, it doesn't seem to be very mature given the wrong 'endianess' of the MSS option in its SYN packet.</p></div>
            <div class="comment-info" id="comment-22333-info">
                
                
                
                

                

                <span class="comment-age">(25 Jun '13, 10:40)</span>
                <a class="comment-user userinfo" href="/users/4708/mreede2">mrEEde2</a>
                
            </div>
        </div>
    
        <a name="22418"></a>
        <div class="comment" id="comment-22418">
            <div id="post-22418-score" class="comment-score"></div>
            <div class="comment-text"><p>Thank You.  Your thoughts echo mine also. Thank you for your time in looking at this.</p></div>
            <div class="comment-info" id="comment-22418-info">
                
                
                
                

                

                <span class="comment-age">(27 Jun '13, 09:30)</span>
                <a class="comment-user userinfo" href="/users/5154/tom-kuhn">Tom Kuhn</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-22205" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-22205-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    3 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/22205/single-chunk-of-tcp-data-missing-from-file-transfer?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/22205/single-chunk-of-tcp-data-missing-from-file-transfer?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/22205/single-chunk-of-tcp-data-missing-from-file-transfer?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/22205/single-chunk-of-tcp-data-missing-from-file-transfer?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="22207"></a>
                    <div id="answer-container-22207" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-22207-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/22207/up/" rel="nofollow"> </a>
<div id="post-22207-score" class="post-score"
    title="current number of votes">
    2
</div>
<a id="post-22207-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/22207/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>It the transport is TCP and there is data missing in the middle, then it must be the application. TCP is a connection oriented protocol with mechanisms to make sure that data is received properly. If there was data lost in transport or the vNIC, then TCP would make sure it's retransmitted.</p>
<p>Or the TCP/IP stack is broken... but then you would have other applications having problems too.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/22207/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>20 Jun '13, 11:05</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7901a94d8fdd1f9f47cda9a32fcfa177?s=32&amp;d=identicon&amp;r=g" alt="SYN-bit's gravatar image" />
    <p><a href="/users/5/syn-bit">SYN-bit ♦♦</a><br/>
    <span class="score" title="17094 reputation points"><span class="">17.1k</span></span><span title="9 badges"><span class="badge1">&#9679;</span><span class="badgecount">9</span></span><span title="57 badges"><span class="silver">&#9679;</span><span class="badgecount">57</span></span><span title="245 badges"><span class="bronze">&#9679;</span><span class="badgecount">245</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="SYN-bit has 174 accepted answers">20&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-22207">
    
        <a name="22208"></a>
        <div class="comment" id="comment-22208">
            <div id="post-22208-score" class="comment-score"></div>
            <div class="comment-text"><p>Come to find out I can not add attachments.</p></div>
            <div class="comment-info" id="comment-22208-info">
                
                
                
                

                

                <span class="comment-age">(20 Jun '13, 11:10)</span>
                <a class="comment-user userinfo" href="/users/5154/tom-kuhn">Tom Kuhn</a>
                
            </div>
        </div>
    
        <a name="22209"></a>
        <div class="comment" id="comment-22209">
            <div id="post-22209-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/5154/tom-kuhn">@Tom Kuhn</a>, As long as the contents aren't sensitive (and as you were going to post them here they shouldn't be) you can upload the capture to <a href="http://cloudshark.org/">CloudShark</a> and post a link to the capture back here.</p></div>
            <div class="comment-info" id="comment-22209-info">
                
                
                
                

                

                <span class="comment-age">(20 Jun '13, 11:36)</span>
                <a class="comment-user userinfo" href="/users/1225/grahamb">grahamb ♦</a>
                
            </div>
        </div>
    
        <a name="22210"></a>
        <div class="comment" id="comment-22210">
            <div id="post-22210-score" class="comment-score"></div>
            <div class="comment-text"><p>That interesting. Since I do not have access under the hood of the actual socket , it is hard to see. My application is not catching any exceptions and there do not seem to be any error events.<br>
</p>

<p>As for other applications, this file tranfser SW is the only network application running on each of these laptops.  The laptops only communicate between each other. </p>

<p>One other thing of note is that the sender transmitted 15 packets (That were not recieved) befor this final packet that started the continuation of incoming data (247 Bytes) to the receiver...</p>

<p>1814    14.981036000    20.0.1.22   20.40.1.12  TCP 301 [TCP Window Full] syscomlan &gt; zenginkyo-1 [ACK] Seq=1899229 Ack=1 Win=17520 Len=247</p></div>
            <div class="comment-info" id="comment-22210-info">
                
                
                
                

                

                <span class="comment-age">(20 Jun '13, 12:08)</span>
                <a class="comment-user userinfo" href="/users/5154/tom-kuhn">Tom Kuhn</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-22207" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-22207-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="22213"></a>
                    <div id="answer-container-22213" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-22213-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/22213/up/" rel="nofollow"> </a>
<div id="post-22213-score" class="post-score"
    title="current number of votes">
    2
</div>
<a id="post-22213-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/22213/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Are we looking at the same tcp session here? The timestamps differ but there are more curiosities. </p>
<p><strong>Sender Trace:</strong> 
The client is running a windows platform (TTL=128) and so is the server at an CaeElect MAC address. The client port number is 1065, the offered windows size by the client is <strong>16384</strong>, the 'MSS' option is 1460 (02:04:05:b4), followed by NOP,NOP,SACK
<img alt="sender.png" src="https://osqa-ask.wireshark.org/upfiles/sender.png">
<strong>Receiver Trace</strong>: The client port number is 2025, it is 5 hops away (TTL=123), the advertized windowsize is <strong>32768</strong>, MSS option is now in little endian: b4:05:04:02, sack is removed and 2 EOLs... 
<img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/receiver.png">
So if the traces were really taken at the same time, it must be a proxy sitting at the <a href="http://www.caeelectronics.com/">CaeElect</a> MAC address that is terminating the tcp session towards the client and starting a new one towards the server. And it is probably this proxy that is dropping the packets. </p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/22213/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>20 Jun '13, 14:20</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/d6607c3aca20db751d019d8bbd2da893?s=32&amp;d=identicon&amp;r=g" alt="mrEEde2's gravatar image" />
    <p><a href="/users/4708/mreede2">mrEEde2</a><br/>
    <span class="score" title="336 reputation points">336</span><span title="4 badges"><span class="badge1">&#9679;</span><span class="badgecount">4</span></span><span title="6 badges"><span class="silver">&#9679;</span><span class="badgecount">6</span></span><span title="14 badges"><span class="bronze">&#9679;</span><span class="badgecount">14</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="mrEEde2 has 5 accepted answers">20&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/22213/">
                edited
                <strong>20 Jun '13, 14:26</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-22213">
    
        <a name="22215"></a>
        <div class="comment" id="comment-22215">
            <div id="post-22215-score" class="comment-score"></div>
            <div class="comment-text"><p>The send and receive captures were running on separate machines at the same time.<br>
</p>

<p>I guess you could say there is a proxy of sorts, but I am not sure what it really is... More of a Serial to TCP Converter...<br>
</p>

<p>Since this data goes over a UHF radio, a third party hardware and software solution is used.  Take the incoming capture. The hardware acts as a bridge between the radio's serial interface and the computers USB (I think of it as a USB Serial Interface) In addition, there is a driver with a TUN/TAP virtual adapter.  When Receiving, the thought is... Serial data from the radio to the Hardware -&gt; convert to USB -&gt; Laptop USB -&gt; Some stack coverts De-serializes Serial data back into TCP data -&gt; pushes out the stack.</p>

<p>Unfortunately we do not have access to the source for this,</p></div>
            <div class="comment-info" id="comment-22215-info">
                
                
                
                

                

                <span class="comment-age">(20 Jun '13, 17:52)</span>
                <a class="comment-user userinfo" href="/users/5154/tom-kuhn">Tom Kuhn</a>
                
            </div>
        </div>
    
        <a name="22602"></a>
        <div class="comment" id="comment-22602">
            <div id="post-22602-score" class="comment-score"></div>
            <div class="comment-text"><p>I have finally had the chance to perform some additional captures.  I am looking through the first new capture and wanted to report what I am seeing in this one.  I would like some thoughts to see if this is is another manifestation of a possible bad TCP stack design.  In this instance, there was no missing data chink, but there was an error in some of the data in a single packet.</p>

<p>I did a small, random data, file transfer of only 100kB.    This time, all the data transferred except that one small portion of data (15 bytes), inside a single packet, seems to have changed.  The entire rest of the files is identical.</p>

<p>Sender File : <a href="http://www.cloudshark.org/captures/63e4629d73b1">http://www.cloudshark.org/captures/63e4629d73b1</a></p>

<p>Receiver File : <a href="http://www.cloudshark.org/captures/5b0a0c21a339">http://www.cloudshark.org/captures/5b0a0c21a339</a></p>

<p>It is packet #45 on the sender file and #206 on the receiver file.  Sequence number 39421.</p>

<p>If anyone could shed light on this, that would be helpful.</p></div>
            <div class="comment-info" id="comment-22602-info">
                
                
                
                

                

                <span class="comment-age">(03 Jul '13, 06:32)</span>
                <a class="comment-user userinfo" href="/users/5154/tom-kuhn">Tom Kuhn</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-22213" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-22213-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="22606"></a>
                    <div id="answer-container-22606" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-22606-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/22606/up/" rel="nofollow"> </a>
<div id="post-22606-score" class="post-score"
    title="current number of votes">
    1
</div>
<a id="post-22606-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/22606/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <blockquote>
<p>there was no missing data chink, but there was an error in some of the data in a single packet.</p>
</blockquote>
<p>modified payload bytes are never a good sign ;-) So, now you need to find out which component in your setup modifies the bytes.</p>
<blockquote>
<p>I would like some thoughts to see if this is is another manifestation of a possible bad TCP stack design</p>
</blockquote>
<p>There are several bad signs in your capture file, as mentioned by others.</p>
<ol>
<li>Different source ports on client/server side (same for IP ID). This means the packets are not simply routed. As there is no NAT involved (same addresses), the TCP connection seems to be proxied at the TCP level.</li>
<li>Missing TCP options at server side (see 1.)</li>
<li>Different TCP Window size at server side (see 1.)</li>
<li>Missing packets (first capture files)</li>
<li>Modified payload bytes (latest capture file)</li>
</ol>
<p>Looking at that list, I think it's save to say that the TCP/IP implementation of one of the components it 'kind of broken' ;-)) It could be the virtual NIC (rather unusual), it could the USB driver or the RF radio part. Hard to tell...</p>
<p>Regards<br>
Kurt</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/22606/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>03 Jul '13, 07:00</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" alt="Kurt%20Knochner's gravatar image" />
    <p><a href="/users/2593/kurt-knochner">Kurt Knochner ♦</a><br/>
    <span class="score" title="24767 reputation points"><span class="">24.8k</span></span><span title="10 badges"><span class="badge1">&#9679;</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">&#9679;</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">&#9679;</span><span class="badgecount">237</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Kurt Knochner has 344 accepted answers">15&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/22606/">
                edited
                <strong>03 Jul '13, 07:04</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-22606">
    
        <a name="22620"></a>
        <div class="comment" id="comment-22620">
            <div id="post-22620-score" class="comment-score"></div>
            <div class="comment-text"><p>Thanks Kurt.  I have a few different vendors to get in touch with it seems.  Unfortunately I do not know what is under the hood at the USB to TCP side of things.  But this does provide a great amount to additional help for someone like me who could tell the difference between TCP window Size and a glass window size.</p></div>
            <div class="comment-info" id="comment-22620-info">
                
                
                
                

                

                <span class="comment-age">(03 Jul '13, 12:42)</span>
                <a class="comment-user userinfo" href="/users/5154/tom-kuhn">Tom Kuhn</a>
                
            </div>
        </div>
    
        <a name="22621"></a>
        <div class="comment" id="comment-22621">
            <div id="post-22621-score" class="comment-score"></div>
            <div class="comment-text"><blockquote>
<p>tell the difference between TCP window Size and a glass window size.</p>
</blockquote>

<p>I'm not sure, but I <strong>believe</strong> one is measured in bytes and the other one in inches ;-)</p></div>
            <div class="comment-info" id="comment-22621-info">
                
                
                
                

                

                <span class="comment-age">(03 Jul '13, 12:53)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-22606" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-22606-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/22205/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='xvH6qSW3wg0qy1gF8DKPYtEVvNVM6SXA' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/22205/single-chunk-of-tcp-data-missing-from-file-transfer?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/22205/single-chunk-of-tcp-data-missing-from-file-transfer?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/tcp/"
            class="tag-link-tcp"
            title="see questions tagged'tcp'using tags"
            rel="tag">tcp</a> <span class="tag-number">&#215;752</span><br/>
        
        <a href="/tags/error/"
            class="tag-link-error"
            title="see questions tagged'error'using tags"
            rel="tag">error</a> <span class="tag-number">&#215;193</span><br/>
        
        <a href="/tags/data/"
            class="tag-link-data"
            title="see questions tagged'data'using tags"
            rel="tag">data</a> <span class="tag-number">&#215;122</span><br/>
        
    </p>
    <p>
        question asked: <strong title="June 20, 2013, 10:58 a.m.">20 Jun '13, 10:58</strong>
    </p>
    <p> 
     	question was seen: <strong>5,910 times</strong>
    </p>
    <p> 
        last updated: <strong title="July 3, 2013, 12:53 p.m.">03 Jul '13, 12:53</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/54778/what-should-i-see-in-capture-when-there-is-tcp-error-could-not-connect-to-the-server">What should I see in capture when there is TCP error: Could not connect to the server?</a>
        </p>
        
        <p>
            <a href="/questions/38582/unreadable-data-in-follow-tcp-stream">Unreadable data in &quot;Follow TCP stream&quot;</a>
        </p>
        
        <p>
            <a href="/questions/43447/matching-tcp-packets-in-wireshark">matching tcp packets in wireshark</a>
        </p>
        
        <p>
            <a href="/questions/19124/is-it-possible-to-find-how-data-are-encoded-on-a-lan-connection">Is it possible to find how data are encoded on a LAN connection?</a>
        </p>
        
        <p>
            <a href="/questions/47789/huge-number-of-tcp-reset-error">Huge Number of TCP Reset Error</a>
        </p>
        
        <p>
            <a href="/questions/19125/is-it-possible-to-find-out-how-data-are-encrypted-on-a-lan-connection">[closed] Is it possible to find out how data are encrypted on a LAN connection?</a>
        </p>
        
        <p>
            <a href="/questions/44458/discardignore-data-on-capture">Discard/ignore data on capture</a>
        </p>
        
        <p>
            <a href="/questions/52148/is-it-guaranteed-that-bytes-wireshark-shows-as-arriving-together-in-a-packet-actually-arrive-together">Is it guaranteed that bytes Wireshark shows as arriving together in a packet actually arrive together?</a>
        </p>
        
        <p>
            <a href="/questions/8357/protocol-hierarchy-meaning">Protocol Hierarchy Meaning</a>
        </p>
        
        <p>
            <a href="/questions/25977/tcp-reassembly-error-while-capturing-cisco-vpn-client-traffic">TCP Reassembly error while capturing Cisco VPN client traffic</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
