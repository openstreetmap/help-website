<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>False FCS Error for frame packet size more than 64 bytes - Wireshark Q&amp;A</title>
        <meta name="description" content="I am sorry if this is a repeated question regarding FCS Error. We are getting the FCS error for the frame packet size more than 64 bytes. Frame check sequence: 0x4a495453 [incorrect, should be 0xd7636502] In our ethernet driver there is an option to Make sure the driver does not transmit packet  les..." />
        <meta name="keywords" content="fcs,error" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/24525/false-fcs-error-for-frame-packet-size-more-than-64-bytes" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/24525/false-fcs-error-for-frame-packet-size-more-than-64-bytes?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='bgUd835aUpU8hXiW5HDPBZWnW1XD67sk' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/24525/false-fcs-error-for-frame-packet-size-more-than-64-bytes">False FCS Error for frame packet size more than 64 bytes</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-24525-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/24525/up/" rel="nofollow"> </a>
<div id="post-24525-score" class="post-score"
    title="current number of votes">
    1
</div>
<a id="post-24525-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/24525/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/24525/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>I am sorry if this is a repeated question regarding FCS Error.
We are getting the FCS error for the frame packet size more than 64 bytes.
Frame check sequence: 0x4a495453 [incorrect, should be 0xd7636502]</p>
<p>In our ethernet driver there is an option to Make sure the driver does not transmit packet 
less than minimum(i.e 64 bytes) as per the Ethernet standards.
But, we are getting the FCS errors if we set the packet size as 64 bytes 
and there won't be FCS errors if we set the minimum packet size as 60 bytes.</p>
<p>As the communication itself doesn't have any problem we believe this may be a<br>
false alarm by the Wireshark. Is there any way to avoid such false errors on the Wireshark.</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/fcs/" class="post-tag tag-link-fcs"
                                        title="see questions tagged 'fcs'" rel="tag">fcs</a>
                                
                                    <a href="/tags/error/" class="post-tag tag-link-error"
                                        title="see questions tagged 'error'" rel="tag">error</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                
<div class="community-wiki">
        This question is marked "community wiki".
        
    </div>
                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>10 Sep '13, 07:42</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/95b7a2dbd4bb027522da73b25efd3f7a?s=32&amp;d=identicon&amp;r=g" alt="paddu's gravatar image" />
    <p><a href="/users/5626/paddu">paddu</a><br/>
    <span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">&#9679;</span><span class="badgecount">2</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="paddu has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/24525/">
                edited
                <strong>10 Sep '13, 07:45</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/d2a7e24ca66604c749c7c88c1da8ff78?s=32&amp;d=identicon&amp;r=g" alt="grahamb's gravatar image" />
            <p><a href="/users/1225/grahamb">grahamb ♦</a><br/>
            <span class="score" title="19834 reputation points"><span class="">19.8k</span></span><span title="3 badges"><span class="badge1">&#9679;</span><span class="badgecount">3</span></span><span title="30 badges"><span class="silver">&#9679;</span><span class="badgecount">30</span></span><span title="206 badges"><span class="bronze">&#9679;</span><span class="badgecount">206</span></span></p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-24525">
    
        <a name="24526"></a>
        <div class="comment" id="comment-24526">
            <div id="post-24526-score" class="comment-score"></div>
            <div class="comment-text"><p>What preferences are set for the Ethernet dissector in your profile?</p></div>
            <div class="comment-info" id="comment-24526-info">
                
                
                
                

                

                <span class="comment-age">(10 Sep '13, 07:47)</span>
                <a class="comment-user userinfo" href="/users/1225/grahamb">grahamb ♦</a>
                
            </div>
        </div>
    
        <a name="24534"></a>
        <div class="comment" id="comment-24534">
            <div id="post-24534-score" class="comment-score"></div>
            <div class="comment-text"><p>Does this happen with all protocols running on top of Ethernet, including, for example, IPv4 and IPv6, or does it just happen with some protocols?</p>

<p>In your driver, does the minimum packet size refer to the size of the packet <em>including</em> the FCS (in which case 64 is the correct minimum), or <em>not</em> including the FCS (in which case 60 is the correct minimum)?</p>

<p>(And, yes, grahamb's question is also relevant here.)</p></div>
            <div class="comment-info" id="comment-24534-info">
                
                
                
                

                

                <span class="comment-age">(10 Sep '13, 12:59)</span>
                <a class="comment-user userinfo" href="/users/79/guy-harris">Guy Harris ♦♦</a>
                
            </div>
        </div>
    
        <a name="24571"></a>
        <div class="comment" id="comment-24571">
            <div id="post-24571-score" class="comment-score"></div>
            <div class="comment-text"><p>Thank you..
Yes we are using NDK(IPv4) ethernet drivers provided from TI.
According to the documents of this driver the driver includes the FCS,
but I am not able to confirm where it is added inside the driver.<br>
</p>

<p>Actually there is an function named EmacSend() in the driver, which sets the valid length of the packet as shown below.</p>

<p>/<em> Make sure the driver does not transmit packet less than min. 
as per the * Ethernet standards. </em>/
    if( PBM_getValidLen(hPkt) &lt; 60 )
        PBM_setValidLen (hPkt, 64 );</p>

<p>If we change the setValidLen to 60, there won't be any FCS error but FCS error occurs if we leave it as 64.</p>

<p>As I am new to this field I don't know much about the Ethernet dissector I shall come back about this later.</p></div>
            <div class="comment-info" id="comment-24571-info">
                
                
                
                

                

                <span class="comment-age">(11 Sep '13, 06:23)</span>
                <a class="comment-user userinfo" href="/users/5626/paddu">paddu</a>
                
            </div>
        </div>
    
        <a name="24579"></a>
        <div class="comment" id="comment-24579">
            <div id="post-24579-score" class="comment-score"></div>
            <div class="comment-text"><p>can you please post two capture files that show the effect (google drive, dropbox, cloudshark). One with good FCS and one with bad FCS.</p></div>
            <div class="comment-info" id="comment-24579-info">
                
                
                
                

                

                <span class="comment-age">(11 Sep '13, 09:12)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-24525" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-24525-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    2 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/24525/false-fcs-error-for-frame-packet-size-more-than-64-bytes?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/24525/false-fcs-error-for-frame-packet-size-more-than-64-bytes?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/24525/false-fcs-error-for-frame-packet-size-more-than-64-bytes?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/24525/false-fcs-error-for-frame-packet-size-more-than-64-bytes?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="24582"></a>
                    <div id="answer-container-24582" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-24582-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/24582/up/" rel="nofollow"> </a>
<div id="post-24582-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-24582-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/24582/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Please read the following thread and search for <strong>EMAC_DSC_FLAG_PASSCRC</strong>. </p>
<blockquote>
<p><a href="http://e2e.ti.com/support/embedded/bios/f/355/p/274592/969028.aspx">http://e2e.ti.com/support/embedded/bios/f/355/p/274592/969028.aspx</a></p>
</blockquote>
<p>Did you set or clear that flag? </p>
<p>If you set it, did you calculate the CRC value yourself (correctly) and added it to the frame?<br>
If you set the flag, please try to clear it and let the EMAC create the CRC.</p>
<p>Regards<br>
Kurt</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/24582/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>11 Sep '13, 10:02</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" alt="Kurt%20Knochner's gravatar image" />
    <p><a href="/users/2593/kurt-knochner">Kurt Knochner ♦</a><br/>
    <span class="score" title="24767 reputation points"><span class="">24.8k</span></span><span title="10 badges"><span class="badge1">&#9679;</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">&#9679;</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">&#9679;</span><span class="badgecount">237</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Kurt Knochner has 344 accepted answers">15&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/24582/">
                edited
                <strong>11 Sep '13, 10:09</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-24582">
    
        <a name="24605"></a>
        <div class="comment" id="comment-24605">
            <div id="post-24605-score" class="comment-score"></div>
            <div class="comment-text"><p>Thank you.. Regarding the "PASSCRC" flag we haven't changed anything from the default driver, so the flag seems to be "clear" i.e the EMAC generates CRC.</p>

<p>We are little bit confused about the if loop in the TI NDK Driver.
"if( PBM_getValidLen(hPkt) &lt; 60 )  PBM_setValidLen (hPkt, 64 );"</p>

<p>They are checking if the packets are less than "60" , and if it is less than "60" set the packet valid leght to "64"</p>

<p>But as pet the ethernet standard the minimum packet lenght is "64"
so, why is this driver checking for packets &lt;60 in the if condition 
and why not directly check if the packet is&lt;64?</p>

<p>I have asked the same question to TI but yet to get a reply.</p>

<p>Please let know if are any comments on this part also.</p>

<p>Regarding the capture files, I need the permission from the company 
to upload the data, I shall come back to you as soon as possible.</p></div>
            <div class="comment-info" id="comment-24605-info">
                
                
                
                

                

                <span class="comment-age">(12 Sep '13, 04:40)</span>
                <a class="comment-user userinfo" href="/users/5626/paddu">paddu</a>
                
            </div>
        </div>
    
        <a name="24614"></a>
        <div class="comment" id="comment-24614">
            <div id="post-24614-score" class="comment-score"></div>
            <div class="comment-text"><blockquote>
<p>I have asked the same question to TI but yet to get a reply. <br>
Please let know if are any comments on this part also.</p>
</blockquote>

<p>O.K. if TI has no answer to that question, how could I? ;-))</p>

<blockquote>
<p>Regarding the capture files, I need the permission from the company to upload the data,</p>
</blockquote>

<p>O.K.</p></div>
            <div class="comment-info" id="comment-24614-info">
                
                
                
                

                

                <span class="comment-age">(12 Sep '13, 12:50)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="25162"></a>
        <div class="comment" id="comment-25162">
            <div id="post-25162-score" class="comment-score"></div>
            <div class="comment-text"><p>I am sorry for the delay. I have uploaded the capture file of the bad FCS into the below cloudshark site.
<a href="http://www.cloudshark.org/captures/c5f307132b33">http://www.cloudshark.org/captures/c5f307132b33</a></p>

<p>If the frame length is 64 bytes, it appears that Wireshark will take the last 4 bytes of the packet greater than 60 bytes and use those 4 bytes as the FCS.</p></div>
            <div class="comment-info" id="comment-25162-info">
                
                
                
                

                

                <span class="comment-age">(24 Sep '13, 08:39)</span>
                <a class="comment-user userinfo" href="/users/5626/paddu">paddu</a>
                
            </div>
        </div>
    
        <a name="25169"></a>
        <div class="comment" id="comment-25169">
            <div id="post-25169-score" class="comment-score"></div>
            <div class="comment-text"><p>I received a capture file just yesterday exhibiting this same behavior.  It caused a few folks to waste some time chasing this red herring until I set them straight.</p>

<p>An independent capture file is posted on cloudshark at <a href="http://cloudshark.org/captures/943b17cd1baa">http://cloudshark.org/captures/943b17cd1baa</a>.  It contains 2 ICMP echo request/reply exchanges.  In the first case, the packet is less than 60 bytes so padding is required, and in the second case the pakcet is more than 60 bytes so no padding is required.  You can see the <strong>extra</strong> 4 bytes of padding in the ICMP echo reply in frame 2 and also notice the <code>ETHERNET FRAME CHECK SEQUENCE INCORRECT</code> indication from Wireshark.  (The manufacturer has been contacted about their extra 4 bytes of padding, but no reply has been received from them yet.)</p>

<p>The file was anonymized using <a href="http://www.tracewrangler.com/">TraceWrangler</a>.</p></div>
            <div class="comment-info" id="comment-25169-info">
                
                
                
                

                

                <span class="comment-age">(24 Sep '13, 12:59)</span>
                <a class="comment-user userinfo" href="/users/402/cmaynard">cmaynard ♦♦</a>
                
            </div>
        </div>
    
        <a name="25183"></a>
        <div class="comment" id="comment-25183">
            <div id="post-25183-score" class="comment-score"></div>
            <div class="comment-text"><p>Thank you so much, can I assume that this behavior is not from the wireshark but from the Ethernet driver(from the manufacture)?</p>

<p>Please let me know if there is any possible solution to overcome this sort of errors.</p></div>
            <div class="comment-info" id="comment-25183-info">
                
                
                
                

                

                <span class="comment-age">(24 Sep '13, 19:49)</span>
                <a class="comment-user userinfo" href="/users/5626/paddu">paddu</a>
                
            </div>
        </div>
    
        <a name="25184"></a>
        <div class="comment not_top_scorer" id="comment-25184">
            <div id="post-25184-score" class="comment-score"></div>
            <div class="comment-text"><p>Well, it seems that some manufacturers are adding more padding than is necessary.  As a result, Wireshark gets confused and can incorrectly report FCS errors when there aren't any.  The <em>"solution"</em>, at least for now, is to turn off the Ethernet dissector's "Validate the Ethernet checksum if possible" preference if you don't like seeing these indications in Wireshark.</p></div>
            <div class="comment-info" id="comment-25184-info">
                
                
                
                

                

                <span class="comment-age">(24 Sep '13, 19:54)</span>
                <a class="comment-user userinfo" href="/users/402/cmaynard">cmaynard ♦♦</a>
                
            </div>
        </div>
    
        <a name="25232"></a>
        <div class="comment not_top_scorer" id="comment-25232">
            <div id="post-25232-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi cmaynard,</p>

<p>I was studying the capture you posted to cloudshark above in trying to understand why this padding and FCS are present.</p>

<p>From what I can tell, it seems that the padding is added to bring the data size up to 60 bytes, with the FCS being an additional 4 bytes (after the padding), which results in a total size of 64 bytes.  But I'm not sure why this padding and FRC are not always added.</p>

<p>Looking at the capture, let host A = 192.168.1.1 and host B = 192.168.1.2</p>

<p>In frame 1 and frame 2, I see that they both contain 43 bytes of "valid data," yet
the value shown in the length column shows 43 bytes for frame 1, but 64 bytes
for frame 2.</p>

<p>The key difference that I noticed between these two frames is that in frame 2, sent by host B,
there is a 17 byte padding, plus 4 byte frame check (CRC) appended to the end of
the frame.  This results in a frame that meets the minimum size of 64 bytes.  Frame 1, sent by host A, does not add such padding:
<img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/framepad.png"></p>

<p>The question I have is, why doesn't host A apply this same padding and FCS (in frame 1)?</p>

<p>It seems like the Ethernet driver at host A was not implemented to add padding/FCS
to the end of the Ethernet frame, but host B's driver was.  (or the maybe the
h/w itself does this?).</p>

<p>Furthermore, neither host adds a frame check to frames 3 and 4.  So it seems
that a frame check should only exist if the total length of the frame is 64 bytes, and in such case the last 4 bytes are to be read as the frame check sequence ... ?</p>

<p>Your thoughts are appreciated!</p></div>
            <div class="comment-info" id="comment-25232-info">
                
                
                
                

                

                <span class="comment-age">(25 Sep '13, 12:10)</span>
                <a class="comment-user userinfo" href="/users/5745/stevenconnell">stevenconnell</a>
                
            </div>
        </div>
    
        <a name="25237"></a>
        <div class="comment not_top_scorer" id="comment-25237">
            <div id="post-25237-score" class="comment-score"></div>
            <div class="comment-text"><p>First, the capture was taken at the host 192.168.1.1, so Wireshark gets the packet before the transmitter adds the padding, thus the reason it's only 43 bytes.  Whenever you see packets less than the minimum frame size, this is a tell-tale sign of the capture point.  When that 43-byte packet hits the wire, it will be padded by 17 bytes to meet the minimum 60 byte (data) size ... plus the 4 byte FCS of course.</p>

<p>When 192.168.1.2 receives the packet, it replies and also needs to add padding.  However, it adds not 17 bytes but 21 bytes of padding, 4 bytes more than is necessary.  I do not have capture hardware that will actually capture the Ethernet FCS, so by the time Wireshark gets the packet, the FCS has already been discarded by the NIC.  In fact, if the FCS truly was bad, Wireshark would never even see the packet.  Those last 4 bytes are part of the padding, being misinterpreted by Wireshark as an FCS due to the sending device adding an extra, completely unnecessary 4 bytes of padding.</p>

<p>Regarding frames 3 and 4, they're both larger than the minimum frame size, so no padding is needed nor added.  You don't see the FCS for those either because, as I mentioned above, we never actually receive the FCS for any frame, regardless of size.</p>

<p>Does that make sense?</p>

<p>You can even run some simple tests yourself using ping to verify this.  Try some payload sizes such as follows to see the effect:</p>

<p>*nix:</p>

<pre><code>ping -c 1 -s 1 &lt;host&gt;
ping -c 1 -s 14 &lt;host&gt;
ping -c 1 -s 18 &lt;host&gt;
ping -c 1 -s 22 &lt;host&gt;
ping -c 1 -s 58 &lt;host&gt;
</code></pre>

<p>Windows:</p>

<pre><code>ping -n 1 -l 1 &lt;host&gt;
ping -n 1 -l 14 &lt;host&gt;
ping -n 1 -l 18 &lt;host&gt;
ping -n 1 -l 22 &lt;host&gt;
ping -n 1 -l 58 &lt;host&gt;
</code></pre></div>
            <div class="comment-info" id="comment-25237-info">
                
                
                
                

                

                <span class="comment-age">(25 Sep '13, 12:43)</span>
                <a class="comment-user userinfo" href="/users/402/cmaynard">cmaynard ♦♦</a>
                
            </div>
        </div>
    
        <a name="25325"></a>
        <div class="comment not_top_scorer" id="comment-25325">
            <div id="post-25325-score" class="comment-score"></div>
            <div class="comment-text"><p>Your response actually cleared things up a lot, thanks!</p></div>
            <div class="comment-info" id="comment-25325-info">
                
                
                
                

                

                <span class="comment-age">(27 Sep '13, 13:41)</span>
                <a class="comment-user userinfo" href="/users/5745/stevenconnell">stevenconnell</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-24582" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 9
        </span>
        <a href="#" class="show-all-comments-link">show 4 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-24582-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="37301"></a>
                    <div id="answer-container-37301" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-37301-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/37301/up/" rel="nofollow"> </a>
<div id="post-37301-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-37301-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/37301/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Try this:</p>
<ol>
<li>Open the config page as follows: Edit/Preferences/Protocols/Ethernet </li>
<li>Uncheck the "Validate the Ethernet checksum if possible".</li>
</ol>
<p>Wireshark of Version 1.11.3 (v1.11.3-0-g1dd5d3a from master) is tested OK.</p>
<p>Good Luck!</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/37301/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>22 Oct '14, 23:05</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/9312c19dee0d372102b6ed50719bc255?s=32&amp;d=identicon&amp;r=g" alt="liang_xinhui's gravatar image" />
    <p><a href="/users/11039/liang_xinhui">liang_xinhui</a><br/>
    <span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="bronze">&#9679;</span><span class="badgecount">1</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="liang_xinhui has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/37301/">
                edited
                <strong>23 Oct '14, 00:21</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/f93de7000747ab5efb5acd3034b2ebd7?s=32&amp;d=identicon&amp;r=g" alt="Guy%20Harris's gravatar image" />
            <p><a href="/users/79/guy-harris">Guy Harris ♦♦</a><br/>
            <span class="score" title="17443 reputation points"><span class="">17.4k</span></span><span title="3 badges"><span class="badge1">&#9679;</span><span class="badgecount">3</span></span><span title="35 badges"><span class="silver">&#9679;</span><span class="badgecount">35</span></span><span title="196 badges"><span class="bronze">&#9679;</span><span class="badgecount">196</span></span></p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-37301">
    
</div>
<div id="comment-tools-37301" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-37301-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/24525/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='bgUd835aUpU8hXiW5HDPBZWnW1XD67sk' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/24525/false-fcs-error-for-frame-packet-size-more-than-64-bytes?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/24525/false-fcs-error-for-frame-packet-size-more-than-64-bytes?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/error/"
            class="tag-link-error"
            title="see questions tagged'error'using tags"
            rel="tag">error</a> <span class="tag-number">&#215;193</span><br/>
        
        <a href="/tags/fcs/"
            class="tag-link-fcs"
            title="see questions tagged'fcs'using tags"
            rel="tag">fcs</a> <span class="tag-number">&#215;16</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Sept. 10, 2013, 7:42 a.m.">10 Sep '13, 07:42</strong>
    </p>
    <p> 
     	question was seen: <strong>15,648 times</strong>
    </p>
    <p> 
        last updated: <strong title="Oct. 23, 2014, 12:21 a.m.">23 Oct '14, 00:21</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/5092/fcs-incorrect">FCS incorrect</a>
        </p>
        
        <p>
            <a href="/questions/153/building-latest-trunk">Building Latest Trunk</a>
        </p>
        
        <p>
            <a href="/questions/4171/can-not-open-file-over-2gbthere-is-an-error">Can not open file over 2GB,there is an error .</a>
        </p>
        
        <p>
            <a href="/questions/7572/compile-error-in-windows">Compile error in windows</a>
        </p>
        
        <p>
            <a href="/questions/13305/mac-os-x-106-installation-problem">Mac OS X 10.6 Installation problem</a>
        </p>
        
        <p>
            <a href="/questions/16306/ip4-errors-i-got-sometimes-lags-in-games">IP4 Errors - I got sometimes lags in games</a>
        </p>
        
        <p>
            <a href="/questions/23519/ipv6-dissecting-throws-lua-ft-not-yet-supported-error-why">IPv6 Dissecting throws Lua FT not yet supported error! Why?</a>
        </p>
        
        <p>
            <a href="/questions/29085/link-error-on-windows-7-32-bits">Link error on Windows 7 32 bits</a>
        </p>
        
        <p>
            <a href="/questions/33169/fatal-error-u1077-return-code-0x2-when-compiling-plugins-on-windows">Fatal Error U1077 return code 0x2 when compiling plugins on Windows</a>
        </p>
        
        <p>
            <a href="/questions/37569/tshark-the-file-capturecap-appears-to-have-been-cut-short-in-the-middle-of-a-packet">tshark: The file &quot;capture.cap&quot; appears to have been cut short in the middle of a packet.</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
