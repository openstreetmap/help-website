<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Issue with HTTP - Wireshark Q&amp;A</title>
        <meta name="description" content="we are facing slowness issue with only one of our website . It is not opening any webpages.  When running Wireshark from client PC we see intial 3 way handshake is fine , but after that suddenly we are getting destination host unreachable and TCP-Out-of-order. 16 24.621544 192.168.1.10 10.150.0.40 T..." />
        <meta name="keywords" content="http" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/21711/issue-with-http" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/21711/issue-with-http?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='7MO3n4cZPXKKGgncpMjqxnS6zTCiPs1n' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/21711/issue-with-http">Issue with HTTP</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-21711-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/21711/up/" rel="nofollow"> </a>
<div id="post-21711-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-21711-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/21711/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/21711/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>we are facing slowness issue with only one of our website .</p>
<p>It is not opening any webpages. </p>
<p>When running Wireshark from client PC we see intial 3 way handshake is fine , but after that suddenly we are getting  destination host unreachable and TCP-Out-of-order.</p>
<pre><code>16  24.621544   192.168.1.10    10.150.0.40 TCP 985 [TCP segment of a reassembled PDU]
17  24.621754   10.150.0.40 192.168.1.10    ICMP    81  Destination unreachable (Fragmentation needed)
18  24.621768   192.168.1.10    10.150.0.40 TCP 1457    [TCP Out-Of-Order] http &gt; 58765 [ACK] Seq=894 Ack=2394 Win=6773 Len=1366
</code></pre>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/http/" class="post-tag tag-link-http"
                                        title="see questions tagged 'http'" rel="tag">http</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>03 Jun '13, 02:46</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/6615a61d69b703d89076bb0f18342bbf?s=32&amp;d=identicon&amp;r=g" alt="m_1607's gravatar image" />
    <p><a href="/users/4482/m_1607">m_1607</a><br/>
    <span class="score" title="35 reputation points">35</span><span title="12 badges"><span class="badge1">&#9679;</span><span class="badgecount">12</span></span><span title="13 badges"><span class="silver">&#9679;</span><span class="badgecount">13</span></span><span title="16 badges"><span class="bronze">&#9679;</span><span class="badgecount">16</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="m_1607 has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/21711/">
                edited
                <strong>03 Jun '13, 10:02</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7901a94d8fdd1f9f47cda9a32fcfa177?s=32&amp;d=identicon&amp;r=g" alt="SYN-bit's gravatar image" />
            <p><a href="/users/5/syn-bit">SYN-bit ♦♦</a><br/>
            <span class="score" title="17094 reputation points"><span class="">17.1k</span></span><span title="9 badges"><span class="badge1">&#9679;</span><span class="badgecount">9</span></span><span title="57 badges"><span class="silver">&#9679;</span><span class="badgecount">57</span></span><span title="245 badges"><span class="bronze">&#9679;</span><span class="badgecount">245</span></span></p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-21711">
    
        <a name="21713"></a>
        <div class="comment" id="comment-21713">
            <div id="post-21713-score" class="comment-score"></div>
            <div class="comment-text"><pre>17  24.621754 10.150.0.40   192.168.1.10 10 ICMP    81  Destination unreachable (Fragmentation needed)

18  24.621768  192.168.1.10 10  10.150.0.40      10 TCP 1457    [TCP Out-Of-Order] http &gt; 58765 [ACK] Seq=894 Ack=2394 Win=6773 Len=1366
</pre></div>
            <div class="comment-info" id="comment-21713-info">
                
                
                
                

                

                <span class="comment-age">(03 Jun '13, 04:19)</span>
                <a class="comment-user userinfo" href="/users/4482/m_1607">m_1607</a>
                
            </div>
        </div>
    
        <a name="21737"></a>
        <div class="comment" id="comment-21737">
            <div id="post-21737-score" class="comment-score"></div>
            <div class="comment-text"><p>Could someone help me understand what does this error say.</p></div>
            <div class="comment-info" id="comment-21737-info">
                
                
                
                

                

                <span class="comment-age">(04 Jun '13, 03:30)</span>
                <a class="comment-user userinfo" href="/users/4482/m_1607">m_1607</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-21711" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-21711-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    2 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/21711/issue-with-http?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/21711/issue-with-http?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/21711/issue-with-http?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/21711/issue-with-http?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="21712"></a>
                    <div id="answer-container-21712" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-21712-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/21712/up/" rel="nofollow"> </a>
<div id="post-21712-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-21712-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/21712/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>The trace snippet indicates that PMTUD Path MTU discovery is occuring. 
The HTTP server tries to send a tcp payload of 1366 bytes and this obviously doesn't get through. </p>
<p>In the ICMP packet you will see the supported MTU size over the path.
Normally, you should then see re-transmission occuring with a reduced ip.len and the web page should finally arrive at (be acknowleged by) the client. 
If this does not occur here, you could artificially reduce the MTU size at your (httpd) end to 1400 (which I suppose is what is being reported back).</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/21712/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>03 Jun '13, 03:35</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/d6607c3aca20db751d019d8bbd2da893?s=32&amp;d=identicon&amp;r=g" alt="mrEEde2's gravatar image" />
    <p><a href="/users/4708/mreede2">mrEEde2</a><br/>
    <span class="score" title="336 reputation points">336</span><span title="4 badges"><span class="badge1">&#9679;</span><span class="badgecount">4</span></span><span title="6 badges"><span class="silver">&#9679;</span><span class="badgecount">6</span></span><span title="14 badges"><span class="bronze">&#9679;</span><span class="badgecount">14</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="mrEEde2 has 5 accepted answers">20&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-21712">
    
        <a name="21738"></a>
        <div class="comment" id="comment-21738">
            <div id="post-21738-score" class="comment-score"></div>
            <div class="comment-text"><p>So You are saying we need to change MTU on HTTP server side firewall ?</p>

<p>makes me think why only one server affecetd by that.</p></div>
            <div class="comment-info" id="comment-21738-info">
                
                
                
                

                

                <span class="comment-age">(04 Jun '13, 04:46)</span>
                <a class="comment-user userinfo" href="/users/4482/m_1607">m_1607</a>
                
            </div>
        </div>
    
        <a name="21743"></a>
        <div class="comment" id="comment-21743">
            <div id="post-21743-score" class="comment-score">1</div>
            <div class="comment-text"><p>I assume that your firewall is not reducing the client's mss option in the syn packet when this server is the target. For your other servers it is probably adjusted. To prove this you need to capture the 3-way handshake to each server and compare the tcp options. 
Could you please upload your trace upto packet 18 to cloudshark? It is not clear to me why a tcp payload of 1366 bytes coud expand the ip packet to 1457 bytes...</p></div>
            <div class="comment-info" id="comment-21743-info">
                
                
                
                

                

                <span class="comment-age">(04 Jun '13, 11:52)</span>
                <a class="comment-user userinfo" href="/users/4708/mreede2">mrEEde2</a>
                
            </div>
        </div>
    
        <a name="21787"></a>
        <div class="comment" id="comment-21787">
            <div id="post-21787-score" class="comment-score"></div>
            <div class="comment-text"><pre><code>1   0.000000    00:00:00_00:00:00   00:00:00_00:00:00   Ethernet    188 Ethernet Unknown: Invalid length/type: 0x05ff (1535)
2   22.876067   10.150.0.40 192.168.1.10TCP 77  58765 &gt; http [SYN] Seq=0 Win=8192 Len=0 MSS=1460 WS=4 SACK_PERM=1
3   22.876086   192.168.1.10     10.150.0.40    TCP 103 http &gt; 58765 [SYN, ACK] Seq=0 Ack=1 Win=4380 Len=0 MSS=1460 WS=1 SACK_PERM=1
4   23.140692   10.150.0.40 192.168.1.10TCP 91  58765 &gt; http [ACK] Seq=1 Ack=1 Win=65700 Len=0
5   23.140788   10.150.0.40 192.168.1.10HTTP    630 GET /Pages/default.aspx HTTP/1.1 
6   23.140852   192.168.1.10    10.150.0.40 TCP 91  http &gt; 58765 [ACK] Seq=1 Ack=540 Win=4919 Len=0
7   23.145275   192.168.1.10     10.150.0.40    HTTP    385 HTTP/1.1 401 Unauthorized 
8   23.422818   10.150.0.40 192.168.1.10HTTP    708 GET /Pages/default.aspx HTTP/1.1 , NTLMSSP_NEGOTIATE
9   23.422862   192.168.1.10     10.150.0.40    TCP 91  http &gt; 58765 [ACK] Seq=295 Ack=1157 Win=5536 Len=0
10  23.425676   192.168.1.10      10.150.0.40   HTTP    690 HTTP/1.1 401 Unauthorized , NTLMSSP_CHALLENGE
11  23.697484   10.150.0.40 192.168.1.10HTTP    1328    GET /Pages/default.aspx HTTP/1.1 , NTLMSSP_AUTH, User: \mandar.kulkarni
12  23.697529   192.168.1.10    10.150.0.40 TCP 91  http &gt; 58765 [ACK] Seq=894 Ack=2394 Win=6773 Len=0
13  24.621214   192.168.1.10     10.150.0.40    TCP 1551    [TCP segment of a reassembled PDU]
17  24.621754   10.150.0.40 192.168.1.10ICMP    81  Destination unreachable (Fragmentation needed)
18  24.621768   192.168.1.10     10.150.0.40    TCP 1457    [TCP Out-Of-Order] http &gt; 58765 [ACK] Seq=894 Ack=2394 Win=6773 Len=1366
19  24.621772   192.168.1.10      10.150.0.40   TCP 185 [TCP Out-Of-Order] [TCP segment of a reassembled PDU]
</code></pre></div>
            <div class="comment-info" id="comment-21787-info">
                
                
                
                

                

                <span class="comment-age">(05 Jun '13, 22:32)</span>
                <a class="comment-user userinfo" href="/users/4482/m_1607">m_1607</a>
                
            </div>
        </div>
    
        <a name="21791"></a>
        <div class="comment" id="comment-21791">
            <div id="post-21791-score" class="comment-score"></div>
            <div class="comment-text"><p>please help isolate issue</p></div>
            <div class="comment-info" id="comment-21791-info">
                
                
                
                

                

                <span class="comment-age">(06 Jun '13, 03:14)</span>
                <a class="comment-user userinfo" href="/users/4482/m_1607">m_1607</a>
                
            </div>
        </div>
    
        <a name="21793"></a>
        <div class="comment" id="comment-21793">
            <div id="post-21793-score" class="comment-score"></div>
            <div class="comment-text"><p>Just take a look at the dest. unreachable packet in frame 17, unfold the ICMP Header there you will find the needed MTU inside the ICMP message. Why the sender is sending too big packets is then on your side to find out. Check the MTU settings first</p></div>
            <div class="comment-info" id="comment-21793-info">
                
                
                
                

                

                <span class="comment-age">(06 Jun '13, 04:02)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
        <a name="21794"></a>
        <div class="comment not_top_scorer" id="comment-21794">
            <div id="post-21794-score" class="comment-score"></div>
            <div class="comment-text"><p>I Need to check MTU settings on client side firewall right ?</p>

<p>Internet Control Message Protocol
Type: 3 (Destination unreachable)
Code: 4 (Fragmentation needed)
Checksum: 0x3b4f [correct]
MTU of next hop: 1446</p>

<p>Flags: 0x02 (Don't Fragment)
0... .... = Reserved bit: Not set
.1.. .... = Don't fragment: Set
.1.. .... = Don't fragment: Set</p></div>
            <div class="comment-info" id="comment-21794-info">
                
                
                
                

                

                <span class="comment-age">(06 Jun '13, 04:33)</span>
                <a class="comment-user userinfo" href="/users/4482/m_1607">m_1607</a>
                
            </div>
        </div>
    
        <a name="21796"></a>
        <div class="comment not_top_scorer" id="comment-21796">
            <div id="post-21796-score" class="comment-score"></div>
            <div class="comment-text"><p>When there's a firewall in between maybe -&gt; "MTU of next hop: 1446" seen inside the ICMP packet tells you exactly what the MTU in this case is. The SYN from the client says MSS=1460 so MTU 1500 -&gt; doesn't match the 1446 MTU from the dest. unreachable message, so some device inbetween does improper MSS overwrite.</p>

<p>In any case 1551 Bytes in frame 13 is too big for either MTU -&gt; check why the size is that big and if it really is coming from 192.168.1.10 with that size originally</p></div>
            <div class="comment-info" id="comment-21796-info">
                
                
                
                

                

                <span class="comment-age">(06 Jun '13, 05:30)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
        <a name="21797"></a>
        <div class="comment not_top_scorer" id="comment-21797">
            <div id="post-21797-score" class="comment-score"></div>
            <div class="comment-text"><p>Thanks Landi for your help.</p>

<p>How can we check where does exactly this MTU issue is there, i mean how can we find IP of that device or location of device.</p></div>
            <div class="comment-info" id="comment-21797-info">
                
                
                
                

                

                <span class="comment-age">(06 Jun '13, 06:04)</span>
                <a class="comment-user userinfo" href="/users/4482/m_1607">m_1607</a>
                
            </div>
        </div>
    
        <a name="21798"></a>
        <div class="comment not_top_scorer" id="comment-21798">
            <div id="post-21798-score" class="comment-score"></div>
            <div class="comment-text"><p>Bad answer: Check the path and find the device altering MSS values in the SYN packets and/or adding bytes to the data packet. If you can get a tracefile from 192.168.1.10 I'd start there and compare SYN packet values and frame sizes. If you see badly advertised MSS values there start with routers/firewalls to see which device alters</p></div>
            <div class="comment-info" id="comment-21798-info">
                
                
                
                

                

                <span class="comment-age">(06 Jun '13, 06:15)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
        <a name="21805"></a>
        <div class="comment not_top_scorer" id="comment-21805">
            <div id="post-21805-score" class="comment-score"></div>
            <div class="comment-text"><p>The incoming SYN from the client still carries the original MSS 1460, which means no device has adjusted the MSS in flight, which should have been done if a VPN Tunnel is involved as per the discussion in 
<a href="http://ask.wireshark.org/questions/20633/tcp-mss-inconsistency-in-different-capture-points">http://ask.wireshark.org/questions/20633/tcp-mss-inconsistency-in-different-capture-points</a>
It would help to see the original .pcap file...</p></div>
            <div class="comment-info" id="comment-21805-info">
                
                
                
                

                

                <span class="comment-age">(06 Jun '13, 09:22)</span>
                <a class="comment-user userinfo" href="/users/4708/mreede2">mrEEde2</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-21712" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 10
        </span>
        <a href="#" class="show-all-comments-link">show 5 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-21712-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="21799"></a>
                    <div id="answer-container-21799" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-21799-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/21799/up/" rel="nofollow"> </a>
<div id="post-21799-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-21799-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/21799/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Interesting packets, however, it would be much easier to help you if you uploaded the pcap file somewhere (for example to www.cloudshark.org and assuming there is no sensitive data in the pcap file).</p>
<p>A few things that really stand out from the pasted wireshark output:</p>
<ol>
<li>You say the capture was made on the client, this can not be true as the delta time between SYN and SYN/ACK is 0,021ms while the delta between the SYN/ACK and the ACK is ~264ms. The trace must have been made on the server.</li>
<li>For 1366 TCP payload there is a 1457 byte packet, which results in 91 bytes of headers. 20 for IP, 20 for TCP (no IP or TCP options seem present as the MSS is 1460 in the initial SYN and SYN/ACK). What protocols are used before IP in your case that make up for the other 51 bytes?</li>
<li>Because of NTLM authentication there are a few round trips lost to authentication (between frame 7 and 8 and between frame 10 and 11).</li>
<li>The server response time is ~924ms (see delta between frame 12 and 13)</li>
<li>The delta between sending the first server response packet and the icmp unreachable packet is 0,540ms. The icmp unreachable packet is coming from the same IP as the client. This means it is not the client address but a NAT address for the client and a link between the natting device (10.150.0.40) and the client is using a lower MTU size (94 bytes smaller).</li>
</ol>
<p>After frame 19, a normal TCP transfer should occur.</p>
<p>In short:</p>
<ul>
<li>~260ms delay due to high RTT</li>
<li>~540ms delay due to high RTT and authentication</li>
<li>~920ms delay due to high server response time</li>
</ul>
<p>Apart from that, all seems normal at the TCP level, but I'm curious about the protocols used below the IP layer.</p>
<p>EDIT: As <a href="/users/4708/mreede2"><a href="/users/4708/mreede2">@mrEEde2</a></a> is pointing out, it would be best practice for a VPN device to alter the TCP MSS to prevent the extra step caused by the ICMP fragmentation needed.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/21799/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>06 Jun '13, 07:15</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7901a94d8fdd1f9f47cda9a32fcfa177?s=32&amp;d=identicon&amp;r=g" alt="SYN-bit's gravatar image" />
    <p><a href="/users/5/syn-bit">SYN-bit ♦♦</a><br/>
    <span class="score" title="17094 reputation points"><span class="">17.1k</span></span><span title="9 badges"><span class="badge1">&#9679;</span><span class="badgecount">9</span></span><span title="57 badges"><span class="silver">&#9679;</span><span class="badgecount">57</span></span><span title="245 badges"><span class="bronze">&#9679;</span><span class="badgecount">245</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="SYN-bit has 174 accepted answers">20&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/21799/">
                edited
                <strong>06 Jun '13, 09:46</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-21799">
    
        <a name="21800"></a>
        <div class="comment" id="comment-21800">
            <div id="post-21800-score" class="comment-score"></div>
            <div class="comment-text"><p>Oh, one more thing. If nagle is enabled on 192.168.1.10 and delayed acking is enabled on the client, you might be in more trouble as 192.168.1.10 seems to be splitting the full size frames into two parts due to the PMTUD. If it continues doing so, it will result is a very slow transfer as there will be a RTT delay + 100ms (or 200ms) delayed ack timer delay for each full size packet that the server sends.</p>

<p>Again, having a pcap file with the whole transfer would really help in telling what exactly is going on.</p></div>
            <div class="comment-info" id="comment-21800-info">
                
                
                
                

                

                <span class="comment-age">(06 Jun '13, 07:26)</span>
                <a class="comment-user userinfo" href="/users/5/syn-bit">SYN-bit ♦♦</a>
                
            </div>
        </div>
    
        <a name="21905"></a>
        <div class="comment" id="comment-21905">
            <div id="post-21905-score" class="comment-score"></div>
            <div class="comment-text"><p>One doubt when I do tracepath from router of one location to webserver i see different PMTU , whereas when I do same from router of 2nd location I see PMTU as different.</p>

<p>why is it like that ?</p></div>
            <div class="comment-info" id="comment-21905-info">
                
                
                
                

                

                <span class="comment-age">(10 Jun '13, 21:58)</span>
                <a class="comment-user userinfo" href="/users/4482/m_1607">m_1607</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-21799" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-21799-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/21711/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='7MO3n4cZPXKKGgncpMjqxnS6zTCiPs1n' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/21711/issue-with-http?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/21711/issue-with-http?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/http/"
            class="tag-link-http"
            title="see questions tagged'http'using tags"
            rel="tag">http</a> <span class="tag-number">&#215;293</span><br/>
        
    </p>
    <p>
        question asked: <strong title="June 3, 2013, 2:46 a.m.">03 Jun '13, 02:46</strong>
    </p>
    <p> 
     	question was seen: <strong>7,461 times</strong>
    </p>
    <p> 
        last updated: <strong title="June 10, 2013, 9:58 p.m.">10 Jun '13, 21:58</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/701/display-all-streams-with-a-matching-uri">Display all streams with a matching URI</a>
        </p>
        
        <p>
            <a href="/questions/3658/http-packets">HTTP packets</a>
        </p>
        
        <p>
            <a href="/questions/7268/http-continuation-vs-tcp-segment">HTTP Continuation vs. TCP segment</a>
        </p>
        
        <p>
            <a href="/questions/8997/how-can-i-tell-which-http-get-a-particular-response-belongs-to">How can I tell which HTTP GET a particular response belongs to?</a>
        </p>
        
        <p>
            <a href="/questions/10282/how-do-i-extract-the-cookie-path">How do I Extract the cookie path?</a>
        </p>
        
        <p>
            <a href="/questions/13622/how-decode-a-gzip-url">How decode a gzip url</a>
        </p>
        
        <p>
            <a href="/questions/16964/analyzing-http-protocol-using-tshark">Analyzing HTTP protocol using Tshark</a>
        </p>
        
        <p>
            <a href="/questions/19711/adding-a-range-of-ports-to-be-mapped-to-http">Adding a range of ports to be mapped to http</a>
        </p>
        
        <p>
            <a href="/questions/23517/how-does-http-caching-works-in-a-proxy-server">How does HTTP caching works in a proxy server?</a>
        </p>
        
        <p>
            <a href="/questions/26869/see-other-packages-http">see other packages HTTP</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
