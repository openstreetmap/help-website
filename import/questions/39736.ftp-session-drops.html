<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>FTP Session Drops - Wireshark Q&amp;A</title>
        <meta name="description" content="Hi all, Im new with Wireshark and trying to solve a problem that is failing all the time. My setup is a Windows Vista machine that is used to communicate with 2 other nodes/computers at the same time. Im my application im starting a FTP session toward Node1. After a while i need to communicate with ..." />
        <meta name="keywords" content="tcpwindowsize" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/39736/ftp-session-drops" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/39736/ftp-session-drops?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='We6Zto7Pt0ocrpfrf9oFstCboQtI1X7G' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/39736/ftp-session-drops">FTP Session Drops</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-39736-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/39736/up/" rel="nofollow"> </a>
<div id="post-39736-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-39736-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/39736/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/39736/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>Hi all,</p>
<p>Im new with Wireshark and trying to solve a problem that is failing all the time.</p>
<p>My setup is a Windows Vista machine that is used to communicate with 2 other nodes/computers at the same time.</p>
<p>Im my application im starting a FTP session toward Node1. After a while i need to communicate with Node2 also (TCP).</p>
<p>What i can see in Wireshark output, Node1 starts sending [TCP WINDOW UPDATE] requests after a while and after that the FTP session drops and all communication goes toward Node2.</p>
<p>Output when FTP drops: SOURCE: DEST:</p>
<pre><code>192.168.1.140 LocalComputer TCP 66 [TCP Window Update] 20→50775 [ACK] Seq=1 Ack=18737701 Win=16048 Len=0 TSval=17 TSecr=124476481 20 50775 
192.168.1.140 LocalComputer TCP 66 [TCP Window Update] 20→50775 [ACK] Seq=1 Ack=18737701 Win=20144 Len=0 TSval=17 TSecr=124476481 20 50775
192.168.1.140 LocalComputer TCP 66 [TCP Window Update] 20→50775 [ACK] Seq=1 Ack=18737701 Win=24240 Len=0 TSval=17 TSecr=124476481 20 50775
192.168.1.140 LocalComputer TCP 66 [TCP Window Update] 20→50775 [ACK] Seq=1 Ack=18737701 Win=28336 Len=0 TSval=17 TSecr=124476481 20 50775
192.168.1.140 LocalComputer TCP 66 [TCP Window Update] 20→50775 [ACK] Seq=1 Ack=18737701 Win=32432 Len=0 TSval=17 TSecr=124476481 20 50775
-------------------- FTP Session drops here ----------------
192.168.1.144 LocalComputer TCP 260 [TCP segment of a reassembled PDU] 80 50789
192.168.1.144 LocalComputer TCP 1514 [TCP segment of a reassembled PDU] 80 50789
192.168.1.144 LocalComputer TCP 1514 [TCP segment of a reassembled PDU] 80 50789
LocalComputer 192.168.1.144 TCP 54 50789→80 [ACK] Seq=171 Ack=1667 Win=64240 Len=0 50789 80
</code></pre>
<p>Other things i can see in output are STP from 3COM Switch:</p>
<pre><code>3comEuro40:54:9e Spanning-tree-(for-bridges)00 STP 64 RST. Root = 32768/0/40:01:c6:40:54:9a Cost = 0 Port = 0x8003 [ETHERNET FRAME CHECK SEQUENCE INCORRECT]
</code></pre>
<p>Red marked fields:</p>
<pre><code>LocalComputer 192.168.1.144 TCP 54 50789→80 [RST, ACK] Seq=172 Ack=9288 Win=0 Len=0 50789 80
192.168.1.144 LocalComputer TCP 60 80→50789 [ACK] Seq=9288 Ack=172 Win=33580 Len=0 80 50789
LocalComputer 192.168.1.144 TCP 54 50789→80 [RST] Seq=172 Win=0 Len=0 50789 80
</code></pre>
<p>I have tried changing some settings on local NIC but with no success. Also have set adaptive tcp window to off (Hoping it will use full tcp window) using netsh.</p>
<p>Any help would be much appreciated!</p>
<p>BR Jimmie</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/tcpwindowsize/" class="post-tag tag-link-tcpwindowsize"
                                        title="see questions tagged 'tcpwindowsize'" rel="tag">tcpwindowsize</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>09 Feb '15, 23:49</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/3aebf88a1e76c715ee726b782e21987d?s=32&amp;d=identicon&amp;r=g" alt="Seven47's gravatar image" />
    <p><a href="/users/14255/seven47">Seven47</a><br/>
    <span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">&#9679;</span><span class="badgecount">3</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Seven47 has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/39736/">
                edited
                <strong>09 Feb '15, 23:56</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7901a94d8fdd1f9f47cda9a32fcfa177?s=32&amp;d=identicon&amp;r=g" alt="SYN-bit's gravatar image" />
            <p><a href="/users/5/syn-bit">SYN-bit ♦♦</a><br/>
            <span class="score" title="17094 reputation points"><span class="">17.1k</span></span><span title="9 badges"><span class="badge1">&#9679;</span><span class="badgecount">9</span></span><span title="57 badges"><span class="silver">&#9679;</span><span class="badgecount">57</span></span><span title="245 badges"><span class="bronze">&#9679;</span><span class="badgecount">245</span></span></p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-39736">
    
        <a name="39738"></a>
        <div class="comment" id="comment-39738">
            <div id="post-39738-score" class="comment-score"></div>
            <div class="comment-text"><p>Some update..</p>

<p>Just tried to set "netsh int tcp set global autotuninglevel=normal"</p>

<p>This resulted in FTP session lasted approx. 80% of the file transfer until it dropped.
Before, when it was set to disabled, it lasted about 15% before it dropped..</p>

<p>Coinsidence?</p></div>
            <div class="comment-info" id="comment-39738-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 00:10)</span>
                <a class="comment-user userinfo" href="/users/14255/seven47">Seven47</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-39736" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-39736-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    One Answer:
                    </div>
                    
<div class="tabsA"><a href="/questions/39736/ftp-session-drops?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/39736/ftp-session-drops?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/39736/ftp-session-drops?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/39736/ftp-session-drops?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="39737"></a>
                    <div id="answer-container-39737" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-39737-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/39737/up/" rel="nofollow"> </a>
<div id="post-39737-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-39737-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/39737/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>From this data alone it cannot be determined why you have session drops, you need at least the timestamps so that a guess can be made about timeouts. Also, did the transfer go well before the Window Updates? Was there any packet between 192.168.1.140 and LocalComputer after the point where you say "-------------------- FTP Session drops here ----------------"</p>
<p>If you can supply a capture file (on <a href="https://appliance.cloudshark.org/upload/">Cloudshark</a> for instance), that would be great. You can anonimize the file with <a href="https://www.tracewrangler.com/">TraceWrangler</a> if you need to remove the ip addresses and/or the TCP payload of the packets.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/39737/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>10 Feb '15, 00:02</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7901a94d8fdd1f9f47cda9a32fcfa177?s=32&amp;d=identicon&amp;r=g" alt="SYN-bit's gravatar image" />
    <p><a href="/users/5/syn-bit">SYN-bit ♦♦</a><br/>
    <span class="score" title="17094 reputation points"><span class="">17.1k</span></span><span title="9 badges"><span class="badge1">&#9679;</span><span class="badgecount">9</span></span><span title="57 badges"><span class="silver">&#9679;</span><span class="badgecount">57</span></span><span title="245 badges"><span class="bronze">&#9679;</span><span class="badgecount">245</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="SYN-bit has 174 accepted answers">20&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-39737">
    
        <a name="39739"></a>
        <div class="comment" id="comment-39739">
            <div id="post-39739-score" class="comment-score"></div>
            <div class="comment-text"><p>Wow.. Fast answer there SYN-bit!
Thanks!</p>

<p>I will supply a capture file in a moment.</p></div>
            <div class="comment-info" id="comment-39739-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 00:12)</span>
                <a class="comment-user userinfo" href="/users/14255/seven47">Seven47</a>
                
            </div>
        </div>
    
        <a name="39741"></a>
        <div class="comment" id="comment-39741">
            <div id="post-39741-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi again,</p>

<p>It seems Cloudshark can only take 2MB of file, Mine is 45MB..</p>

<p>And it seems it was only coinsidence that i reach 80%.. I just tried it again and it failed at 15% with the new tcpwindow setting..</p>

<p>Also, did the transfer go well before the Window Updates?
No, it has always dropped FTP session even before i messed with tcpwindow size.</p>

<p>Was there any packet between 192.168.1.140 and LocalComputer after the point where you say "-------------------- FTP Session drops here ----------------"</p>

<p>No, after that the FTP session is lost completely. No more traffic between 192.168.1.140 and LocalComputer.</p>

<p>BR
Jimmie</p></div>
            <div class="comment-info" id="comment-39741-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 00:28)</span>
                <a class="comment-user userinfo" href="/users/14255/seven47">Seven47</a>
                
            </div>
        </div>
    
        <a name="39742"></a>
        <div class="comment" id="comment-39742">
            <div id="post-39742-score" class="comment-score"></div>
            <div class="comment-text"><p><img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/Capture_1zymeXl.JPG"></p>

<p><img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/Capture1.JPG"></p>

<p><img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/Capture3_N32ksBW.JPG"></p></div>
            <div class="comment-info" id="comment-39742-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 00:39)</span>
                <a class="comment-user userinfo" href="/users/14255/seven47">Seven47</a>
                
            </div>
        </div>
    
        <a name="39744"></a>
        <div class="comment" id="comment-39744">
            <div id="post-39744-score" class="comment-score"></div>
            <div class="comment-text"><p>(please use comments instead of new answers, that works better on this QA site :-))</p>

<p>Can you at least post the command session (traffic on port 21)? And maybe the past 100 or so packets of the data session?</p>

<p>How long does the transfer take? Do you see traffic in the command session at the time the data transfer stops? I have seen situations where a firewall would kill the command due to a timeout while the transfer in the data session is happily sending packets.</p></div>
            <div class="comment-info" id="comment-39744-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 00:39)</span>
                <a class="comment-user userinfo" href="/users/5/syn-bit">SYN-bit ♦♦</a>
                
            </div>
        </div>
    
        <a name="39745"></a>
        <div class="comment not_top_scorer" id="comment-39745">
            <div id="post-39745-score" class="comment-score"></div>
            <div class="comment-text"><p>Sorry, will use comment instead :)</p></div>
            <div class="comment-info" id="comment-39745-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 00:55)</span>
                <a class="comment-user userinfo" href="/users/14255/seven47">Seven47</a>
                
            </div>
        </div>
    
        <a name="39746"></a>
        <div class="comment not_top_scorer" id="comment-39746">
            <div id="post-39746-score" class="comment-score"></div>
            <div class="comment-text"><p>I have a window progress bar that are showing the transfer and i can see that it "freezes" right about when IP .140 sends [TCP WINDOW UPDATE]..
It takes about 2 minutes after FTP session has started when it drops.
I also see some [TCP Window Full] FTP Data: 1200 bytes that localhost sends to .140</p></div>
            <div class="comment-info" id="comment-39746-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 00:58)</span>
                <a class="comment-user userinfo" href="/users/14255/seven47">Seven47</a>
                
            </div>
        </div>
    
        <a name="39747"></a>
        <div class="comment not_top_scorer" id="comment-39747">
            <div id="post-39747-score" class="comment-score"></div>
            <div class="comment-text"><p>In the control channel in frame 32084, you can see that the remote server issues a "421 service not available" error. This forces the client to close the (control) session with a "QUIT". However, the data transfer seems to continue. It looks like it finishes in 54304, as this is a non-full-sized frame. Can you check if the file that you were sending is 18737701 bytes in size? If it is, the file is indeed fully sent to the server, but as the control channel was closed, it will nog be (properly) processed.</p>

<p>The question is, why does the server issue a 421 error after accepting the upload. Is there a file size limit perhaps (how many bytes were sent in the data channel right before this 421 error was sent?) or maybe a timelimit for sending files?</p></div>
            <div class="comment-info" id="comment-39747-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 01:22)</span>
                <a class="comment-user userinfo" href="/users/5/syn-bit">SYN-bit ♦♦</a>
                
            </div>
        </div>
    
        <a name="39751"></a>
        <div class="comment not_top_scorer" id="comment-39751">
            <div id="post-39751-score" class="comment-score"></div>
            <div class="comment-text"><p>This application runs in 2 threads but if i manually only run the thread where FTP is used towards .140 then there is no FTP session drops. So the server, (140) should then not have any file size restrictions.
The file is 18737700 on server and client so it seems it has transferred it completely.
Maybe there is a timelimit for files to be transferred and when Localhost is "talking" to both Nodes, the limit for a big file to be transferred is reached?</p></div>
            <div class="comment-info" id="comment-39751-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 02:38)</span>
                <a class="comment-user userinfo" href="/users/14255/seven47">Seven47</a>
                
            </div>
        </div>
    
        <a name="39753"></a>
        <div class="comment not_top_scorer" id="comment-39753">
            <div id="post-39753-score" class="comment-score"></div>
            <div class="comment-text"><p>please upload the pcap file somewhere (google drive, dropbox, cloudshark.org). It's really hard to troubleshoot a complex issue with screenshots that don't match. The port used in the Window update screenshot does not match the port used in the last FTP PORT command that generated the error 421!  <br>
</p>

<blockquote>
<p>It seems Cloudshark can only take 2MB of file, Mine is 45MB..</p>
</blockquote>

<p>then please use google drive, dropbox, mega.co.nz or any other file hosting service and post the link here.</p></div>
            <div class="comment-info" id="comment-39753-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 02:59)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="39757"></a>
        <div class="comment not_top_scorer" id="comment-39757">
            <div id="post-39757-score" class="comment-score"></div>
            <div class="comment-text"><p>Uploaded it here:
<a href="https://www.dropbox.com/sh/qaswcqmxp265ml1/AADp8t11G4_DdKrpLI81ZrNda?dl=0">https://www.dropbox.com/sh/qaswcqmxp265ml1/AADp8t11G4_DdKrpLI81ZrNda?dl=0</a></p></div>
            <div class="comment-info" id="comment-39757-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 03:42)</span>
                <a class="comment-user userinfo" href="/users/14255/seven47">Seven47</a>
                
            </div>
        </div>
    
        <a name="39758"></a>
        <div class="comment not_top_scorer" id="comment-39758">
            <div id="post-39758-score" class="comment-score"></div>
            <div class="comment-text"><p>Why are we fixing Windows Vista problems? How is this a Wireshark use issue?</p></div>
            <div class="comment-info" id="comment-39758-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 05:11)</span>
                <a class="comment-user userinfo" href="/users/4/jaap">Jaap ♦</a>
                
            </div>
        </div>
    
        <a name="39762"></a>
        <div class="comment" id="comment-39762">
            <div id="post-39762-score" class="comment-score">1</div>
            <div class="comment-text"><blockquote>
<p>Why are we fixing Windows Vista problems? How is this a Wireshark use issue?</p>
</blockquote>

<p>Good question.</p>

<p>I guess these questions are beeing asked because the general perception of the Q&amp;A site is </p>

<ul>
<li>Wireshark "issues" </li>
<li>Wireshark usage questions</li>
<li>general questions about protocols (TCP behaviour)</li>
<li>general questions about network troubleshooting with or without using Wireshark</li>
</ul>

<p>As far as I can see, the community so far has tried to answer all of these question categories and denied help only if the question was totally off-topic.</p>

<p>The FAQ states:</p>

<blockquote>
<p><strong>What kinds of questions can I ask here?</strong> <br>
Questions should be relevant to Wireshark features, <strong>protocol analysis</strong>, or Wireshark development.</p>
</blockquote>

<p><strong>protocol analysis</strong> is a wide field and can include almost anything, maybe even FTP problems.</p>

<p>Regards<br>
Kurt</p></div>
            <div class="comment-info" id="comment-39762-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 05:28)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="39763"></a>
        <div class="comment not_top_scorer" id="comment-39763">
            <div id="post-39763-score" class="comment-score"></div>
            <div class="comment-text"><p>In your trace, the client (.14) closes other FTP data transfers with a FIN on the last DATA packet. But in the failing transfer, there is no FIN in the last DATA packet (frame 54191). So it looks like the FTP client (or library) needs some polishing...</p></div>
            <div class="comment-info" id="comment-39763-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 05:38)</span>
                <a class="comment-user userinfo" href="/users/5/syn-bit">SYN-bit ♦♦</a>
                
            </div>
        </div>
    
        <a name="39768"></a>
        <div class="comment not_top_scorer" id="comment-39768">
            <div id="post-39768-score" class="comment-score"></div>
            <div class="comment-text"><p>Umm.. I didnt say this was a Wireshark issue. I just said that i was new to Wireshark and was using it to find out why my FTP session was dropped.
Since asking for that was "Illegal" im very sorry and i appologise.
I will of course uninstall wireshark immediately and find another software to use instead.</p>

<p>Anyways, thank you SYN-bit for being kind and actually trying to help out.</p></div>
            <div class="comment-info" id="comment-39768-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 07:02)</span>
                <a class="comment-user userinfo" href="/users/14255/seven47">Seven47</a>
                
            </div>
        </div>
    
        <a name="39769"></a>
        <div class="comment not_top_scorer" id="comment-39769">
            <div id="post-39769-score" class="comment-score"></div>
            <div class="comment-text"><p>Kurt and I don't think it was so illegal, so feel free to stay and continue this issue. Jaap is trying to protect the QA site which is good, but I think he was a little too strict this time :-)</p></div>
            <div class="comment-info" id="comment-39769-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 07:11)</span>
                <a class="comment-user userinfo" href="/users/5/syn-bit">SYN-bit ♦♦</a>
                
            </div>
        </div>
    
        <a name="39773"></a>
        <div class="comment not_top_scorer" id="comment-39773">
            <div id="post-39773-score" class="comment-score"></div>
            <div class="comment-text"><p><a href="/users/14255/seven47">@Seven47</a>: please relax. You are getting help, aren't you?</p></div>
            <div class="comment-info" id="comment-39773-info">
                
                
                
                

                

                <span class="comment-age">(10 Feb '15, 07:51)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-39737" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 16
        </span>
        <a href="#" class="show-all-comments-link">show 11 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-39737-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/39736/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='We6Zto7Pt0ocrpfrf9oFstCboQtI1X7G' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/39736/ftp-session-drops?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/39736/ftp-session-drops?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/tcpwindowsize/"
            class="tag-link-tcpwindowsize"
            title="see questions tagged'tcpwindowsize'using tags"
            rel="tag">tcpwindowsize</a> <span class="tag-number">&#215;28</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Feb. 9, 2015, 11:49 p.m.">09 Feb '15, 23:49</strong>
    </p>
    <p> 
     	question was seen: <strong>2,161 times</strong>
    </p>
    <p> 
        last updated: <strong title="Feb. 10, 2015, 7:51 a.m.">10 Feb '15, 07:51</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/27319/performance-testing-iperf">Performance Testing iperf</a>
        </p>
        
        <p>
            <a href="/questions/57067/intermittent-disconnection">intermittent disconnection</a>
        </p>
        
        <p>
            <a href="/questions/27889/tcp-zero-window">TCP zero window</a>
        </p>
        
        <p>
            <a href="/questions/57353/a-question-about-windows-size-window-size-scaling-and-max-throughput-on-10gb-lan">A question about Windows Size, Window Size Scaling and max throughput on 10GB LAN</a>
        </p>
        
        <p>
            <a href="/questions/31831/what-are-possible-reason-for-window-size-drop">What are possible reason for window size drop</a>
        </p>
        
        <p>
            <a href="/questions/58286/bytes-in-flight-exceeds-window-size">Bytes in Flight exceeds window size</a>
        </p>
        
        <p>
            <a href="/questions/32297/iperf-and-64k-window-size">iperf and 64K window size</a>
        </p>
        
        <p>
            <a href="/questions/58452/which-tcp-packet-does-reset-the-connection">Which TCP Packet does reset the connection ?</a>
        </p>
        
        <p>
            <a href="/questions/36850/initial-tcpwindow_size_value-tcpwindow_size_scalefactor">Initial tcp.window_size_value / tcp.window_size_scalefactor</a>
        </p>
        
        <p>
            <a href="/questions/59593/strange-window-scaling-graph">Strange window scaling graph</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
