<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Is Encrypted Alert the cause of this delay? - Wireshark Q&amp;A</title>
        <meta name="description" content="I am helping a volunteer community run a local library. We are working with the local authority and have to use their book loan/reservation system. Currently this is driving the volunteers crazy with unexplained and undiagnosed IT problems. The problem is not unique to our site - other volunteer lib..." />
        <meta name="keywords" content="encrypted,alert" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/12106/is-encrypted-alert-the-cause-of-this-delay" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/12106/is-encrypted-alert-the-cause-of-this-delay?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='8qh5UEgEwdp2MLiq5dBnznEvTcroQk7r' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/12106/is-encrypted-alert-the-cause-of-this-delay">Is Encrypted Alert the cause of this delay?</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-12106-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/12106/up/" rel="nofollow"> </a>
<div id="post-12106-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-12106-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/12106/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/12106/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>I am helping a volunteer community run a local library. We are working with the local authority and have to use their book loan/reservation system. Currently this is driving the volunteers crazy with unexplained and undiagnosed IT problems. The problem is not unique to our site - other volunteer libraries also experience it with the same frequency (up to 10 or more times per day). We are using a web based app and while part way through a transaction we see the app freeze - this is usually apparent when the bar code reader beeps as the bar code is read but no response message is displayed from the central system (this should happen without the need for any key being pressed). If a volunteer presses the enter key when they suspect a freeze they get a message saying "xxx.gov.uk is not responding". If they take any action the record in question is locked for the rest of the day - alternatively they can do nothing and wait for the above message to go away of its own accord - if they do this (and it takes around 2 minutes for this to happen) then no record is locked and they can continue. I have used Wireshark to trace the client side of the transactions and the page spanning the problem is shown here. </p>
<p>The volunteers say the problem started at 12:41:26 but this is definately later than when it started because they had to realise they had a problem and then get the time stamp, so the problem will have started several seconds, or possibly longer, before. The system recovered by itself by 14:43:27 - this time is probably 2 seconds or so after the "not responding" message had gone away, again because of the time it would have taken the volunteers to respond.</p>
<p>I'm really out of my depth in terms of understanding the exact meaning of these trace records hence my appeal for anyone with better knowledge to help. I can supply the detailed trace file if needed.</p>
<p>Many thanks for any help.
<img alt="Overview Records" src="http://s13.postimage.org/b0ge9q3lz/Delay_Trace.jpg/"></p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/encrypted/" class="post-tag tag-link-encrypted"
                                        title="see questions tagged 'encrypted'" rel="tag">encrypted</a>
                                
                                    <a href="/tags/alert/" class="post-tag tag-link-alert"
                                        title="see questions tagged 'alert'" rel="tag">alert</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>21 Jun '12, 08:19</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/fb0522d199e7d00e24223257614c16a1?s=32&amp;d=identicon&amp;r=g" alt="Bernard46's gravatar image" />
    <p><a href="/users/2883/bernard46">Bernard46</a><br/>
    <span class="score" title="1 reputation points">1</span><span title="3 badges"><span class="badge1">&#9679;</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">&#9679;</span><span class="badgecount">3</span></span><span title="4 badges"><span class="bronze">&#9679;</span><span class="badgecount">4</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Bernard46 has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/12106/">
                edited
                <strong>21 Jun '12, 08:24</strong>
            </a>
        </p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-12106">
    
        <a name="12107"></a>
        <div class="comment" id="comment-12107">
            <div id="post-12107-score" class="comment-score"></div>
            <div class="comment-text"><p>"...and the page spanning the problem is shown here." - where exactly? :) Can you upload the trace to <a href="http://www.cloudshark.org">www.cloudshark.org</a> so we can take a look? Only do that if the trace doesn't contain critical data, like plain text login details etc.</p></div>
            <div class="comment-info" id="comment-12107-info">
                
                
                
                

                

                <span class="comment-age">(21 Jun '12, 08:27)</span>
                <a class="comment-user userinfo" href="/users/145/jasper">Jasper ♦♦</a>
                
            </div>
        </div>
    
        <a name="12108"></a>
        <div class="comment" id="comment-12108">
            <div id="post-12108-score" class="comment-score"></div>
            <div class="comment-text"><p>Sorry about that - I couldn't quite work out how to get the image uploaded - despite copying what someone else appeared to have done I still got it wrong. I have uploaded the trace to Cloudshark as you suggested and the name is <a href="https://www.cloudshark.org/captures/546436d1939d">https://www.cloudshark.org/captures/546436d1939d</a> - I noticed the times are displayed as relative times (not absolute) - do you need me to give the record numbers for the times I mentioned? 
Thanks for your help.</p></div>
            <div class="comment-info" id="comment-12108-info">
                
                
                
                

                

                <span class="comment-age">(21 Jun '12, 08:41)</span>
                <a class="comment-user userinfo" href="/users/2883/bernard46">Bernard46</a>
                
            </div>
        </div>
    
        <a name="12110"></a>
        <div class="comment" id="comment-12110">
            <div id="post-12110-score" class="comment-score"></div>
            <div class="comment-text"><p>I've upload a trace for a successful session from logon to logoff as <a href="https://www.cloudshark.org/captures/a0fa1c782945">https://www.cloudshark.org/captures/a0fa1c782945</a> This consisted of the following end user actions:
1) App start
2) Logon
3) Enter Loan section of app
4) Read borrower's card via bar code scanner and auto submit
5) Return to main menu
6) Select book return option
7) Read book bar code via scanner and auto submit
8) Logoff
I agree with you that the app is probably not the best in the world - my objective is to try and provide the evidence for the Library Authority to go back to the vendor and get them to fix it so that it stops driving our volunteers mad. Right now we're in danger f losing volunteers because of the way this app is bahaving unfortunately. Anything you can suggest would be very welcome. Thanks for helping.</p></div>
            <div class="comment-info" id="comment-12110-info">
                
                
                
                

                

                <span class="comment-age">(21 Jun '12, 09:34)</span>
                <a class="comment-user userinfo" href="/users/2883/bernard46">Bernard46</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-12106" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-12106-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    3 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/12106/is-encrypted-alert-the-cause-of-this-delay?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/12106/is-encrypted-alert-the-cause-of-this-delay?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/12106/is-encrypted-alert-the-cause-of-this-delay?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/12106/is-encrypted-alert-the-cause-of-this-delay?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="12109"></a>
                    <div id="answer-container-12109" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-12109-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/12109/up/" rel="nofollow"> </a>
<div id="post-12109-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-12109-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/12109/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>It would indeed really help if you can share the tracefile, please look at Jaspers suggestion for that.</p>
<p>Looking at your description, there are a few things that pop up in my mind:</p>
<ul>
<li>There is a difference in Application behavior in the way the session ends. So a full trace of both cases (pressing enter or waiting two minutes) would be beneficial. Please also add a trace of a transaction without problem for reference on how things should be working.</li>
<li>You mention an Encrypted Alert. These usually are CloseNotify messages which are the SSL equivalent of a TCP FIN. Ie, it is indicating that the sender of the CloseNotify is ready to terminate the SSL session. So that in itself is not a problem, but it may indicate where a problem might be present</li>
</ul>
<p>All in all, it feels like the application does not cope well with unexpected things in the network. Looking at the traces will tell more :-)</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/12109/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>21 Jun '12, 08:42</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7901a94d8fdd1f9f47cda9a32fcfa177?s=32&amp;d=identicon&amp;r=g" alt="SYN-bit's gravatar image" />
    <p><a href="/users/5/syn-bit">SYN-bit ♦♦</a><br/>
    <span class="score" title="17094 reputation points"><span class="">17.1k</span></span><span title="9 badges"><span class="badge1">&#9679;</span><span class="badgecount">9</span></span><span title="57 badges"><span class="silver">&#9679;</span><span class="badgecount">57</span></span><span title="245 badges"><span class="bronze">&#9679;</span><span class="badgecount">245</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="SYN-bit has 174 accepted answers">20&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-12109">
    
</div>
<div id="comment-tools-12109" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-12109-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="12111"></a>
                    <div id="answer-container-12111" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-12111-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/12111/up/" rel="nofollow"> </a>
<div id="post-12111-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-12111-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/12111/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>looking at your trace files and accessing the https server, I wonder what I get:</p>
<blockquote>
<p><code><a href="https://xxx.yyyyyyyy.gov.uk/">https://xxx.yyyyyyyy.gov.uk/</a> (aaa.bbb.ccc.ddd)</code>  <strong>UPDATE:</strong> info blanked, on request of OP<br>
<strong><code>fred was here</code></strong></p>
</blockquote>
<p>Who is <strong>fred</strong> and why was he there???</p>
<p>Anyway, can you please connect to the site through Fiddler (<a href="http://www.fiddler2.com">http://www.fiddler2.com</a>) and post the *.saz file somewhere? <strong>HINT:</strong> Please activate the SSL "proxy" in Fiddler (see options).</p>
<p>Regards<br>
Kurt</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/12111/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>21 Jun '12, 10:26</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" alt="Kurt%20Knochner's gravatar image" />
    <p><a href="/users/2593/kurt-knochner">Kurt Knochner ♦</a><br/>
    <span class="score" title="24767 reputation points"><span class="">24.8k</span></span><span title="10 badges"><span class="badge1">&#9679;</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">&#9679;</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">&#9679;</span><span class="badgecount">237</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Kurt Knochner has 344 accepted answers">15&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/12111/">
                edited
                <strong>21 Jun '12, 13:32</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-12111">
    
        <a name="12112"></a>
        <div class="comment" id="comment-12112">
            <div id="post-12112-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi Kurt
I didn't want to mention the actual site name in the Q&amp;A (hence the xxx in the original post)because I didn't want to draw too much attention to where the issue is but its not that important. However you will probably appreciate from my earlier comments about us being volunteers and that this is a local government website I'm a bit limited in what I can do. The PC we have to use for this app is actually owned by the local govt organisation and is locked down such that I cannot install anything on it or change anything. They have total control over it, and I mean total. I did manage to persuade them to install Wireshark but I'm not at all sure I would get away with Fiddler as well - in any case I have to get them to come out to the PC to do anything with it - they won't give me the password to install code. If you can make any inspired guesses about what might be going on I can try asking for permission to get further diagnostic info. One thing I have noticed is that the clock on this particular PC is about 7 minutes fast compared with real time - previously it was 60 minutes slow - I don't know (but I think its irrelevant here) whether this could have any bearing on the problem?
regards,  Bernard <br>
</p></div>
            <div class="comment-info" id="comment-12112-info">
                
                
                
                

                

                <span class="comment-age">(21 Jun '12, 11:07)</span>
                <a class="comment-user userinfo" href="/users/2883/bernard46">Bernard46</a>
                
            </div>
        </div>
    
        <a name="12115"></a>
        <div class="comment" id="comment-12115">
            <div id="post-12115-score" class="comment-score"></div>
            <div class="comment-text"><blockquote>
<p>Hi Kurt I didn't want to mention the actual site name in the Q&amp;A</p>
</blockquote>

<p>Sorry, I did not understand that. As you posted the whole capture file, I thought that information was public anyway. I "blanked" the site in my answer.</p>

<blockquote>
<p>The PC we have ... is locked down such that I cannot install anything on it or change anything.</p>
</blockquote>

<p>Well, not really ideal for troubleshooting ;-) Anyway, see my other answer/idea.</p></div>
            <div class="comment-info" id="comment-12115-info">
                
                
                
                

                

                <span class="comment-age">(21 Jun '12, 13:23)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="12117"></a>
        <div class="comment" id="comment-12117">
            <div id="post-12117-score" class="comment-score"></div>
            <div class="comment-text"><p>No problem Kurt, if it had been really important I would have said when I loaded the trace, but thanks for editing you response anyway.</p>

<p>I've passed on your comments to my contact, including the request for using Fiddler, so we'll have to wait and see what comes back later tomorrow - at least I hope they will respond tomorrow. Many thanks for your help, much appreciated.
Bernard</p></div>
            <div class="comment-info" id="comment-12117-info">
                
                
                
                

                

                <span class="comment-age">(21 Jun '12, 15:16)</span>
                <a class="comment-user userinfo" href="/users/2883/bernard46">Bernard46</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-12111" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-12111-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="12114"></a>
                    <div id="answer-container-12114" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-12114-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/12114/up/" rel="nofollow"> </a>
<div id="post-12114-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-12114-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/12114/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <blockquote>
<p>If you can make any inspired guesses about what might be going on</p>
</blockquote>
<p>How about this? </p>
<p>When we run this command:</p>
<blockquote>
<p><code>tshark.exe -r Tue.cap -R "ip.src eq 195.225.188.193" -T fields -e frame.number -e tcp.stream -e frame.time_relative -e ip.src -e <a href="http://ip.id">ip.id</a> -E header=y</code><br>
</p>
</blockquote>
<p>we can see alternating IP IDs for connections from the same IP. IP IDs are increased in steps of one: 0x1063, 0x1064, 0x1065, ....  Then there is a new set of IP IDs: 0x1f26, 0x1f27, 0x1f28, then they jump back to: 0x1069, 0x106a, 0x106b, then this sequence: 0x5cde, 0x2f90, 0x2f91, 0x5cdf.</p>
<p>This looks like a Load balancer for me. There are different TCP connections to at least 3-4 backend servers. Probably they did <strong>NOT</strong> configure "sticky sessions" on the load balancer (or they don't work properly). </p>
<p>Again, I can only guess, but maybe your application needs the client to connect 
to the same server for a defined amount of time (usually the duration of an application session), which is probably not the case (according to your capture file). Please ask the server admins, if there is a load balancer in place and if "sticky sessions" are enabled for that virtual server. </p>
<pre><code>
frame.number    tcp.stream      frame.time_relative     ip.src  ip.dst  <a href="http://ip.id">ip.id</a>
141     1       52.312666000    195.225.188.193 192.168.1.251   0x0000
144     1       52.360153000    195.225.188.193 192.168.1.251   0x1063
145     1       52.364080000    195.225.188.193 192.168.1.251   0x1064
146     1       52.365726000    195.225.188.193 192.168.1.251   0x1065
148     1       52.407958000    195.225.188.193 192.168.1.251   0x1066
153     1       52.455524000    195.225.188.193 192.168.1.251   0x1067
158     1       52.706312000    195.225.188.193 192.168.1.251   0x1068
174     0       55.310021000    195.225.188.193 192.168.1.251   0x0000
177     0       55.352403000    195.225.188.193 192.168.1.251   0x1f26
178     0       55.352960000    195.225.188.193 192.168.1.251   0x1f27
181     0       55.403374000    195.225.188.193 192.168.1.251   0x1f28
182     0       55.415094000    195.225.188.193 192.168.1.251   0x1f29
183     0       55.415096000    195.225.188.193 192.168.1.251   0x1f2a
184     0       55.415097000    195.225.188.193 192.168.1.251   0x1f2b
187     0       55.459248000    195.225.188.193 192.168.1.251   0x1f2c
189     1       55.535121000    195.225.188.193 192.168.1.251   0x1069
190     1       55.535125000    195.225.188.193 192.168.1.251   0x106a
193     1       55.576531000    195.225.188.193 192.168.1.251   0x106b
283     2       59.679644000    195.225.188.193 192.168.1.251   0x0000
289     2       59.728471000    195.225.188.193 192.168.1.251   0x4d90
290     2       59.731326000    195.225.188.193 192.168.1.251   0x4d91
291     2       59.733016000    195.225.188.193 192.168.1.251   0x4d92
293     2       59.775033000    195.225.188.193 192.168.1.251   0x4d93
297     2       59.887827000    195.225.188.193 192.168.1.251   0x4d94
298     2       59.891748000    195.225.188.193 192.168.1.251   0x4d95
300     2       59.971949000    195.225.188.193 192.168.1.251   0x4d96
301     2       59.972342000    195.225.188.193 192.168.1.251   0x4d97
302     2       59.972343000    195.225.188.193 192.168.1.251   0x4d98
307     2       60.015764000    195.225.188.193 192.168.1.251   0x4d99
313     3       60.512457000    195.225.188.193 192.168.1.251   0x0000
315     4       60.512927000    195.225.188.193 192.168.1.251   0x0000
319     3       60.555590000    195.225.188.193 192.168.1.251   0x5cdd
320     3       60.556136000    195.225.188.193 192.168.1.251   0x5cde
322     4       60.559388000    195.225.188.193 192.168.1.251   0x2f90
323     4       60.560549000    195.225.188.193 192.168.1.251   0x2f91
327     3       60.612383000    195.225.188.193 192.168.1.251   0x5cdf
328     4       60.657790000    195.225.188.193 192.168.1.251   0x2f92
329     4       60.665440000    195.225.188.193 192.168.1.251   0x2f93
330     4       60.665446000    195.225.188.193 192.168.1.251   0x2f94
334     4       60.713424000    195.225.188.193 192.168.1.251   0x2f95
335     5       60.741567000    195.225.188.193 192.168.1.251   0x0000
338     5       60.793973000    195.225.188.193 192.168.1.251   0x0093
339     5       60.794927000    195.225.188.193 192.168.1.251   0x0094
342     5       60.847745000    195.225.188.193 192.168.1.251   0x0095
343     5       60.848353000    195.225.188.193 192.168.1.251   0x0096
344     5       60.848354000    195.225.188.193 192.168.1.251   0x0097
347     5       60.889826000    195.225.188.193 192.168.1.251   0x0098
</code></pre>

<p>Regards<br>
Kurt</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/12114/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>21 Jun '12, 13:18</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" alt="Kurt%20Knochner's gravatar image" />
    <p><a href="/users/2593/kurt-knochner">Kurt Knochner ♦</a><br/>
    <span class="score" title="24767 reputation points"><span class="">24.8k</span></span><span title="10 badges"><span class="badge1">&#9679;</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">&#9679;</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">&#9679;</span><span class="badgecount">237</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Kurt Knochner has 344 accepted answers">15&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/12114/">
                edited
                <strong>21 Jun '12, 13:58</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-12114">
    
        <a name="12131"></a>
        <div class="comment" id="comment-12131">
            <div id="post-12131-score" class="comment-score"></div>
            <div class="comment-text"><p>Hi Kurt,</p>

<p>The response from the server admin is that there is no load balancer in place since there is only a single server involved, so it looks like we draw a blank on that one.</p>

<p>I had a longish discussion with the lady who is our interface point this morning and she told me the app was designed to run on a dedicated corporate network without any 'outside' internet connectivity. In this context she said her telco and server admin people think the issue is related to the relatively slow speed connection we have to their corporate network, and possibly other components like additional firewalls required to protect them from non-approved access attempts. We have an ADSL link giving us 8 mbits download and up to 1 mbit upload - there is no vast amount of data transfer involved in this app and in speed tests we get very near to the rated speeds and our line utilisation is very low.</p>

<p>I'm a bit reluctant to accept this explanation since I'm not sure the relative slowness of our link compared with a corporate LAN (which will incorporate remote links over many miles) should give rise to these sort of problems.</p>

<p>What do you think?
regards,  Bernard</p></div>
            <div class="comment-info" id="comment-12131-info">
                
                
                
                

                

                <span class="comment-age">(22 Jun '12, 04:13)</span>
                <a class="comment-user userinfo" href="/users/2883/bernard46">Bernard46</a>
                
            </div>
        </div>
    
        <a name="12266"></a>
        <div class="comment" id="comment-12266">
            <div id="post-12266-score" class="comment-score"></div>
            <div class="comment-text"><p>Bernard,</p>

<p>O.K. if there is no load balancer in place, the "jumping" IP IDs, still indicate that something interferes with the traffic. Could be a firewall with Layer 7 security (Content Scanning), a WAF (Web App Firewall), or similar things. </p>

<p>However, there are other "issues" in the capture file as well, which require the use of Fiddler.</p>

<p>I found several TCP connections, where the client does not send any data for a few seconds. Take a look at this:</p>

<pre>tcp.stream eq 27: Frame 451 - 453. Delta: 15.2 seconds  
tcp.stream eq 51: Frame 952 - 960. Delta: 15.4 seconds  
tcp.stream eq 52: Frame 1069 - 1070. Delta: 5.8 seconds  
tcp.stream eq 73: Frame 1473 - 1474. Delta: 8.2 seconds  
</pre>

<p>Without further information about the application (ActiveX or Java used), and without insight into the decrypted traffic, it's hard to say why the client waits that long before it sends data to the server. It's most certainly the HTTP GET/POST, as it's allway the first packet with 'Application Data' from the Client.</p>

<p>I really suggest to use Fiddler! </p></div>
            <div class="comment-info" id="comment-12266-info">
                
                
                
                

                

                <span class="comment-age">(28 Jun '12, 03:04)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="12349"></a>
        <div class="comment" id="comment-12349">
            <div id="post-12349-score" class="comment-score"></div>
            <div class="comment-text"><p>Kurt,
Thanks for your feedback and the time you are spending on this - I'm sorry I can't reply in a more positive manner to some of your suggestions about follow-up actions but the issue is that I'm helping a volunteer organisation to run a library but the local government organisation they have to interface with provide us with a PC to access their system for managing the Library Stock. Unfortunately this system is giving us a load of problems but as you might expect we are finding it difficult to work with the organisation at a detail level because they quote government security regulations at us whenever I suggest anything. It is not as if we are dealing with state secrets (actually its library books!) but it is very difficult to get them to do specific things for us - I'm trying to identify patterns in the problem from the outside so that I can try to persuade them to look at particular areas for further investigation.</p>

<p>In your earlier analysis you mentioned increasing ip ids - I asked the question you posed about load balancers and as I mentioned they replied there was only one server and no load balancer. However I have to admit I did not really understand what you meant by increasing ip ids - as far as I could see there was only one ip address involved at the server end - were you referring to the port number? There could certainly be firewalls and other 'security' mechanisms in place because as I have mentioned we are a 'non-trusted' external organisation, so we are not allowed to access the system through the same physical and logical path as the organisation's own libraries. It could well be that these additional security hurdles are causing the problem, but what I need is some evidence that points to this so that I can get them to investigate - hence my efforts and questions here.</p>

<p>One thing that does bother me is that whenever we do get a problem we see a flurry of NTP records from the client - it seems to be asking 4 different time servers for the time and makes around 7 requests - each of these requests incurs a delay of 5 seconds or more. Now the clock on this client is 7 minutes ahead of UTC time - I'm wondering if this out-of-sync time or flurry of NTP requests are anything to do with our problem - incidentally each of these problem scenarios ends with an "encrypted alert" message. Does any of this help at all or just confuse the picture?</p>

<p>Bernard</p></div>
            <div class="comment-info" id="comment-12349-info">
                
                
                
                

                

                <span class="comment-age">(30 Jun '12, 15:12)</span>
                <a class="comment-user userinfo" href="/users/2883/bernard46">Bernard46</a>
                
            </div>
        </div>
    
        <a name="12354"></a>
        <div class="comment" id="comment-12354">
            <div id="post-12354-score" class="comment-score"></div>
            <div class="comment-text"><blockquote>
<p>because they quote government security regulations at us whenever I suggest anything.</p>
</blockquote>

<p>That's a convenient way to say: It's not our problem ;-)</p>

<blockquote>
<p>I have to admit I did not really understand what you meant by increasing ip ids</p>
</blockquote>

<p>don't care about the IP IDs any longer. If there is no load balancer, the problem I suspected (sticky sessions) is not the reason.</p>

<p>Regarding the NTP traffic. Look at your original capture file with a filter on the client IP address (<a href="https://www.cloudshark.org/captures/a0fa1c782945?filter=ip.addr%20eq%20192.168.1.251">Tue</a>). You will see NTP traffic, but there is no relation between the NTP requests (only few) and the SSL connections.</p>

<p>I don't think that the NTP requests are a problem, at least they are not a problem in the capture you posted.</p>

<p>Here is another idea: Can't you force the PC to use a proxy (Fiddler on another PC) by changing the proxy settings of IE? </p>

<p>If that does not work (because IE locked is down), you could add a local DNS server  (LLMNR) that answers the clients <a href="https://www.cloudshark.org/captures/a0fa1c782945?filter=ip.addr%20eq%20192.168.1.251%20and%20frame.number%20%3E%20200">WPAD requests</a>. See <a href="http://en.wikipedia.org/wiki/Web_Proxy_Autodiscovery_Protocol">WPAD on Wikipedia</a>.</p>

<p>If that does not work, you could still add a transparent proxy between the client and the LAN and do SSL decryption there (<a href="http://www.rahulpahade.com/content/squid-transparent-proxy-over-ssl-https">SQUID</a>). However, that's a lot of effort for a volunteer project.</p>

<p>Maybe it's easier to insist that the local government organisation provides a working solution.</p>

<p>BTW: Did you try to use that PC on another network?</p></div>
            <div class="comment-info" id="comment-12354-info">
                
                
                
                

                

                <span class="comment-age">(01 Jul '12, 03:08)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-12114" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-12114-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/12106/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='8qh5UEgEwdp2MLiq5dBnznEvTcroQk7r' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/12106/is-encrypted-alert-the-cause-of-this-delay?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/12106/is-encrypted-alert-the-cause-of-this-delay?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/encrypted/"
            class="tag-link-encrypted"
            title="see questions tagged'encrypted'using tags"
            rel="tag">encrypted</a> <span class="tag-number">&#215;14</span><br/>
        
        <a href="/tags/alert/"
            class="tag-link-alert"
            title="see questions tagged'alert'using tags"
            rel="tag">alert</a> <span class="tag-number">&#215;11</span><br/>
        
    </p>
    <p>
        question asked: <strong title="June 21, 2012, 8:19 a.m.">21 Jun '12, 08:19</strong>
    </p>
    <p> 
     	question was seen: <strong>7,424 times</strong>
    </p>
    <p> 
        last updated: <strong title="July 1, 2012, 4:15 a.m.">01 Jul '12, 04:15</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/41305/how-to-filter-encrypted-alert">How to filter &quot;encrypted alert&quot; ?</a>
        </p>
        
        <p>
            <a href="/questions/60836/too-many-fin_wait_2-and-clients-delayed-tls-encrypted-alert-followed-by-servers-fin-with-keep-alive-on">Too many FIN_WAIT_2 and Client&#39;s delayed tls encrypted alert followed by server&#39;s fin with Keep-Alive On</a>
        </p>
        
        <p>
            <a href="/questions/60963/encrypted-alert">Encrypted Alert</a>
        </p>
        
        <p>
            <a href="/questions/8097/how-to-decipher-the-integrity-protected-nas-message-does-anyone-provides-the-solution">How to decipher  the integrity protected NAS message?? Does anyone provides the solution</a>
        </p>
        
        <p>
            <a href="/questions/26434/sound-alert">sound alert?</a>
        </p>
        
        <p>
            <a href="/questions/8815/pop-auth-method-insecurely-but-impossible-to-found-pass-in-wireshark">POP auth method insecurely but impossible to found PASS in Wireshark!</a>
        </p>
        
        <p>
            <a href="/questions/26929/monitor-port-usage">Monitor port usage</a>
        </p>
        
        <p>
            <a href="/questions/20538/can-we-get-a-decrypted-pcap-from-an-encrypted-pcap-file-through-some-command-if-i-have-private-key">Can we get a decrypted .pcap from an encrypted .pcap file through some command if i have private key</a>
        </p>
        
        <p>
            <a href="/questions/30257/alerts-in-the-capture">Alerts in the capture</a>
        </p>
        
        <p>
            <a href="/questions/23451/how-can-i-tell-if-my-connection-is-encrypted">How can I tell if my connection is encrypted?</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
