<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Why data transfer gets capped around 37k? - Wireshark Q&amp;A</title>
        <meta name="description" content="I am running UltraVNC on windows 7 as server and Mac OSX as client. I have connected them to the same network so effective latency was zero but to simulate real life like conditions, I introduced a latency of 100ms using ipfw on Mac. Now the performance was really bad and I took a dump which is uplo..." />
        <meta name="keywords" content="performance,vnc,tcpdump,tcp" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/16052/why-data-transfer-gets-capped-around-37k" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/16052/why-data-transfer-gets-capped-around-37k?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='z4NUHz443q4LSvKgrrryZypNrQKrl41V' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/16052/why-data-transfer-gets-capped-around-37k">Why data transfer gets capped around 37k?</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-16052-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/16052/up/" rel="nofollow"> </a>
<div id="post-16052-score" class="post-score"
    title="current number of votes">
    1
</div>
<a id="post-16052-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/16052/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/16052/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>I am running UltraVNC on windows 7 as server and Mac OSX as client. I have connected them to the same network so effective latency was zero but to simulate real life like conditions, I introduced a latency of 100ms using ipfw on Mac.</p>
<p>Now the performance was really bad and I took a dump which is uploaded at <a href="http://www.cloudshark.org/captures/f651ccea0c46">cloudshark.org</a>. I saw that the data transfer gets capped at about 37 kilobytes per 100ms in <a href="http://www.cloudshark.org/captures/f651ccea0c46/graphs/~">this graph</a>. I want to understand why is this happening. The tcp window size on both the mac and windows 7 machine is much bigger. What is it not utilizing the entire tcp window before waiting for an ack or is there anything fundamentally wrong in the way I am understanding it?</p>
<p>Also another interesting observation is that the initial announced tcp window size was 65k for Mac and 8K for windows 7 but both gets reduced drastically. Why would this happen?</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/performance/" class="post-tag tag-link-performance"
                                        title="see questions tagged 'performance'" rel="tag">performance</a>
                                
                                    <a href="/tags/vnc/" class="post-tag tag-link-vnc"
                                        title="see questions tagged 'vnc'" rel="tag">vnc</a>
                                
                                    <a href="/tags/tcpdump/" class="post-tag tag-link-tcpdump"
                                        title="see questions tagged 'tcpdump'" rel="tag">tcpdump</a>
                                
                                    <a href="/tags/tcp/" class="post-tag tag-link-tcp"
                                        title="see questions tagged 'tcp'" rel="tag">tcp</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>19 Nov '12, 07:27</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/2df84c5f3698faf841410ada02c8e5b8?s=32&amp;d=identicon&amp;r=g" alt="Aditya%20Patawari's gravatar image" />
    <p><a href="/users/3891/aditya-patawari">Aditya Patawari</a><br/>
    <span class="score" title="31 reputation points">31</span><span title="3 badges"><span class="badge1">&#9679;</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">&#9679;</span><span class="badgecount">3</span></span><span title="6 badges"><span class="bronze">&#9679;</span><span class="badgecount">6</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Aditya Patawari has no accepted answers">0&#37;</span>
    </p>
</div>


                            </div>
                            




<div class="comments-container" id="comments-container-16052">
    
        <a name="16056"></a>
        <div class="comment" id="comment-16056">
            <div id="post-16056-score" class="comment-score"></div>
            <div class="comment-text"><p>Could you reproduce the scenario without ipfw and upload to cloudshark? I wouldn't rely on the stack to get confused by artificially introduced delays and stuff like that.</p></div>
            <div class="comment-info" id="comment-16056-info">
                
                
                
                

                

                <span class="comment-age">(19 Nov '12, 08:43)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
        <a name="16060"></a>
        <div class="comment" id="comment-16060">
            <div id="post-16060-score" class="comment-score"></div>
            <div class="comment-text"><p>I created the dump using http instead of VNC at same 100ms artificial latency but there the window size and data transfer were almost equal. So I am guessing that this is not the problem of ipfw.</p></div>
            <div class="comment-info" id="comment-16060-info">
                
                
                
                

                

                <span class="comment-age">(19 Nov '12, 09:35)</span>
                <a class="comment-user userinfo" href="/users/3891/aditya-patawari">Aditya Patawari</a>
                
            </div>
        </div>
    
        <a name="16063"></a>
        <div class="comment" id="comment-16063">
            <div id="post-16063-score" class="comment-score"></div>
            <div class="comment-text"><p>So if I get your comment right, you are saying that with http the throughput is fine? That would even more point to the fact that there is an application issue which is not network related.</p></div>
            <div class="comment-info" id="comment-16063-info">
                
                
                
                

                

                <span class="comment-age">(19 Nov '12, 09:46)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-16052" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-16052-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    3 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/16052/why-data-transfer-gets-capped-around-37k?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/16052/why-data-transfer-gets-capped-around-37k?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/16052/why-data-transfer-gets-capped-around-37k?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/16052/why-data-transfer-gets-capped-around-37k?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="16057"></a>
                    <div id="answer-container-16057" class="answer accepted-answer">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-16057-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/16057/up/" rel="nofollow"> </a>
<div id="post-16057-score" class="post-score"
    title="current number of votes">
    2
</div>
<a id="post-16057-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/16057/down/" rel="nofollow"> </a>

                                        


    
      <a class="accept-answer on"
        title="Aditya Patawari has selected this answer as the correct answer"
        href="/accept_answer/16057/" rel="nofollow">
      </a>
    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>From the trace you provided, there is indeed no reason for the sending stack to not use more than ~ 37k at once for sending data, especially since the amount allowed by the receive window is about 4 times that big.</p>
<p>The sender should after a certain period of time start sending data close to the recieve window advertised by the client if
a) the application delivers data fast enough
b) there is no packet loss decreasing sent packet rates </p>
<p>So from my guess it's either based on some whatever issue with ipwf or it might simply be an application issue but that's hard to tell. From network perspective there is no reason for that behaviour.</p>
<p>BTW: I don't see a dramatic reduction of recieve windows -&gt; both are &gt; 64k all the time</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/16057/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>19 Nov '12, 08:49</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/36b41326bff63eb5ad73a0436914e05c?s=32&amp;d=identicon&amp;r=g" alt="Landi's gravatar image" />
    <p><a href="/users/146/landi">Landi</a><br/>
    <span class="score" title="2269 reputation points"><span class="">2.3k</span></span><span title="5 badges"><span class="badge1">&#9679;</span><span class="badgecount">5</span></span><span title="14 badges"><span class="silver">&#9679;</span><span class="badgecount">14</span></span><span title="42 badges"><span class="bronze">&#9679;</span><span class="badgecount">42</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Landi has 28 accepted answers">28&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-16057">
    
        <a name="16158"></a>
        <div class="comment" id="comment-16158">
            <div id="post-16158-score" class="comment-score"></div>
            <div class="comment-text"><p>UVNC is capping the data and this is verified by them on their forums. Thanks for the help.</p></div>
            <div class="comment-info" id="comment-16158-info">
                
                
                
                

                

                <span class="comment-age">(21 Nov '12, 06:15)</span>
                <a class="comment-user userinfo" href="/users/3891/aditya-patawari">Aditya Patawari</a>
                
            </div>
        </div>
    
        <a name="16161"></a>
        <div class="comment" id="comment-16161">
            <div id="post-16161-score" class="comment-score"></div>
            <div class="comment-text"><p>Can you please provide the link to that statement. It will make the whole discussion here useful for others.</p>

<p>BTW: You can verify the statement about uvnc by removing the delay of 100ms in ipfw and then post a new capture file of that connection for the benefit of all.</p></div>
            <div class="comment-info" id="comment-16161-info">
                
                
                
                

                

                <span class="comment-age">(21 Nov '12, 06:52)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-16057" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-16057-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="16058"></a>
                    <div id="answer-container-16058" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-16058-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/16058/up/" rel="nofollow"> </a>
<div id="post-16058-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-16058-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/16058/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Cloudshark shows a pretty hard limit for the throughput at ~ 40 KByte/s. <strong>But</strong> if you look at <code>tcp.stream eq 1</code> (the one with the main traffic), in Wireshark, I do get a totally different picture.</p>
<blockquote>
<p><code>Statistics -&gt; Summary</code><br>
</p>
</blockquote>
<p>This shows an average throughput of ~ 1.65 MBit/s for this stream.</p>
<blockquote>
<p><code>Statistics -&gt; TCP Stream Graph -&gt; Throughput Graph</code> (select the SYN,ACK packet!!)</p>
</blockquote>
<p>There is a different picture as well. There is are "clusters" around 100 and 250 Kbyte/s, with some variation around 750 KByte/s as well.</p>
<p>These values are consistent with the IO Graphs of Wireshark (Bits/tick), which show ~ 1.6 - 1.7 MBit/s.</p>
<p>I'm not sure what cloudshark shows in that graph, however it's 'kind of' different than what Wireshark shows for the throughput. I would rather rely on the statistics of Wireshark instead of the graph of cloudshark (until I fully understand how that graph was created).</p>
<p>Regards <br>
Kurt</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/16058/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>19 Nov '12, 09:27</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" alt="Kurt%20Knochner's gravatar image" />
    <p><a href="/users/2593/kurt-knochner">Kurt Knochner ♦</a><br/>
    <span class="score" title="24767 reputation points"><span class="">24.8k</span></span><span title="10 badges"><span class="badge1">&#9679;</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">&#9679;</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">&#9679;</span><span class="badgecount">237</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Kurt Knochner has 344 accepted answers">15&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/16058/">
                edited
                <strong>19 Nov '12, 09:28</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-16058">
    
        <a name="16061"></a>
        <div class="comment" id="comment-16061">
            <div id="post-16061-score" class="comment-score"></div>
            <div class="comment-text"><p>It's not about the throughput in kByte/s, but instead the problem here is the burst rate of TCP data being sent does not match the advertised recieve window. That's why the performance of course is higher than 37kByte/s but doens't even closely reach the throughput possible on the local LAN.</p></div>
            <div class="comment-info" id="comment-16061-info">
                
                
                
                

                

                <span class="comment-age">(19 Nov '12, 09:37)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
        <a name="16062"></a>
        <div class="comment" id="comment-16062">
            <div id="post-16062-score" class="comment-score"></div>
            <div class="comment-text"><p>I did check wireshark. It says 157334 Bytes/sec which is 15.7k per 100ms which is somewhat consistent with cloudshark.</p></div>
            <div class="comment-info" id="comment-16062-info">
                
                
                
                

                

                <span class="comment-age">(19 Nov '12, 09:41)</span>
                <a class="comment-user userinfo" href="/users/3891/aditya-patawari">Aditya Patawari</a>
                
            </div>
        </div>
    
        <a name="16073"></a>
        <div class="comment" id="comment-16073">
            <div id="post-16073-score" class="comment-score"></div>
            <div class="comment-text"><p>Ah, right. I did not realize the "resolution" of 0.1 seconds of the Cloudshark graph. Sorry, and forget what I said ;-)</p></div>
            <div class="comment-info" id="comment-16073-info">
                
                
                
                

                

                <span class="comment-age">(19 Nov '12, 10:50)</span>
                <a class="comment-user userinfo" href="/users/2593/kurt-knochner">Kurt Knochner ♦</a>
                
            </div>
        </div>
    
        <a name="16108"></a>
        <div class="comment" id="comment-16108">
            <div id="post-16108-score" class="comment-score"></div>
            <div class="comment-text"><p>Yes, the default time interval for this graph is 0.1 seconds. You can select the "open in editor" option from the graph and change the resolution to 1 second. You can't "save" these settings currently without having a CloudShark appliance.</p></div>
            <div class="comment-info" id="comment-16108-info">
                
                
                
                

                

                <span class="comment-age">(20 Nov '12, 04:34)</span>
                <a class="comment-user userinfo" href="/users/260/cloudshark">cloudshark</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-16058" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-16058-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="16068"></a>
                    <div id="answer-container-16068" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-16068-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/16068/up/" rel="nofollow"> </a>
<div id="post-16068-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-16068-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/16068/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>After the "slow start" the maximum "bytes in flight" is always 35124 (before waiting for an ack).</p>
<p>(xxxxNot surprisingly, given the 100 ms delay time, this matches the pretty closely 
the "37 Kilobytes per 100 ms" mentioned in the questionxxx)</p>
<p>Correction: Actually, as noted previously, the actual throughput is on the order of 200KBytes/sec).</p>
<p>Given the hard limit seen for "bytes in flight" I would have to believe that there's
a "congestion window" mechanism or something similar going on.</p>
<p>I would expect that the throughput would increase as the artificial ack delay is reduced.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/16068/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>19 Nov '12, 10:05</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/bfb20acfe44690473b10c7963b5d4a18?s=32&amp;d=identicon&amp;r=g" alt="Bill%20Meier's gravatar image" />
    <p><a href="/users/22/bill-meier">Bill Meier ♦♦</a><br/>
    <span class="score" title="3180 reputation points"><span class="">3.2k</span></span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="8 badges"><span class="silver">&#9679;</span><span class="badgecount">8</span></span><span title="50 badges"><span class="bronze">&#9679;</span><span class="badgecount">50</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Bill Meier has 31 accepted answers">17&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/16068/">
                edited
                <strong>19 Nov '12, 10:17</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-16068">
    
        <a name="16072"></a>
        <div class="comment" id="comment-16072">
            <div id="post-16072-score" class="comment-score"></div>
            <div class="comment-text"><p>That cannot be correct, because otherwise you could not get speeds up over WAN links, or do you mean before using congestion avoidance? Where do you have that information about slow start limiting congestion window?</p></div>
            <div class="comment-info" id="comment-16072-info">
                
                
                
                

                

                <span class="comment-age">(19 Nov '12, 10:42)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
        <a name="16074"></a>
        <div class="comment" id="comment-16074">
            <div id="post-16074-score" class="comment-score"></div>
            <div class="comment-text"><p>I'm only noting the hard (repeated) limit for "bytes in flight" I see in the capture (35124) and speculating as to the reason being a congestion window limit or something similar.</p>

<p>I am not suggesting that the "slow start" at the beginning of the connection is related to what follows.</p>

<p>(I certainly haven't made a study of the arcane details of TCP "slow start", "congestion windows of various flavors and etc)).</p>

<p>As noted, it would be interesting to see what happens as the artificial delay is reduced.</p></div>
            <div class="comment-info" id="comment-16074-info">
                
                
                
                

                

                <span class="comment-age">(19 Nov '12, 10:57)</span>
                <a class="comment-user userinfo" href="/users/22/bill-meier">Bill Meier ♦♦</a>
                
            </div>
        </div>
    
        <a name="16077"></a>
        <div class="comment" id="comment-16077">
            <div id="post-16077-score" class="comment-score">1</div>
            <div class="comment-text"><p>Looking at the time-sequence graph, one can also see that there's an additional delay every 90K bytes or so. </p>

<p>After looking in detail at the capture, it appears that there's also an application layer ack thing going on wherein the sender waits for a 10 byte reply from the receiver before resuming after every 90K bytes sent. </p>

<p>This seems to add an additional 100ms delay for every 90k bytes sent.</p>

<p>So: if 90K takes around 400 ms to send, then this more or matches the 200KB/sec thruput observed.</p>

<p><img alt="Time-Sequence graph" src="https://osqa-ask.wireshark.org/upfiles/Capture_1.JPG"></p></div>
            <div class="comment-info" id="comment-16077-info">
                
                
                
                

                

                <span class="comment-age">(19 Nov '12, 11:08)</span>
                <a class="comment-user userinfo" href="/users/22/bill-meier">Bill Meier ♦♦</a>
                
            </div>
        </div>
    
        <a name="16084"></a>
        <div class="comment" id="comment-16084">
            <div id="post-16084-score" class="comment-score"></div>
            <div class="comment-text"><p>Hmmm... I wonder what the TCP send buffer size is.... (assuming this applies).</p>

<p>(<a href="/users/146/landi">@Landi</a>: maybe, in effect, there is an "application issue" ....)</p>

<p><a href="http://onlamp.com/onlamp/2005/11/17/tcp_tuning.html">TCP Tuning</a></p></div>
            <div class="comment-info" id="comment-16084-info">
                
                
                
                

                

                <span class="comment-age">(19 Nov '12, 12:00)</span>
                <a class="comment-user userinfo" href="/users/22/bill-meier">Bill Meier ♦♦</a>
                
            </div>
        </div>
    
        <a name="16110"></a>
        <div class="comment" id="comment-16110">
            <div id="post-16110-score" class="comment-score"></div>
            <div class="comment-text"><p>TCP send buffer grows exponentially and later linear after slow start until it either reaches recieve window size or until packet loss occurs - that's why I was referring to the send window aka congestion window being capped not by stack behaviour but instead by the amount of data being delivered by the application.</p>

<p>This - from my perspective - is the only reasonable point for TCP not to send more data than seen here on block</p></div>
            <div class="comment-info" id="comment-16110-info">
                
                
                
                

                

                <span class="comment-age">(20 Nov '12, 05:04)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-16068" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-16068-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/16052/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='z4NUHz443q4LSvKgrrryZypNrQKrl41V' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/16052/why-data-transfer-gets-capped-around-37k?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/16052/why-data-transfer-gets-capped-around-37k?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/tcp/"
            class="tag-link-tcp"
            title="see questions tagged'tcp'using tags"
            rel="tag">tcp</a> <span class="tag-number">&#215;752</span><br/>
        
        <a href="/tags/tcpdump/"
            class="tag-link-tcpdump"
            title="see questions tagged'tcpdump'using tags"
            rel="tag">tcpdump</a> <span class="tag-number">&#215;97</span><br/>
        
        <a href="/tags/performance/"
            class="tag-link-performance"
            title="see questions tagged'performance'using tags"
            rel="tag">performance</a> <span class="tag-number">&#215;55</span><br/>
        
        <a href="/tags/vnc/"
            class="tag-link-vnc"
            title="see questions tagged'vnc'using tags"
            rel="tag">vnc</a> <span class="tag-number">&#215;4</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Nov. 19, 2012, 7:27 a.m.">19 Nov '12, 07:27</strong>
    </p>
    <p> 
     	question was seen: <strong>3,473 times</strong>
    </p>
    <p> 
        last updated: <strong title="Nov. 21, 2012, 7:03 a.m.">21 Nov '12, 07:03</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/7763/network-issue-about-fsk-ack">[closed] network issue about fsk ack</a>
        </p>
        
        <p>
            <a href="/questions/21491/how-tcp-handle-small-packets">How TCP handle small packets</a>
        </p>
        
        <p>
            <a href="/questions/36598/impact-of-packet-capture">impact of packet capture</a>
        </p>
        
        <p>
            <a href="/questions/7268/http-continuation-vs-tcp-segment">HTTP Continuation vs. TCP segment</a>
        </p>
        
        <p>
            <a href="/questions/37811/intrepreting-tcp-packet-from-server-to-client-with-tcpdump">Intrepreting TCP packet from server to client with TCPDUMP</a>
        </p>
        
        <p>
            <a href="/questions/58909/tcp-rest-after-sync-ack-from-server">TCP REST after SYNC-ACK from Server</a>
        </p>
        
        <p>
            <a href="/questions/25678/asymmetric-tcp-performance-between-data-centers">Asymmetric TCP performance between data centers</a>
        </p>
        
        <p>
            <a href="/questions/37911/tcp-dump-cannot-understand-these-4-lines">TCP Dump, cannot understand these 4 lines?</a>
        </p>
        
        <p>
            <a href="/questions/32918/percentage-of-tcp-traffic-to-total-traffic">Percentage of TCP traffic to Total Traffic</a>
        </p>
        
        <p>
            <a href="/questions/33638/packet-count">packet count</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
