<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Loop Detected - Wireshark Q&amp;A</title>
        <meta name="description" content="Hello What does SIP Loop Detected Error means? And how can i avoid it?" />
        <meta name="keywords" content="sip" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/43625/loop-detected" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/43625/loop-detected?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='jQPH3LWGvZmVp4tMv29YATQVDRQBuKNz' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/43625/loop-detected">Loop Detected</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-43625-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/43625/up/" rel="nofollow"> </a>
<div id="post-43625-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-43625-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/43625/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/43625/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>Hello</p>
<p>What does SIP Loop Detected Error means? And how can i avoid it?</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/sip/" class="post-tag tag-link-sip"
                                        title="see questions tagged 'sip'" rel="tag">sip</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>28 Jun '15, 04:08</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/f584c012804be160102179efb69191f4?s=32&amp;d=identicon&amp;r=g" alt="hayasb's gravatar image" />
    <p><a href="/users/18076/hayasb">hayasb</a><br/>
    <span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">&#9679;</span><span class="badgecount">2</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="hayasb has no accepted answers">0&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/43625/">
                edited
                <strong>28 Jun '15, 09:00</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/d02f20c18a7742ec73a666f1974bf6dc?s=32&amp;d=identicon&amp;r=g" alt="Hadriel's gravatar image" />
            <p><a href="/users/4318/hadriel">Hadriel</a><br/>
            <span class="score" title="2652 reputation points"><span class="">2.7k</span></span><span title="2 badges"><span class="badge1">&#9679;</span><span class="badgecount">2</span></span><span title="9 badges"><span class="silver">&#9679;</span><span class="badgecount">9</span></span><span title="39 badges"><span class="bronze">&#9679;</span><span class="badgecount">39</span></span></p>
        
    </div>


                            </div>
                            




<div class="comments-container" id="comments-container-43625">
    
        <a name="43626"></a>
        <div class="comment" id="comment-43626">
            <div id="post-43626-score" class="comment-score"></div>
            <div class="comment-text"><p>Are you sure that's SIP?  Can you share a capture somewhere public, or at least post a screenshot of capture with the packet showing the error?</p></div>
            <div class="comment-info" id="comment-43626-info">
                
                
                
                

                

                <span class="comment-age">(28 Jun '15, 04:22)</span>
                <a class="comment-user userinfo" href="/users/1225/grahamb">grahamb ♦</a>
                
            </div>
        </div>
    
        <a name="43627"></a>
        <div class="comment" id="comment-43627">
            <div id="post-43627-score" class="comment-score"></div>
            <div class="comment-text"><p>Please refer to the attached screenshot<img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/Loop_Detected.PNG"></p></div>
            <div class="comment-info" id="comment-43627-info">
                
                
                
                

                

                <span class="comment-age">(28 Jun '15, 04:25)</span>
                <a class="comment-user userinfo" href="/users/18076/hayasb">hayasb</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-43625" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-43625-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    2 Answers:
                    </div>
                    
<div class="tabsA"><a href="/questions/43625/loop-detected?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/43625/loop-detected?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/43625/loop-detected?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/43625/loop-detected?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="43628"></a>
                    <div id="answer-container-43628" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-43628-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/43628/up/" rel="nofollow"> </a>
<div id="post-43628-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-43628-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/43628/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>As per the relevant RFC (<a href="https://www.ietf.org/rfc/rfc3261.txt">3261</a>):</p>
<blockquote>
<p>21.4.20 482 Loop Detected</p>
<p>The server has detected a loop
(Section 16.3 Item 4).</p>
<p>4 Optional Loop Detection check</p>
<pre><code>  An element MAY check for forwarding loops before forwarding a
  request.  If the request contains a Via header field with a sent-
  by value that equals a value placed into previous requests by the
  proxy, the request has been forwarded by this element before.  The
  request has either looped or is legitimately spiraling through the
  element.  To determine if the request has looped, the element MAY
  perform the branch parameter calculation described in Step 8 of
  Section 16.6 on this message and compare it to the parameter
  received in that Via header field.  If the parameters match, the
  request has looped.  If they differ, the request is spiraling, and
  processing continues.  If a loop is detected, the element MAY
  return a 482 (Loop Detected) response.
</code></pre>
</blockquote>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/43628/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>28 Jun '15, 04:55</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/d2a7e24ca66604c749c7c88c1da8ff78?s=32&amp;d=identicon&amp;r=g" alt="grahamb's gravatar image" />
    <p><a href="/users/1225/grahamb">grahamb ♦</a><br/>
    <span class="score" title="19834 reputation points"><span class="">19.8k</span></span><span title="3 badges"><span class="badge1">&#9679;</span><span class="badgecount">3</span></span><span title="30 badges"><span class="silver">&#9679;</span><span class="badgecount">30</span></span><span title="206 badges"><span class="bronze">&#9679;</span><span class="badgecount">206</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="grahamb has 274 accepted answers">22&#37;</span>
    </p>
</div>

    <div class='post-update-info post-update-info-edited'>
        <p style="line-height:12px;">
            <a href="/revisions/43628/">
                edited
                <strong>28 Jun '15, 04:56</strong>
            </a>
        </p>
        
    </div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-43628">
    
        <a name="43629"></a>
        <div class="comment" id="comment-43629">
            <div id="post-43629-score" class="comment-score"></div>
            <div class="comment-text"><p>Thank you for the information.</p>

<p>Now I had disabled the proxy server from my pc and connecting directly to the internet but still get this error!!</p></div>
            <div class="comment-info" id="comment-43629-info">
                
                
                
                

                

                <span class="comment-age">(28 Jun '15, 05:03)</span>
                <a class="comment-user userinfo" href="/users/18076/hayasb">hayasb</a>
                
            </div>
        </div>
    
        <a name="43630"></a>
        <div class="comment" id="comment-43630">
            <div id="post-43630-score" class="comment-score"></div>
            <div class="comment-text"><p>It's hard to know the precise culprit when we can only see the packet list snapshot instead of the actual packet details, but there's one thing that's visibly wrong:</p>

<p>Look at the target request URI of the REGISTER request message - i.e., the "sip:188.247.67.90" - that identifies the ultimate target of the request.  But "188.247.67.90" is the same IP Address as the sender of the message to begin with - in other words, the host 188.247.67.90 is sending the REGISTER message with a SIP destination of 188.247.67.90, so it's no wonder a loop is detected.  My guess is that on the 188.247.67.90 computer/phone, you have the Registrar, Registrar Domain, or Address-of-Record set incorrectly.</p></div>
            <div class="comment-info" id="comment-43630-info">
                
                
                
                

                

                <span class="comment-age">(28 Jun '15, 08:58)</span>
                <a class="comment-user userinfo" href="/users/4318/hadriel">Hadriel</a>
                
            </div>
        </div>
    
        <a name="43638"></a>
        <div class="comment" id="comment-43638">
            <div id="post-43638-score" class="comment-score"></div>
            <div class="comment-text"><p>I followed the UDP stream and got the below result; To and from are using the same IP Address. I am using inGate Siparator as DMZ/LAN but don't know what am missing!!:</p>

<pre><code>REGISTER sip:188.247.67.90;transport=UDP SIP/2.0
Via: SIP/2.0/UDP 10.179.128.228:49012;branch=z9hG4bK-524287-1---3d15be2bf3d75655;rport
Max-Forwards: 70
Contact: &lt;sip:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="88bab8bbc8b9b8a6b9bfb1a6b9bab0a6babab0">[email&#160;protected]</a>:49012;rinstance=24fc7df247922ed7;transport=UDP&gt;
To: "203"&lt;sip:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="9aa8aaa9daaba2a2b4a8aeadb4acadb4a3aa">[email&#160;protected]</a>;transport=UDP&gt;
From: "203"&lt;sip:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c1f3f1f281f0f9f9eff3f5f6eff7f6eff8f1">[email&#160;protected]</a>;transport=UDP&gt;;tag=88f9ff4d
Call-ID: 9M-KyvmjzBrGB4TqI3H5Fg..
CSeq: 1 REGISTER
Expires: 60
Allow: INVITE, ACK, CANCEL, BYE, NOTIFY, REFER, MESSAGE, OPTIONS, INFO, SUBSCRIBE
Supported: replaces, norefersub, extended-refer, timer, outbound, path, X-cisco-serviceuri
User-Agent: Zoiper r30911
Allow-Events: presence, kpml
Content-Length: 0

SIP/2.0 482 Loop Detected
Via: SIP/2.0/UDP 10.179.128.228:49012;branch=z9hG4bK-524287-1---3d15be2bf3d75655;received=188.247.77.83;rport=33785
From: "203"&lt;sip:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2c1e1c1f6c1d1414021e181b021a1b02151c">[email&#160;protected]</a>;transport=UDP&gt;;tag=88f9ff4d
Call-ID: 9M-KyvmjzBrGB4TqI3H5Fg..
CSeq: 1 REGISTER
To: "203"&lt;sip:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2614161566171e1e08141211081011081f16">[email&#160;protected]</a>;transport=UDP&gt;;tag=488579bf366f69151236
Server: SIParator/5.0.5
Content-Length: 0
</code></pre></div>
            <div class="comment-info" id="comment-43638-info">
                
                
                
                

                

                <span class="comment-age">(28 Jun '15, 12:35)</span>
                <a class="comment-user userinfo" href="/users/18076/hayasb">hayasb</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-43628" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-43628-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                    <a name="43640"></a>
                    <div id="answer-container-43640" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-43640-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/43640/up/" rel="nofollow"> </a>
<div id="post-43640-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-43640-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/43640/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Presumably your comment meant to show this:</p>
<pre><code>REGISTER sip:188.247.67.90;transport=UDP SIP/2.0
Via: SIP/2.0/UDP 10.179.128.228:49012;branch=z9hG4bK-524287-1---3d15be2bf3d75655;rport
Max-Forwards: 70
Contact: sip:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="300200037001001e0107091e0102081e020208">[email&#160;protected]</a>:49012;rinstance=24fc7df247922ed7;transport=UDP
To: "203"sip:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="ddefedee9dece5e5f3efe9eaf3ebeaf3e4ed">[email&#160;protected]</a>;transport=UDP
From: "203"sip:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d0e2e0e390e1e8e8fee2e4e7fee6e7fee9e0">[email&#160;protected]</a>;transport=UDP;tag=88f9ff4d
Call-ID: 9M-KyvmjzBrGB4TqI3H5Fg..
CSeq: 1 REGISTER
Expires: 60
Allow: INVITE, ACK, CANCEL, BYE, NOTIFY, REFER, MESSAGE, OPTIONS, INFO, SUBSCRIBE
Supported: replaces, norefersub, extended-refer, timer, outbound, path, X-cisco-serviceuri
User-Agent: Zoiper r30911
Allow-Events: presence, kpml
Content-Length: 0

SIP/2.0 482 Loop Detected
Via: SIP/2.0/UDP 10.179.128.228:49012;branch=z9hG4bK-524287-1---3d15be2bf3d75655;received=188.247.77.83;rport=33785
From: "203"sip:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="99aba9aad9a8a1a1b7abadaeb7afaeb7a0a9">[email&#160;protected]</a>;transport=UDP;tag=88f9ff4d
Call-ID: 9M-KyvmjzBrGB4TqI3H5Fg..
CSeq: 1 REGISTER
To: "203"sip:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="87b5b7b4c7b6bfbfa9b5b3b0a9b1b0a9beb7">[email&#160;protected]</a>;transport=UDP;tag=488579bf366f69151236
Server: SIParator/5.0.5
Content-Length: 0
</code></pre>
<p>Are those the contents of the same capture file you showed a screenshot of?</p>
<p>It doesn't look like it would be the same messages, but if it is that's even more confusing... because the IP layer shown in the screenshot showed the IP source address of 188.247.67.90 and destination address of 192.168.0.113 (in the third and fourth columns).  Or are your columns reversed?  What exactly are the IP source and destination addresses of the SIP message contents shown above (not the SIP-layer info, but the IP-layer info).</p>
<p>I was assuming the IP source was 188.247.67.90, sending a SIP REGISTER request message to 192.168.0.113, but with a SIP request URI of "<code>sip:188.247.67.90;transport=tcp</code>".  That would cause a loop, because when the SIP device on 192.168.0.113 receives it, it will want to forward it right back to 188.247.67.90 (although it may not be a loop if it forwards it to a different TCP/UDP port, but I'll ignore that detail for now).</p>
<p>The "To" and the "From" headers don't actually decide how SIP messages are "routed" at the SIP layer (despite the words "To" and "From" sounding like they should).  For SIP request messages, such as the REGISTER request, the "request URI" is what decides the ultimate target (along with any "Route" headers, but you don't have those).  The request URI is the string "sip:188.247.67.90;transport=UDP" right after the word "REGISTER", the first line of the SIP message.  The "To" header URI in a REGISTER request identifies the address-of-record being registered for, and the "From" header URI in a REGISTER request identifies the entity performing the registration - usually the same as the "To" header URI, except for third-party registrations (which does not apply to your case).</p>
<p>I don't know the inGate Siparator, but presumably it's a SIP ALG, such that it will replace various SIP headers to make it work though NATs and hide internal addressing.  So to figure out what's going wrong we might need a capture of both the "inside" and "outside" packets -  i.e., the ones sent to/from the Zoiper soft phone to the inGate, and the ones sent to/from the inGate and the SIP service provider.</p>
<p>But as I said before, you probably didn't configure your SIP phone correctly (the Zoiper softphone).  For a Zoiper, there's a "Account Wizard" dialog box that shows up when you create the SIP account - what did you set the "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c0b5b3a5b280a8afb3b4">[email&#160;protected]</a>" field and "domain/outbound proxy" fields to?  My guess is one of those two is not set correctly.  It looks like you set one of them to "188.247.67.90", when it should instead be the domain name of your SIP service provider.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/43640/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>28 Jun '15, 14:43</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/d02f20c18a7742ec73a666f1974bf6dc?s=32&amp;d=identicon&amp;r=g" alt="Hadriel's gravatar image" />
    <p><a href="/users/4318/hadriel">Hadriel</a><br/>
    <span class="score" title="2652 reputation points"><span class="">2.7k</span></span><span title="2 badges"><span class="badge1">&#9679;</span><span class="badgecount">2</span></span><span title="9 badges"><span class="silver">&#9679;</span><span class="badgecount">9</span></span><span title="39 badges"><span class="bronze">&#9679;</span><span class="badgecount">39</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Hadriel has 30 accepted answers">18&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-43640">
    
        <a name="43654"></a>
        <div class="comment" id="comment-43654">
            <div id="post-43654-score" class="comment-score"></div>
            <div class="comment-text"><p>Hello,</p>

<p>Tha configuration am doing is as the attached image.</p>

<p>The idea of it is remote sip extension can able to connect to the pbx without vpn connection. So 188.247.67.90 is the company public IP address. The 1st capture was trying to connect from laptop through wifi  connection the other one is connected from mobile phone through data plan in both cases it gave loop detected.</p>

<p>So what you are suggesting is entering public ip address in the domain and the outbound proxy enter the sip domain for the pbx?<img alt="alt text" src="https://osqa-ask.wireshark.org/upfiles/inage.PNG"></p></div>
            <div class="comment-info" id="comment-43654-info">
                
                
                
                

                

                <span class="comment-age">(29 Jun '15, 02:16)</span>
                <a class="comment-user userinfo" href="/users/18076/hayasb">hayasb</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-43640" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-43640-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/43625/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='jQPH3LWGvZmVp4tMv29YATQVDRQBuKNz' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/43625/loop-detected?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/43625/loop-detected?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/sip/"
            class="tag-link-sip"
            title="see questions tagged'sip'using tags"
            rel="tag">sip</a> <span class="tag-number">&#215;109</span><br/>
        
    </p>
    <p>
        question asked: <strong title="June 28, 2015, 4:08 a.m.">28 Jun '15, 04:08</strong>
    </p>
    <p> 
     	question was seen: <strong>11,690 times</strong>
    </p>
    <p> 
        last updated: <strong title="June 29, 2015, 2:49 a.m.">29 Jun '15, 02:49</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/288/time-display-format-in-voip-calls-and-sip-call-flow-window">Time display format in VoIP calls (and SIP Call Flow) window</a>
        </p>
        
        <p>
            <a href="/questions/6637/sip-capture-filter">SIP capture filter</a>
        </p>
        
        <p>
            <a href="/questions/18261/capture-and-store-voice-traffic-into-a-database">Capture and Store voice traffic into a Database</a>
        </p>
        
        <p>
            <a href="/questions/26602/cant-decode-sip-calls">Can&#39;t decode SIP calls</a>
        </p>
        
        <p>
            <a href="/questions/39489/voip-capturing">VOIP Capturing</a>
        </p>
        
        <p>
            <a href="/questions/45884/usb-to-ethernet-adapter-capture-missing-sip-and-icmp-messages">USB to ethernet adapter - capture missing SIP and ICMP messages</a>
        </p>
        
        <p>
            <a href="/questions/57911/sip-filter-shows-only-host-ip-in-destination-column-and-not-in-source-column">SIP filter shows only host IP in destination column and not in source column</a>
        </p>
        
        <p>
            <a href="/questions/1923/real-time-analysis-of-calls">Real-time analysis of calls</a>
        </p>
        
        <p>
            <a href="/questions/7363/sip-0-ok-instead-of-200-ok">SIP 0 OK instead of 200 OK</a>
        </p>
        
        <p>
            <a href="/questions/18443/tshark-issues-with-ip-defragmentation-sip">tshark - Issues with IP Defragmentation - SIP</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
