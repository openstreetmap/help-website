<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- base_content.html -->

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Connections to remote server just stall - Seq mismatch? - Wireshark Q&amp;A</title>
        <meta name="description" content="I have an issue I can’t quite figure out. Clients on my network connect to a terminal server on a remote network via a terminal emulator for Windows and perform the normal operations end-users do, but their sessions stall after seemingly random amounts of time (anywhere from 30 seconds to 4 hours). ..." />
        <meta name="keywords" content="ack,terminal,stall,remote,sequence" />
        
        <link rel="canonical" href="https://osqa-ask.wireshark.org/questions/7595/connections-to-remote-server-just-stall-seq-mismatch" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/questions/7595/connections-to-remote-server-just-stall-seq-mismatch?type=rss">


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <meta name="google-site-verification" content="dqzpAlfsUDYClyC-7mNVrF11yfwuCZ0-uF7C4HApzkU" />
        
        <link rel="shortcut icon" href="/upfiles/favicon-ask_1.ico" />
        <link href="/m/default/media/style/style.css" rel="stylesheet" type="text/css" />
        
        <link href="/cstyle.css" rel="stylesheet" type="text/css" />
        
        <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" />
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
        
        <script type="text/javascript">
        /*<![CDATA[*/
            
            

            var i18nLang = 'en';
            var appUrl = 'https://osqa-ask.wireshark.org'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: '',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script>
        <script type="text/javascript" src="/m/default/media/js/osqa.main.js"></script>
        
        <style type="text/css">
            body { margin-top:2.4em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                var element = $('#validate_email_alert');
                element.click(function(){notify.close(true);})
                notify.show();
            });
        </script>
        
        
            <META name="y_key" content="af3ab95b28a8b14e">
<meta name="msvalidate.01" content="9EAF899765C0DD43A19EEF6EAFFA6A77" />
        
        
        
        <script type='text/javascript' src='/m/default/media/js/osqa.question.js'></script>
        <script type='text/javascript' src='/m/default/media/js/jquery.caret.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/showdown.js'></script>
        <script type='text/javascript' src='/m/default/media/js/wmd/wmd.js'></script>
        <script type='text/javascript' src='/m/default/media/js/html_sanitizer.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/wmd/wmd.css" />

        
        <script type='text/javascript' src='/m/default/media/js/viewbox_min.js'></script>
        <script type='text/javascript' src='/m/default/media/js/youtube.js'></script>
        <link rel="stylesheet" type="text/css" href="/m/default/media/js/viewbox.css" />
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            <style>
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            </style>
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Wireshark Q&amp;A Search" />
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->


	<div id="roof">
	  
		<div id="logo">
			<a href="/">
				<img src="/upfiles/wsbadge@186x57.png" title="back to home page" alt="Wireshark Q&amp;A logo"/>
			</a>
		</div>
	  
		<div id="top">
		     <a href="/account/signin/" >login</a>  <a href="/about/" >about</a>  <a href="/faq/" >faq</a> 
		</div>

    <div id="nav">
        <a id="nav_questions" class="on" href="/questions/" >questions</a><a id="nav_tags" href="/tags/" >tags</a><a id="nav_users" href="/users/" >users</a><a id="nav_badges" href="/badges/" >badges</a><a id="nav_unanswered" href="/questions/unanswered/" >unanswered</a>
        
    </div>
  </div>

  <div class="clear"></div>
  
	<div id="searchBar">
    <form action="/search/" method="get">
        <input type='hidden' name='csrfmiddlewaretoken' value='rozwV1HB3KzuawiJGRBJxDvmU1ySFueg' />
        <div>
            <input type="text" class="searchInput" value="" name="q" id="keywords" />
            <input type="submit" name="Submit" value="search" class="searchBtn" />
        </div>
        <div class="options">
            <input id="type-question" type="radio" value="question" name="t" 
                checked="checked" /><label for="type-question">questions</label>
            <input id="type-tag" type="radio" value="tag" name="t" /><label for="type-tag">tags</label>
            <input id="type-user" type="radio" value="user" name="t" /><label for="type-user">users</label>
        </div>
    </form>	
	</div>

	
  <div id="announcement">
      <div style="padding: 1em; margin-top: 5px; border-radius: 5px; border: 1px solid rgb(107, 43, 40); background: rgb(243, 227, 225);">
This is our old Q&amp;A Site. Please post any new questions and answers at <a href="https://ask.wireshark.org/">ask.wireshark.org</a>.
</div>
  </div>
  

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1><a href="/questions/7595/connections-to-remote-server-just-stall-seq-mismatch">Connections to remote server just stall - Seq mismatch?</a></h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table" >
                <tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-7595-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/7595/up/" rel="nofollow"> </a>
<div id="post-7595-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-7595-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/7595/down/" rel="nofollow"> </a>

                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)"
    class="ajax-command favorite-mark "
    href="/mark_favorite/7595/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p>I have an issue I can’t quite figure out. Clients on my network connect to a terminal server on a remote network via a terminal emulator for Windows and perform the normal operations end-users do, but their sessions stall after seemingly random amounts of time (anywhere from 30 seconds to 4 hours).  They are left staring at a blank terminal emulator screen and have to force-close the application instance.  I checked for any issues with our firewall concerning ACLs or IPS dropping connections, I checked the local Windows firewalls running on the clients’ workstations, I disabled TCP offloading for Windows 7 to check for compatibility, and then I set up Windows XP Pro workstations with local firewalls disabled, and all the logs are empty.  I even checked the terminal emulator application for issues, but again the logs are empty, and the same problem still occurs.</p>
<p>I did A Wireshark packet capture and see the same pattern on every workstation right before the connection stalls: the server sends a client a packet, the client receives the packet and properly increments the Ack number and sends it off to the server, and then the server replies with a Seq that is 100 bytes less than the correct length.  The client then responds Ack with the proper number, and the server again responds with the Seq that is 100 bytes less in length.  This occurs a few times, and then the connections stalls. Sometimes it is reset automatically, and sometimes nothing happens until the user hits the Disconnect button in the terminal emulator and a FIN packet is successfully sent.  But no other data packets are sent in the meantime.</p>
<p>Here’s output from a real capture (IPs are modified):</p>
<p>372 2011-11-22 10:39:14.350000  201.xxx.xxx.xxx 201.xxx.xxx.xxx TCP 944 orbixd &gt; 16936 [PSH, ACK] Seq=25305 Ack=1675 Win=36060 Len=890</p>
<p>373 2011-11-22 10:39:14.550000  201.xxx.xxx.xxx 201.xxx.xxx.xxx TCP 54  16936 &gt; orbixd [ACK] Seq=1675 Ack=26195 Win=63970 Len=0</p>
<p>374 2011-11-22 10:46:10.833333  201.xxx.xxx.xxx 201.xxx.xxx.xxx TCP 60  orbixd &gt; 16936 [ACK] Seq=26095 Ack=1675 Win=36060 Len=0</p>
<p>375 2011-11-22 10:46:10.833333  201.xxx.xxx.xxx 201.xxx.xxx.xxx TCP 54  [TCP Dup ACK 373#1] 16936 &gt; orbixd [ACK] Seq=1675 Ack=26195 Win=63970 Len=0</p>
<p>376 2011-11-22 10:56:19.883333  201.xxx.xxx.xxx 201.xxx.xxx.xxx TCP 60  orbixd &gt; 16936 [ACK] Seq=26095 Ack=1675 Win=36060 Len=0</p>
<p>377 2011-11-22 10:56:19.883333  201.xxx.xxx.xxx 201.xxx.xxx.xxx TCP 54  [TCP Dup ACK 373#2] 16936 &gt; orbixd [ACK] Seq=1675 Ack=26195 Win=63970 Len=0</p>
<p>378 2011-11-22 11:06:28.950000  201.xxx.xxx.xxx 201.xxx.xxx.xxx TCP 60  orbixd &gt; 16936 [ACK] Seq=26095 Ack=1675 Win=36060 Len=0</p>
<p>379 2011-11-22 11:06:28.950000  201.xxx.xxx.xxx 201.xxx.xxx.xxx TCP 54  [TCP Dup ACK 373#3] 16936 &gt; orbixd [ACK] Seq=1675 Ack=26195 Win=63970 Len=0</p>
<p>380 2011-11-22 11:16:38.350000  201.xxx.xxx.xxx 201.xxx.xxx.xxx TCP 60  orbixd &gt; 16936 [ACK] Seq=26095 Ack=1675 Win=36060 Len=0</p>
<p>381 2011-11-22 11:16:38.350000  201.xxx.xxx.xxx 201.xxx.xxx.xxx TCP 54  [TCP Dup ACK 373#4] 16936 &gt; orbixd [ACK] Seq=1675 Ack=26195 Win=63970 Len=0</p>
<p>And then it stalls.</p>
<p>Sometimes this pattern occurs, but the server eventually responds with the correct Seq number and transmission resumes, and the program slows down during this time.</p>
<p>I do not have access to the remote server or anything on its network; it is our ISP’s, so I can only troubleshoot on my end.  Of course I got the obligatory “The problem is on your end” answer when I brought up the issue. If it is, fine; I just want it fixed.</p>
<p>Does anyone know the cause of this or have a hunch? Can a Sequence mismatch do this, or am I overlooking something?  Is it a problem on the remote server side?  Is it a buffering issue?  An MTU mismatch?  I do know this has a pattern of happening a lot in the morning and then lessens substantially in the afternoon.</p>
<p>Thanks in advance for any input!</p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/ack/" class="post-tag tag-link-ack"
                                        title="see questions tagged 'ack'" rel="tag">ack</a>
                                
                                    <a href="/tags/terminal/" class="post-tag tag-link-terminal"
                                        title="see questions tagged 'terminal'" rel="tag">terminal</a>
                                
                                    <a href="/tags/stall/" class="post-tag tag-link-stall"
                                        title="see questions tagged 'stall'" rel="tag">stall</a>
                                
                                    <a href="/tags/remote/" class="post-tag tag-link-remote"
                                        title="see questions tagged 'remote'" rel="tag">remote</a>
                                
                                    <a href="/tags/sequence/" class="post-tag tag-link-sequence"
                                        title="see questions tagged 'sequence'" rel="tag">sequence</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                

                            </div>
                            <div class="post-update-info-container">
                                    
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        asked
        <strong>24 Nov '11, 00:05</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/9e3c41e852874b220f0922904fc4ada4?s=32&amp;d=identicon&amp;r=g" alt="Yellowninja's gravatar image" />
    <p><a href="/users/1917/yellowninja">Yellowninja</a><br/>
    <span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">&#9679;</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">&#9679;</span><span class="badgecount">1</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="Yellowninja has no accepted answers">0&#37;</span>
    </p>
</div>


                            </div>
                            




<div class="comments-container" id="comments-container-7595">
    
        <a name="7597"></a>
        <div class="comment" id="comment-7597">
            <div id="post-7597-score" class="comment-score"></div>
            <div class="comment-text"><p>First thing i notice is that there is a nearly constant 10 minute delta between those packets - kind of looks to me like a customized TCP keepalive, where the machine sends this minus 100 Seq number to make the other side trigger the Ack and maybe by this implementing connection keepalive.</p>

<p>Whats not so clear is why the tcp.len is zero in those packets, because normally I'd send at least one Byte to really trigger an ACK from the other side, but in your case the other side's stack even reacts to zero byte payload TCP packets with Acks.</p>

<p>What are your thoughts about that?</p></div>
            <div class="comment-info" id="comment-7597-info">
                
                
                
                

                

                <span class="comment-age">(24 Nov '11, 00:21)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
        <a name="7603"></a>
        <div class="comment" id="comment-7603">
            <div id="post-7603-score" class="comment-score"></div>
            <div class="comment-text"><p>These clients always send back an Ack after receiving a packet, even if it has no payload.  The Len of 0 is odd, but they happen quite frequently and always contain the correct Seq until right before the stall.</p>

<p>I also noticed the remote server sends out Window Update packets every minute or so even though every packet contains the PSH flag and it appears buffers are never full.</p></div>
            <div class="comment-info" id="comment-7603-info">
                
                
                
                

                

                <span class="comment-age">(24 Nov '11, 00:45)</span>
                <a class="comment-user userinfo" href="/users/1917/yellowninja">Yellowninja</a>
                
            </div>
        </div>
    
        <a name="7606"></a>
        <div class="comment" id="comment-7606">
            <div id="post-7606-score" class="comment-score"></div>
            <div class="comment-text"><p>Do the connections only stall when clients are idle like in the trace snippet you posted or even when the clients are actively communicating ?</p></div>
            <div class="comment-info" id="comment-7606-info">
                
                
                
                

                

                <span class="comment-age">(24 Nov '11, 01:31)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
        <a name="7611"></a>
        <div class="comment" id="comment-7611">
            <div id="post-7611-score" class="comment-score"></div>
            <div class="comment-text"><p>They stall while actively communicating, too.  I have dozens of captured sessions, and a good half are during active sessions, and I've seen the issue in real time from the end-user's perspective.  They load up a screen, hit a command, and then it stalls.</p></div>
            <div class="comment-info" id="comment-7611-info">
                
                
                
                

                

                <span class="comment-age">(24 Nov '11, 09:52)</span>
                <a class="comment-user userinfo" href="/users/1917/yellowninja">Yellowninja</a>
                
            </div>
        </div>
    
        <a name="7613"></a>
        <div class="comment" id="comment-7613">
            <div id="post-7613-score" class="comment-score"></div>
            <div class="comment-text"><p>Well now things get really interesting... I'm just thinking for patterns, like:</p>

<ul>
<li>Do those minus 100 bytes Seq Nr. packets ONLY occur right before a stalling session? </li>
<li>Could you check the IP headers of the regarding packets if there is a packet without DF bit set ?</li>
<li>do you have any idea why the timestamps of so many packets match exactly ? where did you capture the traffic?</li>
<li>could you provide absolute sequence numbers to check whether this might occur on special events (like seq.nr. overflow) ?</li>
</ul>

<p>If cou can provide another anonymized sample trace on cloudshark e.g. I'd like to look at it</p></div>
            <div class="comment-info" id="comment-7613-info">
                
                
                
                

                

                <span class="comment-age">(24 Nov '11, 10:17)</span>
                <a class="comment-user userinfo" href="/users/146/landi">Landi</a>
                
            </div>
        </div>
    
        <a name="7635"></a>
        <div class="comment not_top_scorer" id="comment-7635">
            <div id="post-7635-score" class="comment-score"></div>
            <div class="comment-text"><p>Ok, in response to your points:</p>

<p>1) Those minus 100 byte Seq. packets occur when the connection stalls, and a couple of times they occur in the same pattern, but the server eventually responds with the right Seq number and transmission resumes.  The vast majority of the time results in the stall. The minus 100 byte Seq. packets do not occur at any other time.</p>

<p>2) The DF flag is set on all packets originating from the client but not on any originating from the remote server.</p>

<p>3) I don't know about the timestamps--seems to be some kind of burst.</p>

<p>4) I'll post on cloudshark as soon as I can.</p></div>
            <div class="comment-info" id="comment-7635-info">
                
                
                
                

                

                <span class="comment-age">(25 Nov '11, 12:32)</span>
                <a class="comment-user userinfo" href="/users/1917/yellowninja">Yellowninja</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-7595" class="comment-tools">
    
        <span class="comments-showing">
            showing 5 of 6
        </span>
        <a href="#" class="show-all-comments-link">show 1 more comments</a>
    
    
</div>




<div class="clear"></div>
<div id="comment-7595-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                        </div>

                    </td>
                </tr>
            </table>
            
            
                <hr/>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    One Answer:
                    </div>
                    
<div class="tabsA"><a href="/questions/7595/connections-to-remote-server-just-stall-seq-mismatch?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/7595/connections-to-remote-server-just-stall-seq-mismatch?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/7595/connections-to-remote-server-just-stall-seq-mismatch?sort=newest" title="newest answers will be shown first">newest answers</a><a href="/questions/7595/connections-to-remote-server-just-stall-seq-mismatch?sort=votes" class="on" title="most voted answers will be shown first">popular answers</a></div>

                </div>
                

                
                    <a name="7616"></a>
                    <div id="answer-container-7616" class="answer ">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-7616-upvote" title="I like this post (click again to cancel)"
    class="ajax-command post-vote up "
     href="/vote/7616/up/" rel="nofollow"> </a>
<div id="post-7616-score" class="post-score"
    title="current number of votes">
    0
</div>
<a id="post-7616-downvote" title="I dont like this post (click again to cancel)"
    class="ajax-command post-vote down"
     href="/vote/7616/down/" rel="nofollow"> </a>

                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Sounds to me like there is a device that performs sequence number translations on the packets. Most firewall do "Initial Sequence Number Randomization" to protect old TCP/IP implementations that did not choose a random initial sequence number.</p>
<p>Do you have traces at both sides (client and server) of the connection? How do the sequence numbers look on the server side (as I believe from the trace snippet that it was made on the client side). If it is not possible to capture on the server side, are you able to capture on the public side of your own FW?</p>
<p>Also, what TCP options are used? Is SACK used? Or maybe it is initiated, but masked by an intermediate FW. The packets should say it all, so if you could post a tracefile on <a href="http://www.cloudshark.org">www.cloudshark.org</a> with the IP addresses anonimized and the TCP payload stripped (you can use <a href="http://bittwist.sourceforge.net/">Bittwiste</a> for that), that would be really helpful :-)</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="/answer_link/7616/">permanent link</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class='post-update-info post-update-info-user'>
    <p style="line-height:12px;">
        answered
        <strong>24 Nov '11, 13:53</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="https://secure.gravatar.com/avatar/7901a94d8fdd1f9f47cda9a32fcfa177?s=32&amp;d=identicon&amp;r=g" alt="SYN-bit's gravatar image" />
    <p><a href="/users/5/syn-bit">SYN-bit ♦♦</a><br/>
    <span class="score" title="17094 reputation points"><span class="">17.1k</span></span><span title="9 badges"><span class="badge1">&#9679;</span><span class="badgecount">9</span></span><span title="57 badges"><span class="silver">&#9679;</span><span class="badgecount">57</span></span><span title="245 badges"><span class="bronze">&#9679;</span><span class="badgecount">245</span></span><br />
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="SYN-bit has 174 accepted answers">20&#37;</span>
    </p>
</div>


                                        </div>
                                        




<div class="comments-container" id="comments-container-7616">
    
        <a name="7666"></a>
        <div class="comment" id="comment-7666">
            <div id="post-7666-score" class="comment-score"></div>
            <div class="comment-text"><p>I only have a trace at client side since I don't have access to server side (different company), and I removed the relative sequence number and the real sequence numbers are showing same trend of 100 bytes off on server Seq.</p>

<p>I stripped the payload and uploaded it here: http://www.cloudshark.org/captures/ed43d82e8a41</p>

<p>Let me know if you have trouble with it now that all packets are Len=0 and Wireshark added in all sorts of Dup Packet messages now.  The last ones are, of course, the problem packets.</p>

<p>Thanks again :)</p></div>
            <div class="comment-info" id="comment-7666-info">
                
                
                
                

                

                <span class="comment-age">(27 Nov '11, 23:14)</span>
                <a class="comment-user userinfo" href="/users/1917/yellowninja">Yellowninja</a>
                
            </div>
        </div>
    
        <a name="7669"></a>
        <div class="comment" id="comment-7669">
            <div id="post-7669-score" class="comment-score"></div>
            <div class="comment-text"><p>Thank you for posting the tracefile. It shows that SACK was not used for this TCP stream. Bittwiste has done a more thorough job than I expected, not only did it strip the payload, it also changed the length field in the IP header, resulting in a TCP len of 0, which makes the file quite difficult to read. Sorry, my fault, should have checked the working of the -L option myself first.</p></div>
            <div class="comment-info" id="comment-7669-info">
                
                
                
                

                

                <span class="comment-age">(28 Nov '11, 01:45)</span>
                <a class="comment-user userinfo" href="/users/5/syn-bit">SYN-bit ♦♦</a>
                
            </div>
        </div>
    
        <a name="7670"></a>
        <div class="comment" id="comment-7670">
            <div id="post-7670-score" class="comment-score"></div>
            <div class="comment-text"><p>However, combined with the output you already posted, makes it more clear that something goes wrong somewhere along the path to the server. Are you able to make a connection from another network too? So you can determine if it is something in your network messing up? Also, can you make a trace on the outside of your FW? The best would be to make a trace at the demarcation point of your network. That way you can determine if the problem is caused by a device under your control or by a device out of your control.</p></div>
            <div class="comment-info" id="comment-7670-info">
                
                
                
                

                

                <span class="comment-age">(28 Nov '11, 01:47)</span>
                <a class="comment-user userinfo" href="/users/5/syn-bit">SYN-bit ♦♦</a>
                
            </div>
        </div>
    
        <a name="7674"></a>
        <div class="comment" id="comment-7674">
            <div id="post-7674-score" class="comment-score"></div>
            <div class="comment-text"><p>I do not have the ability to try it from a different network since this server is housed at our ISP, and only public IPs from their block are allowed.  We are connected with AT&amp;T CSME, so the only hops are my router on this side and their router then server. I can't see it being something on AT&amp;T's side since I suspect I would see this type of issue on all traffic. I will hook up a switch beyond our router and see what happens.</p>

<p>Thanks again.</p></div>
            <div class="comment-info" id="comment-7674-info">
                
                
                
                

                

                <span class="comment-age">(28 Nov '11, 07:49)</span>
                <a class="comment-user userinfo" href="/users/1917/yellowninja">Yellowninja</a>
                
            </div>
        </div>
    
</div>
<div id="comment-tools-7616" class="comment-tools">
    
    
</div>




<div class="clear"></div>
<div id="comment-7616-form-container" class="comment-form-container">
    
</div>
<div class="clear"></div>



                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="/questions/7595/answer/" method="post">
            <input type='hidden' name='csrfmiddlewaretoken' value='rozwV1HB3KzuawiJGRBJxDvmU1ySFueg' />
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="" >
                    <div id="wmd-button-bar" class="wmd-panel"></div>
                    <textarea cols="40" id="editor" name="text" rows="10"></textarea>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tr>
                                <td>
                                    <span id="pre-collapse" 
                                        title="Toggle the real time Markdown editor preview">
                                            toggle preview
                                    </span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input id="id_wiki" name="wiki" type="checkbox" /> 
                                    <span style="font-weight:normal;cursor:help" 
                                        title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki:</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

                

                <p><span class="form-error"></span></p>
                <input type="button"
                    
                        value="Login/Signup to Post Your Answer" 
                    
                    class="submit" style="float:left" onclick="submitClicked(event, this.form)"/>
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><p>Once you sign in you will be able to subscribe for any updates here</p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/7595/connections-to-remote-server-just-stall-seq-mismatch?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url('/m/default/media/images/feed-icon-small.png');"
        href="/questions/7595/connections-to-remote-server-just-stall-seq-mismatch?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class='info-box-follow-up-links'>
        <a href="/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>



<div id="sidebar-upper" class="boxC">
    <div class="body">
        <h2>You have a trillion packets.</h2>
<h3>You need to see four of them.</h3>
<p><a href="http://www.riverbed.com/products-solutions/products/network-performance-management/">Riverbed Technology</a> lets you seamlessly move between packets and flows for comprehensive monitoring, analysis and troubleshooting.</p>
<p><a href="http://www.riverbed.com/us/products/cascade/wireshark_enhancements/"><img style="margin-left: 39px;" src="https://www.wireshark.org/image/logo_riverbed_150.png"></a></p>
<p>Riverbed is Wireshark's primary sponsor and provides our funding.</p>
     </div>
</div>




<div class="boxC">
    <p>
        Question tags:
    </p>
    <p class="tags" >
        
        <a href="/tags/ack/"
            class="tag-link-ack"
            title="see questions tagged'ack'using tags"
            rel="tag">ack</a> <span class="tag-number">&#215;139</span><br/>
        
        <a href="/tags/remote/"
            class="tag-link-remote"
            title="see questions tagged'remote'using tags"
            rel="tag">remote</a> <span class="tag-number">&#215;59</span><br/>
        
        <a href="/tags/sequence/"
            class="tag-link-sequence"
            title="see questions tagged'sequence'using tags"
            rel="tag">sequence</a> <span class="tag-number">&#215;39</span><br/>
        
        <a href="/tags/stall/"
            class="tag-link-stall"
            title="see questions tagged'stall'using tags"
            rel="tag">stall</a> <span class="tag-number">&#215;4</span><br/>
        
        <a href="/tags/terminal/"
            class="tag-link-terminal"
            title="see questions tagged'terminal'using tags"
            rel="tag">terminal</a> <span class="tag-number">&#215;4</span><br/>
        
    </p>
    <p>
        question asked: <strong title="Nov. 24, 2011, 12:05 a.m.">24 Nov '11, 00:05</strong>
    </p>
    <p> 
     	question was seen: <strong>5,935 times</strong>
    </p>
    <p> 
        last updated: <strong title="Nov. 28, 2011, 7:49 a.m.">28 Nov '11, 07:49</strong>
    </p>
</div>


<div id="sidebar-lower" class="boxC">
    <div class="body">
        <h2>Don't have Wireshark?</h2>
<p>What are you waiting for? It's free! Wireshark documentation and downloads can be found at the <a href="https://www.wireshark.org/"><strong>Wireshark web site</strong></a>.</p>
     </div>
</div>


<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="/questions/6871/server-sends-a-strange-ack-during-three-way-handshake">Server sends a strange ACK during three-way handshake</a>
        </p>
        
        <p>
            <a href="/questions/41844/duplicated-sequence-number">Duplicated Sequence Number</a>
        </p>
        
        <p>
            <a href="/questions/47016/ack-seq-number-and-number-of-retransmission">ACK seq number and number of retransmission</a>
        </p>
        
        <p>
            <a href="/questions/2145/how-do-tcp-sequence-and-acknowledgement-numbers-work">How do TCP sequence and acknowledgement numbers work</a>
        </p>
        
        <p>
            <a href="/questions/46/cannot-capture-packets-from-remote-system">Cannot capture packets from remote system.</a>
        </p>
        
        <p>
            <a href="/questions/13414/is-it-possible-to-prepare-a-filter-for-tcpdump-command-in-linux-servers">Is it possible to prepare a filter for TCPDUMP command in Linux Servers</a>
        </p>
        
        <p>
            <a href="/questions/26318/dumpcap-access-violation-with-remote-capture">Dumpcap access violation with remote capture</a>
        </p>
        
        <p>
            <a href="/questions/50804/is-wire-shark-capable-of-seeing-others-peoples-traffic">is wire shark capable of seeing others peoples traffic</a>
        </p>
        
        <p>
            <a href="/questions/9209/sequence-number-are-all-the-same125-throughout-the-capture-why">Sequence number are all the same(125) throughout the capture why?</a>
        </p>
        
        <p>
            <a href="/questions/33286/sequence-number-differential-greater-than-2-billion-causing-issues">Sequence number differential greater than 2 billion causing issues?</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            <div id="ground">
                


<div>
    <div class="footerLinks" >
         <a href="/about/" >about</a> <span class="link-separator"> |</span> <a href="/faq/" >faq</a> <span class="link-separator"> |</span> <a href="/privacy/" >privacy</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" target="_blank">support</a> <span class="link-separator"> |</span> <a href="https://bugs.wireshark.org/" >contact</a> 
    </div>
  <p>
        p&#8203;o&#8203;w&#8203;e&#8203;r&#8203;e&#8203;d by &#79;&#8203;&#83;&#8203;&#81;&#8203;&#65;
  </p>
</div>
 <div id="licenseLogo">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
            <img src="/m/default/media/images/by-sa-88x31.png" title="Creative Commons: Attribution - Share Alike" alt="cc-by-sa" width="88" height="31" />
  </a>
 </div>


            </div>
        
        

        
            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-605389-6']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
                    
                          <p class="darkred">First time here? Check out the <a href="/faq/">FAQ</a>!</p>
                    
                
            
            <a id="close-notify" onclick="notify.close(true)">&#215;</a>
        </div>
    </body>
</html>
<!-- end template base_content.html -->
