+++
type = "question"
title = "ICMP messages generated by the Traceroute program"
description = '''If ICMP sent UDP packets instead (as in Unix/Linux), would the IP protocol number still be 01 for the probe packets? If not, what would it be?'''
date = "2016-10-14T15:31:00Z"
lastmod = "2016-10-15T12:40:00Z"
weight = 56397
keywords = [ "traceroute", "linux" ]
aliases = [ "/questions/56397" ]
osqa_answers = 1
osqa_accepted = false
+++

<div class="headNormal">

# [ICMP messages generated by the Traceroute program](/questions/56397/icmp-messages-generated-by-the-traceroute-program)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-56397-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-56397-score" class="post-score" title="current number of votes">0</div><span id="post-56397-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>If ICMP sent UDP packets instead (as in Unix/Linux), would the IP protocol number still be 01 for the probe packets? If not, what would it be?</p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-traceroute" rel="tag" title="see questions tagged &#39;traceroute&#39;">traceroute</span> <span class="post-tag tag-link-linux" rel="tag" title="see questions tagged &#39;linux&#39;">linux</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>14 Oct '16, 15:31</strong></p><img src="https://secure.gravatar.com/avatar/6ea4d661466273629b3ce4d6695c275c?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="shark%20less&#39;s gravatar image" /><p><span>shark less</span><br />
<span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="shark less has no accepted answers">0%</span></p></div></div><div id="comments-container-56397" class="comments-container"></div><div id="comment-tools-56397" class="comment-tools"></div><div class="clear"></div><div id="comment-56397-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="56398"></span>

<div id="answer-container-56398" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-56398-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-56398-score" class="post-score" title="current number of votes">1</div><span id="post-56398-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span></div></td><td><div class="item-right"><div class="answer-body"><p>First of all ICMP is a protocol not an application. Traceroute is the application. So if traceroute uses UDP (depends on the implementation), the protocol number will be 17 for UDP.</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>14 Oct '16, 15:39</strong></p><img src="https://secure.gravatar.com/avatar/3b24b339fc62fb46dced6a443d3202ea?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Christian_R&#39;s gravatar image" /><p><span>Christian_R</span><br />
<span class="score" title="1830 reputation points"><span>1.8k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="6 badges"><span class="silver">●</span><span class="badgecount">6</span></span><span title="25 badges"><span class="bronze">●</span><span class="badgecount">25</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Christian_R has 25 accepted answers">16%</span></p></div></div><div id="comments-container-56398" class="comments-container"><span id="56406"></span><div id="comment-56406" class="comment"><div id="post-56406-score" class="comment-score"></div><div class="comment-text"><p>Thanks Cristian_R I am not sure that I gave you enough back ground information to understand what I am asking. I am working on a school Wire Shark project and this questions comes out of the blue, here is more background: The next part focuses on using the Traceroute program to resolve the path a packet takes from source to destination. Carefully note that Traceroute is implemented in different ways in the Unix/Linux, MacOS, and Windows operating systems. Namely, in Unix/Linux, the source sends a series of UDP packets to the target destination using an unlikely destination port number. Meanwhile in Windows the source sends a series of ICMP packets to the target destination. For both operating systems, the program sends the first packet with a time-to-live field TTL=1, the second packet with TTL=2, and so on. All path routers decrement these TTL values, and when an arriving packet has a TTL=1, the router sends an ICMP error packet back to the source. The question remains: If ICMP sent UDP packets instead (as in Unix/Linux), would the IP protocol number still be 01 for the probe packets? If not, what would it be?</p><p>Thanks Again</p></div><div id="comment-56406-info" class="comment-info"><span class="comment-age">(15 Oct '16, 09:55)</span> <span class="comment-user userinfo">shark less</span></div></div><span id="56409"></span><div id="comment-56409" class="comment"><div id="post-56409-score" class="comment-score"></div><div class="comment-text"><p>Posting as a Comment to <span>@Christian_R</span>'s answer was the correct way. Posting as your own Answer was not.</p><p>Together with <a href="https://ask.wireshark.org/questions/56408/icmp-traceroute-linux">your other Question</a>, it seems to me that you are supposed to start capturing by Wireshark, start traceroute on the same computer and find answers to some questions in that capture, whereas you choose post these questions here instead. If so, what is your reason not to run Wireshark and ask here? Because if you do capture the traffic generated by traceroute, the answers are instantly visible in the capture. Is your nickname the explanation?</p></div><div id="comment-56409-info" class="comment-info"><span class="comment-age">(15 Oct '16, 10:40)</span> <span class="comment-user userinfo">sindy</span></div></div><span id="56410"></span><div id="comment-56410" class="comment not_top_scorer"><div id="post-56410-score" class="comment-score"></div><div class="comment-text"><p>sindy No, the nickname is off the top of my head when I found the site. I am running Microsoft OS and the question is about Linux, the question is from the professor as if I should know...hoping others with more experience and Linux might know what he is asking.</p></div><div id="comment-56410-info" class="comment-info"><span class="comment-age">(15 Oct '16, 10:53)</span> <span class="comment-user userinfo">shark less</span></div></div><span id="56411"></span><div id="comment-56411" class="comment not_top_scorer"><div id="post-56411-score" class="comment-score"></div><div class="comment-text"><p>OK, so you're actually not sharkless but linuxless. Same thing here - I would have to log to some linux machine remotely to be able to find the answer in a real capture.</p><p>But in fact you are really supposed to know: the professor has told you that linux is sending <strong>UDP</strong> packets as <strong>probes</strong> when doing traceroute, so the translation of the original question (after fixing the typo),</p><blockquote><p>"if <del>ICMP</del> <strong>traceroute</strong> sent UDP packets instead <strong>of ICMP</strong> (as in Unix/Linux), would the IP protocol number still be 01 for the probe packets? If not, what would it be?"</p></blockquote><p>is</p><blockquote><p>"what is the IP protocol number identifying the IP payload as UDP"?</p></blockquote><p>If you didn't know from the lessons what the protocol number for UDP was, you could find it using Wireshark on Windows - run the capture, visit any web page you haven't visited during the past day to avoid DNS resolution to be cached, and you'll capture a DNS query and response which are UDP.</p><p>Does it make sense to you now?</p></div><div id="comment-56411-info" class="comment-info"><span class="comment-age">(15 Oct '16, 11:12)</span> <span class="comment-user userinfo">sindy</span></div></div><span id="56413"></span><div id="comment-56413" class="comment not_top_scorer"><div id="post-56413-score" class="comment-score"></div><div class="comment-text"><p>Thanks for the correction, still is there a standard answer for this question? The question is asked as if there is...</p></div><div id="comment-56413-info" class="comment-info"><span class="comment-age">(15 Oct '16, 12:06)</span> <span class="comment-user userinfo">shark less</span></div></div><span id="56414"></span><div id="comment-56414" class="comment"><div id="post-56414-score" class="comment-score">1</div><div class="comment-text"><p>Yes, there is, the one provided by <span>@Christian_R</span> at the very beginning... "IP protocol number representing UDP is 17". So if you want it literally, the answer tuple to the original question tuple is "no; 17". But knowing the correct answer without understanding why it is correct is not really helpful, believe me :-)</p></div><div id="comment-56414-info" class="comment-info"><span class="comment-age">(15 Oct '16, 12:11)</span> <span class="comment-user userinfo">sindy</span></div></div><span id="56415"></span><div id="comment-56415" class="comment not_top_scorer"><div id="post-56415-score" class="comment-score"></div><div class="comment-text"><p>Thanks Sindy, I do not understand why, can you shed some light...</p></div><div id="comment-56415-info" class="comment-info"><span class="comment-age">(15 Oct '16, 12:15)</span> <span class="comment-user userinfo">shark less</span></div></div><span id="56416"></span><div id="comment-56416" class="comment"><div id="post-56416-score" class="comment-score">1</div><div class="comment-text"><p>So I think <span>@sindy</span> is right, maybe you did´t understand your own question. The IP protocol number for ICMP is 1. The IP protocol number for UDP is 17. So if UDP is used, the IP protocol number will be 17.</p><p>The Time To Life exceeded packet is in all cases an ICMP packet with the IP protocol number of 1.</p></div><div id="comment-56416-info" class="comment-info"><span class="comment-age">(15 Oct '16, 12:23)</span> <span class="comment-user userinfo">Christian_R</span></div></div><span id="56417"></span><div id="comment-56417" class="comment"><div id="post-56417-score" class="comment-score">1</div><div class="comment-text"><p>The UDP probe sent by <code>traceroute</code> looks like this:</p><p><code>Frame 3610: 52 bytes on wire (416 bits), 52 bytes captured (416 bits) Ethernet II, Src: IbmCorp_bd:45:58 (00:14:5e:bd:45:58), Dst: CiscoInc_8f:f1:ae (00:1b:0c:8f:f1:ae) Internet Protocol Version 4, Src: 10.22.9.54, Dst: 77.75.77.39     0100 .... = Version: 4     .... 0101 = Header Length: 20 bytes (5)     Differentiated Services Field: 0x00 (DSCP: CS0, ECN: Not-ECT)     Total Length: 38     Identification: 0xebf0 (60400)     Flags: 0x00     Fragment offset: 0     Time to live: 1     Protocol: UDP (17)  &lt;------------------------     Header checksum: 0x2019 [validation disabled]     [Header checksum status: Unverified]     Source: 10.22.9.54     Destination: 77.75.77.39     [Source GeoIP: Unknown]     [Destination GeoIP: Unknown] User Datagram Protocol, Src Port: 32784, Dst Port: 33435 Data (10 bytes)</code></p><p>The <code>icmp</code> response to it looks as follows:</p><p><code>Frame 3612: 70 bytes on wire (560 bits), 70 bytes captured (560 bits) Ethernet II, Src: CiscoInc_8f:f1:ae (00:1b:0c:8f:f1:ae), Dst: IbmCorp_bd:45:58 (00:14:5e:bd:45:58) Internet Protocol Version 4, Src: 10.22.9.254, Dst: 10.22.9.54     0100 .... = Version: 4     .... 0101 = Header Length: 20 bytes (5)     Differentiated Services Field: 0xc0 (DSCP: CS6, ECN: Not-ECT)     Total Length: 56     Identification: 0xe377 (58231)     Flags: 0x00     Fragment offset: 0     Time to live: 255     Protocol: ICMP (1)  &lt;------------------------     Header checksum: 0xb02d [validation disabled]     [Header checksum status: Unverified]     Source: 10.22.9.254     Destination: 10.22.9.54 Internet Control Message Protocol     Type: 11 (Time-to-live exceeded)     Code: 0 (Time to live exceeded in transit)     Checksum: 0x54e1 [correct]     [Checksum Status: Good]     Internet Protocol Version 4, Src: 10.22.9.54, Dst: 77.75.77.39     User Datagram Protocol, Src Port: 32784, Dst Port: 33435</code></p></div><div id="comment-56417-info" class="comment-info"><span class="comment-age">(15 Oct '16, 12:24)</span> <span class="comment-user userinfo">sindy</span></div></div><span id="56418"></span><div id="comment-56418" class="comment not_top_scorer"><div id="post-56418-score" class="comment-score"></div><div class="comment-text"><p>Thanks all...I did not understand the question at first (miss worded)and after the question was corrected I still struggled until Christian made it clear by posting examples of both UDP and ICMP. Again Thanks All!</p></div><div id="comment-56418-info" class="comment-info"><span class="comment-age">(15 Oct '16, 12:40)</span> <span class="comment-user userinfo">shark less</span></div></div></div><div id="comment-tools-56398" class="comment-tools"><span class="comments-showing"> showing 5 of 10 </span> <a href="#" class="show-all-comments-link">show 5 more comments</a></div><div class="clear"></div><div id="comment-56398-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

