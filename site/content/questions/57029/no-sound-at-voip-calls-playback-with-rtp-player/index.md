+++
type = "question"
title = "No sound at VoIP calls playback with RTP Player"
description = '''I&#x27;m having problems with playback of captured by Wireshark and decoded VoIP calls, when using its RTP Player. Similar problems were reported in this thread and on other forums. Some issues were linked to unsupported codecs, but for regular G711 calls there was no explanation, and neither a fix offer...'''
date = "2016-11-06T17:23:00Z"
lastmod = "2016-11-07T01:15:00Z"
weight = 57029
keywords = [ "rtp_player", "capture", "voip" ]
aliases = [ "/questions/57029" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [No sound at VoIP calls playback with RTP Player](/questions/57029/no-sound-at-voip-calls-playback-with-rtp-player)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-57029-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>I'm having problems with playback of captured by Wireshark and decoded VoIP calls, when using its RTP Player. Similar problems were reported in <a href="https://ask.wireshark.org/questions/50941/no-audio-with-decoding-voip-cal-in-wireshark-202">this</a> thread and on other <a href="https://www.wireshark.org/lists/wireshark-dev/201404/msg00201.html">forums</a>. Some issues were linked to unsupported codecs, but for regular G711 calls there was no explanation, and neither a fix offered, simply reports were ignored. Namely:</p><ul><li>when running Wireshark 1.1 to capture a VoIP call, for example between 2 Windows 10 PCs using SIP softphones, outgoing audio stream from the PC with Wireshark running is captured with wrong timing and sounds very slow and unclear when played by its RTP player. But incoming audio is captured with correct timing and plays normally. At least it does play audio, whether good or bad quality.</li></ul><p><img src="https://osqa-ask.wireshark.org/upfiles/Wireshark_SIP_noSync_XEUgBlp.jpg" alt="alt text" /></p><ul><li>when running current Wireshark 2.2.1 (either 32 or 64-bit), it captures both incoming and outgoing streams and seemingly decodes them correctly, but emits NO sound whatsoever when playing any captured streams. I tried it with own recorded conversations, and test streams like <a href="https://wiki.wireshark.org/SampleCaptures?action=AttachFile&amp;do=view&amp;target=SIP_CALL_RTP_G711">this</a> one posted on the web, and it never emitted any sound while "playing" ANY stream. Pic below illustrates the issue, while playing RTP stream with "payload type: ITU-T G711 PCMU (0)". The impression is, RTP Player doesn't pick any available Windows Audio Device to send the stream to, including the default device, and there is no such option in Wireshark settings to choose the Sound Device.</li></ul><p><img src="https://osqa-ask.wireshark.org/upfiles/Wireshark_SIP_no_sound.jpg" alt="alt text" /></p><p>So my questions are:</p><p>How a user can fix the issue, when VoIP stream contains a supported by Wireshark codec? Any way to select Windows Audio Device in Wireshark settings, pref files or relevant Registry keys? Which Wireshark version was tested compatible with Windows 10 64-bit Audio?</p><p>How to save the decoded stream as .wav file to play on VLC or another player instead of RTP Player?</p><p>How to add missing audio codecs to Wireshark? If some or all of that functionality is missing, can developers add such commands to the package?</p></div><div id="question-tags" class="tags-container tags">rtp_player capture voip</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>06 Nov '16, 17:23</strong></p><img src="https://secure.gravatar.com/avatar/764d2b10a7290e1803a5d8a6ac5a62a9?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="zamar24&#39;s gravatar image" /><p>zamar24<br />
<span class="score" title="6 reputation points">6</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="4 badges"><span class="silver">●</span><span class="badgecount">4</span></span><span title="8 badges"><span class="bronze">●</span><span class="badgecount">8</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="zamar24 has no accepted answers">0%</span></p></img></div><div class="post-update-info post-update-info-edited"><p>edited 07 Nov '16, 08:02</p></div></div><div id="comments-container-57029" class="comments-container"><span id="57035"></span><div id="comment-57035" class="comment"><div id="post-57035-score" class="comment-score"></div><div class="comment-text"><p>You can save the audio in .raw format from the "stream analysis" under telephony-&gt;rtp and "import" the raw file into audacity giving the correct params like the sample rate and others(Then you probably can save it as a .wav file in audacity and use that wav file)</p></div><div id="comment-57035-info" class="comment-info"><span class="comment-age">(06 Nov '16, 23:01)</span> koundi</div></div><span id="57037"></span><div id="comment-57037" class="comment"><div id="post-57037-score" class="comment-score"></div><div class="comment-text"><p>Hi luffy,</p><p>How do I find out these audio "correct params" from Wiresharks or the .raw file?</p></div><div id="comment-57037-info" class="comment-info"><span class="comment-age">(07 Nov '16, 00:09)</span> zamar24</div></div><span id="57039"></span><div id="comment-57039" class="comment"><div id="post-57039-score" class="comment-score"></div><div class="comment-text"><p>I think the correct params depend on your encoding so that you will have to search from audacity. Alternatively, if it is g711 you can also save the audio in .au format and play it using other audio players :).</p><p>Its been a while since I played around with it so I will try to get you the default params which might help(I don't know if it will as your encoding could be different)</p></div><div id="comment-57039-info" class="comment-info"><span class="comment-age">(07 Nov '16, 00:37)</span> koundi</div></div><span id="57040"></span><div id="comment-57040" class="comment"><div id="post-57040-score" class="comment-score"></div><div class="comment-text"><p>I think this link should help! <a href="https://delog.wordpress.com/2011/03/25/playing-raw-pcm-audio-using-audacity/">https://delog.wordpress.com/2011/03/25/playing-raw-pcm-audio-using-audacity/</a> (I think if you are doing it for 711a/711u, u can just save as .raw and do an import into audacity by setting the correct sample rate and selecting the (a-law /u-law depending on the codec).</p><p>If the codec is different then you will have to get a transcoder that converts the raw audio into pcm samples and then use the same method to play the audio.(at least that is what I did :D)</p><p>Also please search for the SOX library with the codec you are using, that probably should give you a place to start if the codec in use is not G711</p></div><div id="comment-57040-info" class="comment-info"><span class="comment-age">(07 Nov '16, 00:42)</span> koundi</div></div><span id="57044"></span><div id="comment-57044" class="comment"><div id="post-57044-score" class="comment-score">1</div><div class="comment-text"><p>Exporting the RTP payload as <code>raw</code> makes sense if it uses a CBR codec which is not directly supported by the player or audio processing software and you need to preprocess it first. For PCMA and PCMU, it is better to export them as <code>Audio</code>, because the <code>.au</code> (or <code>.snd</code>) file format used by Wireshark in this case delivers the information about sample rate, sample size, and codec used to the player/audio processing software in the file header, so you don't need to provide them manually as parameters of the import.</p><p>The advantage of the embedded player, when it works, is that it can imitate the functionality of de-jittering buffer of a configurable length, i.e. it only plays the contents of packets which have arrived in time to be played on equipment which has the same dejittering buffer size as configured in the player. It does not imitate adaptive dejittering buffers, though. <code>Save as</code> does not care about jitter and always saves the payload of all packets in sequence, and it even does not replace actually missing (i.e. not delayed but really dropped) packets by an equivalent interval of silence in the saved data.</p></div><div id="comment-57044-info" class="comment-info"><span class="comment-age">(07 Nov '16, 02:24)</span> sindy</div></div><span id="57055"></span><div id="comment-57055" class="comment not_top_scorer"><div id="post-57055-score" class="comment-score"></div><div class="comment-text"><p>Thanks luffy and sindy.</p><p>It might make sense to put "SaveAs" button directly on the RTP Player, since it offers to play already gathered packets, sorted by call, and decoded as RTP audio (probably saved into a temp file anyway), while in Wireshark it requires from the user a lot more effort, which is totally senseless for saving VoIP audio calls given included Player functionality, while of course makes sense for other analysis tasks.</p></div><div id="comment-57055-info" class="comment-info"><span class="comment-age">(07 Nov '16, 07:32)</span> zamar24</div></div></div><div id="comment-tools-57029" class="comment-tools"><span class="comments-showing"> showing 5 of 6 </span> <a href="#" class="show-all-comments-link">show 1 more comments</a></div><div class="clear"></div><div id="comment-57029-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="57042"></span>

<div id="answer-container-57042" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-57042-score" class="post-score" title="current number of votes">0</div></div></td><td><div class="item-right"><div class="answer-body"><p>I remember it was a pain to get the GTK based RTP player to work with the correct audio device (even the default device didn't always work!). What needs to be done is properly work out the way QtMultiMedia (I assume) API's need to be used to always output audio. This may take considerable developer effort, from someone willing/able to spend their time on.</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>07 Nov '16, 01:15</strong></p><img src="https://secure.gravatar.com/avatar/2337f0406681e5c72ea0e6f1f0d6c0b0?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Jaap&#39;s gravatar image" /><p>Jaap ♦<br />
<span class="score" title="11680 reputation points"><span>11.7k</span></span><span title="16 badges"><span class="silver">●</span><span class="badgecount">16</span></span><span title="101 badges"><span class="bronze">●</span><span class="badgecount">101</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Jaap has 155 accepted answers">14%</span></p></img></div></div><div id="comments-container-57042" class="comments-container"><span id="57054"></span><div id="comment-57054" class="comment"><div id="post-57054-score" class="comment-score"></div><div class="comment-text"><p>What do you mean "it was a pain"? Did you try to do it as a user or developer?</p><p>Given the fact, old Wireshark version RTP player works pretty well in emitting audio when playing captured content, the task was already solved before. What seemingly needed is looking at HOW it was solved, and copying this solution to the new Wireshark. In fact, WS V2 might be using exact same RTP Player as WS V1, just a different GUI. I wonder how to report officially this bug, so someone would be assigned to work on it?</p></div><div id="comment-57054-info" class="comment-info"><span class="comment-age">(07 Nov '16, 07:26)</span> zamar24</div></div><span id="57056"></span><div id="comment-57056" class="comment"><div id="post-57056-score" class="comment-score"></div><div class="comment-text"><p>Hi, You report bugs at <a href="https://bugs.wireshark.org/bugzilla/">https://bugs.wireshark.org/bugzilla/</a> note however that this is an open source project and nobody will be assigned to work on it. It will only be worked on if some one has the time and interest to do so.</p></div><div id="comment-57056-info" class="comment-info"><span class="comment-age">(07 Nov '16, 07:38)</span> Anders ♦</div></div><span id="57057"></span><div id="comment-57057" class="comment"><div id="post-57057-score" class="comment-score">1</div><div class="comment-text"><p>P.S If you think it's an easy task you are more than welcome to work on it, patches are always welcome.</p></div><div id="comment-57057-info" class="comment-info"><span class="comment-age">(07 Nov '16, 07:40)</span> Anders ♦</div></div><span id="57060"></span><div id="comment-57060" class="comment"><div id="post-57060-score" class="comment-score"></div><div class="comment-text"><p>Thanks for the link. I'm not qualified to say if the task is easy or difficult, just pointed it was obviously already solved in the previous player version, so it can be looked at how. Even in OSPs, folks are usually assigned to tasks by the project admin. See ffmpeg as an example. :) I assume, the player saves the decoded streams to files in Temp before playback, so offering SaveAs button on the Player to save already decoded stream as Audio file would likely be similar to another already solved task.</p></div><div id="comment-57060-info" class="comment-info"><span class="comment-age">(07 Nov '16, 07:49)</span> zamar24</div></div><span id="57061"></span><div id="comment-57061" class="comment not_top_scorer"><div id="post-57061-score" class="comment-score"></div><div class="comment-text"><p>IMHO such things as RTP audio players are a bonus, Wireshark is primarily a Packet Analyzer.</p><p>Given that the RTP Audio Player in 2.x is apparently broken, it will require someone with the capabilities and interest and spare time to step up and fix it.</p></div><div id="comment-57061-info" class="comment-info"><span class="comment-age">(07 Nov '16, 08:00)</span> grahamb ♦</div></div><span id="57062"></span><div id="comment-57062" class="comment not_top_scorer"><div id="post-57062-score" class="comment-score"></div><div class="comment-text"><p>@zamar24, the part of the player between the dissectors and the audio stream is fine and I guess it is the same in both GUI versions. The trouble begins when you want to deliver the audio stream to the GUI library for playing. Both Qt and GTK+ provide a complete user interface, i.e. not only graphical but also audio, but each handles the choice of the audio device its own way, and this is what requires the effort to spend.</p><p>E.g. in my case, the sound is audible, but it is played in bursts and takes a lot of resources so stopping it once it has been started is nearly impossible.</p></div><div id="comment-57062-info" class="comment-info"><span class="comment-age">(07 Nov '16, 08:01)</span> sindy</div></div><span id="57078"></span><div id="comment-57078" class="comment not_top_scorer"><div id="post-57078-score" class="comment-score"></div><div class="comment-text"><p>Thanks sindy. As always more depth and helpful. I filed the Bug Report 13105 ( <a href="https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=13105">https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=13105</a> ). Pls consider adding your findings to it. Sorry, I forget to mention, in some attempts RTP Player hangs once the "playback" starts, and the only way to get out I found was killing Wireshark process. In other attempts, the slider moves correctly, but no sound emitted.</p></div><div id="comment-57078-info" class="comment-info"><span class="comment-age">(07 Nov '16, 10:06)</span> zamar24</div></div><span id="57094"></span><div id="comment-57094" class="comment"><div id="post-57094-score" class="comment-score">1</div><div class="comment-text"><p>@zamar24: It was a pain, and I know this because I did it back then. That's the code (in the GTK version) you are still using today. Doing the same for the Qt version isn't so clear cut as you seem to make it sound (no pun intended). The primary reason for that is the different audio backend. It's dynamic behaviour has to be researched and tested (of many variations of platforms) to make it work out-of-the-box anywhere.</p></div><div id="comment-57094-info" class="comment-info"><span class="comment-age">(07 Nov '16, 13:41)</span> Jaap ♦</div></div><span id="57102"></span><div id="comment-57102" class="comment not_top_scorer"><div id="post-57102-score" class="comment-score"></div><div class="comment-text"><p>@Jaap: Sorry, I didn't know you are the one to thank you for RTP Player actually working in WS V1. I used that release since someone reported it plays well, but was the above timing bug fixed later - in which v1 version? Can you comment whether its possible to add SaveAs button to the Player GUI to save the decoded stream to an audio file, since its likely saving it to Temp anyway?</p></div><div id="comment-57102-info" class="comment-info"><span class="comment-age">(07 Nov '16, 14:00)</span> zamar24</div></div><span id="57162"></span><div id="comment-57162" class="comment not_top_scorer"><div id="post-57162-score" class="comment-score"></div><div class="comment-text"><p>As for the timing there are basically two options, take the stream as it comes in (packet timing) or the time stamps in the RTP header. This should give compatible results (unless there's something wrong with the streams). As for that aspect, I'm not aware of changes made later on. Also this involves the playout, not the backend selection/configuration. I'm not sure it's saved as a temporary file. More likely it's pushed through the dissection engine, through a so called tap and then processed according to the settings and output to an audio backend or into a file.</p></div><div id="comment-57162-info" class="comment-info"><span class="comment-age">(08 Nov '16, 07:43)</span> Jaap ♦</div></div><span id="57329"></span><div id="comment-57329" class="comment not_top_scorer"><div id="post-57329-score" class="comment-score"></div><div class="comment-text"><p>Wanted to update that upon more tests on other PCs, it appears that No Playback issue in my case was present only when using Creative PCI sound card. Sound was emitted normally by RTP Player, when playing via integrated on the Mobo Realtek Audio Device.</p></div><div id="comment-57329-info" class="comment-info"><span class="comment-age">(11 Nov '16, 16:32)</span> zamar24</div></div></div><div id="comment-tools-57042" class="comment-tools"><span class="comments-showing"> showing 5 of 11 </span> <a href="#" class="show-all-comments-link">show 6 more comments</a></div><div class="clear"></div><div id="comment-57042-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

