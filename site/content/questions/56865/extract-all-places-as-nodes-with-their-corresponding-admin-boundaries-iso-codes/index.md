+++
type = "question"
title = "Extract all places as nodes with their corresponding admin boundaries ISO codes"
description = '''I&#x27;m looking for a way to extract a list of all places (cites, towns and so on) with their respective admin boundary ISO codes. Is there a way to do it with whatever tool is available? The issue I&#x27;m working around is this:  Some places might be represented by areas, some by nodes. While I need all pl...'''
date = "2017-07-03T23:17:00Z"
lastmod = "2017-07-04T07:00:00Z"
weight = 56865
keywords = [ "filtering", "osm", "exporting" ]
aliases = [ "/questions/56865" ]
osqa_answers = 2
osqa_accepted = false
+++

<div class="headNormal">

# [Extract all places as nodes with their corresponding admin boundaries ISO codes](/questions/56865/extract-all-places-as-nodes-with-their-corresponding-admin-boundaries-iso-codes)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-56865-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-56865-score" class="post-score" title="current number of votes">
-1
</div>
<span id="post-56865-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
1
</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>I'm looking for a way to extract a list of all places (cites, towns and so on) with their respective admin boundary ISO codes. Is there a way to do it with whatever tool is available?</p>
<p>The issue I'm working around is this:</p>
<ol>
<li>Some places might be represented by areas, some by nodes. While I need all places to be nodes, with their respective lat/lon values.</li>
<li>Relationship between cities and their admin boundaries are not standartized across all countries in the OSM file.</li>
</ol>
<p>What's the best to tackle this problem?</p>
<p>Do you think it's possible to achieve a 100% accuracy for this particular data in question, considering the today's state of the OSM file.</p>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-filtering" rel="tag" title="see questions tagged &#39;filtering&#39;">filtering</span> <span class="post-tag tag-link-osm" rel="tag" title="see questions tagged &#39;osm&#39;">osm</span> <span class="post-tag tag-link-exporting" rel="tag" title="see questions tagged &#39;exporting&#39;">exporting</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>03 Jul '17, 23:17</strong></p>
<img src="https://secure.gravatar.com/avatar/c9a1577cedad5cf1af59379a5bd6721b?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="meglio&#39;s gravatar image" />
<p><span>meglio</span><br />
<span class="score" title="40 reputation points">40</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="7 badges"><span class="bronze">●</span><span class="badgecount">7</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="meglio has no accepted answers">0%</span></p>
</div>
</div>
<div id="comments-container-56865" class="comments-container">
&#10;</div>
<div id="comment-tools-56865" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-56865-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

2 Answers:

</div>

</div>

<span id="56872"></span>

<div id="answer-container-56872" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-56872-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-56872-score" class="post-score" title="current number of votes">
1
</div>
<span id="post-56872-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>You tackle this problem not by asking one question after another here hoping others will do all the work for you, but by sitting down and creating a solution yourself. Try out those things others have told you in your other questions and play around with it. You have looked at the data already, good! Now try out solutions. When you have tried something, come back with more specific question.</p>
<p>Nobody ever has 100% accuracy. Only you know what you want to use this data for so only you can decide what level of accuracy you actually need and where you are willing to make compromises.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>04 Jul '17, 07:00</strong></p>
<img src="https://secure.gravatar.com/avatar/2d4dfcdcde73aa5e2ffa4a9b3a7cb51d?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Jochen%20Topf&#39;s gravatar image" />
<p><span>Jochen Topf</span><br />
<span class="score" title="5244 reputation points"><span>5.2k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="50 badges"><span class="silver">●</span><span class="badgecount">50</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Jochen Topf has 32 accepted answers">31%</span></p>
</div>
</div>
<div id="comments-container-56872" class="comments-container">
&#10;</div>
<div id="comment-tools-56872" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-56872-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="56871"></span>

<div id="answer-container-56871" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-56871-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-56871-score" class="post-score" title="current number of votes">
-1
</div>
<span id="post-56871-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>To answer your last question first, there will certainly not be 100% accuracy nor completeness. This starts with the question of "what is a city's respective admin boundary"! For many countries you will not even have all city nodes, much less admin boundaries on the municipal level.</p>
<p>If I were asked to generate this data set, I would</p>
<ol>
<li>import planet into osm2pgql (possibly with a reduced dataset like you asked about earlier)</li>
<li>where there are polygons with a place=city tag, compute a point on surface (not centroid)</li>
<li>for each place=city node and each node found in step 2, find the smallest enclosing admin boundary of admin_level 8 or smaller; if that admin boundary is not of admin_level 8 (but smaller) then ensure that no <em>other</em> place=city nodes are in the same area (else drop it)</li>
<li>de-duplicate the list created in step 3 since step 2 might have introduced a place=city node that was already there</li>
</ol>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>04 Jul '17, 06:54</strong></p>
<img src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Frederik%20Ramm&#39;s gravatar image" />
<p><span>Frederik Ramm ♦</span><br />
<span class="score" title="82494 reputation points"><span>82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Frederik Ramm has 417 accepted answers">23%</span></p>
</div>
</div>
<div id="comments-container-56871" class="comments-container">
&#10;</div>
<div id="comment-tools-56871" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-56871-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

