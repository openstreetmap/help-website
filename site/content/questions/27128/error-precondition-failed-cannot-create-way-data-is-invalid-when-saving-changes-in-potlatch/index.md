+++
type = "question"
title = "Error (&quot;Precondition failed: Cannot create way: data is invalid&quot;) when saving changes in Potlatch"
description = '''I have done some edits in OSM via Potlatch and I&#x27;ve been saving them as usual, but I have found an error when saving the last changeset. After saving, Potlatch warns: &quot;A server error occurred. Do you want to retry? (The server said: Precondition failed: Cannot create way: data is invalid.)&quot;.How can ...'''
date = "2013-10-13T18:28:00Z"
lastmod = "2013-10-14T14:22:00Z"
weight = 27128
keywords = [ "potlatch", "validate", "server", "data", "error" ]
aliases = [ "/questions/27128" ]
osqa_answers = 1
osqa_accepted = false
+++

<div class="headNormal">

# [Error ("Precondition failed: Cannot create way: data is invalid") when saving changes in Potlatch](/questions/27128/error-precondition-failed-cannot-create-way-data-is-invalid-when-saving-changes-in-potlatch)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-27128-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-27128-score" class="post-score" title="current number of votes">
1
</div>
<span id="post-27128-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
&#10;</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>I have done some edits in OSM via Potlatch and I've been saving them as usual, but I have found an error when saving the last changeset.</p>
<p>After saving, Potlatch warns: "A server error occurred. Do you want to retry? (The server said: Precondition failed: Cannot create way: data is invalid.)".How can I validate data so I can save it?</p>
<p>I haven't been able to copy the code here, but I've saved the output data in <a href="https://www.dropbox.com/s/4wrpjgoufw26nju/potlacht_error.txt">https://www.dropbox.com/s/4wrpjgoufw26nju/potlacht_error.txt</a></p>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-potlatch" rel="tag" title="see questions tagged &#39;potlatch&#39;">potlatch</span> <span class="post-tag tag-link-validate" rel="tag" title="see questions tagged &#39;validate&#39;">validate</span> <span class="post-tag tag-link-server" rel="tag" title="see questions tagged &#39;server&#39;">server</span> <span class="post-tag tag-link-data" rel="tag" title="see questions tagged &#39;data&#39;">data</span> <span class="post-tag tag-link-error" rel="tag" title="see questions tagged &#39;error&#39;">error</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>13 Oct '13, 18:28</strong></p>
<img src="https://secure.gravatar.com/avatar/bbc25f26d2a78aa7384b13dcd7932854?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="polkillas&#39;s gravatar image" />
<p><span>polkillas</span><br />
<span class="score" title="16 reputation points">16</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="polkillas has no accepted answers">0%</span></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> edited <strong>14 Oct '13, 14:21</strong> </span></p>
<img src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="aseerel4c26&#39;s gravatar image" />
<p><span>aseerel4c26 ♦</span><br />
<span class="score" title="32615 reputation points"><span>32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div id="comments-container-27128" class="comments-container">
<span id="27153"></span>
<div id="comment-27153" class="comment">
<div id="post-27153-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Did you use Potlatch version 2 or 1?</p>
</div>
<div id="comment-27153-info" class="comment-info">
<span class="comment-age">(14 Oct '13, 14:22)</span> <span class="comment-user userinfo">aseerel4c26 ♦</span>
</div>
</div>
</div>
<div id="comment-tools-27128" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-27128-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="27131"></span>

<div id="answer-container-27131" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-27131-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-27131-score" class="post-score" title="current number of votes">
6
</div>
<span id="post-27131-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>This is a pretty unusual error, although it can occur when your network is not very reliable or at times when the API server is stressed. It is possible to recover your work from the saved file, but it requires a fair bit of technical knowledge. I have done this once, so I'm a bit sketchy on the precise details for achieving a successful upload, so I have worked through your data because I think it is worth knowing how to do this.</p>
<p>Your file is in OSM Change Format (OSC) and can be saved as a valid XML document with a name like XXX.osc or XXX.osc.xml. This format is readable by the offline editor JOSM, although you may need to hand-edit bits of the file to be acceptable for JOSM (for instance by removing the changeset number to a placeholder value. (Search and replace changeset="999" with empty space.</p>
<p>One way is to remove various parts of the file (conflicts and invalid preconditions can only occur on pre-existing objects, so removing delete and modify statements may help). Basically using a divide and conquer strategy means that one can recover parts of your changes separately: even if you cannot recover them all you may get the bulk of them.</p>
<p>Once loaded into JOSM select File|Update Data. JOSM will update all objects in your file from the API database: it will probably report conflicts (in your case 25). Use the JOSM Conflict editor to resolve these conflicts &amp; then upload your data.</p>
<p>Select each item shown in the conflict pane. Click "Resolve Conflict", each part of the object with a conflict is shown in a tab with a red button. On each (tags, nodes, members, etc.) click the button on the left which selects your version (not the server version) and then the "Apply Resolution" button. Do this until all conflicts are resolved.</p>
<p>I have done this with your file (I needed to step through to see what needed to be done), and I have made minor corrections to your Olive Trees (natural=tree and species=Olea europea).</p>
<p>Potlatch seems to have created an empty way (a way with 0 nodes) which was causing the problem.</p>
<pre><code>&lt;way id=&quot;-41&quot; version=&quot;0&quot; changeset=&quot;18336367&quot;&gt;
  &lt;tag k=&quot;species&quot; v=&quot;olea europaea&quot;/&gt;
  &lt;tag k=&quot;nature&quot; v=&quot;tree&quot;/&gt;
&lt;/way&gt;</code></pre>
<p>I have uploaded your data (changeset <a href="http://www.openstreetmap.org/browse/changeset/18340844">http://www.openstreetmap.org/browse/changeset/18340844</a>), please check that it as you expect.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>13 Oct '13, 22:24</strong></p>
<img src="https://secure.gravatar.com/avatar/06cd84075f1adc2870ad102c7233e661?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="SK53&#39;s gravatar image" />
<p><span>SK53 ♦</span><br />
<span class="score" title="28084 reputation points"><span>28.1k</span></span><span title="48 badges"><span class="badge1">●</span><span class="badgecount">48</span></span><span title="268 badges"><span class="silver">●</span><span class="badgecount">268</span></span><span title="433 badges"><span class="bronze">●</span><span class="badgecount">433</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="SK53 has 121 accepted answers">22%</span></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> edited <strong>13 Oct '13, 22:25</strong> </span></p>
</div>
</div>
<div id="comments-container-27131" class="comments-container">
&#10;</div>
<div id="comment-tools-27131" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-27131-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

