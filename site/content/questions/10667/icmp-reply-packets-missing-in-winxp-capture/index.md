+++
type = "question"
title = "ICMP reply packets missing in winXP capture"
description = '''I did a capture on a hub with a winXP WS1.6.2 machine (not the source or destination) of PING&#x27;s from several machines/IP&#x27;s to a machine with IP@ 10.22.249.47 (this machne being on the hub as well, with the same speed). In the capture I see the ICMP Echo Requests, but the replies are missing although...'''
date = "2012-05-04T01:58:00Z"
lastmod = "2012-05-04T01:58:00Z"
weight = 10667
keywords = [ "windows", "icmp", "missing" ]
aliases = [ "/questions/10667" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [ICMP reply packets missing in winXP capture](/questions/10667/icmp-reply-packets-missing-in-winxp-capture)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-10667-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>I did a capture on a hub with a winXP WS1.6.2 machine (not the source or destination) of PING's from several machines/IP's to a machine with [email protected] 10.22.249.47 (this machne being on the hub as well, with the same speed). In the capture I see the ICMP Echo Requests, but the replies are missing although the replies do come back to the source. When I do the same capture on Win7 I do see the replies. I used a different software on winXP (commview) and the replies were also missing there. Is this a strange winXP bug or a Winpcap bug or a wireshark bug? Any hints in solving this are appreciated. IP address/Mac of the destination is 10.22.249.47/0050.6000.9d1e. When pinging 10.22.249.46/0050.6000.eca4 the replies were seen by the capture.</p></div><div id="question-tags" class="tags-container tags">windows icmp missing</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>04 May '12, 01:58</strong></p><img src="https://secure.gravatar.com/avatar/212412506773db9ea34da343ad51594f?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="PeteA&#39;s gravatar image" /><p>PeteA<br />
<span class="score" title="1 reputation points">1</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="PeteA has no accepted answers">0%</span></p></div></div><div id="comments-container-10667" class="comments-container"><span id="10668"></span><div id="comment-10668" class="comment"><div id="post-10668-score" class="comment-score"></div><div class="comment-text"><p>I once had a strange issue - not just the same you describe, but kind of... Did you try completely disabling windows firewall before starting wireshark? Plus be sure to disable all associated protocols on the NIC (properties), like TCP/IP, win file share etc. while you are capturing data. Second, although might be strange - try changing your NICs driver, that helped back in my mystery case - don't ask why...</p></div><div id="comment-10668-info" class="comment-info"><span class="comment-age">(04 May '12, 02:13)</span> Landi</div></div><span id="10672"></span><div id="comment-10672" class="comment"><div id="post-10672-score" class="comment-score"></div><div class="comment-text"><p>sounds like one of these problems:</p><p>1.) You used a capture filter that filtered replys (usually, if you use 'src' or 'dst' instead of 'host').</p><p>2.) You might have a problem with your NIC driver</p><p>3.) You might have "adapter teaming" in place (two nics combined as one logical) and you sniffed only on one of the physical interfaces, instead of the combined "teaming adapter".</p><p>4.) There is some software on the client, that prevents Wireshark to see the reply. This would be strange, as the OS sees the reply, but I have seen similar things in the past (firewalls, VPN, WAN accel).</p><p>Regards<br />
Kurt</p></div><div id="comment-10672-info" class="comment-info"><span class="comment-age">(04 May '12, 02:54)</span> Kurt Knochner ♦</div></div><span id="10675"></span><div id="comment-10675" class="comment"><div id="post-10675-score" class="comment-score"></div><div class="comment-text"><p>Also, please check the link speed and duplex settings when you connect the WinXP machine to the hub (device manager should show that information for the interface). If the duplex setting is half-duplex, I have seen strange effects during sniffing as well.</p></div><div id="comment-10675-info" class="comment-info"><span class="comment-age">(04 May '12, 03:11)</span> Kurt Knochner ♦</div></div><span id="10676"></span><div id="comment-10676" class="comment"><div id="post-10676-score" class="comment-score"></div><div class="comment-text"><p>What strange effects do you see in half-duplex if the card is only capturing data? Especially since the scenario here is involving a hub</p></div><div id="comment-10676-info" class="comment-info"><span class="comment-age">(04 May '12, 03:50)</span> Landi</div></div><span id="10678"></span><div id="comment-10678" class="comment"><div id="post-10678-score" class="comment-score"></div><div class="comment-text"><p>Unfortunately I can't remember all the details and when I saw it I could not understand where the problem came from. After switching the monitoring system to full duplex, the problems were gone. Maybe that config change, fixed a different problem (possibly a driver problem). As I said, I can't remember the exact details of that case but I'll try to find it in my docs.</p><p>It's just another idea and easy to check.</p><p>However, I would first check the 4 items I mentioned, before checking the shallows of "networking voodoo" ;-)</p></div><div id="comment-10678-info" class="comment-info"><span class="comment-age">(04 May '12, 04:18)</span> Kurt Knochner ♦</div></div><span id="10679"></span><div id="comment-10679" class="comment not_top_scorer"><div id="post-10679-score" class="comment-score"></div><div class="comment-text"><p>Well I was asking because if connected to a hub I'd expect every device to operate in half-duplex, since thats what a hub can do. Forcing the card to FDX won't help here</p></div><div id="comment-10679-info" class="comment-info"><span class="comment-age">(04 May '12, 04:41)</span> Landi</div></div><span id="10680"></span><div id="comment-10680" class="comment not_top_scorer"><div id="post-10680-score" class="comment-score"></div><div class="comment-text"><p>oops, you're right. PeteA mentioned a hub. Sorry, somehow I over-looked that. Forget what I said! Anyway, I'll try to find that case, as I'm interested now to figure out what was causing my problems back then. Never mind...</p></div><div id="comment-10680-info" class="comment-info"><span class="comment-age">(04 May '12, 04:48)</span> Kurt Knochner ♦</div></div></div><div id="comment-tools-10667" class="comment-tools"><span class="comments-showing"> showing 5 of 7 </span> <a href="#" class="show-all-comments-link">show 2 more comments</a></div><div class="clear"></div><div id="comment-10667-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

</div>

