+++
type = "question"
title = "idl2wrs Wireshark Build Error C2065 - undeclared identifier"
description = '''I am trying to build Wireshark 1.12.4 with CORBA dissectors that my company developed. We have been using a very old version of Wireshark with the dissectors successfully but we need to update due to new IDL files that have been created. I am using omniORB4.2.0 and omniidl to convert the .idl files ...'''
date = "2015-03-10T08:27:00Z"
lastmod = "2015-03-10T08:27:00Z"
weight = 40427
keywords = [ "error", "c2065", "build", "idl2wrs", "plugins" ]
aliases = [ "/questions/40427" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [idl2wrs Wireshark Build Error C2065 - undeclared identifier](/questions/40427/idl2wrs-wireshark-build-error-c2065-undeclared-identifier)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-40427-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>I am trying to build Wireshark 1.12.4 with CORBA dissectors that my company developed. We have been using a very old version of Wireshark with the dissectors successfully but we need to update due to new IDL files that have been created. I am using omniORB4.2.0 and omniidl to convert the .idl files to .c files for the Wireshark plugins. I am using the wireshark_be from the Wireshark build as the backend.</p><p>When I build Wireshark, I see the errors below for multiple converted .idl files. To me, it seems like omnidil is causing the problem because when I look in the UserManagement.c file, hf_CORBA_StructMember_type is not declared. I can get the error to go away if I manually declare the variables in the UserManagement.c file, but there are hundreds of files that I need to convert and most of them are exhibiting the same problem.</p><p>UserManagement.c(769) : error C2065: 'hf_CORBA_StructMember_type' : undeclared identifier</p><p>UserManagement.c(771) : error C2065: 'hf_CORBA_UnionMember_type' : undeclared identifier</p><p>UserManagement.c(776) : error C2065: 'hf_CORBA_ValueMember_type' : undeclared identifier</p><p>Can anyone help please!!</p></div><div id="question-tags" class="tags-container tags">error c2065 build idl2wrs plugins</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>10 Mar '15, 08:27</strong></p><img src="https://secure.gravatar.com/avatar/9204d95a3f86bb4e98ec3a751a149d3f?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="central1ny&#39;s gravatar image" /><p>central1ny<br />
<span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="central1ny has no accepted answers">0%</span></p></div><div class="post-update-info post-update-info-edited"><p>edited 10 Mar '15, 09:13</p><img src="https://secure.gravatar.com/avatar/d2a7e24ca66604c749c7c88c1da8ff78?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="grahamb&#39;s gravatar image" /><p>grahamb ♦<br />
<span class="score" title="19834 reputation points"><span>19.8k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="30 badges"><span class="silver">●</span><span class="badgecount">30</span></span><span title="206 badges"><span class="bronze">●</span><span class="badgecount">206</span></span></p></div></div><div id="comments-container-40427" class="comments-container"><span id="40429"></span><div id="comment-40429" class="comment"><div id="post-40429-score" class="comment-score"></div><div class="comment-text"><p>With your current setup can you regenerate the existing idl dissectors, e.g. <code>idl2wrs Parlay.idl</code>?</p></div><div id="comment-40429-info" class="comment-info"><span class="comment-age">(10 Mar '15, 09:06)</span> grahamb ♦</div></div><span id="40433"></span><div id="comment-40433" class="comment"><div id="post-40433-score" class="comment-score"></div><div class="comment-text"><p>I regenerated the packet-parlay.c file successfully from the .idl file and used beyond compare to compare the Wireshark generated file versus mine and they are identical.</p></div><div id="comment-40433-info" class="comment-info"><span class="comment-age">(10 Mar '15, 09:15)</span> central1ny</div></div><span id="40434"></span><div id="comment-40434" class="comment"><div id="post-40434-score" class="comment-score"></div><div class="comment-text"><p>That would suggest the tools work (at least with the Parlay.idl file) which possibly leaves your idl files.</p></div><div id="comment-40434-info" class="comment-info"><span class="comment-age">(10 Mar '15, 09:19)</span> grahamb ♦</div></div><span id="40437"></span><div id="comment-40437" class="comment"><div id="post-40437-score" class="comment-score"></div><div class="comment-text"><p>Do you have any idea what could be wrong with an idl file to cause this error? The idl files converted and worked fine years ago for a much older version of wireshark</p></div><div id="comment-40437-info" class="comment-info"><span class="comment-age">(10 Mar '15, 09:34)</span> central1ny</div></div><span id="40440"></span><div id="comment-40440" class="comment"><div id="post-40440-score" class="comment-score"></div><div class="comment-text"><p>OK - so I think I tracked the failure down to a omniORB file named ir.idl. All other files in the #include tree compile ok with Wireshark. Any ideas? Is there a way to attach the file? The ir.idl file is located in in idl folder of the omniORB distribution. I am running v4.2.0</p></div><div id="comment-40440-info" class="comment-info"><span class="comment-age">(10 Mar '15, 09:54)</span> central1ny</div></div><span id="40443"></span><div id="comment-40443" class="comment not_top_scorer"><div id="post-40443-score" class="comment-score"></div><div class="comment-text"><p>Without looking into ir.idl, I would guess that it contains (or is missing) something that borks the idl2wrs process such that the output won't compile.</p><p>I'm not aware of much work being done either with idl2wrs or other dissectors that use it so you're kind of on your own here.</p></div><div id="comment-40443-info" class="comment-info"><span class="comment-age">(10 Mar '15, 10:34)</span> grahamb ♦</div></div><span id="40479"></span><div id="comment-40479" class="comment not_top_scorer"><div id="post-40479-score" class="comment-score"></div><div class="comment-text"><p>I solved the original problem by creating a customized orb.idl file that works. I am seeing a different problem now when trying to convert some of the .idl files. The error is below. Any ideas? Seems to be internal to the wireshark_be file.</p><p>File "C:\wireshark-1.12.4\tools\wireshark_gen.py", line 1465, in get_CDR_alias_hf self.getCDR_hf(type.decl().alias().aliasType(), pn ) TypeError: getCDR_hf() takes at least 4 arguments (3 given)</p></div><div id="comment-40479-info" class="comment-info"><span class="comment-age">(11 Mar '15, 12:01)</span> central1ny</div></div><span id="40488"></span><div id="comment-40488" class="comment not_top_scorer"><div id="post-40488-score" class="comment-score"></div><div class="comment-text"><p>I further narrowed it down to arrays. The following is some sample .idl code that gives the TypeError.Can anyone tell me whats wrong here that is causing this error?</p><p>module iddMessages { typedef long TempArray[1];</p><pre><code>struct HardwareStatus
{
  TempArray temperatures;
};</code></pre><p>};</p></div><div id="comment-40488-info" class="comment-info"><span class="comment-age">(11 Mar '15, 13:35)</span> central1ny</div></div><span id="40516"></span><div id="comment-40516" class="comment not_top_scorer"><div id="post-40516-score" class="comment-score"></div><div class="comment-text"><p>I was wrong stating that I fixed the original problem with the undeclared identifier. I have found that the problem is related to the use of a type named "TypeCode" in the omniORB corbaidl.idl file. When I run omniidl to convert the .idl files to .c files, the .c files are generated with no errors but the variables from the corbaidl files defined as TypeCode do not get defined in the resulting .c files.</p><p>It seems like I could be missing some import but I can't find any omniORB .idl file that defines TypeCode. Anyone familiar with this?</p></div><div id="comment-40516-info" class="comment-info"><span class="comment-age">(12 Mar '15, 11:10)</span> central1ny</div></div></div><div id="comment-tools-40427" class="comment-tools"><span class="comments-showing"> showing 5 of 9 </span> <a href="#" class="show-all-comments-link">show 4 more comments</a></div><div class="clear"></div><div id="comment-40427-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

</div>

