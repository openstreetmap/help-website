+++
type = "question"
title = "Overpass Turbo Query Wizard output to JOSM - How?"
description = '''I&#x27;ve just discovered an amazing tool - the Query Wizard for Overpass Turbo. I think it&#x27;s pretty new and it is absolutely awesome. I created a complex query in only few minutes of trial and error that returns all towns, villages, and hamlets that a) do not have a &quot;name:en=*&quot; tag and b) the name tag t...'''
date = "2013-12-13T04:13:00Z"
lastmod = "2018-10-13T17:13:00Z"
weight = 29022
keywords = [ "overpass", "output", "query", "josm" ]
aliases = [ "/questions/29022" ]
osqa_answers = 3
osqa_accepted = true
+++

<div class="headNormal">

# [Overpass Turbo Query Wizard output to JOSM - How?](/questions/29022/overpass-turbo-query-wizard-output-to-josm-how)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-29022-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-29022-score" class="post-score" title="current number of votes">
1
</div>
<span id="post-29022-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
&#10;</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>I've just discovered an amazing tool - the Query Wizard for Overpass Turbo. I think it's pretty new and it is absolutely awesome. I created a complex query in only few minutes of trial and error that returns all towns, villages, and hamlets that a) do not have a "name:en=*" tag and b) the name tag they do have contains no English characters. The query is:</p>
<pre><code>(place=village or place=hamlet or place=town) and (&quot;name:en&quot;!=* and name!=&quot;[a-z]&quot;)</code></pre>
<p>The query generated by the Wizard is much, much more complicated. It's fair to say that, although I do have some programming experience, I might never have put it together on my own.</p>
<p>My primary goal at the moment is to find all place names in my area of interest (Thailand) in order to add a name:en tag to supplement the existing name tag, which is typically in Thai and therefore unreadable by my Garmin software or GPS.</p>
<p>The query works well but I'm looking for a way to send those nodes and ways to JOSM (or somewhere else) so I can edit them in a single session. Right now I can only edit them one at a time using the Lat/Lon tool in JOSM which is both tedious and slow. I'm not looking for an automatic edit, only a method that makes it easier to jump from node to node (town to town), editing as I go.</p>
<p>Anybody not familiar with the new Overpass Query Wizard should definitely take the time to check it out. It's accessible from the home screen on <a href="http://overpass-turbo.eu/">Overpass Turbo</a></p>
<p>Thanks in advance for your help...</p>
<p>Dave</p>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-overpass" rel="tag" title="see questions tagged &#39;overpass&#39;">overpass</span> <span class="post-tag tag-link-output" rel="tag" title="see questions tagged &#39;output&#39;">output</span> <span class="post-tag tag-link-query" rel="tag" title="see questions tagged &#39;query&#39;">query</span> <span class="post-tag tag-link-josm" rel="tag" title="see questions tagged &#39;josm&#39;">josm</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>13 Dec '13, 04:13</strong></p>
<img src="https://secure.gravatar.com/avatar/04dddf6f5ffde333747d385af3ce5829?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="AlaskaDave&#39;s gravatar image" />
<p><span>AlaskaDave</span><br />
<span class="score" title="5415 reputation points"><span>5.4k</span></span><span title="76 badges"><span class="badge1">●</span><span class="badgecount">76</span></span><span title="107 badges"><span class="silver">●</span><span class="badgecount">107</span></span><span title="164 badges"><span class="bronze">●</span><span class="badgecount">164</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="AlaskaDave has 17 accepted answers">16%</span></p>
</div>
</div>
<div id="comments-container-29022" class="comments-container">
<span id="29030"></span>
<div id="comment-29030" class="comment">
<div id="post-29030-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>If you want to use a regex, you should use a <code>~</code> instead of <code>=</code>. In your query it would then look like the following:</p>
<p><code>… and name!~"[a-z]")</code></p>
<p>read more about the Wizard on my recent <a href="http://www.openstreetmap.org/user/tyr_asd/diary/20548">diary post</a> or the <a href="https://wiki.openstreetmap.org/wiki/Overpass_turbo/Wizard">wiki</a></p>
</div>
<div id="comment-29030-info" class="comment-info">
<span class="comment-age">(13 Dec '13, 08:34)</span> <span class="comment-user userinfo">tyr_asd</span>
</div>
</div>
<span id="29031"></span>
<div id="comment-29031" class="comment">
<div id="post-29031-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Thanks for your answer.</p>
<p>The Wizard apparently interprets the "=" as "~" because it generates this statement: &lt;has-kv k="name" modv="not" regv="[a-z]"/&gt;</p>
<p>I'll take a look at your post.</p>
</div>
<div id="comment-29031-info" class="comment-info">
<span class="comment-age">(13 Dec '13, 10:05)</span> <span class="comment-user userinfo">AlaskaDave</span>
</div>
</div>
<span id="29055"></span>
<div id="comment-29055" class="comment">
<div id="post-29055-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<blockquote>
<p>The Wizard apparently interprets the "=" as "~"</p>
</blockquote>
<p>Hmm. Actually, it shouldn't. What browser are you on?</p>
</div>
<div id="comment-29055-info" class="comment-info">
<span class="comment-age">(14 Dec '13, 10:23)</span> <span class="comment-user userinfo">tyr_asd</span>
</div>
</div>
<span id="29057"></span>
<div id="comment-29057" class="comment">
<div id="post-29057-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>I am using Chrome. But, I may have misspoke above. I looked at the generated code and saw regv statements in it and assumed it was equating the two symbols.</p>
<p>In fact, the query always times out if the "=" is replaced with a "~" so they're obviously not equivalent.</p>
<p>While I've got your attention, tyr_asd, can you tell me quickly how to restrict the queries to only nodes and ways?</p>
</div>
<div id="comment-29057-info" class="comment-info">
<span class="comment-age">(14 Dec '13, 10:54)</span> <span class="comment-user userinfo">AlaskaDave</span>
</div>
</div>
<span id="29068"></span>
<div id="comment-29068" class="comment">
<div id="post-29068-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>To restrict to certain OSM datatypes just add something like: <code>… and (type:node or type:way)</code>.</p>
<p>And yes, the Overpass API seems to be quite slow for negated regex queries of the name tag. I'm not sure why this is, but for your use-case I'd you can use the following regex instead: <code>… name~/[^a-z]/i …</code></p>
<p>Your complete example would then be: <a href="http://overpass-turbo.eu/s/1M1"><code>(place=village or place=hamlet or place=town) and ("name:en"!=* and name~/[^a-z]/i) and (type:node or type:way)</code></a></p>
</div>
<div id="comment-29068-info" class="comment-info">
<span class="comment-age">(14 Dec '13, 18:58)</span> <span class="comment-user userinfo">tyr_asd</span>
</div>
</div>
<span id="29082"></span>
<div id="comment-29082" class="comment not_top_scorer">
<div id="post-29082-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Okay, thanks for that. Your new, revised query runs fast and works well.</p>
<p>One last question, I promise. How would I search for highway ref tags that do not contain a "." The following query works but not consistently; it sometimes returns refs that contain a "." I can't understand how that could be. Here is my query:</p>
<p>highway=tertiary and type:way and ref!~"/."</p>
<p>Many thanks in advance...</p>
</div>
<div id="comment-29082-info" class="comment-info">
<span class="comment-age">(15 Dec '13, 01:30)</span> <span class="comment-user userinfo">AlaskaDave</span>
</div>
</div>
<span id="29090"></span>
<div id="comment-29090" class="comment not_top_scorer">
<div id="post-29090-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>try: <code>highway=tertiary and type:way and ref!~"[.]"</code></p>
</div>
<div id="comment-29090-info" class="comment-info">
<span class="comment-age">(15 Dec '13, 16:38)</span> <span class="comment-user userinfo">tyr_asd</span>
</div>
</div>
<span id="29101"></span>
<div id="comment-29101" class="comment not_top_scorer">
<div id="post-29101-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Absolutely amazing. What a difference a bracket makes! Thanks again for all your help on this problem. I've learned a ton and the query will assist me to clean up some issues with improperly constructed refs here in Thailand.</p>
</div>
<div id="comment-29101-info" class="comment-info">
<span class="comment-age">(15 Dec '13, 23:38)</span> <span class="comment-user userinfo">AlaskaDave</span>
</div>
</div>
</div>
<div id="comment-tools-29022" class="comment-tools">
<span class="comments-showing"> showing 5 of 8 </span> <a href="#" class="show-all-comments-link">show 3 more comments</a>
</div>
<div class="clear">
&#10;</div>
<div id="comment-29022-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

3 Answers:

</div>

</div>

<span id="29029"></span>

<div id="answer-container-29029" class="answer accepted-answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-29029-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-29029-score" class="post-score" title="current number of votes">
6
</div>
<span id="post-29029-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span class="accept-answer on" rel="nofollow" title="AlaskaDave has selected this answer as the correct answer"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>To elaborate Dymo12's answer further:</p>
<p>First, get from Overpass Turbo an editable OSM file:</p>
<ol>
<li>Ensure that all output statements ("out" in QL, "print" in XML) of the query are set to meta mode. Replace for that purpose "out;" with "out meta;" or '&lt; print /&gt;' with '&lt; print mode="meta" &gt;'.</li>
<li>Run the query</li>
<li>Choose "Export &gt; Raw data"</li>
<li>Use you browser's menu to store the result to disk ("File &gt; Save as ...") or similar.</li>
</ol>
<p>Now, configure JOSM to faciliate editing sparse objects:</p>
<ol>
<li>Choose "Edit &gt; Preferences &gt; WMS TMS", select in "Available default entries" the line "OpenStreetMap (Mapnik Black and White)" and click "Activate", then "OK". This enables to see the Mapnik base map in the background without loading all objects.</li>
<li>Choose "Imagery &gt; OpenStreetMap (Mapnik Black and White)" to turn the background layer on.</li>
<li>Use "File &gt; Open ..." to load the previously saved file.</li>
<li>Do whatever edits you deem suitable. Please keep in mind that there might be objects hidden, because they are neither rendered nor contained in your query.</li>
<li>Upload the result in the well-known way.</li>
</ol>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>13 Dec '13, 07:52</strong></p>
<img src="https://secure.gravatar.com/avatar/fcfdb0825826fd13d2ff0d83d58819c6?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Roland%20Olbricht&#39;s gravatar image" />
<p><span>Roland Olbricht</span><br />
<span class="score" title="6666 reputation points"><span>6.7k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="64 badges"><span class="silver">●</span><span class="badgecount">64</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Roland Olbricht has 40 accepted answers">36%</span></p>
</div>
</div>
<div id="comments-container-29029" class="comments-container">
<span id="29033"></span>
<div id="comment-29033" class="comment">
<div id="post-29033-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p><span>@Roland</span> - That helped a lot. I could not get JOSM to open the "raw" exported .JSON file so next I tried exporting the data as GPX. I was able to open that in JOSM with the Mapnik layer which worked fine except every time I tried to edit a point, it opened an OSM page in my browser. That's when I decided to download a little screenful of OSM data around each town in JOSM</p>
<p>Then I "J"umped from one marker to the next, only downloading a tiny window of OSM data at each one, and doing my editing.</p>
<p>I'm still doing something wrong, but at least I can do my edits in a much less labor intensive manner.</p>
</div>
<div id="comment-29033-info" class="comment-info">
<span class="comment-age">(13 Dec '13, 10:41)</span> <span class="comment-user userinfo">AlaskaDave</span>
</div>
</div>
<span id="29034"></span>
<div id="comment-29034" class="comment">
<div id="post-29034-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Aaah, now with the print statement in the query changed to "meta" I can send the data directly to JOSM.</p>
<p>Too cool.</p>
</div>
<div id="comment-29034-info" class="comment-info">
<span class="comment-age">(13 Dec '13, 10:48)</span> <span class="comment-user userinfo">AlaskaDave</span>
</div>
</div>
<span id="29049"></span>
<div id="comment-29049" class="comment">
<div id="post-29049-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>The revised query worked fine yesterday but now it fails because of a timeout. I removed the sections that query relations to reduce the time it takes to do the query but it still fails even for very small bounding boxes.</p>
<p>Any ideas? Post a new question?</p>
</div>
<div id="comment-29049-info" class="comment-info">
<span class="comment-age">(14 Dec '13, 00:11)</span> <span class="comment-user userinfo">AlaskaDave</span>
</div>
</div>
<span id="29056"></span>
<div id="comment-29056" class="comment">
<div id="post-29056-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Just increase the timeout parameter at the begin of the query. (something like <code>timeout="300"</code> should do the trick).</p>
<p>Btw: If you use the <code>load into JOSM</code> tool from the Export dialogue, overpass turbo automatically revises your query such that its results will be suitable as JOSM input.</p>
</div>
<div id="comment-29056-info" class="comment-info">
<span class="comment-age">(14 Dec '13, 10:28)</span> <span class="comment-user userinfo">tyr_asd</span>
</div>
</div>
<span id="29083"></span>
<div id="comment-29083" class="comment">
<div id="post-29083-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Yes, thanks. The Auto repair function is fantastic. And afterward the output goes directly to JOSM, which is just what I wanted.</p>
<p>I discovered the timeout parameter on my own but I searched for info about it with Google and came up empty. Maybe adjusting timeout values should be mentioned in the Wiki?</p>
</div>
<div id="comment-29083-info" class="comment-info">
<span class="comment-age">(15 Dec '13, 04:19)</span> <span class="comment-user userinfo">AlaskaDave</span>
</div>
</div>
</div>
<div id="comment-tools-29029" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-29029-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="29023"></span>

<div id="answer-container-29023" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-29023-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-29023-score" class="post-score" title="current number of votes">
3
</div>
<span id="post-29023-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>I also think Overpass Turbo is amazingly cool, actually so cool that it also have an export function that can send the result directly to JOSM via remote control and it will even fix your query to return data in the correct format.</p>
<p>You can then use the todo plugin in JOSM to go through the result.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>13 Dec '13, 05:01</strong></p>
<img src="https://secure.gravatar.com/avatar/b9a8b8a3b1418b4b0bb41041555b18a2?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Dymo12&#39;s gravatar image" />
<p><span>Dymo12</span><br />
<span class="score" title="796 reputation points">796</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="10 badges"><span class="silver">●</span><span class="badgecount">10</span></span><span title="16 badges"><span class="bronze">●</span><span class="badgecount">16</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Dymo12 has 2 accepted answers">12%</span></p>
</div>
</div>
<div id="comments-container-29023" class="comments-container">
<span id="29026"></span>
<div id="comment-29026" class="comment">
<div id="post-29026-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>That's the question. I'm asking, "how can I send that output to JOSM?" I've tried some Export options (while JOSM is running with Remote Contol enabled) but I cannot see the target nodes in JOSM.</p>
</div>
<div id="comment-29026-info" class="comment-info">
<span class="comment-age">(13 Dec '13, 07:23)</span> <span class="comment-user userinfo">AlaskaDave</span>
</div>
</div>
<span id="29027"></span>
<div id="comment-29027" class="comment">
<div id="post-29027-score" class="comment-score">
1
</div>
<div class="comment-text">
<p><span></span><span>@AlaskaDave</span>: Well, as I understand it the Wizard just does the task of writing the code for you. Nothing special then.</p>
<p>Just use the Export (a button on top) → "load into JOSM" function, accept the auto-repair, and try again. That usually works for me with my queries. And it does with your query via the Wizard (tested).</p>
</div>
<div id="comment-29027-info" class="comment-info">
<span class="comment-age">(13 Dec '13, 07:36)</span> <span class="comment-user userinfo">aseerel4c26 ♦</span>
</div>
</div>
</div>
<div id="comment-tools-29023" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-29023-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="66331"></span>

<div id="answer-container-66331" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-66331-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-66331-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-66331-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>The Overpass API with Query wizard is now integrated into JOSM. See <a href="https://josm.openstreetmap.de/wiki/Help/Action/OverpassDownload">https://josm.openstreetmap.de/wiki/Help/Action/OverpassDownload</a></p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>13 Oct '18, 17:13</strong></p>
<img src="https://secure.gravatar.com/avatar/c03139d4c6dce4328bd61a316e897f7e?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="pangoSE&#39;s gravatar image" />
<p><span>pangoSE</span><br />
<span class="score" title="31 reputation points">31</span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="pangoSE has no accepted answers">0%</span></p>
</div>
</div>
<div id="comments-container-66331" class="comments-container">
&#10;</div>
<div id="comment-tools-66331" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-66331-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

