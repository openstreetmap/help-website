+++
type = "question"
title = "Invisible buildings?"
description = '''Hi, can anybody tell me why way 122184832 is visible as a building while the adjacent way 122186232, tagged identically, is not visible on the map (Mapnik renderer)? Thanks'''
date = "2011-07-19T08:39:00Z"
lastmod = "2013-01-31T07:12:00Z"
weight = 6422
keywords = [ "building", "mapnik", "visibility" ]
aliases = [ "/questions/6422" ]
osqa_answers = 3
osqa_accepted = false
+++

<div class="headNormal">

# [Invisible buildings?](/questions/6422/invisible-buildings)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-6422-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-6422-score" class="post-score" title="current number of votes">
7
</div>
<span id="post-6422-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
&#10;</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>Hi, can anybody tell me why way <a href="https://www.openstreetmap.org/browse/way/122184832">122184832</a> is visible as a building while the adjacent way <a href="https://www.openstreetmap.org/browse/way/122186232">122186232</a>, tagged identically, is not visible on the map (Mapnik renderer)?</p>
<p>Thanks</p>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-building" rel="tag" title="see questions tagged &#39;building&#39;">building</span> <span class="post-tag tag-link-mapnik" rel="tag" title="see questions tagged &#39;mapnik&#39;">mapnik</span> <span class="post-tag tag-link-visibility" rel="tag" title="see questions tagged &#39;visibility&#39;">visibility</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>19 Jul '11, 08:39</strong></p>
<img src="https://secure.gravatar.com/avatar/48b105baf02b114ad41ef10f1dfd55f5?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Pyrokrat&#39;s gravatar image" />
<p><span>Pyrokrat</span><br />
<span class="score" title="106 reputation points">106</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Pyrokrat has no accepted answers">0%</span></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> retagged <strong>19 Jul '11, 14:46</strong> </span></p>
<img src="https://secure.gravatar.com/avatar/b95e1b5cb818be577b5561688a50368c?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="banoffee&#39;s gravatar image" />
<p><span>banoffee</span><br />
<span class="score" title="884 reputation points">884</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="14 badges"><span class="silver">●</span><span class="badgecount">14</span></span><span title="21 badges"><span class="bronze">●</span><span class="badgecount">21</span></span></p>
</div>
</div>
<div id="comments-container-6422" class="comments-container">
<span id="6425"></span>
<div id="comment-6425" class="comment">
<div id="post-6425-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Very good question. Osmarender shows them.</p>
</div>
<div id="comment-6425-info" class="comment-info">
<span class="comment-age">(19 Jul '11, 09:35)</span> <span class="comment-user userinfo">petschge</span>
</div>
</div>
<span id="10301"></span>
<div id="comment-10301" class="comment">
<div id="post-10301-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Any new info?</p>
</div>
<div id="comment-10301-info" class="comment-info">
<span class="comment-age">(28 Jan '12, 19:54)</span> <span class="comment-user userinfo">LM_1</span>
</div>
</div>
<span id="10302"></span>
<div id="comment-10302" class="comment">
<div id="post-10302-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Not yet, the buildings still don't render as of today.</p>
</div>
<div id="comment-10302-info" class="comment-info">
<span class="comment-age">(28 Jan '12, 20:42)</span> <span class="comment-user userinfo">Pyrokrat</span>
</div>
</div>
<span id="19386"></span>
<div id="comment-19386" class="comment">
<div id="post-19386-score" class="comment-score">
2
</div>
<div class="comment-text">
<p>Update one year later: The buildings still don't render.</p>
</div>
<div id="comment-19386-info" class="comment-info">
<span class="comment-age">(28 Jan '13, 07:13)</span> <span class="comment-user userinfo">Pyrokrat</span>
</div>
</div>
<span id="19390"></span>
<div id="comment-19390" class="comment not_top_scorer">
<div id="post-19390-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>I guess uploading a new version of these objects will fix the problem. In JOSM this can be done by adding a tag and removing it again, the object will then be seen as modified and on upload a new version will be created without changing anything. But the actual source of the problem has to be identified in order to avoid further similar issues.</p>
</div>
<div id="comment-19390-info" class="comment-info">
<span class="comment-age">(28 Jan '13, 09:34)</span> <span class="comment-user userinfo">scai ♦</span>
</div>
</div>
<span id="19427"></span>
<div id="comment-19427" class="comment">
<div id="post-19427-score" class="comment-score">
2
</div>
<div class="comment-text">
<p>I switched a tag back and forth on these buildings and now they render. I originally wanted to leave way 122186232 as is to keep an example for the problem but unfortunately I forgot it.</p>
</div>
<div id="comment-19427-info" class="comment-info">
<span class="comment-age">(30 Jan '13, 07:32)</span> <span class="comment-user userinfo">Pyrokrat</span>
</div>
</div>
</div>
<div id="comment-tools-6422" class="comment-tools">
<span class="comments-showing"> showing 5 of 6 </span> <a href="#" class="show-all-comments-link">show 1 more comments</a>
</div>
<div class="clear">
&#10;</div>
<div id="comment-6422-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

3 Answers:

</div>

</div>

<span id="19471"></span>

<div id="answer-container-19471" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-19471-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-19471-score" class="post-score" title="current number of votes">
4
</div>
<span id="post-19471-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>The tiles you see as the "mapnik tiles" are rendered from a secondary database. This secondary database is kept up to date with the primary database via the application of "minutely diff" files. Furthermore, the data is transformed from a representations of nodes, ways and relations into points, lines and polygons.</p>
<p>The program doing this conversion (osm2pgsql) unfortunately has some known bugs under which in edge cases the transformation during the application of diffs is incorrect, leading to some data not being correctly in the secondary database and thus can't be rendered. This then leads to the "invisible buildings"</p>
<p>The likely bug in your case is #4525 ( <a href="https://trac.openstreetmap.org/ticket/4525">https://trac.openstreetmap.org/ticket/4525</a> ). If a way is originally part of a multipolygon and rendered as such, then if it gets removed from the polygon relation, but the way itself remains unmodified, it will be deleted from the database.</p>
<p>For the moment, until the bug is fixed. Touching the individual way (i.e. re-uploading / modifying the way) is currently the only solution to getting the way to render.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>30 Jan '13, 22:48</strong></p>
<img src="https://secure.gravatar.com/avatar/32c974c4ca8b246698c2b82c64924da5?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="apmon&#39;s gravatar image" />
<p><span>apmon</span><br />
<span class="score" title="6527 reputation points"><span>6.5k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="44 badges"><span class="silver">●</span><span class="badgecount">44</span></span><span title="56 badges"><span class="bronze">●</span><span class="badgecount">56</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="apmon has 9 accepted answers">20%</span></p>
</div>
</div>
<div id="comments-container-19471" class="comments-container">
<span id="19482"></span>
<div id="comment-19482" class="comment">
<div id="post-19482-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Thanks for the detailed answer! I think this phenomenon is due to the bug you are referring to. The whole block of buildings was in fact a multipolygon before I broke it down into multiple ways.</p>
</div>
<div id="comment-19482-info" class="comment-info">
<span class="comment-age">(31 Jan '13, 07:12)</span> <span class="comment-user userinfo">Pyrokrat</span>
</div>
</div>
</div>
<div id="comment-tools-19471" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-19471-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="6717"></span>

<div id="answer-container-6717" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-6717-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-6717-score" class="post-score" title="current number of votes">
1
</div>
<span id="post-6717-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>The data looks right and Osmarender shows all the buildings. I guess that there was some problem with the mapnik database excerpt or similar which will be resolved automatically once the rendering server does the next full import and the tiles get rerendered.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>30 Jul '11, 12:19</strong></p>
<img src="https://secure.gravatar.com/avatar/f09c0b7a655fed386e070e036e2da248?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="dieterdreist&#39;s gravatar image" />
<p><span>dieterdreist</span><br />
<span class="score" title="3677 reputation points"><span>3.7k</span></span><span title="11 badges"><span class="badge1">●</span><span class="badgecount">11</span></span><span title="35 badges"><span class="silver">●</span><span class="badgecount">35</span></span><span title="67 badges"><span class="bronze">●</span><span class="badgecount">67</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="dieterdreist has 4 accepted answers">3%</span></p>
</div>
</div>
<div id="comments-container-6717" class="comments-container">
&#10;</div>
<div id="comment-tools-6717" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-6717-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="6681"></span>

<div id="answer-container-6681" class="answer answered-by-owner">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-6681-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-6681-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-6681-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>An update on this: Situation unchanged, I filed it as a <a href="http://trac.openstreetmap.org/ticket/3932">bug</a> but they suspected server outage to be the reason. Since I continuously do mapping and my other changes appear immediately, I can almost certainly rule this out. Any other ideas?</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>29 Jul '11, 06:54</strong></p>
<img src="https://secure.gravatar.com/avatar/48b105baf02b114ad41ef10f1dfd55f5?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Pyrokrat&#39;s gravatar image" />
<p><span>Pyrokrat</span><br />
<span class="score" title="106 reputation points">106</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Pyrokrat has no accepted answers">0%</span></p>
</div>
</div>
<div id="comments-container-6681" class="comments-container">
<span id="6687"></span>
<div id="comment-6687" class="comment">
<div id="post-6687-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>I had looked at it yesterday,what would happen if you deleted a couple of the invisible ones saved it then opened the editor and re drew them. or would downloading the area into josm altering something slightly and uploading again work or have to tried that already</p>
</div>
<div id="comment-6687-info" class="comment-info">
<span class="comment-age">(29 Jul '11, 10:12)</span> <span class="comment-user userinfo">andy mackey</span>
</div>
</div>
<span id="6694"></span>
<div id="comment-6694" class="comment">
<div id="post-6694-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>Redrawing the ways (using the existing nodes) helps but I don't want to remove the issue in case a developer wants to have a look at it.</p>
</div>
<div id="comment-6694-info" class="comment-info">
<span class="comment-age">(29 Jul '11, 12:53)</span> <span class="comment-user userinfo">Pyrokrat</span>
</div>
</div>
<span id="6696"></span>
<div id="comment-6696" class="comment">
<div id="post-6696-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>ok, thanks explaining that</p>
</div>
<div id="comment-6696-info" class="comment-info">
<span class="comment-age">(29 Jul '11, 15:17)</span> <span class="comment-user userinfo">andy mackey</span>
</div>
</div>
<span id="6756"></span>
<div id="comment-6756" class="comment">
<div id="post-6756-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>My best "wild guess" would be that the time at which the mapnik server got its last full update before/during the maintenance and the time at which it started applying minutely updates to that data were not the same, and that your changes (as well as any other changes throughout the entire world at a similar time) are not reflected in the mapnik copy of the database...</p>
<p>... and that it would go away when mapnik's database is next <em>fully</em> resynchronised - presumably when the "main" server comes back online.</p>
<p>Seems useful to have a known anomaly to see when this occurs.</p>
</div>
<div id="comment-6756-info" class="comment-info">
<span class="comment-age">(01 Aug '11, 12:12)</span> <span class="comment-user userinfo">banoffee</span>
</div>
</div>
</div>
<div id="comment-tools-6681" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-6681-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

