+++
type = "question"
title = "overpass nodes vs pois"
description = '''Hi, i have a question about overpass results. Im looking for pois with the following query amenity=marketplace OR bar OR biergarten OR cafe OR &quot;fast food&quot; OR &quot;food court&quot; OR pub OR restaurant OR shop=alcohol OR bakery OR butcher OR cheese OR chocolate OR coffee OR deli OR farm OR greengrocer OR orga...'''
date = "2021-06-22T11:02:00Z"
lastmod = "2021-06-23T12:59:00Z"
weight = 80655
keywords = [ "overpass", "nodes", "pois" ]
aliases = [ "/questions/80655" ]
osqa_answers = 3
osqa_accepted = false
+++

<div class="headNormal">

# [overpass nodes vs pois](/questions/80655/overpass-nodes-vs-pois)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-80655-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-80655-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-80655-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
&#10;</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>Hi, i have a question about overpass results. Im looking for pois with the following query</p>
<p>amenity=marketplace OR bar OR biergarten OR cafe OR "fast food" OR "food court" OR pub OR restaurant OR shop=alcohol OR bakery OR butcher OR cheese OR chocolate OR coffee OR deli OR farm OR greengrocer OR organic OR pasta OR patisserie OR pizza OR tea OR supermarket OR pizza OR craft=brewery OR caterer OR winery OR distillery</p>
<p>for Seattle i get these results <a href="https://monosnap.com/file/l5fDAzCZ7XBNXEPBABB6pr9cQmuIHx">https://monosnap.com/file/l5fDAzCZ7XBNXEPBABB6pr9cQmuIHx</a> for each city i try, the number of pois are more or less the half of the number of nodes, always. Also if i export as kml and convert it to csv i will have only the half of the locations (so, only pois). I scraped yelp, tripadvisor and gmaps for several cities (with other tools) and im sure the results are close to the number of nodes on overpass (not to the number of pois). Check this <a href="https://monosnap.com/file/El6H9xwIqHdcAbPrU27SYHjhamug3H">https://monosnap.com/file/El6H9xwIqHdcAbPrU27SYHjhamug3H</a> how can i extract all the nodes? thanks!</p>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-overpass" rel="tag" title="see questions tagged &#39;overpass&#39;">overpass</span> <span class="post-tag tag-link-nodes" rel="tag" title="see questions tagged &#39;nodes&#39;">nodes</span> <span class="post-tag tag-link-pois" rel="tag" title="see questions tagged &#39;pois&#39;">pois</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>22 Jun '21, 11:02</strong></p>
<img src="https://secure.gravatar.com/avatar/8bda60ea8e9b91cb7442f70e15d00944?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="eldoland&#39;s gravatar image" />
<p><span>eldoland</span><br />
<span class="score" title="11 reputation points">11</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="eldoland has no accepted answers">0%</span></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> edited <strong>22 Jun '21, 18:08</strong> </span></p>
</div>
</div>
<div id="comments-container-80655" class="comments-container">
<span id="80660"></span>
<div id="comment-80660" class="comment">
<div id="post-80660-score" class="comment-score">
2
</div>
<div class="comment-text">
<p>Can't do much to help without the full routine. Post a link.</p>
</div>
<div id="comment-80660-info" class="comment-info">
<span class="comment-age">(22 Jun '21, 14:14)</span> <span class="comment-user userinfo">DaveF</span>
</div>
</div>
<span id="80665"></span>
<div id="comment-80665" class="comment">
<div id="post-80665-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>oh ok! here we go <a href="https://overpass-turbo.eu/s/18Hu">https://overpass-turbo.eu/s/18Hu</a></p>
<p>thanks!</p>
</div>
<div id="comment-80665-info" class="comment-info">
<span class="comment-age">(22 Jun '21, 18:01)</span> <span class="comment-user userinfo">eldoland</span>
</div>
</div>
</div>
<div id="comment-tools-80655" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-80655-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

3 Answers:

</div>

</div>

<span id="80666"></span>

<div id="answer-container-80666" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-80666-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-80666-score" class="post-score" title="current number of votes">
2
</div>
<span id="post-80666-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>For each POI type, your Overpass query is searching for nodes, ways, and relations.</p>
<ul>
<li>A POI mapped as node will return one node.</li>
<li>A POI mapped as a four-sided way like a rectangle will return four nodes, one for each corner.</li>
<li>A POI mapped as a more complex polygon, or as a relation, may return many nodes.</li>
</ul>
<p>So the node total that Overpass returns is the number of nodes used to draw all of these things on the map. If even one result is a way or relation, then the total number of nodes will be greater than the total number of POIs.</p>
<p>If you search for only POIs mapped as nodes, the node total will be the same as the POI total. See this search (which is just your search with the ways and relations commented out): <a href="https://overpass-turbo.eu/s/18HA">https://overpass-turbo.eu/s/18HA</a></p>
<p>See the OSM wiki for more detailed information about the data elements: <a href="https://wiki.openstreetmap.org/wiki/Elements">https://wiki.openstreetmap.org/wiki/Elements</a></p>
</div>
<div class="answer-controls post-controls">
<div class="community-wiki">
This answer is marked "community wiki".
</div>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>22 Jun '21, 18:29</strong></p>
<img src="https://secure.gravatar.com/avatar/977d95e2184a885d9a01fb3297225872?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="jmapb&#39;s gravatar image" />
<p><span>jmapb</span><br />
<span class="score" title="3387 reputation points"><span>3.4k</span></span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="33 badges"><span class="silver">●</span><span class="badgecount">33</span></span><span title="61 badges"><span class="bronze">●</span><span class="badgecount">61</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="jmapb has 22 accepted answers">22%</span></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> edited <strong>22 Jun '21, 18:43</strong> </span></p>
</div>
</div>
<div id="comments-container-80666" class="comments-container">
<span id="80667"></span>
<div id="comment-80667" class="comment">
<div id="post-80667-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Hi, thanks for clarifying! so that means that actually osm is missing many pois. I got many more results scraping other resources (yelp, tripadvisor and gmaps). Do you agree? thanks!</p>
</div>
<div id="comment-80667-info" class="comment-info">
<span class="comment-age">(22 Jun '21, 18:53)</span> <span class="comment-user userinfo">eldoland</span>
</div>
</div>
</div>
<div id="comment-tools-80666" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-80666-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="80668"></span>

<div id="answer-container-80668" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-80668-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-80668-score" class="post-score" title="current number of votes">
1
</div>
<span id="post-80668-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>OK. Lots of variables here. First off, don't assume OSM (or other databases) are 100% accurate. Wizard isn't really that detailed. It takes a few, wild guesses For instance your "chocolate" &amp; "coffee" returns vending machine &amp; farm returns beehive! It also searches for both pizza &amp; pasta using cuisine=italian. I /think/ you need to contain the or operators within brackets. It easier to learn to write your own routines IMO. Use the OSM wiki to find the more accurate tags to search for. <a href="https://wiki.openstreetmap.org/wiki/Main_Page">https://wiki.openstreetmap.org/wiki/Main_Page</a></p>
<p>This is the condensed routine: <a href="https://overpass-turbo.eu/s/18HF">https://overpass-turbo.eu/s/18HF</a></p>
<pre><code>{{geocodeArea:Seattle}}-&gt;.Seattle;
(
    nwr[amenity~&quot;^(marketplace|bar|biergarten|cafe|fast_food|food_court|pub|restaurant)$&quot;](area.Seattle);
    nwr[shop~&quot;^(alcohol|bakery|butcher|dairy|deli|greengrocer|pastry|supermarket)$&quot;](area.Seattle);
  nwr[amenity=vending_machine][vending~&quot;^(ice_cream|coffee)$&quot;](area.Seattle);
    nwr[man_made=beehive](area.Seattle);
&#10;  nwr[amenity=recycling][recycling_type=container][&quot;recycling:green_waste&quot;=yes](area.Seattle);
  nwr[amenity=restaurant][cuisine=italian](area.Seattle);
&#10;  nwr[craft~&quot;^(brewery|caterer]|winery|distillery)$&quot;](area.Seattle);
);
out center;</code></pre>
<p>Use <code>nwr</code> instead of node,way,relation</p>
<p>Use | as a replacement for 'or'</p>
<p>Use RegEx ~"^ and )$" to ensure only those individual words are searched for.</p>
<p>Use <code>out center</code> to return all data as POIs</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>22 Jun '21, 19:19</strong></p>
<img src="https://secure.gravatar.com/avatar/c9c8b421ad22f51ddd62f23413717036?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="DaveF&#39;s gravatar image" />
<p><span>DaveF</span><br />
<span class="score" title="3264 reputation points"><span>3.3k</span></span><span title="84 badges"><span class="badge1">●</span><span class="badgecount">84</span></span><span title="98 badges"><span class="silver">●</span><span class="badgecount">98</span></span><span title="133 badges"><span class="bronze">●</span><span class="badgecount">133</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="DaveF has 17 accepted answers">16%</span></p>
</div>
</div>
<div id="comments-container-80668" class="comments-container">
<span id="80675"></span>
<div id="comment-80675" class="comment">
<div id="post-80675-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Hi DaveF thanks again for your reply! yes totally agree there is no 100% accurate database, that's why i scrape different sources and then i merge them all together. Thanks for the code, will try it and play around with tags!</p>
</div>
<div id="comment-80675-info" class="comment-info">
<span class="comment-age">(23 Jun '21, 12:59)</span> <span class="comment-user userinfo">eldoland</span>
</div>
</div>
</div>
<div id="comment-tools-80668" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-80668-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="80663"></span>

<div id="answer-container-80663" class="answer answered-by-owner">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-80663-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-80663-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-80663-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>Hi Dave, thanks for your reply ok, try this query</p>
<p>amenity=marketplace OR bar OR biergarten OR cafe OR "fast food" OR "food court" OR pub OR restaurant OR shop=alcohol OR bakery OR butcher OR cheese OR chocolate OR coffee OR deli OR farm OR greengrocer OR organic OR pasta OR patisserie OR pizza OR tea OR supermarket OR pizza OR craft=brewery OR caterer OR winery OR distillery in Seattle</p>
<p>through the wizard i got this <a href="https://monosnap.com/file/l5fDAzCZ7XBNXEPBABB6pr9cQmuIHx">https://monosnap.com/file/l5fDAzCZ7XBNXEPBABB6pr9cQmuIHx</a> if you export the pois, you will get 2k something results but the nodes are twice as much as the pois</p>
<p>I scraped Seattle on yelp and tripadvisor with webscraper.io and i got 5928 results. So i guess the number of nodes is more accurate than the number of pois. My question is, how can i get the nodes instead of pois? thanks!</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>22 Jun '21, 17:34</strong></p>
<img src="https://secure.gravatar.com/avatar/8bda60ea8e9b91cb7442f70e15d00944?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="eldoland&#39;s gravatar image" />
<p><span>eldoland</span><br />
<span class="score" title="11 reputation points">11</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="eldoland has no accepted answers">0%</span></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> edited <strong>22 Jun '21, 17:34</strong> </span></p>
</div>
</div>
<div id="comments-container-80663" class="comments-container">
<span id="80664"></span>
<div id="comment-80664" class="comment">
<div id="post-80664-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>It's much easier to help you if you post a link using the 'share' button on the Turbo webpage.</p>
</div>
<div id="comment-80664-info" class="comment-info">
<span class="comment-age">(22 Jun '21, 17:59)</span> <span class="comment-user userinfo">DaveF</span>
</div>
</div>
</div>
<div id="comment-tools-80663" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-80663-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

