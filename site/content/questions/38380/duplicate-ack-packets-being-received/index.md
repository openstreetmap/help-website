+++
type = "question"
title = "Duplicate ACK packets being received."
description = '''I have been having troubles with my Fibre Internet Connection now for a couple of months now and was told by my ISP to use Wireshark to further investgate the issue. We since have noticed that the connection seems to be getting duplicate ACK packets which when that happens the speed of my connection...'''
date = "2014-12-05T16:18:00Z"
lastmod = "2014-12-06T03:33:00Z"
weight = 38380
keywords = [ "dup-ack" ]
aliases = [ "/questions/38380" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [Duplicate ACK packets being received.](/questions/38380/duplicate-ack-packets-being-received)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-38380-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>I have been having troubles with my Fibre Internet Connection now for a couple of months now and was told by my ISP to use Wireshark to further investgate the issue.</p><p>We since have noticed that the connection seems to be getting duplicate ACK packets which when that happens the speed of my connection goes from like 7mb/s to like 365kb/s</p><p>I have a wireshark session uploaded online and was wondering if someone that knows a fair bit about analysing these logs could give me an idea what could be causing this or give me a better understanding of how to interpret the information.</p><p><a href="http://users.on.net/~davidjparsons/wireshark%20test.pcapng">http://users.on.net/~davidjparsons/wireshark%20test.pcapng</a></p><p>Any help i could get on this matter really would be such a help.</p><p>Regards,</p><p>David</p></div><div id="question-tags" class="tags-container tags">dup-ack</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>05 Dec '14, 16:18</strong></p><img src="https://secure.gravatar.com/avatar/328e778585a9ea02c6a6d96ca74a22cb?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="BrissyGuy&#39;s gravatar image" /><p>BrissyGuy<br />
<span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="BrissyGuy has no accepted answers">0%</span></p></div></div><div id="comments-container-38380" class="comments-container"><span id="38383"></span><div id="comment-38383" class="comment"><div id="post-38383-score" class="comment-score"></div><div class="comment-text"><p>That file is nearly 3 GB in size, and would take hours to download at the rate supported there. :)</p><p>Could you possibly cut that file down to the time period where the duplicate acks are occurring? One way to do that:</p><p>Open the capture file</p><p>Select a packet at the beginning of the "problem" time in the trace</p><p>Hit ctrl + m (to mark the packet)</p><p>Do the same for the last packet in the problem period.</p><p>Go to File -&gt; Export Specified Packets, and save "First to Last Marked" in the lower-level options area of the save screen</p></div><div id="comment-38383-info" class="comment-info"><span class="comment-age">(05 Dec '14, 16:49)</span> Quadratic</div></div><span id="38384"></span><div id="comment-38384" class="comment"><div id="post-38384-score" class="comment-score"></div><div class="comment-text"><p>I am sorry about that. I just did another capture of the problem.</p><p>I was able to get the file down to like 79mb. i hope that should be okay.</p><p><a href="http://users.on.net/~davidjparsons/wireshark-test-December.pcapng">http://users.on.net/~davidjparsons/wireshark-test-December.pcapng</a></p><p>PS. i thankyou for your help with this. its really been taring my hair out with it really.</p></div><div id="comment-38384-info" class="comment-info"><span class="comment-age">(05 Dec '14, 18:04)</span> BrissyGuy</div></div><span id="38385"></span><div id="comment-38385" class="comment"><div id="post-38385-score" class="comment-score"></div><div class="comment-text"><p>Thanks.</p><p>You were hitting around 30 Mbps in that trace file. Understanding the problem to be that you keep dropping down to an effective 365 Kbps, can I confirm that 'the problem' you are having was happening for you during the time of that trace?</p></div><div id="comment-38385-info" class="comment-info"><span class="comment-age">(05 Dec '14, 18:49)</span> Quadratic</div></div><span id="38386"></span><div id="comment-38386" class="comment"><div id="post-38386-score" class="comment-score"></div><div class="comment-text"><p>yes thats correct. The speed is goes up down. and i am not really whats causing the issue. I am kinda lost hence the reason why i am asking for help on this one.</p></div><div id="comment-38386-info" class="comment-info"><span class="comment-age">(05 Dec '14, 19:03)</span> BrissyGuy</div></div><span id="38387"></span><div id="comment-38387" class="comment"><div id="post-38387-score" class="comment-score"></div><div class="comment-text"><p>Ok but was it ever "bad" during the time of the trace you posted there? The whole time? When? I see 30 Mbps until near the end.</p></div><div id="comment-38387-info" class="comment-info"><span class="comment-age">(05 Dec '14, 21:34)</span> Quadratic</div></div><span id="38388"></span><div id="comment-38388" class="comment not_top_scorer"><div id="post-38388-score" class="comment-score"></div><div class="comment-text"><p>The download speed in Firefox had dropped from 3.1mb/s down to 500kb/s or there about at the time. I saw the duplicate ack packets, what is that caused by? i have tried it two other computers in the house and it does the same thing. Yes its like that, most downloads start off okay then after a short peroid of time they start sending duplicate ack packets which would cause the download to slow down? the longer the download session runs for the more it gets duplicate ack packets.</p></div><div id="comment-38388-info" class="comment-info"><span class="comment-age">(05 Dec '14, 21:41)</span> BrissyGuy</div></div></div><div id="comment-tools-38380" class="comment-tools"><span class="comments-showing"> showing 5 of 6 </span> <a href="#" class="show-all-comments-link">show 1 more comments</a></div><div class="clear"></div><div id="comment-38380-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="38390"></span>

<div id="answer-container-38390" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-38390-score" class="post-score" title="current number of votes">0</div></div></td><td><div class="item-right"><div class="answer-body"><p>The trace file shows a constant throughput of more than 3 MB/s = Megabytes/s <img src="https://osqa-ask.wireshark.org/upfiles/Screenshot-163.png" alt="alt text" /><br />
</p><p>The 'duplicate ACK packets' are not <strong>received</strong> but <strong>are sent by your client</strong> as it is reporting GAPs. (TCP SACK option is present signalling the left and right edges.<br />
Only 3 packets out of 52664 inbound packets were lost. They were 'fast retransmitted' and are not causing a slowdown in the download.</p><p>To summarize, <em>this</em> trace dows not show the slowdown to 500kB/s that you mentioned.<br />
I suggest you massage your large trace using <code>editcap -s 100</code> and split it into equal intervals using <code>editcap -i 10</code> and upload the smallest files to <a href="http://http//:cloudshark.org">http//:cloudshark.org</a>. Those should contain the slow transfers.</p><p>Regards Matthias<br />
</p><hr /><p>Update: The problem is still packet loss, thus the GAP reports.</p><p>Whether this is a 'problem' depends on your expectations.<br />
During a speed-test you will certainly hit a threshold when you start losing packets.</p><p>In the IOGraph this threshold seems to be at 13000 bytes/ms <img src="https://osqa-ask.wireshark.org/upfiles/Screenshot-166_JwTs7dW.png" alt="alt text" /></p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>06 Dec '14, 03:33</strong></p><img src="https://secure.gravatar.com/avatar/5500bd1decb766660522dfb347eedc49?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="mrEEde&#39;s gravatar image" /><p>mrEEde<br />
<span class="score" title="3892 reputation points"><span>3.9k</span></span><span title="15 badges"><span class="badge1">●</span><span class="badgecount">15</span></span><span title="22 badges"><span class="silver">●</span><span class="badgecount">22</span></span><span title="70 badges"><span class="bronze">●</span><span class="badgecount">70</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="mrEEde has 48 accepted answers">20%</span> </br></br></p></img></div><div class="post-update-info post-update-info-edited"><p>edited 07 Dec '14, 03:00</p></div></div><div id="comments-container-38390" class="comments-container"><span id="38404"></span><div id="comment-38404" class="comment"><div id="post-38404-score" class="comment-score"></div><div class="comment-text"><p>I have signed up for cloudshark so i just need to wait to for it to become active.</p><p>I have condensed a wireshark test file down to 5mb where the speed was really slow.</p><p><a href="http://users.on.net/~davidjparsons/speedtest-capture.pcapng">http://users.on.net/~davidjparsons/speedtest-capture.pcapng</a></p><p>I really do appricate all your help on this as its abit beyond me. you were saying in your last post that there was GAPs in the transmission that correct? is there ment to be gaps at all but smaller or none at all? Just in argument with my ISP with this issue thats all and has been going on for sometime.</p><p>All help on this matter is really appricated.</p><p>Regards,</p><p>David</p></div><div id="comment-38404-info" class="comment-info"><span class="comment-age">(06 Dec '14, 19:55)</span> BrissyGuy</div></div><span id="38405"></span><div id="comment-38405" class="comment"><div id="post-38405-score" class="comment-score"></div><div class="comment-text"><p>I've uploaded the trace to <a href="https://www.cloudshark.org/captures/314df5700bb8">https://www.cloudshark.org/captures/314df5700bb8</a></p></div><div id="comment-38405-info" class="comment-info"><span class="comment-age">(07 Dec '14, 00:58)</span> mrEEde</div></div><span id="38408"></span><div id="comment-38408" class="comment"><div id="post-38408-score" class="comment-score"></div><div class="comment-text"><p>Thanks for that. So u still think its just reporting GAPs and thats the whole of the issue?</p></div><div id="comment-38408-info" class="comment-info"><span class="comment-age">(07 Dec '14, 02:34)</span> BrissyGuy</div></div><span id="38410"></span><div id="comment-38410" class="comment"><div id="post-38410-score" class="comment-score"></div><div class="comment-text"><p>There are lots of TCP previous segment not captured errors,which also suggest that those packets got dropped before reaching client,for e.g look at packet no.4 &amp; 5(speedtest-capture.pcap) there are 5 packets dropped along the path somewhere.such losses are throughout the capture.You can show this capture to ISP as this is sufficient proof that packet is getting dropped in somewhere along the path</p></div><div id="comment-38410-info" class="comment-info"><span class="comment-age">(07 Dec '14, 05:31)</span> kishan pandey</div></div></div><div id="comment-tools-38390" class="comment-tools"></div><div class="clear"></div><div id="comment-38390-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

