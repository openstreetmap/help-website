+++
type = "question"
title = "Why are Duplicate TCP Acks being seen in wireshark capture?"
description = '''I am doing an FTP of a file, the server where the file is placed is being accessed using an LTE dongle. While the while is being transferred I am seeing some duplicate ACKs, from what I have read about duplicate ACKs, I gathered that duplicate ACKs are sent for fast retransmission if some packet get...'''
date = "2014-01-27T23:26:00Z"
lastmod = "2016-05-04T03:42:00Z"
weight = 29216
keywords = [ "duplicateacks", "out-of-order", "tcp" ]
aliases = [ "/questions/29216" ]
osqa_answers = 2
osqa_accepted = false
+++

<div class="headNormal">

# [Why are Duplicate TCP Acks being seen in wireshark capture?](/questions/29216/why-are-duplicate-tcp-acks-being-seen-in-wireshark-capture)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-29216-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-29216-score" class="post-score" title="current number of votes">0</div><span id="post-29216-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>I am doing an FTP of a file, the server where the file is placed is being accessed using an LTE dongle. While the while is being transferred I am seeing some duplicate ACKs, from what I have read about duplicate ACKs, I gathered that duplicate ACKs are sent for fast retransmission if some packet gets lost. But in my case I also see the sequence number for which duplicate ACKs are sent is received correctly, what could be the reason for duplicate ACKs then? Can someone please explain.</p><p>Regards, Saurabh</p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-duplicateacks" rel="tag" title="see questions tagged &#39;duplicateacks&#39;">duplicateacks</span> <span class="post-tag tag-link-out-of-order" rel="tag" title="see questions tagged &#39;out-of-order&#39;">out-of-order</span> <span class="post-tag tag-link-tcp" rel="tag" title="see questions tagged &#39;tcp&#39;">tcp</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>27 Jan '14, 23:26</strong></p><img src="https://secure.gravatar.com/avatar/9671ca387ae90de65e7436a376ee7e70?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="saurabhklr&#39;s gravatar image" /><p><span>saurabhklr</span><br />
<span class="score" title="1 reputation points">1</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="saurabhklr has no accepted answers">0%</span></p></div></div><div id="comments-container-29216" class="comments-container"></div><div id="comment-tools-29216" class="comment-tools"></div><div class="clear"></div><div id="comment-29216-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

2 Answers:

</div>

</div>

<span id="29225"></span>

<div id="answer-container-29225" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-29225-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-29225-score" class="post-score" title="current number of votes">3</div><span id="post-29225-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span></div></td><td><div class="item-right"><div class="answer-body"><p>Duplicate ACKs are sent when the receiver sees a gap in the packets it receives. They're not just used for fast retransmissions, it is the other way around (sort of): fast retransmissions use a counter for duplicate ACKs to trigger a retransmission faster than by Retransmission TimeOut (RTO).</p><p>If you see duplicate ACKs coming in and no gaps in the packets going out it means that you capture at the source of the data (not the receiving side). That is quite normal if the packet loss occurs somewhere in the path to the receiver. You should see a retransmission though; if you don't you probably have a case where packets get reordered on the way and arrive out-of-order, which results in duplicate ACKs as well. The difference between packet loss and out-of-order is that the Duplicate ACK count is very low for out-of-order (often only going up to "Duplicate ACK #1"), while with packet loss they can reach counters above 100 in real bad cases.</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>28 Jan '14, 02:13</strong></p><img src="https://secure.gravatar.com/avatar/c578ba2967741f25aebd6afef702f432?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Jasper&#39;s gravatar image" /><p><span>Jasper ♦♦</span><br />
<span class="score" title="23806 reputation points"><span>23.8k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="51 badges"><span class="silver">●</span><span class="badgecount">51</span></span><span title="284 badges"><span class="bronze">●</span><span class="badgecount">284</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Jasper has 263 accepted answers">18%</span></p></div></div><div id="comments-container-29225" class="comments-container"><span id="29227"></span><div id="comment-29227" class="comment"><div id="post-29227-score" class="comment-score"></div><div class="comment-text"><p>Hi Jasper,</p><p>Thanks for your response. I should have mentioned that I am capturing the packets at the receiver side, and in the wireshark logs I see that the receiver is sending duplicate ACKs even though no sequence numbers are missing. The duplicate ACK count goes to 15. What could be other scenarios where duplicate ACKs are sent? Please let me know if there is some way I can upload the wireshark logs for you or other members to have a look.</p><p>Thanks, Saurabh</p></div><div id="comment-29227-info" class="comment-info"><span class="comment-age">(28 Jan '14, 02:33)</span> <span class="comment-user userinfo">saurabhklr</span></div></div><span id="29229"></span><div id="comment-29229" class="comment"><div id="post-29229-score" class="comment-score">1</div><div class="comment-text"><p>You could upload the trace to <a href="http://www.cloudshark.org">http://www.cloudshark.org</a> and post the link.</p></div><div id="comment-29229-info" class="comment-info"><span class="comment-age">(28 Jan '14, 02:36)</span> <span class="comment-user userinfo">Jasper ♦♦</span></div></div><span id="29231"></span><div id="comment-29231" class="comment"><div id="post-29231-score" class="comment-score"></div><div class="comment-text"><p>I have uploaded the file at <a href="http://www.cloudshark.org/captures/67e2d1911ecd">http://www.cloudshark.org/captures/67e2d1911ecd</a> Please have a look at packet number 115, duplicate Acks are sent for sequence number 40441, which has already been received at #100. Am I missing something here?</p></div><div id="comment-29231-info" class="comment-info"><span class="comment-age">(28 Jan '14, 03:02)</span> <span class="comment-user userinfo">saurabhklr</span></div></div><span id="29232"></span><div id="comment-29232" class="comment not_top_scorer"><div id="post-29232-score" class="comment-score"></div><div class="comment-text"><p>Small clarrification: the dup ACKs are for packet #99, not #100 (in case that was what you meant).</p><p>Other than that I do not really see a reason for those duplicate acks, which is quite odd. They're not fully duplicated packets (which would be a capture setup problem) since the IP-ID is different (incremented by 1 each), so it looks like the receiver is kind of getting nervous for no reason at all (timings are too fast for impatience).</p><p>Also, neither Window size nor any other detail seems to change in the dup ACKs, so unless I am overlooking something (which is not impossible) the TCP stack of 192.168.4.12 is behaving strangly.</p></div><div id="comment-29232-info" class="comment-info"><span class="comment-age">(28 Jan '14, 03:19)</span> <span class="comment-user userinfo">Jasper ♦♦</span></div></div><span id="29233"></span><div id="comment-29233" class="comment not_top_scorer"><div id="post-29233-score" class="comment-score"></div><div class="comment-text"><p>Thanks for looking into it. Appreciate all the help.</p></div><div id="comment-29233-info" class="comment-info"><span class="comment-age">(28 Jan '14, 03:31)</span> <span class="comment-user userinfo">saurabhklr</span></div></div><span id="29235"></span><div id="comment-29235" class="comment"><div id="post-29235-score" class="comment-score">1</div><div class="comment-text"><p>Another thought: it seems to me that the receiving device needs some ramp-up time to get ready to handle the incomming flood of packets, because after packet 148 it seems to work fine. My guess is that the device needs some time to get the internal TCP stack mechanisms organized to deal with the incoming packets, probably when channeling the data segments to the higher layers (application).</p><p>Usually, devices drop packets when they can't handle the flood at the beginning, or use low receive windows or zero window messages to slow down the sender. This behavior of this stack is still very unusual.</p></div><div id="comment-29235-info" class="comment-info"><span class="comment-age">(28 Jan '14, 03:45)</span> <span class="comment-user userinfo">Jasper ♦♦</span></div></div><span id="29236"></span><div id="comment-29236" class="comment not_top_scorer"><div id="post-29236-score" class="comment-score"></div><div class="comment-text"><p>There are duplicate ACKs again at #1397 and some more after that as well. This behavior certainly is strange. We are experencing large difference in speed of data transfer when using UDP (around 70 Mbps) as compared to TCP (around 5 Mbps). I think maybe this is one of the reasons for low throughput being achieved in case of TCP.</p></div><div id="comment-29236-info" class="comment-info"><span class="comment-age">(28 Jan '14, 04:11)</span> <span class="comment-user userinfo">saurabhklr</span></div></div><span id="29237"></span><div id="comment-29237" class="comment"><div id="post-29237-score" class="comment-score">2</div><div class="comment-text"><p>This is very common with LTE. The TCP stack generates the ACKs as usual, but they may very well be queued up for some time in LTE L2 before there is a grant to send them over the air interface is available. A Scheduling Request (SR) is sent to the network (and it may take several hundred milliseconds before the next chance rolls around). When a large enough grant does become available, it is likely that several TCP ACKs will be sent, all together, over the air.</p></div><div id="comment-29237-info" class="comment-info"><span class="comment-age">(28 Jan '14, 05:44)</span> <span class="comment-user userinfo">MartinM</span></div></div><span id="29251"></span><div id="comment-29251" class="comment not_top_scorer"><div id="post-29251-score" class="comment-score"></div><div class="comment-text"><p>It seems that the checksum of packet#100 is incorrect. So I believe this could be the reason duplicate ACKs are being sent. I am not sure, however, why the checksum would be incorrect.</p></div><div id="comment-29251-info" class="comment-info"><span class="comment-age">(28 Jan '14, 19:51)</span> <span class="comment-user userinfo">saurabhklr</span></div></div></div><div id="comment-tools-29225" class="comment-tools"><span class="comments-showing"> showing 5 of 9 </span> <a href="#" class="show-all-comments-link">show 4 more comments</a></div><div class="clear"></div><div id="comment-29225-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<span id="52219"></span>

<div id="answer-container-52219" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-52219-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-52219-score" class="post-score" title="current number of votes">0</div><span id="post-52219-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span></div></td><td><div class="item-right"><div class="answer-body"><p>Old thread I know, but I had this on a 1gbps Ethernet port which some how had been taken off auto-neg and went in at 10mbps half duplex, the symptoms were exactly as described above and probably caused by the half-duplex setting creating packet loss/retransmit , the error counters on switch in question were quite busy too.</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>04 May '16, 03:42</strong></p><img src="https://secure.gravatar.com/avatar/ba7d962e8a01fefdcb80250238a1d9b4?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Zer0kbps&#39;s gravatar image" /><p><span>Zer0kbps</span><br />
<span class="score" title="1 reputation points">1</span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Zer0kbps has no accepted answers">0%</span></p></div></div><div id="comments-container-52219" class="comments-container"></div><div id="comment-tools-52219" class="comment-tools"></div><div class="clear"></div><div id="comment-52219-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

