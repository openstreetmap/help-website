+++
type = "question"
title = "High Packet loss and retransmission seen"
description = '''Wireshaark shows hi volume of TCP flags including “TCP Previous Segment Not Captured”, “TCP Out-of-Order”, “TCP Dup Ack”, and “TCP Retransmission”. % Packets with TCP Flags % of Bytes with TCP Flags  Case 1: 50000 Max Bytes 39% 40% Case 2: 100000 Max Bytes 29% 33% Case 3: No Max Bytes (local only) 0...'''
date = "2014-03-08T09:41:00Z"
lastmod = "2014-03-10T12:38:00Z"
weight = 30602
keywords = [ "livecapturetcp" ]
aliases = [ "/questions/30602" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [High Packet loss and retransmission seen](/questions/30602/high-packet-loss-and-retransmission-seen)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-30602-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-30602-score" class="post-score" title="current number of votes">0</div><span id="post-30602-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>Wireshaark shows hi volume of TCP flags including “TCP Previous Segment Not Captured”, “TCP Out-of-Order”, “TCP Dup Ack”, and “TCP Retransmission”.</p><pre><code>% Packets with TCP Flags    % of Bytes with TCP Flags</code></pre><p>Case 1: 50000 Max Bytes 39% 40% Case 2: 100000 Max Bytes 29% 33% Case 3: No Max Bytes (local only) 0.2% 0.2%</p><p>Based on these results, it seems that the reduction of MAX Bytes Broadcasted (every 100 ms) from 100000 bytes to 50000 bytes did not have any positive effect on the reduction of the TCP packet loss. Also, it is obvious but I would like to point out that there is virtually no packet loss on local client side. (I used the packet loss term loosely due to the presence of TCP Dup Ack along with TCP Out-of-Order. It also appears that TCP Out-of-Order is sometimes indicated as TCP Retransmission.) Previously, it was expected that the reduction of the bursty nature of packets would reduce these packet losses. However, the trial of 100000 to 50000 MAX Bytes did not yield any difference. (In looking at the wireshark data at 100 ms interval, it was not immediately clear if there is any reduction in the size of the bandwidth used from 100000 to 50000 MAX Bytes. However, there was a definite reduction from previous version of the patch with the new version that supports MAX byte settting.) Once the increase of send_buffer is implemented, it would help.</p><p>I am beginning to wonder: 1. If the MAX byte setting was really enabled during the testing. 2. If there are any other issues on the WAN network such as FW module as it does the packet inspection on the traffic</p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-livecapturetcp" rel="tag" title="see questions tagged &#39;livecapturetcp&#39;">livecapturetcp</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>08 Mar '14, 09:41</strong></p><img src="https://secure.gravatar.com/avatar/dc245cc51aeac2873e38c421dacb8fb5?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="M320charles&#39;s gravatar image" /><p><span>M320charles</span><br />
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="M320charles has no accepted answers">0%</span></p></div><div class="post-update-info post-update-info-edited"><p><span> edited <strong>10 Mar '14, 09:08</strong> </span></p></div></div><div id="comments-container-30602" class="comments-container"><span id="30606"></span><div id="comment-30606" class="comment"><div id="post-30606-score" class="comment-score">1</div><div class="comment-text"><p>What exactly is your question?</p><p>It looks like you are performing some tests with different versions of patches and parameters.</p><p>Can you be more precise as to how we can be of help?</p></div><div id="comment-30606-info" class="comment-info"><span class="comment-age">(08 Mar '14, 23:20)</span> <span class="comment-user userinfo">mrEEde</span></div></div><span id="30611"></span><div id="comment-30611" class="comment"><div id="post-30611-score" class="comment-score"></div><div class="comment-text"><p>to add some questions</p><ul><li>what is your OS and OS version of the capturing system</li><li>what is your Wireshark version</li><li>what are you testing? Wireshark functionality or bugs in your software?</li></ul></div><div id="comment-30611-info" class="comment-info"><span class="comment-age">(09 Mar '14, 03:32)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="30627"></span><div id="comment-30627" class="comment"><div id="post-30627-score" class="comment-score"></div><div class="comment-text"><p>Server are Solaris 10 with 2 vm zones, client is Windows 7 with 4 XP vm's Problem is that the user is seeing hi rate of TCP retransmissions and alot of out of order packets, UDP test show 35% or better packet loss. Trying to find a solution to reduce volume of loss</p><pre><code>    % Packets with TCP Flags        % of Bytes with TCP Flags</code></pre><p>Case 1: 50000 Max Bytes 39% 40%<br />
Case 2: 100000 Max Bytes 29% 33%<br />
Case 3: No Max Bytes (local only) 0.2% 0.2%<br />
Based on these results, it seems that the reduction of MAX Bytes Broadcasted (every 100 ms) from 100000 bytes to 50000 bytes did not have any positive effect on the reduction of the TCP packet loss. Also, it is obvious but I would like to point out that there is virtually no packet loss on local client side. (I used the packet loss term loosely due to the presence of TCP Dup Ack along with TCP Out-of-Order. It also appears that TCP Out-of-Order is sometimes indicated as TCP Retransmission.) Previously, it was expected that the reduction of the bursty nature of packets would reduce these packet losses. However, the trial of 100000 to 50000 MAX Bytes did not yield any difference. (In looking at the wireshark data at 100 ms interval, it was not immediately clear if there is any reduction in the size of the bandwidth used from 100000 to 50000 MAX Bytes.</p></div><div id="comment-30627-info" class="comment-info"><span class="comment-age">(09 Mar '14, 18:37)</span> <span class="comment-user userinfo">M320charles</span></div></div><span id="30650"></span><div id="comment-30650" class="comment"><div id="post-30650-score" class="comment-score"></div><div class="comment-text"><p><img src="https://osqa-ask.wireshark.org/upfiles/50000_Summary_2.png" alt="alt text" /></p></div><div id="comment-30650-info" class="comment-info"><span class="comment-age">(10 Mar '14, 07:11)</span> <span class="comment-user userinfo">M320charles</span></div></div><span id="30651"></span><div id="comment-30651" class="comment"><div id="post-30651-score" class="comment-score"></div><div class="comment-text"><p><img src="https://osqa-ask.wireshark.org/upfiles/No_maxbyte_local_Summary_1.png" alt="alt text" /></p></div><div id="comment-30651-info" class="comment-info"><span class="comment-age">(10 Mar '14, 07:12)</span> <span class="comment-user userinfo">M320charles</span></div></div><span id="30663"></span><div id="comment-30663" class="comment not_top_scorer"><div id="post-30663-score" class="comment-score"></div><div class="comment-text"><p>Here is data from spreedsheet showing test</p></div><div id="comment-30663-info" class="comment-info"><span class="comment-age">(10 Mar '14, 12:38)</span> <span class="comment-user userinfo">M320charles</span></div></div></div><div id="comment-tools-30602" class="comment-tools"><span class="comments-showing"> showing 5 of 6 </span> <a href="#" class="show-all-comments-link">show 1 more comments</a></div><div class="clear"></div><div id="comment-30602-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

</div>

