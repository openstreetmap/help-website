+++
type = "question"
title = "Problem with Windows auto update"
description = '''Dear all, Currently, I face a big problem that cause my internet slow during window 10 auto update. How can I use the wireshark to determine the sources can block the traffic in firewall please?'''
date = "2016-07-13T21:27:00Z"
lastmod = "2016-07-14T01:31:00Z"
weight = 54053
keywords = [ "window10" ]
aliases = [ "/questions/54053" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [Problem with Windows auto update](/questions/54053/problem-with-windows-auto-update)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-54053-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-54053-score" class="post-score" title="current number of votes">0</div><span id="post-54053-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>Dear all, Currently, I face a big problem that cause my internet slow during window 10 auto update. How can I use the wireshark to determine the sources can block the traffic in firewall please?</p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-window10" rel="tag" title="see questions tagged &#39;window10&#39;">window10</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>13 Jul '16, 21:27</strong></p><img src="https://secure.gravatar.com/avatar/d3c8471ed2272b83487ee98acac23bbf?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="sophea&#39;s gravatar image" /><p><span>sophea</span><br />
<span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="sophea has no accepted answers">0%</span></p></div><div class="post-update-info post-update-info-edited"><p><span> edited <strong>14 Jul '16, 00:37</strong> </span></p><img src="https://secure.gravatar.com/avatar/00fc6e2633725bd871ff636f0175eabc?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="sindy&#39;s gravatar image" /><p><span>sindy</span><br />
<span class="score" title="6049 reputation points"><span>6.0k</span></span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="8 badges"><span class="silver">●</span><span class="badgecount">8</span></span><span title="51 badges"><span class="bronze">●</span><span class="badgecount">51</span></span></p></div></div><div id="comments-container-54053" class="comments-container"><span id="54056"></span><div id="comment-54056" class="comment"><div id="post-54056-score" class="comment-score"></div><div class="comment-text"><p>Your question is not clear. Do you want to identify a cause of the slowdown or to block the Windows update download using a firewall, so you want to use Wireshark to find out which traffic to block?</p><p>Wireshark can show you what happens but not why. So if you can capture the traffic at both sides of the firewall, you can find out which packets the firewall has filtered out by comparing the traces. You can also use wireshark capture at your PC to estimate the real downlink speed of your internet connection - a slow real downlink speed may be the actual reason of the slowdown during Windows upgrade download, as the other data hardly squeeze into the bandwidth almost fully occupied by the file transfer.</p></div><div id="comment-54056-info" class="comment-info"><span class="comment-age">(14 Jul '16, 00:50)</span> <span class="comment-user userinfo">sindy</span></div></div><span id="54057"></span><div id="comment-54057" class="comment"><div id="post-54057-score" class="comment-score"></div><div class="comment-text"><p>Dear sir,</p><p>Yes, I am a beginner using wireshark. I just want to know command/filter option how to find the window update package and its sources?</p><p>If I know the sources that window client download from, so I can block the port, services or its source IP address in my firewall filter rule.</p></div><div id="comment-54057-info" class="comment-info"><span class="comment-age">(14 Jul '16, 01:08)</span> <span class="comment-user userinfo">sophea</span></div></div><span id="54059"></span><div id="comment-54059" class="comment"><div id="post-54059-score" class="comment-score">1</div><div class="comment-text"><p>In the first step, a filter option is not what you need. You'd have to close all applications except Wireshark so that background updates would be the only cause of network traffic (Windows update but possibly also non-Microsoft applications), take a capture and see the list of conversations (in GUI Wireshark, you'd go <code>Statistics -&gt; Conversations -&gt; TCP</code>). The Windows update should be the conversation which shows the most bytes towards your PC's IP address.</p><p>Alternatively, you might disconnect the PC from the LAN, reboot it and start capturing right after connecting the LAN back, so that you could inspect the DNS requests sent and possibly find some queries containing <code>microsoft</code> as part of the queried fqdn. The reboot is necessary to make sure that the upgrade will start from the very beginning, using a dns query first in order to determine the server IP.</p><p>But I suspect Microsoft engineers to use a resiliency scheme, i.e. to run multiple sites hosting the files to be downloaded for upgrade, so that the PC could use another site if the chosen one is unreachable. So preventing access to a single IP may not be sufficient to stop the Windows upgrade. And there may be tens to hundreds of them in various subnets.</p></div><div id="comment-54059-info" class="comment-info"><span class="comment-age">(14 Jul '16, 01:31)</span> <span class="comment-user userinfo">sindy</span></div></div></div><div id="comment-tools-54053" class="comment-tools"></div><div class="clear"></div><div id="comment-54053-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

</div>

