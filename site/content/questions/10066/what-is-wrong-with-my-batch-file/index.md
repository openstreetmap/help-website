+++
type = "question"
title = "What is wrong with my batch file?"
description = '''I have just purchased a new computer with windows 7 and 4GByte RAM. I have installed java.jar version 6 (as directed by osm-instructions! I have installed josm-latest.jar to C:osm&#92; josm-latest.jar starts and runs without any problem: i.e. as expected! I have created a batch file josm.bat in C:osm to...'''
date = "2012-01-19T17:19:00Z"
lastmod = "2012-05-21T13:41:00Z"
weight = 10066
keywords = [ "josm", "xmx", "batch", "java" ]
aliases = [ "/questions/10066" ]
osqa_answers = 4
osqa_accepted = false
+++

<div class="headNormal">

# [What is wrong with my batch file?](/questions/10066/what-is-wrong-with-my-batch-file)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-10066-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-10066-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-10066-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
&#10;</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>I have just purchased a new computer with windows 7 and 4GByte RAM.</p>
<p>I have installed java.jar version 6 (as directed by osm-instructions!</p>
<p>I have installed josm-latest.jar to C:osm\</p>
<p>josm-latest.jar starts and runs without any problem: i.e. as expected!</p>
<p>I have created a batch file josm.bat in C:osm to invoke the Xmx option but it does not work and I cannot figure out why.</p>
<p><img src="http://help.openstreetmap.org/upfiles/Capture.PNG" alt="alt text" /></p>
<p>Whats wrong? For any advice I will be very grateful</p>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-josm" rel="tag" title="see questions tagged &#39;josm&#39;">josm</span> <span class="post-tag tag-link-xmx" rel="tag" title="see questions tagged &#39;xmx&#39;">xmx</span> <span class="post-tag tag-link-batch" rel="tag" title="see questions tagged &#39;batch&#39;">batch</span> <span class="post-tag tag-link-java" rel="tag" title="see questions tagged &#39;java&#39;">java</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>19 Jan '12, 17:19</strong></p>
<img src="https://secure.gravatar.com/avatar/cd4569f9fa1aac11eb6b19d6de309ea6?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="dcp&#39;s gravatar image" />
<p><span>dcp</span><br />
<span class="score" title="721 reputation points">721</span><span title="37 badges"><span class="badge1">●</span><span class="badgecount">37</span></span><span title="44 badges"><span class="silver">●</span><span class="badgecount">44</span></span><span title="56 badges"><span class="bronze">●</span><span class="badgecount">56</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="dcp has no accepted answers">0%</span></p>
</img>
</div>
</div>
<div id="comments-container-10066" class="comments-container">
<span id="10067"></span>
<div id="comment-10067" class="comment">
<div id="post-10067-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>What is the output when you type "java -version" ?</p>
<p>Do you have Win7 and Java as 32bit or 64bit version?</p>
</div>
<div id="comment-10067-info" class="comment-info">
<span class="comment-age">(19 Jan '12, 17:24)</span> <span class="comment-user userinfo">stephan75</span>
</div>
</div>
<span id="10070"></span>
<div id="comment-10070" class="comment">
<div id="post-10070-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>java -version does not pass the version but replies with the same text as above i.e. `java´ is not recognised.......... I don't know how to determine whether I have 32bit or 64bit versions. I am still looking. It seems that my batch file can´t find java. I just don´t know!</p>
</div>
<div id="comment-10070-info" class="comment-info">
<span class="comment-age">(19 Jan '12, 17:56)</span> <span class="comment-user userinfo">dcp</span>
</div>
</div>
</div>
<div id="comment-tools-10066" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-10066-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

4 Answers:

</div>

</div>

<span id="10068"></span>

<div id="answer-container-10068" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-10068-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-10068-score" class="post-score" title="current number of votes">
3
</div>
<span id="post-10068-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>I am using this: <code>start java.exe -Xmx1024M -jar josm-%downloadFileVersion%.jar</code> and it works.<br />
Your problem might be that java directory is not in PATH (try writng set PATH). Add it to PATH or use full path for java (C:Program Files...java.exe).</p>
<p>The whole starting script:</p>
<pre><code>@echo off
rem default settings
&#10;set downloadFileVersion=tested
set runTracerServer=true
&#10;rem read parameters
:Loop
IF &quot;%1&quot;==&quot;&quot; GOTO Continue
&#10;    echo %1
    GOTO %1
&#10;    :/latest
        set downloadFileVersion=latest
        goto :END_SWITCH
&#10;    :/noupdate
        goto runapps
&#10;    :/notracer
    set runTracerServer=false
        goto :END_SWITCH
&#10;    :/help
        echo:JOSM starter script
        echo:starts JOSM tested or latest version, updates the program if needed. 
        echo:keeps all settings in the directory from where it was started
        echo:run [/latest] [/notracer] [/help] [/noupdate]
        echo:    /latest    runs latest version instead of tested
        echo:    /notracer  does not run tracer server
        echo:    /help  displays this help
        echo:    /noupdate  does not run update, any parameters after this one are ignored
        goto end
&#10;    :/?
    goto /help
&#10;    :-?
        goto /help
&#10;    :-help
        goto /help
&#10;    GOTO END_SWITCH
    :END_SWITCH
SHIFT
GOTO Loop
:Continue
&#10;echo:Setting up settings + plugin location
set APPDATA=appdata
echo:set to %APPDATA%
&#10;echo:Determining actual %downloadFileVersion% version number (server)
curl http://josm.openstreetmap.de/%downloadFileVersion% -verbose -o %downloadFileVersion%.txt
set /p serverVersion=&lt;%downloadFileVersion%.txt
&#10;echo:Determining current version
java.exe -Xmx1024M -jar josm-%downloadFileVersion%.jar -? | findstr /C:&quot;Revision&quot; &gt; current.txt
set /p temp=&lt;current.txt
set currentVersion=%temp:~10,4%
&#10;echo Server %downloadFileVersion%: %serverVersion%
echo Local %downloadFileVersion%: %currentVersion%
&#10;set /a diffVersion=serverVersion-currentVersion
echo Difference: %diffVersion%
&#10;if %diffVersion% == 0 (
    echo:JOSM is up to date 
    goto runapps
) else (
    echo:Update or downgrade needed
)
&#10;echo:Downloading latest version
rem Download to temporary file, then copy and remove - to prevent file corruption when download fails
curl http://josm.openstreetmap.de/download/josm-%downloadFileVersion%.jar -o josm-%downloadFileVersion%-download.jar
rem todo - check download success
move /Y josm-%downloadFileVersion%-download.jar josm-%downloadFileVersion%.jar
del josm-%downloadFileVersion%-download.jar
&#10;:runapps
&#10;echo:Starting JOSM 
start java.exe -Xmx1024M -jar josm-%downloadFileVersion%.jar
&#10;if %runTracerServer% == true (
    echo:Starting tracer server
    start TracerServer\bin\Osm.Kn.Trace.Server.exe
)
&#10;rem pause
&#10;rem Delete temporary files
del %downloadFileVersion%.txt
del current.txt
&#10;:end</code></pre>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>19 Jan '12, 17:32</strong></p>
<img src="https://secure.gravatar.com/avatar/15c1efc9ebb466f69907a3e85693e739?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="LM_1&#39;s gravatar image" />
<p><span>LM_1</span><br />
<span class="score" title="3287 reputation points"><span>3.3k</span></span><span title="33 badges"><span class="badge1">●</span><span class="badgecount">33</span></span><span title="51 badges"><span class="silver">●</span><span class="badgecount">51</span></span><span title="88 badges"><span class="bronze">●</span><span class="badgecount">88</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="LM_1 has 7 accepted answers">10%</span> </br></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> edited <strong>19 Jan '12, 17:40</strong> </span></p>
</div>
</div>
<div id="comments-container-10068" class="comments-container">
<span id="10071"></span>
<div id="comment-10071" class="comment">
<div id="post-10071-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Wow! This is a above my level of competance!</p>
<p>I can´t even figure out what this batch file will do!</p>
</div>
<div id="comment-10071-info" class="comment-info">
<span class="comment-age">(19 Jan '12, 17:58)</span> <span class="comment-user userinfo">dcp</span>
</div>
</div>
<span id="10097"></span>
<div id="comment-10097" class="comment">
<div id="post-10097-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>It downloads (updates) the latest or tested version if it there is one available and starts JOSM. Plus it starts tracer server, but that is really useful only in the Czech Republic.</p>
</div>
<div id="comment-10097-info" class="comment-info">
<span class="comment-age">(20 Jan '12, 10:20)</span> <span class="comment-user userinfo">LM_1</span>
</div>
</div>
</div>
<div id="comment-tools-10068" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-10068-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="10069"></span>

<div id="answer-container-10069" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-10069-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-10069-score" class="post-score" title="current number of votes">
3
</div>
<span id="post-10069-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>LM_1 has provided an interesting, if lengthy batch file. Mine, on 64 bit Windows 7, simply reads:</p>
<pre><code>C:\Windows\SysWOW64\java -Xmx1500m -jar C:\Users\Ed\Downloads\JOSM\josm-latest.jar</code></pre>
<p>Which I think is "using the full path" as he suggested:</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>19 Jan '12, 17:44</strong></p>
<img src="https://secure.gravatar.com/avatar/f25a8392e12ed696b16554b3d08e4e2b?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="EdLoach&#39;s gravatar image" />
<p><span>EdLoach ♦</span><br />
<span class="score" title="19478 reputation points"><span>19.5k</span></span><span title="16 badges"><span class="badge1">●</span><span class="badgecount">16</span></span><span title="156 badges"><span class="silver">●</span><span class="badgecount">156</span></span><span title="280 badges"><span class="bronze">●</span><span class="badgecount">280</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="EdLoach has 93 accepted answers">22%</span></p>
</div>
</div>
<div id="comments-container-10069" class="comments-container">
<span id="10072"></span>
<div id="comment-10072" class="comment">
<div id="post-10072-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Are you suggesting that my batch-file should be moved to to:</p>
<p>C:WindowsSysWOW64\</p>
</div>
<div id="comment-10072-info" class="comment-info">
<span class="comment-age">(19 Jan '12, 18:06)</span> <span class="comment-user userinfo">dcp</span>
</div>
</div>
<span id="10074"></span>
<div id="comment-10074" class="comment">
<div id="post-10074-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>No. When you run the command <em>java</em> it will look for the file <em>java.exe</em> or <em>java.bat</em> in the current directory and then in the list of directories in the <em>PATH</em> variable. If it can not find the file it will print an error message.</p>
<p>If you run the command <em>C:WindowsSysWOW64java</em> it will look for the file in *C:WindowsSysWOW64*.</p>
<p>LM_1 is sugesting that you run <em>start java</em> whitch uses a different <em>PATH</em>, while EdLoach sugests that you use the full path. It does not matter where the batch file is located.</p>
<p>(Moving the batch file to *C:WindowsSysWOW64* would fix the problem.)</p>
</div>
<div id="comment-10074-info" class="comment-info">
<span class="comment-age">(19 Jan '12, 20:30)</span> <span class="comment-user userinfo">Gnonthgol ♦</span>
</div>
</div>
<span id="10085"></span>
<div id="comment-10085" class="comment">
<div id="post-10085-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>I changed my josm.bat file to : C:WindowsSysWOW64java -Xmx1024m -jar C:osmjosm-latest</p>
<p>This is what was returned: Error occurred during initialization of VM Could not reserve enough space for object heap Could not create the Java virtual machine</p>
<p>I then reduced the -Xmx requirements to 512 and this functioned.</p>
<p>But this begs the question: Why, if I buy a new computer with 6GByte of RAM, can`t I get more than 512MByte allocated. -Xmx1024m functioned on my old computer with 2GByte of RAM. Could it be that my RAM is defect?</p>
</div>
<div id="comment-10085-info" class="comment-info">
<span class="comment-age">(20 Jan '12, 06:44)</span> <span class="comment-user userinfo">dcp</span>
</div>
</div>
</div>
<div id="comment-tools-10069" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-10069-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="12842"></span>

<div id="answer-container-12842" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-12842-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-12842-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-12842-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>There is a YouTube tutorial video of CMD and Java,</p>
<p><a href="http://www.youtube.com/watch?v=Hl-zzrqQoSE">link</a></p>
<p>i hope it helps you...</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>21 May '12, 12:46</strong></p>
<img src="https://secure.gravatar.com/avatar/aa84f224b2a82f15b2a76e4c49cf1c39?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="nadi106&#39;s gravatar image" />
<p><span>nadi106</span><br />
<span class="score" title="-1 reputation points">-1</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="nadi106 has no accepted answers">0%</span></p>
</div>
</div>
<div id="comments-container-12842" class="comments-container">
<span id="12844"></span>
<div id="comment-12844" class="comment">
<div id="post-12844-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>That covers sticking Java in the path (which was the original problem) but doesn't cover 32- vs 64-bit stuff though - have a look <a href="http://answers.microsoft.com/en-us/windows/forum/windows_7-windows_programs/why-is-java-under-program-files-and-windows/58cc27a9-a4cd-4d5f-baf6-9c4fae780828">here</a> for a question on that and <a href="http://msdn.microsoft.com/en-us/magazine/cc300794.aspx">here</a> for more detailed information.</p>
<p>A stackoverflow question about the "heap" message (unfortunately without an answer to the "but I have 6Gb" issue) is <a href="http://stackoverflow.com/questions/6642184/could-not-reserve-enough-space-for-object-heap-to-start-jvm">here</a>.</p>
</div>
<div id="comment-12844-info" class="comment-info">
<span class="comment-age">(21 May '12, 13:23)</span> <span class="comment-user userinfo">SomeoneElse ♦</span>
</div>
</div>
</div>
<div id="comment-tools-12842" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-12842-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="12846"></span>

<div id="answer-container-12846" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-12846-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-12846-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-12846-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>In answer to this question:</p>
<p>'But this begs the question: Why, if I buy a new computer with 6GByte of RAM, can`t I get more than 512MByte allocated. -Xmx1024m functioned on my old computer with 2GByte of RAM. Could it be that my RAM is defect?'</p>
<p>I suspect that you need to use the 64-bit Java.exe not the 32-bit one. On my (Windows 7, 4Gb) PC 32-bit Java fails to start JOSM with 1.4Gb max allocated, but 64-bit Java has not problem with 3Gb.</p>
<p>Your 32-bit version of Java is probably installed in somewhere like:</p>
<pre><code>&quot;c:\Program Files (x86)\Java\jdk1.6.0_32\bin\&quot;
(also available via) &quot;c:\windows\syswow64\&quot;</code></pre>
<p>Your 64-bit version of Java is probably installed in somewhere like:</p>
<pre><code>&quot;C:\Program Files\Java\jre6\bin\&quot;</code></pre>
<p>Try using that to start JOSM instead.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>21 May '12, 13:41</strong></p>
<img src="https://secure.gravatar.com/avatar/0bf1aa22f7f5e045b0eb8beb79fe7907?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="SomeoneElse&#39;s gravatar image" />
<p><span>SomeoneElse ♦</span><br />
<span class="score" title="36866 reputation points"><span>36.9k</span></span><span title="71 badges"><span class="badge1">●</span><span class="badgecount">71</span></span><span title="370 badges"><span class="silver">●</span><span class="badgecount">370</span></span><span title="866 badges"><span class="bronze">●</span><span class="badgecount">866</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="SomeoneElse has 228 accepted answers">16%</span></p>
</div>
</div>
<div id="comments-container-12846" class="comments-container">
&#10;</div>
<div id="comment-tools-12846" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-12846-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

