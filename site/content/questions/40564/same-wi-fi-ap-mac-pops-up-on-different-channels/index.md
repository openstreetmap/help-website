+++
type = "question"
title = "Same Wi-Fi AP MAC pops up on different channels"
description = '''Hi, I have two APs operating on different channels and I need to do some troubleshooting in my network. I&#x27;m using Linux, capture with dumpcap and analyze with T-shark. So I have a script that scans first one channel to check a few things, then jumps to the other one and so on. The problem: I see the...'''
date = "2015-03-14T12:23:00Z"
lastmod = "2016-03-24T16:51:00Z"
weight = 40564
keywords = [ "wlan", "tshark" ]
aliases = [ "/questions/40564" ]
osqa_answers = 1
osqa_accepted = false
+++

<div class="headNormal">

# [Same Wi-Fi AP MAC pops up on different channels](/questions/40564/same-wi-fi-ap-mac-pops-up-on-different-channels)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-40564-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-40564-score" class="post-score" title="current number of votes">0</div><span id="post-40564-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>Hi, I have two APs operating on different channels and I need to do some troubleshooting in my network. I'm using Linux, capture with dumpcap and analyze with T-shark. So I have a script that scans first one channel to check a few things, then jumps to the other one and so on. The problem: I see the same AP MAC on both channels eventhough I know they're operating on different ones.</p><p>So my question is if someone knows why this happens. If I lock the radio card to monitor on say channel 1 there is no chance a packet from channel 2 could slip in as the receiver is set to only listen for preambles at channel 1. Could it be that the cash somehow has stored old packets or the driver doesn't deliver them fast enough? For fun I tried to scan on more channels and the MAC from my APs are popping up on three-four each. I'm not much of a HW person and don't know the details of how a packet is received and handled by T-shark, maybe someone else knows?</p><p>I remember that I've seen someone else having the same problem but can't find anything about it now.</p><p>Cheers! Z</p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-wlan" rel="tag" title="see questions tagged &#39;wlan&#39;">wlan</span> <span class="post-tag tag-link-tshark" rel="tag" title="see questions tagged &#39;tshark&#39;">tshark</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>14 Mar '15, 12:23</strong></p><img src="https://secure.gravatar.com/avatar/c19324dc35615378dc81ba8a3d71b0b5?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="SamA&#39;s gravatar image" /><p><span>SamA</span><br />
<span class="score" title="11 reputation points">11</span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="7 badges"><span class="silver">●</span><span class="badgecount">7</span></span><span title="13 badges"><span class="bronze">●</span><span class="badgecount">13</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="SamA has no accepted answers">0%</span></p></div><div class="post-update-info post-update-info-edited"><p><span> edited <strong>14 Mar '15, 12:25</strong> </span></p></div></div><div id="comments-container-40564" class="comments-container"><span id="40601"></span><div id="comment-40601" class="comment"><div id="post-40601-score" class="comment-score"></div><div class="comment-text"><p>Hey! I found other people with the same problem here. Does someone know what's going on or how I can solve it? <a href="https://www.wireshark.org/lists/wireshark-users/200710/msg00141.html">https://www.wireshark.org/lists/wireshark-users/200710/msg00141.html</a></p></div><div id="comment-40601-info" class="comment-info"><span class="comment-age">(15 Mar '15, 19:51)</span> <span class="comment-user userinfo">SamA</span></div></div><span id="40695"></span><div id="comment-40695" class="comment"><div id="post-40695-score" class="comment-score"></div><div class="comment-text"><p>The behaviour is normal for adjacent channels. But I would not expect to see an AP that is on channel 6 when you scan on channel 1.</p></div><div id="comment-40695-info" class="comment-info"><span class="comment-age">(19 Mar '15, 14:04)</span> <span class="comment-user userinfo">Roland</span></div></div><span id="40725"></span><div id="comment-40725" class="comment"><div id="post-40725-score" class="comment-score"></div><div class="comment-text"><p>Hi SamA, Are the AP's configured to operate on non-overlapping channels? If you are unsure, can you post what channels each AP is configured.</p></div><div id="comment-40725-info" class="comment-info"><span class="comment-age">(20 Mar '15, 06:00)</span> <span class="comment-user userinfo">Amato_C</span></div></div><span id="40812"></span><div id="comment-40812" class="comment"><div id="post-40812-score" class="comment-score"></div><div class="comment-text"><p>Hi, Thanks for your answers. My AP is configured to operate only on channel 11 with 802.11n. Could it be that beacons are sent on secondary channels for backwards compatibility reasons (with 802.11b)? Will hard code it on 802.11b tonight and check again.</p></div><div id="comment-40812-info" class="comment-info"><span class="comment-age">(24 Mar '15, 12:29)</span> <span class="comment-user userinfo">SamA</span></div></div><span id="40869"></span><div id="comment-40869" class="comment"><div id="post-40869-score" class="comment-score"></div><div class="comment-text"><p>Aha! Some testing done. When I configure my AP to run on 802.11g or 802.11n only, no SSIDs are popping up on a secondary channel. But when I'm in 11b/g/n mode a beacon pops up on the SECONDARY channel. I don't know what this channel refers to. Have to check. Some of my neighbors APs have SSIDs on adjacent channels though. This is interesting. If someone has an 802.11ac AP in the building I would die for a capture. Those are occupying 80 or 160 MHz and operate on several sub-channels. Should be beacons everywhere. If anyone has the chance, please provide a trace. I will try to find the reason for the extra beacons and post the answer here in some point. Thanks for all help and suggestions.</p></div><div id="comment-40869-info" class="comment-info"><span class="comment-age">(25 Mar '15, 17:59)</span> <span class="comment-user userinfo">SamA</span></div></div></div><div id="comment-tools-40564" class="comment-tools"></div><div class="clear"></div><div id="comment-40564-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="40813"></span>

<div id="answer-container-40813" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-40813-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-40813-score" class="post-score" title="current number of votes">0</div><span id="post-40813-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span></div></td><td><div class="item-right"><div class="answer-body"><p>The reason is, in 2.4Ghz, the channels are overlapping. Each channel is spaced at 5Mhz distance, but the bandwidth of transmitted signal is 20Mhz (for 11g/11n) or 22Mhz (11b). So there will be over lapping of 11Mhz each side from center frequency of current channel you are operating. Which will be a min of 2 channels each side.</p><p>And theorically books will say, channels 1, 6 &amp; 11 are non-overlapping. But it isn't the case. You will see the packets coming in channel-1, even in channel-11, if the signal strength is very high. That's due to side lobes spanning across.....</p><p>You will not see this problem typically in 5Ghz, as each channel is spaced at 20Mhz and bandwidth of each transmission is also 20Mhz. So the probability of overlap is very low, unless you keep both transmitted ans received very close to each other.</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>24 Mar '15, 12:41</strong></p><img src="https://secure.gravatar.com/avatar/5c59321a66976ba615e1a50b46a4d209?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Ramprasad&#39;s gravatar image" /><p><span>Ramprasad</span><br />
<span class="score" title="20 reputation points">20</span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="11 badges"><span class="silver">●</span><span class="badgecount">11</span></span><span title="15 badges"><span class="bronze">●</span><span class="badgecount">15</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Ramprasad has no accepted answers">0%</span></p></div></div><div id="comments-container-40813" class="comments-container"><span id="40868"></span><div id="comment-40868" class="comment"><div id="post-40868-score" class="comment-score"></div><div class="comment-text"><p>Hi, Thanks for your reply. I know what the channel overlap looks like, but being a radio guy means I know that the receiver only is set to listen to the center frequency of incoming signals. If your channel is 6, the energy that is captured goes through A/D conversion, filtering, decoding, demodulation, descrambling and a few other things. This means, if I transmit on channel 6 and you try to decode that signal on channel 5 you will only see noise. There is no chance you can decode the actual content and see the SSID.</p><p>This is what makes it fishy. And in some of the other similar threads I have found you also find people having the same issue at 5GHz. I'm not an expert on how the beacons are sent out in Wi-Fi, but the only explanations I can come up with are that either the AP broadcasts on adjacent channels (for backwards compatibility reasons, i.e. to "warn" other systems about its presense, OR there is an error with either of dumpcap or the monitor mode of my wireless card. Need to figure out which one it is. :)</p></div><div id="comment-40868-info" class="comment-info"><span class="comment-age">(25 Mar '15, 17:55)</span> <span class="comment-user userinfo">SamA</span></div></div><span id="40954"></span><div id="comment-40954" class="comment"><div id="post-40954-score" class="comment-score">1</div><div class="comment-text"><p>Your understanding in second paragraph is not correct. APs definitely won't beacon in overlapping/adjancent channels. It's not required at all. When clients need to connect, they scan all channels and find out where the AP is present and make a connection request.</p><p>Answer to your first paragraph point, the frequency is overlapping between chanel-5 and channel-6 and thus you can see other channel packets.</p><p>You can talk to any Wi-Fi expert and I'm sure this is the answer you will get :)</p></div><div id="comment-40954-info" class="comment-info"><span class="comment-age">(28 Mar '15, 07:52)</span> <span class="comment-user userinfo">Ramprasad</span></div></div><span id="51162"></span><div id="comment-51162" class="comment"><div id="post-51162-score" class="comment-score"></div><div class="comment-text"><p>Thanks. The only problems are: 1. I still don't believe that a beacon at channel x should be visible on channel x+1 even if they overlap. If that was the case, I would expect many more beacons (plus, that's not how OFDM decoding works). Now the beacon count on channel x+1 is maybe 5-10% of the count on channel x. And sometimes it's zero. 2. The beacons don't always pop up on the adjacent channel. Could also be that they come on a channel further away.</p><p>Have asked numerous people but noone can provide a decent explanation. Kind of weird given how much experts there must be out there.</p></div><div id="comment-51162-info" class="comment-info"><span class="comment-age">(24 Mar '16, 14:11)</span> <span class="comment-user userinfo">SamA</span></div></div><span id="51165"></span><div id="comment-51165" class="comment"><div id="post-51165-score" class="comment-score"></div><div class="comment-text"><p>SamA: 1. is definitely <em>your</em> problem and you are the only one to correct it: A DSSS (802.11b) signal is 22 MHz wide. With each Channel having a width of 5 MHz [f(Ch)=(2407+Ch<em>5)MHz for channels 1-13] this means a 802.11b signal spans 4.4 Channels. With OFDM 20 MHz channels (802.11g/n) each signal spans slightly more than 20 Hz or 4 channels. So in both cases all the wireless traces I have created in the last 17 years in the 2.4 GHz band can see beacons from ch-2, ch-1, ch, ch+1 and ch+2. This is not about believing, it's about</em> technical understanding*, and that can be grained by e.g. reading up on the wikipedia articles on ieee802.11, the ieee standards themselves (not recommended for beginners) and last but not least: Try it. Put an AP on channel 5, then put your sniffer on channels 3-7 and you will see the beacons.</p></div><div id="comment-51165-info" class="comment-info"><span class="comment-age">(24 Mar '16, 16:51)</span> <span class="comment-user userinfo">jmayer</span></div></div></div><div id="comment-tools-40813" class="comment-tools"></div><div class="clear"></div><div id="comment-40813-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

