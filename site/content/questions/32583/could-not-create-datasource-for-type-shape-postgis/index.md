+++
type = "question"
title = "Could not create datasource for type &#x27;shape&#x27; &#x27;postgis&#x27; ..."
description = '''Hi  I installed mod_tile and mapnik via github. I used the latest version of mod_tile and mapnik 2.2.3 Mapnik is generating tiles, but just when I remove the layer-tags in my mapnik.xml-file. Otherwise I get the following error messages: renderd[30711]: An error occurred while loading the map layer ...'''
date = "2014-04-23T20:53:00Z"
lastmod = "2014-04-24T13:13:00Z"
weight = 32583
keywords = [ "datasource" ]
aliases = [ "/questions/32583" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [Could not create datasource for type 'shape' 'postgis' ...](/questions/32583/could-not-create-datasource-for-type-shape-postgis)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-32583-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-32583-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-32583-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
&#10;</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>Hi</p>
<p>I installed mod_tile and mapnik via github. I used the latest version of mod_tile and mapnik 2.2.3</p>
<p>Mapnik is generating tiles, but just when I remove the layer-tags in my mapnik.xml-file.</p>
<p>Otherwise I get the following error messages:</p>
<pre><code>renderd[30711]: An error occurred while loading the map layer &#39;default&#39;: Could not create datasource for type: &#39;shape&#39;  
encountered during parsing of layer &#39;world&#39; in Layer at line 57 of &#39;/home/user/src/mapnik-style/mapnik.xml&#39;
&#10;renderd[30711]: An error occurred while loading the map layer &#39;default&#39;: Could not create datasource for type: &#39;postgis&#39;  
encountered during parsing of layer &#39;landcover&#39; in Layer at line 87 of &#39;/home/user/src/mapnik-style/mapnik.xml&#39;</code></pre>
<p>I checked the following things and everything looks good for me. Any ideas whats going wrong here?</p>
<pre><code># cat /etc/renderd.conf
[renderd]
socketname=/var/run/renderd/renderd.sock
num_threads=4
tile_dir=/var/lib/mod_tile
stats_file=/var/run/renderd/renderd.stats
[mapnik]
plugin_dir=/usr/local/lib/mapnik/input
font_dir=/usr/share/fonts/truetype
font_dir_recurse=1
[default]
URI=/osm_tiles
TILEDIR=/var/lib/mod_tile
XML=/home/user/src/mapnik-style/mapnik.xml
HOST=localhost
TILESIZE=256
&#10;# cat /home/user/src/mapnik-style/mapnik.xml
...
&lt; Layer name=&quot;vector&quot; srs=&quot;+init=epsg:4236&quot; &gt;
  &lt; StyleName &gt; polygon &lt; / StyleName &gt;
  &lt; Datasource &gt;
    &lt; Parameter name=&quot;type&quot; &gt; shape &lt; / Parameter &gt;
    &lt; Parameter name=&quot;file&quot; &gt; shape/simplified_land_polygons.shp &lt; / Parameter &gt;
  &lt; / Datasource &gt;
&lt; / Layer &gt;
...
&#10;# ls -l  /usr/local/lib/mapnik/input/
-rwxrwxr-x 1 root root 1877090 Apr 23 18:53 gdal.input
-rwxrwxr-x 1 root root 2035952 Apr 23 18:53 ogr.input
-rwxrwxr-x 1 root root 1979191 Apr 23 18:53 postgis.input
-rwxrwxr-x 1 root root 1946084 Apr 23 18:53 raster.input
-rwxrwxr-x 1 root root 3945430 Apr 23 18:53 shape.input
-rwxrwxr-x 1 root root 1981870 Apr 23 18:53 sqlite.input
&#10;# cat /usr/lib/python2.7/dist-packages/mapnik/paths.py
 &quot;&quot;&quot;Configuration paths of Mapnik fonts and input plugins (auto-generated by SCons).&quot;&quot;&quot;
from os.path import normpath,join,dirname 
 mapniklibpath = &#39;/usr/local/lib/mapnik&#39;
 mapniklibpath = normpath(join(dirname(__file__),mapniklibpath))
 inputpluginspath = join(mapniklibpath,&#39;input&#39;)
fontscollectionpath = join(mapniklibpath,&#39;fonts&#39;)
__all__ = [mapniklibpath,inputpluginspath,fontscollectionpath]
&#10;# python -c &quot;from mapnik import DatasourceCache as c; print &#39;,&#39;.join(c.plugin_names())&quot;                   
gdal,ogr,postgis,raster,shape,sqlite</code></pre>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-datasource" rel="tag" title="see questions tagged &#39;datasource&#39;">datasource</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>23 Apr '14, 20:53</strong></p>
<img src="https://secure.gravatar.com/avatar/3f5cc321ad7349ecfe706b4ccdc6a1e9?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="wqeqew&#39;s gravatar image" />
<p><span>wqeqew</span><br />
<span class="score" title="41 reputation points">41</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="5 badges"><span class="bronze">●</span><span class="badgecount">5</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="wqeqew has no accepted answers">0%</span></p>
</div>
</div>
<div id="comments-container-32583" class="comments-container">
<span id="32599"></span>
<div id="comment-32599" class="comment">
<div id="post-32599-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>mapnik installed everyhing under /usr/local/lib/mapnik but datasource_cache.cpp tried to load the input-files from /usr/local/lib64/mapnik.</p>
<p>A link or a change in the source code helped here: /usr/local/lib64/mapnik -&gt; /usr/local/lib/mapnik</p>
</div>
<div id="comment-32599-info" class="comment-info">
<span class="comment-age">(24 Apr '14, 13:13)</span> <span class="comment-user userinfo">wqeqew</span>
</div>
</div>
</div>
<div id="comment-tools-32583" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-32583-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

</div>

