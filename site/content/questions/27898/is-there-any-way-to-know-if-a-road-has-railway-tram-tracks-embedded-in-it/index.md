+++
type = "question"
title = "Is there any way to know if a road has railway (tram) tracks embedded in it?"
description = '''The recommended way to specify that a road has tram tracks embedded is to &quot;draw a new way for the tram tracks but reuse the nodes as the street where they run completely parallel.&quot; (Tram Wiki Page)  My question now is, if I want to mark a road as &#x27;dangerous for cycling&#x27; because it has embedded tram ...'''
date = "2013-11-08T10:33:00Z"
lastmod = "2013-11-11T09:32:00Z"
weight = 27898
keywords = [ "tram", "shared", "railway", "tagging", "embedded" ]
aliases = [ "/questions/27898" ]
osqa_answers = 3
osqa_accepted = false
+++

<div class="headNormal">

# [Is there any way to know if a road has railway (tram) tracks embedded in it?](/questions/27898/is-there-any-way-to-know-if-a-road-has-railway-tram-tracks-embedded-in-it)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-27898-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-27898-score" class="post-score" title="current number of votes">
4
</div>
<span id="post-27898-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
1
</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>The recommended way to specify that a road has tram tracks embedded is to "draw a new way for the tram tracks but reuse the nodes as the street where they run completely parallel." (<a href="https://wiki.openstreetmap.org/wiki/Tram">Tram Wiki Page</a>)<br />
</p>
<p>My question now is, if I want to mark a road as 'dangerous for cycling' because it has embedded tram tracks (just an exaple) how can I get that information?</p>
<p>Is there any relation, or tag <em>on the street edge</em> that can be used to specify/know if there are tracks in it?</p>
<p>Thanks</p>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-tram" rel="tag" title="see questions tagged &#39;tram&#39;">tram</span> <span class="post-tag tag-link-shared" rel="tag" title="see questions tagged &#39;shared&#39;">shared</span> <span class="post-tag tag-link-railway" rel="tag" title="see questions tagged &#39;railway&#39;">railway</span> <span class="post-tag tag-link-tagging" rel="tag" title="see questions tagged &#39;tagging&#39;">tagging</span> <span class="post-tag tag-link-embedded" rel="tag" title="see questions tagged &#39;embedded&#39;">embedded</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>08 Nov '13, 10:33</strong></p>
<img src="https://secure.gravatar.com/avatar/a68fa05bfe3350374945749f1fce99ea?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="marcoq&#39;s gravatar image" />
<p><span>marcoq</span><br />
<span class="score" title="71 reputation points">71</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="5 badges"><span class="bronze">●</span><span class="badgecount">5</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="marcoq has no accepted answers">0%</span> </br></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> edited <strong>08 Nov '13, 13:53</strong> </span></p>
</div>
</div>
<div id="comments-container-27898" class="comments-container">
&#10;</div>
<div id="comment-tools-27898" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-27898-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

3 Answers:

</div>

</div>

<span id="27916"></span>

<div id="answer-container-27916" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-27916-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-27916-score" class="post-score" title="current number of votes">
3
</div>
<span id="post-27916-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>In the Netherlands it is common to map embedded tram tracks in a single way as the highway, and it is rendered without problems on Mapnik, see <a href="https://www.openstreetmap.org/browse/way/7372002">https://www.openstreetmap.org/browse/way/7372002</a> So I dont understand why this method isn't recommended in the wiki.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>08 Nov '13, 18:26</strong></p>
<img src="https://secure.gravatar.com/avatar/0f5ffc3756c4662b9dfad80b7665ac6c?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="ligfietser&#39;s gravatar image" />
<p><span>ligfietser</span><br />
<span class="score" title="2894 reputation points"><span>2.9k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="27 badges"><span class="silver">●</span><span class="badgecount">27</span></span><span title="57 badges"><span class="bronze">●</span><span class="badgecount">57</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="ligfietser has 8 accepted answers">11%</span></p>
</div>
</div>
<div id="comments-container-27916" class="comments-container">
&#10;</div>
<div id="comment-tools-27916" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-27916-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="27905"></span>

<div id="answer-container-27905" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-27905-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-27905-score" class="post-score" title="current number of votes">
2
</div>
<span id="post-27905-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>AFAIK, no official way to represent this configuration on the map.</p>
<p>Drawing two ways, one for the road, the other for the tram track, reusing the nodes where they overlap <strong>will</strong> trigger the "overlapping ways" validation warning in JOSM. Other mappers will be tempted to "fix" it. Also, they are two different, separate ways from the point of view of routing software.</p>
<p>Drawing two ways as above, but not reusing the nodes is even worse, because there will not be even the hint of the overlapping segments telling that there are two ways there, one for the trams and other for the vehicles. Software will try to "get" the nearest way from your point of view, and will select one of the two, since it is very hard to manually adjust two ways to exactly the same coordinates. Probably will trigger lots of "crossing ways" validation warnings.</p>
<p>Drawing one way with both the railway and highway tags set is not recommended as per the wiki page, but I could not find exactly why for the specific case of street that have the tram line embedded. I believe that the main reason is because it would be difficult for the rendering software to decide what to render (if the highway, the tram line would appear broken, else the street would). And I think, why not, since the street and the embedded tram line effectively <em>use the same space on the ground</em>? Also, for bus lines, there is already the "lanes:psv" (and other tags) to represent multiple types of vehicles sharing the same way.</p>
<p>Drawing parallel, but not overlapping ways would be right only when the tram line and the street didn't share the same physical space, i.e. no cars/pedestrians allowed over the rails and (obviously) no trams running over the street...</p>
<p>In short, if I had to choose, I would pick the third option, because, even if it makes things difficult for the rendering software, is the best form to allow for the fact that both share the same physical space on the ground.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>08 Nov '13, 13:23</strong></p>
<img src="https://secure.gravatar.com/avatar/94b019f273c04cd88bc1c8dd0a8f2161?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="MCPicoli&#39;s gravatar image" />
<p><span>MCPicoli</span><br />
<span class="score" title="2172 reputation points"><span>2.2k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="30 badges"><span class="silver">●</span><span class="badgecount">30</span></span><span title="47 badges"><span class="bronze">●</span><span class="badgecount">47</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="MCPicoli has 10 accepted answers">24%</span></p>
</div>
</div>
<div id="comments-container-27905" class="comments-container">
<span id="27907"></span>
<div id="comment-27907" class="comment">
<div id="post-27907-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>I agree using both the railway and highway tags seems to be the better solution, even after considering the shortcomings listed here (<a href="/questions/2306/what-is-the-proper-way-to-tag-tram-tracks-embedded-in-a-street).">https://help.openstreetmap.org/questions/2306/what-is-the-proper-way-to-tag-tram-tracks-embedded-in-a-street).</a> Using both tags would be coherent with the way cycleways and lanes are handled: adding cycleway=lane if shared, or creating a new way with highway=cycleway if separated, and using the oneway:bicycle for conflicts. (<a href="https://wiki.openstreetmap.org/wiki/Bicycle)">https://wiki.openstreetmap.org/wiki/Bicycle)</a><br />
Anyway, yes, I understand the reasons for the discussion.</p>
</div>
<div id="comment-27907-info" class="comment-info">
<span class="comment-age">(08 Nov '13, 13:51)</span> <span class="comment-user userinfo">marcoq</span>
</div>
</div>
<span id="27909"></span>
<div id="comment-27909" class="comment">
<div id="post-27909-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Is there any tag the can be added to the street itself to mark that it has railway tracks (when the railway is on a different osm-way) without causing rendering problems? Or is this considered problematic because it adds semantic duplications?</p>
</div>
<div id="comment-27909-info" class="comment-info">
<span class="comment-age">(08 Nov '13, 14:15)</span> <span class="comment-user userinfo">marcoq</span>
</div>
</div>
</div>
<div id="comment-tools-27905" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-27905-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="27937"></span>

<div id="answer-container-27937" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-27937-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-27937-score" class="post-score" title="current number of votes">
1
</div>
<span id="post-27937-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>From a data processing point of view, there are several ways to attack the problem.</p>
<p>A relatively fool-proof way would probably be this:</p>
<ul>
<li>Import your data into a spatial database (e.g. use osm2pgsql to import into PostGIS)</li>
<li>To find out whether a road is "dangerous", convert the road's linear geometry into an area (called "buffering", usually with ST_BUFFER or similar), and ask the database whether there is anything called railway=tram inside that buffer.</li>
</ul>
<p>This would capture all the different ways of tram mapping, but it might require some refining (what if the tram is on a bridge over the street or what if it just crosses the street).</p>
<p>Another option is to first process all ways tagged railway=tram, split them into two-node bits ("there is a tram directly connecting node A with node B", "there is a tram directly connecting node B with node C", etc.); store that in a suitable memory structure, and when processing the roads later, simply check if any pair of two consecutive road nodes is found in your tram segment table.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>09 Nov '13, 14:52</strong></p>
<img src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Frederik%20Ramm&#39;s gravatar image" />
<p><span>Frederik Ramm ♦</span><br />
<span class="score" title="82494 reputation points"><span>82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Frederik Ramm has 417 accepted answers">23%</span> </br></p>
</div>
</div>
<div id="comments-container-27937" class="comments-container">
<span id="27965"></span>
<div id="comment-27965" class="comment">
<div id="post-27965-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Thank you for the suggestions. The problem with the buffer is that when tracks are drawn individually it's difficult to understand if they are actually in shared space, or just on the side of the road (<a href="https://www.openstreetmap.org/#map=19/45.46340/9.18864).">https://www.openstreetmap.org/#map=19/45.46340/9.18864).</a> And if I understand correctly also the second option wouldn't work in this scenario.</p>
</div>
<div id="comment-27965-info" class="comment-info">
<span class="comment-age">(11 Nov '13, 09:32)</span> <span class="comment-user userinfo">marcoq</span>
</div>
</div>
</div>
<div id="comment-tools-27937" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-27937-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

