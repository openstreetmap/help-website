+++
type = "question"
title = "Open street map use in asp.net c# web application"
description = '''Please let me know how can i use open street map in my asp.net c# web application .. can any sample demo available or not ..  i don&#x27;t use open street map so i don&#x27;t have any idea about how can i use .. '''
date = "2014-01-18T07:20:00Z"
lastmod = "2019-10-22T09:14:00Z"
weight = 29923
keywords = [ "c#", "asp.net", "c#.net" ]
aliases = [ "/questions/29923" ]
osqa_answers = 2
osqa_accepted = false
+++

<div class="headNormal">

# [Open street map use in asp.net c# web application](/questions/29923/open-street-map-use-in-aspnet-c-web-application)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-29923-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-29923-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-29923-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
&#10;</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>Please let me know how can i use open street map in my asp.net c# web application .. can any sample demo available or not ..</p>
<p>i don't use open street map so i don't have any idea about how can i use ..</p>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-c#" rel="tag" title="see questions tagged &#39;c#&#39;">c#</span> <span class="post-tag tag-link-asp.net" rel="tag" title="see questions tagged &#39;asp.net&#39;">asp.net</span> <span class="post-tag tag-link-c#.net" rel="tag" title="see questions tagged &#39;c#.net&#39;">c#.net</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>18 Jan '14, 07:20</strong></p>
<img src="https://secure.gravatar.com/avatar/a9c6c9f30638359b7c481959f088d8f3?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="shivanic77&#39;s gravatar image" />
<p><span>shivanic77</span><br />
<span class="score" title="15 reputation points">15</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="shivanic77 has no accepted answers">0%</span></p>
</div>
</div>
<div id="comments-container-29923" class="comments-container">
<span id="29927"></span>
<div id="comment-29927" class="comment">
<div id="post-29927-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>So what do you want to realise? Just displaying a map (online or offline)? Or also POI search, routing, ...? A first starting point is <a href="http://wiki.openstreetmap.org/wiki/Frameworks">http://wiki.openstreetmap.org/wiki/Frameworks</a></p>
</div>
<div id="comment-29927-info" class="comment-info">
<span class="comment-age">(18 Jan '14, 09:14)</span> <span class="comment-user userinfo">iii</span>
</div>
</div>
</div>
<div id="comment-tools-29923" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-29923-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

2 Answers:

</div>

</div>

<span id="31067"></span>

<div id="answer-container-31067" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-31067-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-31067-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-31067-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>I think your best bet is the "BruTile" library - check out <a href="http://brutile.codeplex.com/.">http://brutile.codeplex.com/.</a> There's a couple of projects linked from there that use the library so you could use them as your example code.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>26 Feb '14, 22:37</strong></p>
<img src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Frederik%20Ramm&#39;s gravatar image" />
<p><span>Frederik Ramm ♦</span><br />
<span class="score" title="82494 reputation points"><span>82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Frederik Ramm has 417 accepted answers">23%</span></p>
</div>
</div>
<div id="comments-container-31067" class="comments-container">
&#10;</div>
<div id="comment-tools-31067" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-31067-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="66870"></span>

<div id="answer-container-66870" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-66870-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-66870-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-66870-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>Hi, I made it and it works.</p>
<p>link to download File01 and File 02: <a href="http://listefacil.com.br/busca_resultados.rar">http://listefacil.com.br/busca_resultados.rar</a></p>
<p>File 01 (Busca_resultados.aspx)</p>
<pre><code>&lt;%@ Page Title=&quot;&quot; Language=&quot;C#&quot; MasterPageFile=&quot;~/ListeMasterPage.master&quot; AutoEventWireup=&quot;true&quot; CodeFile=&quot;Busca_resultados.aspx.cs&quot; Inherits=&quot;Busca_resultados&quot; %&gt;
&#10;&lt;asp:Content ID=&quot;Content1&quot; ContentPlaceHolderID=&quot;head&quot; runat=&quot;Server&quot;&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;link rel=&quot;shortcut icon&quot; type=&quot;image/x-icon&quot; href=&quot;docs/images/favicon.ico&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet@1.3.4/dist/leaflet.css&quot; integrity=&quot;sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==&quot; crossorigin=&quot;&quot;/&gt;
    &lt;script src=&quot;https://unpkg.com/leaflet@1.3.4/dist/leaflet.js&quot; integrity=&quot;sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==&quot; crossorigin=&quot;&quot;&gt;&lt;/script&gt;
&#10;    &lt;style&gt;
        html, body {
            height: 100%;
            margin: 0;
        }
        #map {
            width: 600px;
            height: 400px;
        }
    &lt;/style&gt;
&lt;/asp:Content&gt;
&lt;asp:Content ID=&quot;Content2&quot; ContentPlaceHolderID=&quot;ContentPlaceHolder1&quot; runat=&quot;Server&quot;&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;div id=&quot;map&quot; style=&quot;width: 100%; height: 350px;&quot;&gt;&lt;/div&gt;
                        &lt;script&gt;
&#10;                            var markers = L.layerGroup();
                            &lt;asp:Repeater ID=&quot;rptMarkers&quot; runat=&quot;server&quot;&gt;
                                &lt;ItemTemplate&gt;
                                        L.marker([&lt;%# Eval(&quot;emp_lat&quot;) %&gt;, &lt;%# Eval(&quot;emp_lng&quot;) %&gt;]).bindPopup(&#39;&lt;h6&gt;&lt;b&gt;&lt;%# Eval(&quot;emp_nome&quot;) %&gt;&lt;/b&gt;&lt;/h6&gt;Fone:&lt;%# Eval(&quot;emp_fone&quot;) %&gt;&lt;br&gt;&lt;br&gt;&lt;a href=empresa.aspx?emp_id=&lt;%# Eval(&quot;emp_id&quot;) %&gt;&amp;p=&lt;%# Eval(&quot;emp_plano&quot;) %&gt;&gt;VEJA MAIS DETALHES...&lt;/a&gt;&#39;).addTo(markers);
                                &lt;/ItemTemplate&gt;
                            &lt;/asp:Repeater&gt;
&#10;
                            var mbAttr = &#39;Map data &amp;copy; &lt;a href=&quot;https://www.openstreetmap.org/&quot;&gt;OpenStreetMap&lt;/a&gt; contributors, &#39; +
                                    &#39;&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/2.0/&quot;&gt;CC-BY-SA&lt;/a&gt;, &#39; +
                                    &#39;Imagery © &lt;a href=&quot;https://www.mapbox.com/&quot;&gt;Mapbox&lt;/a&gt;&#39;,
                                mbUrl = &#39;https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw&#39;;
&#10;                            var grayscale   = L.tileLayer(mbUrl, {id: &#39;mapbox.light&#39;, attribution: mbAttr}),
                                streets  = L.tileLayer(mbUrl, {id: &#39;mapbox.streets&#39;,   attribution: mbAttr});
&#10;                            var map = L.map(&#39;map&#39;, {
                                center: [&lt;%=var_lat_ini%&gt;, &lt;%=var_lng_ini%&gt;],
                                zoom: 10,
                                layers: [grayscale, markers]
                            });
&#10;                            var baseLayers = {
                                &quot;Grayscale&quot;: grayscale,
                                &quot;Streets&quot;: streets
                            };
&#10;                            var overlays = {
                                &quot;Markers&quot;: markers
                            };
&#10;                            L.control.layers(baseLayers, overlays).addTo(map);
&#10;
                        &lt;/script&gt;
&lt;/asp:Content&gt;</code></pre>
<hr />
<p>Code Behind (Busca_resultados.aspx.cs) File 02</p>
<pre><code>using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Npgsql;
using System.Data;
using System.Configuration;
&#10;public partial class Busca_resultados : System.Web.UI.Page
{
&#10;
    public string getConstr()
    {
        string conStr = ConfigurationManager.ConnectionStrings[&quot;conPostCons&quot;].ConnectionString;
        return conStr;
    }
&#10;
    public string var_lat_ini;
    public string var_lng_ini;
&#10;    protected void Page_Load(object sender, EventArgs e)
    {
&#10;        string var_txt = Request.QueryString[&quot;txt&quot;];
&#10;        if (var_txt == &quot;&quot;)
        {
&#10;
            NpgsqlConnection con = new NpgsqlConnection(getConstr());
            NpgsqlCommand cmd = new NpgsqlCommand(&quot;select tb_empresas.emp_id, tb_empresas.emp_nome, &quot; +
                &quot;tb_empresas.emp_plano, tb_empresas.emp_lat, tb_empresas.emp_lng, &quot; +
                &quot;tb_empresas.emp_logo, tb_empresas.emp_fone &quot; +
                &quot;from tb_empresas &quot; +
                &quot;where tb_empresas.uf_id=@uf_id and &quot; +
                &quot;tb_empresas.cid_id=@cid_id and &quot; +
                &quot;tb_empresas.sub_cat_id=@sub_cat_id and &quot; +
                &quot;tb_empresas.emp_plano &lt;&gt; &#39;g&#39; and &quot; +
                &quot;tb_empresas.emp_data_fim &gt;= @data_fim&quot;, con);
&#10;            try
            {
                cmd.Parameters.AddWithValue(&quot;@uf_id&quot;, Request.QueryString[&quot;uf_id&quot;]);
                cmd.Parameters.AddWithValue(&quot;@cid_id&quot;, Request.QueryString[&quot;cid_id&quot;]);
                cmd.Parameters.AddWithValue(&quot;@sub_cat_id&quot;, Request.QueryString[&quot;sub_cat_id&quot;]);
                DateTime data_fim = DateTime.Now;
                cmd.Parameters.AddWithValue(&quot;@data_fim&quot;, data_fim);
&#10;                con.Open();
                NpgsqlDataReader dr;
                dr = cmd.ExecuteReader();
&#10;
                if (dr.HasRows)
                {
                    DataTable dt = new DataTable(&quot;Tabela&quot;);
&#10;                    dt.Columns.Add(&quot;emp_id&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_nome&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_plano&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_lat&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_lng&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_fone&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_logo&quot;, typeof(string));
&#10;                    while (dr.Read())
                    {
                        dt.Rows.Add(dr[&quot;emp_id&quot;].ToString(), dr[&quot;emp_nome&quot;].ToString(), dr[&quot;emp_plano&quot;].ToString(), dr[&quot;emp_lat&quot;].ToString(), dr[&quot;emp_lng&quot;].ToString(), dr[&quot;emp_fone&quot;].ToString(), dr[&quot;emp_logo&quot;].ToString());
&#10;                        // INICIO USADO EM O OPENSTREETMAP
                        var_lat_ini = dt.Rows[0][&quot;emp_lat&quot;].ToString();
                        var_lng_ini = dt.Rows[0][&quot;emp_lng&quot;].ToString();
                        // FIM USADO COM O OPENSTREETMAP
                    }
&#10;                    rptMarkers.DataSource = dt;
                    rptMarkers.DataBind();
                }
&#10;
            }
            finally
            {
                con.Close();
            }
        }
        else
        {
            // O métdo Trim retira todos os espaços em branco a esquerda e a direita de nossa busca
            string var_busca_txt = Request.QueryString[&quot;txt&quot;].Trim();
            string uf_id = Request.QueryString[&quot;uf_id&quot;];
            string cid_id = Request.QueryString[&quot;cid_id&quot;];
&#10;            string[] separar = var_busca_txt.Split(new Char[] { &#39; &#39; });
&#10;            //organiza a busca no campo emp_info da tb_empresas
            string palavra_info = &quot;&quot;;
            foreach (string p in separar)
            {
                if (p.Trim() != &quot;&quot;)
                {
                    palavra_info = palavra_info + &quot;&#39;%&quot; + p + &quot;%&#39; or upper(emp_info) like &quot;;
                }
&#10;            }
            //tratamento da string
            int tamanho_string_info = palavra_info.Length - 25;
            palavra_info = palavra_info.Substring(0, tamanho_string_info);
&#10;
&#10;            //organiza a busca no campo emp_nome da tb_empresas
            string palavra_empresa = &quot;&quot;;
            foreach (string p in separar)
            {
                if (p.Trim() != &quot;&quot;)
                {
                    palavra_empresa = palavra_empresa + &quot;&#39;%&quot; + p + &quot;%&#39; or upper(emp_nome) like &quot;;
                }
&#10;            }
            //tratamento da string
            int tamanho_string_emp_nome = palavra_empresa.Length - 25;
            palavra_empresa = palavra_empresa.Substring(0, tamanho_string_emp_nome);
&#10;            NpgsqlConnection con = new NpgsqlConnection(getConstr());
            NpgsqlCommand cmd = new NpgsqlCommand(&quot;select tb_empresas.emp_id, tb_empresas.emp_nome, &quot; +
                &quot;tb_empresas.emp_plano, tb_empresas.emp_lat, tb_empresas.emp_lng, &quot; +
                &quot;tb_empresas.emp_logo, tb_empresas.emp_fone &quot; +
                &quot;from tb_empresas &quot; +
                &quot;where (upper(emp_info) like &quot; + palavra_info.ToUpper() +
                &quot; or (upper(emp_nome) like &quot; + palavra_empresa.ToUpper() +
                &quot;)) and tb_empresas.uf_id=@uf_id and &quot; +
                &quot;tb_empresas.cid_id=@cid_id and &quot; +
                &quot;tb_empresas.emp_plano &lt;&gt; &#39;g&#39; and &quot; +
                &quot;tb_empresas.emp_data_fim &gt;= @data_fim&quot;, con);
&#10;            try
            {
                cmd.Parameters.AddWithValue(&quot;@uf_id&quot;, uf_id);
                cmd.Parameters.AddWithValue(&quot;@cid_id&quot;, cid_id);
                DateTime data_fim = DateTime.Now;
                cmd.Parameters.AddWithValue(&quot;@data_fim&quot;, data_fim);
                con.Open();
                NpgsqlDataReader dr;
                dr = cmd.ExecuteReader();
&#10;                if (dr.HasRows)
                {
                    DataTable dt = new DataTable(&quot;Tabela&quot;);
&#10;                    dt.Columns.Add(&quot;emp_id&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_nome&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_plano&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_lat&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_lng&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_fone&quot;, typeof(string));
                    dt.Columns.Add(&quot;emp_logo&quot;, typeof(string));
&#10;                    while (dr.Read())
                    {
                        dt.Rows.Add(dr[&quot;emp_id&quot;].ToString(), dr[&quot;emp_nome&quot;].ToString(), dr[&quot;emp_plano&quot;].ToString(), dr[&quot;emp_lat&quot;].ToString(), dr[&quot;emp_lng&quot;].ToString(), dr[&quot;emp_fone&quot;].ToString(), dr[&quot;emp_logo&quot;].ToString());
&#10;                        // INICIO USADO EM O OPENSTREETMAP
                        var_lat_ini = dt.Rows[0][&quot;emp_lat&quot;].ToString();
                        var_lng_ini = dt.Rows[0][&quot;emp_lng&quot;].ToString();
                        // FIM USADO COM O OPENSTREETMAP
                    }
&#10;                    rptMarkers.DataSource = dt;
                    rptMarkers.DataBind();
                }
            }
            finally
            {
                con.Close();
            }
        }
&#10;    }
}</code></pre>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>21 Nov '18, 01:25</strong></p>
<img src="https://secure.gravatar.com/avatar/7c9aa2d7e45a31b36f0841a37e071f81?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="fbianof&#39;s gravatar image" />
<p><span>fbianof</span><br />
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="fbianof has no accepted answers">0%</span></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> edited <strong>21 Nov '18, 07:46</strong> </span></p>
<img src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="aseerel4c26&#39;s gravatar image" />
<p><span>aseerel4c26 ♦</span><br />
<span class="score" title="32615 reputation points"><span>32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div id="comments-container-66870" class="comments-container">
<span id="71258"></span>
<div id="comment-71258" class="comment">
<div id="post-71258-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Hi aseerel4c26</p>
<p>Do you have the full code?</p>
</div>
<div id="comment-71258-info" class="comment-info">
<span class="comment-age">(21 Oct '19, 23:25)</span> <span class="comment-user userinfo">vicula</span>
</div>
</div>
<span id="71260"></span>
<div id="comment-71260" class="comment">
<div id="post-71260-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p><a href="https://help.openstreetmap.org/users/17352/vicula">@vicula</a>: You probably meant to ask <a href="https://help.openstreetmap.org/users/15937/fbianof">@fbianof</a>.</p>
</div>
<div id="comment-71260-info" class="comment-info">
<span class="comment-age">(22 Oct '19, 09:14)</span> <span class="comment-user userinfo">TZorn</span>
</div>
</div>
</div>
<div id="comment-tools-66870" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-66870-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

