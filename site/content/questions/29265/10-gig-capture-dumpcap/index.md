+++
type = "question"
title = "10 gig capture dumpcap"
description = '''We are capturing 10 gig traffic with Dumpcap (the NiC being 10 Gig), is it possible to know if dumpcap is dropping packets while capturing. We are analyzing the saved captures, is there a way to know the statistics of packets dropped by the tool and not by the network (Nic, switch, wire etc) i.e tes...'''
date = "2014-01-29T02:23:00Z"
lastmod = "2014-01-29T02:23:00Z"
weight = 29265
keywords = [ "gig", "10", "packets", "dumpcap" ]
aliases = [ "/questions/29265" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [10 gig capture dumpcap](/questions/29265/10-gig-capture-dumpcap)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-29265-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>We are capturing 10 gig traffic with Dumpcap (the NiC being 10 Gig), is it possible to know if dumpcap is dropping packets while capturing. We are analyzing the saved captures, is there a way to know the statistics of <strong>packets dropped by the tool</strong> and not by the network (Nic, switch, wire etc) i.e testing the tools capabilities of capturing 10 Gig</p></div><div id="question-tags" class="tags-container tags">gig 10 packets dumpcap</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>29 Jan '14, 02:23</strong></p><img src="https://secure.gravatar.com/avatar/3e5e9d76a54debaa630d909e37048da8?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="deepacket&#39;s gravatar image" /><p>deepacket<br />
<span class="score" title="31 reputation points">31</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="deepacket has no accepted answers">0%</span></p></div><div class="post-update-info post-update-info-edited"><p>edited 29 Jan '14, 02:31</p></div></div><div id="comments-container-29265" class="comments-container"><span id="29268"></span><div id="comment-29268" class="comment"><div id="post-29268-score" class="comment-score"></div><div class="comment-text"><p>Which version of Wireshark are you using? On which OS and version? Newer versions of Dumpcap reports the number of drops reported by libpcap(what version of libpcap do you have?). As best Libpcap obviously can only report the number of packets dropped that was recived by the NIC. Libpcap 1.5.x can make use of TPACKET_V3 which currently is thought to be the most efficent method on Linux systems. ntop.orgs "direct NIC access may be better. Depending on your system packets drops can start as low as 100Mb/s.</p></div><div id="comment-29268-info" class="comment-info"><span class="comment-age">(29 Jan '14, 04:59)</span> Anders ♦</div></div><span id="29291"></span><div id="comment-29291" class="comment"><div id="post-29291-score" class="comment-score"></div><div class="comment-text"><p>Hi Anders, the version of Wireshark we are using is 1.10.2 and this is installed on a Windows server 2008 RT. Is the feature of dropped packet count that you mention also available on a windows systems. Can you kindly give more clarity on this.We are interested in knowing the packets dropped by the tool while capturing</p></div><div id="comment-29291-info" class="comment-info"><span class="comment-age">(29 Jan '14, 21:26)</span> deepacket</div></div><span id="29303"></span><div id="comment-29303" class="comment"><div id="post-29303-score" class="comment-score"></div><div class="comment-text"><p>Hi, On my machine with the development version the output of dumpcap is:</p><p>C:\xxx&gt;wireshark-gtk2\dumpcap -a duration:2 Capturing on 'Local Area Connection <em>11' File: C:\xxx\Temp\wireshark_pcapng_Local Area Connection- xxxxx Packets captured: 0 Packets received/dropped on interface 'Local Area Connection</em> xx': 0/0 (pcap:0/dumpcap:0/flushed:0/ps_ifdrop:0) (0.0%)</p><p>What is your output?</p></div><div id="comment-29303-info" class="comment-info"><span class="comment-age">(30 Jan '14, 03:40)</span> Anders ♦</div></div><span id="29306"></span><div id="comment-29306" class="comment"><div id="post-29306-score" class="comment-score"></div><div class="comment-text"><p>According to the following mail, WinPcap will not be able to capture at 10G !??!</p><blockquote><p><a href="https://www.winpcap.org/pipermail/winpcap-users/2009-May/003214.html">https://www.winpcap.org/pipermail/winpcap-users/2009-May/003214.html</a></p></blockquote><p>@deepacket: Would you please post the dumpcap output of dropped frames (see comment of @Anders) for low/medium/high utilization of a 10G link?</p><p>I'm interested where the packets get lost 'first' (winpcap driver, dumpcap buffering, disk writes, etc.) in such an environment. Thanks in advance!!!</p></div><div id="comment-29306-info" class="comment-info"><span class="comment-age">(30 Jan '14, 04:37)</span> Kurt Knochner ♦</div></div><span id="29328"></span><div id="comment-29328" class="comment"><div id="post-29328-score" class="comment-score"></div><div class="comment-text"><p>That might not be so easy to figure out.</p><p>If packets isn't fetched fast enough from the buffers on the NIC the NIC buffers will over run(that might be reported on the NIC). If packets isn't fetched fast enough from the kernel by libpcap the kernel buffer might ove run. If dumpcap isn't fetching and Writing the packets fast enough libpcaps buffer will overrun. I don't know how the capture mechanism works on Windows/winpcap so I don't know if it uses MMAP:ed buffers to reduce copying. I'm unsure how the packet drop counters are implemented in winpcap so even if packet drops are reported it's hard to know where the dropp happened. Line rate capture on 10G interface is not likely.</p></div><div id="comment-29328-info" class="comment-info"><span class="comment-age">(30 Jan '14, 12:08)</span> Anders ♦</div></div><span id="30044"></span><div id="comment-30044" class="comment not_top_scorer"><div id="post-30044-score" class="comment-score"></div><div class="comment-text"><p>Hi Anders and Kurt,</p><p>We tested with Dumpcap with all the offload functionality disabled on the NiC, but the Packet drop rate were unbearably high. Next we are thinking of using a linux system with tcpdump. Considering the efficiency that is inherent to linux we are hoping of getting better results. Howeve how do we use the TPACKET_v3 capabilities. Any help on this will be appreciated</p><p>Deepak</p></div><div id="comment-30044-info" class="comment-info"><span class="comment-age">(20 Feb '14, 07:31)</span> deepacket</div></div><span id="30047"></span><div id="comment-30047" class="comment not_top_scorer"><div id="post-30047-score" class="comment-score"></div><div class="comment-text"><p>For TPACKET_V3 capabilities you'll need to have libpcap &gt;= 1.5.0 compiled with TPACKET_V3 support, and a proper kernel of course.</p></div><div id="comment-30047-info" class="comment-info"><span class="comment-age">(20 Feb '14, 10:05)</span> Jaap ♦</div></div><span id="30080"></span><div id="comment-30080" class="comment not_top_scorer"><div id="post-30080-score" class="comment-score"></div><div class="comment-text"><p>I use Ubuntu 13.10 and get libpcap 1.5.3 from trusty</p></div><div id="comment-30080-info" class="comment-info"><span class="comment-age">(21 Feb '14, 03:41)</span> Anders ♦</div></div></div><div id="comment-tools-29265" class="comment-tools"><span class="comments-showing"> showing 5 of 8 </span> <a href="#" class="show-all-comments-link">show 3 more comments</a></div><div class="clear"></div><div id="comment-29265-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

</div>

