+++
type = "question"
title = "Run Time Error"
description = '''I am getting &quot;Run Time Error, The application has requested the Run Time to terminate the application in a unusaull way. Please contact the application administrator&quot; while it is capturing the pacjets approxmiately after two minutes.  I am running WireShark on VMware Windows Server 2003 SP2. Any ide...'''
date = "2012-05-14T15:52:00Z"
lastmod = "2012-11-02T11:27:00Z"
weight = 10972
keywords = [ "runtime", "error", "wireshark" ]
aliases = [ "/questions/10972" ]
osqa_answers = 1
osqa_accepted = false
+++

<div class="headNormal">

# [Run Time Error](/questions/10972/run-time-error)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-10972-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-10972-score" class="post-score" title="current number of votes">0</div><span id="post-10972-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>I am getting "Run Time Error, The application has requested the Run Time to terminate the application in a unusaull way. Please contact the application administrator" while it is capturing the pacjets approxmiately after two minutes.</p><p>I am running WireShark on VMware Windows Server 2003 SP2. Any idea?</p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-runtime" rel="tag" title="see questions tagged &#39;runtime&#39;">runtime</span> <span class="post-tag tag-link-error" rel="tag" title="see questions tagged &#39;error&#39;">error</span> <span class="post-tag tag-link-wireshark" rel="tag" title="see questions tagged &#39;wireshark&#39;">wireshark</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>14 May '12, 15:52</strong></p><img src="https://secure.gravatar.com/avatar/30ee8874df337a0b671bd510ea806091?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Younisg&#39;s gravatar image" /><p><span>Younisg</span><br />
<span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Younisg has no accepted answers">0%</span></p></div></div><div id="comments-container-10972" class="comments-container"><span id="15224"></span><div id="comment-15224" class="comment"><div id="post-15224-score" class="comment-score"></div><div class="comment-text"><p>I have been getting this a lot too in a VM environment with Server 2008 R2. I have 4GB of memory provisioned, and i even went to the length of setting Wireshark to roll files every 10MB (which correct me if i am wrong, but that limits the memory buffer of the capture to 10mb right?) The capture always fails within about 30 minutes, and the output file is never more than about 5MB in size (this particular crash, the output was 900kb). I can repeat this at will, no matter how I execute wireshark it always crashes within 30 minutes.</p></div><div id="comment-15224-info" class="comment-info"><span class="comment-age">(24 Oct '12, 06:04)</span> <span class="comment-user userinfo">Jeff Meden</span></div></div><span id="15333"></span><div id="comment-15333" class="comment"><div id="post-15333-score" class="comment-score"></div><div class="comment-text"><blockquote><p>(which correct me if i am wrong, but that limits the memory buffer of the capture to 10mb right?)</p></blockquote><p>That will <strong>not</strong> limit the amount of RAM wireshark needs to load, to "store" and to dissect the packets in memory. So, the longer you run Wireshark, the more memory it will allocate. Depending on the amount of bytes/s you will run out of memory in 5,10,20,30 minutes.</p></div><div id="comment-15333-info" class="comment-info"><span class="comment-age">(29 Oct '12, 04:59)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="15336"></span><div id="comment-15336" class="comment"><div id="post-15336-score" class="comment-score"></div><div class="comment-text"><p>As far as I understood an explanation by Anders Broman at Sharkfest 2012 Wireshark does not store packet bytes in memory but always reads only the currect selected frame from disk. So the memory problems are caused by meta data structures, not packet bytes, and that explains why tons of small packets get you into trouble much sooner than less but huge packets.</p></div><div id="comment-15336-info" class="comment-info"><span class="comment-age">(29 Oct '12, 06:11)</span> <span class="comment-user userinfo">Jasper ♦♦</span></div></div><span id="15353"></span><div id="comment-15353" class="comment"><div id="post-15353-score" class="comment-score"></div><div class="comment-text"><p>From above it's not clear which versions are affected we have had bugs with memory leaks in various versions so it's possible there is a bug.</p><p>But it is also a known problem that Wireshark will run out of memory eventually when the trace reaches some size. As wireshark uses memory to keep state of various protocols, conversation data, reasembly data some of the column strings. A structure per-packet (frame data) protocol-per-packet-data etc. Your milage depends of the protocol mix in the trace, your preference settings etc. So giving a size estimate is impossible.</p></div><div id="comment-15353-info" class="comment-info"><span class="comment-age">(30 Oct '12, 02:31)</span> <span class="comment-user userinfo">Anders ♦</span></div></div><span id="15354"></span><div id="comment-15354" class="comment"><div id="post-15354-score" class="comment-score"></div><div class="comment-text"><p>For long term captures or rapidly growing trace files it's recomended to use dumpcap possibly creating new files at set size as dumpcap does not exhaust the memory it <em>only</em> writes to file witout any analysis of the packet content.</p></div><div id="comment-15354-info" class="comment-info"><span class="comment-age">(30 Oct '12, 02:33)</span> <span class="comment-user userinfo">Anders ♦</span></div></div><span id="15358"></span><div id="comment-15358" class="comment not_top_scorer"><div id="post-15358-score" class="comment-score"></div><div class="comment-text"><blockquote><p>As far as I understood an explanation by Anders Broman at Sharkfest 2012 Wireshark does not store packet bytes in memory but always reads only the currect selected frame from disk.</p></blockquote><p>I wish there was a decent description of the internal data structures and the overall "data/instruction flow" within Wireshark ;-))</p><p>BTW: I was not able to find that presentation. <span>@Anders</span>, would you mind to post the link?</p><p>EDIT: Oh, you said "explanation". That possibly means a personal conversation and not a presentation, right? Anyway, the internal structure of wireshark would make up a good topic for the next sharkfest :-)</p><p>Thanks<br />
Kurt</p></div><div id="comment-15358-info" class="comment-info"><span class="comment-age">(30 Oct '12, 03:21)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="15359"></span><div id="comment-15359" class="comment not_top_scorer"><div id="post-15359-score" class="comment-score"></div><div class="comment-text"><p>Correct, it was a personal talk between me and him. But good idea... maybe we can convince Anders to do a talk about those things next Sharkfest :-)</p></div><div id="comment-15359-info" class="comment-info"><span class="comment-age">(30 Oct '12, 03:26)</span> <span class="comment-user userinfo">Jasper ♦♦</span></div></div><span id="15364"></span><div id="comment-15364" class="comment not_top_scorer"><div id="post-15364-score" class="comment-score"></div><div class="comment-text"><p>Good idea, however I think <strong>you</strong> will have to convince him, as I don't know him personally ;-)</p></div><div id="comment-15364-info" class="comment-info"><span class="comment-age">(30 Oct '12, 05:26)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="15406"></span><div id="comment-15406" class="comment not_top_scorer"><div id="post-15406-score" class="comment-score"></div><div class="comment-text"><p>There must be something more going on here. I saw this error on a Windows Server 2008 R2 machine with 32 GB of ram, after less than 30 minutes of capturing SNMP traffic (filter "udp and port 161") and it was just watching a local application that transmits at most 4000 packets/hour (yes barely 1 packet/sec). What more can I do to investigate the cause?</p></div><div id="comment-15406-info" class="comment-info"><span class="comment-age">(30 Oct '12, 19:10)</span> <span class="comment-user userinfo">Jeff Meden</span></div></div><span id="15407"></span><div id="comment-15407" class="comment not_top_scorer"><div id="post-15407-score" class="comment-score"></div><div class="comment-text"><p>What version are you running? can you try a development build?</p></div><div id="comment-15407-info" class="comment-info"><span class="comment-age">(30 Oct '12, 23:03)</span> <span class="comment-user userinfo">Anders ♦</span></div></div><span id="15502"></span><div id="comment-15502" class="comment not_top_scorer"><div id="post-15502-score" class="comment-score"></div><div class="comment-text"><p>Test with 1.8.0 RC2:</p><p>Problem signature: Problem Event Name: APPCRASH Application Name: wireshark.exe Application Version: 1.8.0.43337 Application Timestamp: 4fdf7a06 Fault Module Name: wiretap-1.8.0.dll Fault Module Version: 1.8.0.0 Fault Module Timestamp: 4fdf7918 Exception Code: c0000005 Exception Offset: 0000000000012633 OS Version: 6.1.7601.2.1.0.274.10 Locale ID: 1033</p></div><div id="comment-15502-info" class="comment-info"><span class="comment-age">(02 Nov '12, 07:28)</span> <span class="comment-user userinfo">Jeff Meden</span></div></div><span id="15507"></span><div id="comment-15507" class="comment not_top_scorer"><div id="post-15507-score" class="comment-score"></div><div class="comment-text"><p>I'm afraid that we can't do anything with that information. If you're sure you're not just running out of memory, please open a bug on Bugzilla and attach the capture file that causes the issue. If the capture contains traffic of a sensitive nature you can mark the bug private to restrict access to the core developers.</p></div><div id="comment-15507-info" class="comment-info"><span class="comment-age">(02 Nov '12, 09:43)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="15510"></span><div id="comment-15510" class="comment not_top_scorer"><div id="post-15510-score" class="comment-score"></div><div class="comment-text"><p>You can get development builds from here <a href="http://www.wireshark.org/download/automated/">http://www.wireshark.org/download/automated/</a> Test with 1.8.0 RC2: is actually pre 1.8 i.e a release candidate (RC) to 1.8.</p></div><div id="comment-15510-info" class="comment-info"><span class="comment-age">(02 Nov '12, 11:27)</span> <span class="comment-user userinfo">Anders ♦</span></div></div></div><div id="comment-tools-10972" class="comment-tools"><span class="comments-showing"> showing 5 of 13 </span> <a href="#" class="show-all-comments-link">show 8 more comments</a></div><div class="clear"></div><div id="comment-10972-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="10973"></span>

<div id="answer-container-10973" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-10973-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-10973-score" class="post-score" title="current number of votes">0</div><span id="post-10973-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span></div></td><td><div class="item-right"><div class="answer-body"><p>sounds like an "out of memory" error. Please check this:</p><ol><li>how much RAM does your system have?<br />
</li><li>how much traffic (approx. bytes) did you capture?<br />
</li><li>What kind of traffic has been captures (e.g. mainly HTTP)?<br />
</li><li>Please check the Eventlog for any detailed error messages<br />
</li></ol><p>If you have that information, you'll either figure out yourself it's a memory problem, or you're welcome to post the information here for further discussion.</p><p>Regards<br />
Kurt</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>15 May '12, 00:43</strong></p><img src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Kurt%20Knochner&#39;s gravatar image" /><p><span>Kurt Knochner ♦</span><br />
<span class="score" title="24767 reputation points"><span>24.8k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">●</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">●</span><span class="badgecount">237</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Kurt Knochner has 344 accepted answers">15%</span> </br></br></p></div></div><div id="comments-container-10973" class="comments-container"><span id="10995"></span><div id="comment-10995" class="comment"><div id="post-10995-score" class="comment-score"></div><div class="comment-text"><p>I have 2GB RAM. I had most LDAP traffic becasue server I am running on it is Domain Controller. Also after shutting down I do not see any logs in Event Logs.</p></div><div id="comment-10995-info" class="comment-info"><span class="comment-age">(15 May '12, 07:31)</span> <span class="comment-user userinfo">Younisg</span></div></div><span id="10997"></span><div id="comment-10997" class="comment"><div id="post-10997-score" class="comment-score"></div><div class="comment-text"><p>2 GByte is not "that" much.<br />
</p><ul><li>How did you capture?<br />
</li><li>With or without a capture filter ("port 389")?</li><li>How many packets did you see (approx.) before wireshark was killed.</li></ul><p>I still believe it's a memory problem.</p><p>Anyway, you'd better sniff in front of the server on a mirror/monitor port (of your switch) or with a TAP, see here: <strong><code>http://wiki.wireshark.org/CaptureSetup/Ethernet</code></strong></p></div><div id="comment-10997-info" class="comment-info"><span class="comment-age">(15 May '12, 07:50)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="12264"></span><div id="comment-12264" class="comment"><div id="post-12264-score" class="comment-score"></div><div class="comment-text"><p>Same here Wireshark 1.8 on Windows Server 2008 R2 with 2GB Memory.</p><p>"Runtime-Error after short period of capturing low volume data."</p><p>I can understand that memory can be/is an issue but there should be a warning or stopping the capture process (and then an info dialog).</p><p>But crashing is not a nice way to exit an application as it looks kind of uncontrolled behavior..</p><p>Regards, Oliver</p></div><div id="comment-12264-info" class="comment-info"><span class="comment-age">(28 Jun '12, 02:36)</span> <span class="comment-user userinfo">Posbis</span></div></div><span id="12265"></span><div id="comment-12265" class="comment"><div id="post-12265-score" class="comment-score"></div><div class="comment-text"><p>You can file a bug report at <a href="https://bugs.wireshark.org/bugzilla/">https://bugs.wireshark.org/bugzilla/</a> with a link to this question.</p><p>Regards<br />
Kurt</p></div><div id="comment-12265-info" class="comment-info"><span class="comment-age">(28 Jun '12, 03:02)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="15352"></span><div id="comment-15352" class="comment"><div id="post-15352-score" class="comment-score"></div><div class="comment-text"><p>Catching "Outof-memory" and doing something sensible is not as easy as it may seem. Earlier glib versions did not have a way of testing if memory is available. And more memory may be required to do a graceful close down.</p></div><div id="comment-15352-info" class="comment-info"><span class="comment-age">(30 Oct '12, 02:21)</span> <span class="comment-user userinfo">Anders ♦</span></div></div></div><div id="comment-tools-10973" class="comment-tools"></div><div class="clear"></div><div id="comment-10973-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

