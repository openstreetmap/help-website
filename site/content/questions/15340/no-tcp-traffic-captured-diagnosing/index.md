+++
type = "question"
title = "No TCP traffic captured?  Diagnosing?"
description = '''All I want to do is capture an ftp transaction on a private system. Strictly debug. I have a very straightforward setup: laptop -&amp;gt; laptop&#x27;s ethernet -&amp;gt; hub device running ftp client -&amp;gt; same hub device running the ftp server -&amp;gt; same hub. My laptop is a Dell XPS1530 running Windows 7 64bit...'''
date = "2012-10-29T11:39:00Z"
lastmod = "2012-10-30T05:31:00Z"
weight = 15340
keywords = [ "ftp", "tcp" ]
aliases = [ "/questions/15340" ]
osqa_answers = 3
osqa_accepted = true
+++

<div class="headNormal">

# [No TCP traffic captured? Diagnosing?](/questions/15340/no-tcp-traffic-captured-diagnosing)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-15340-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>All I want to do is capture an ftp transaction on a private system. Strictly debug. I have a very straightforward setup:</p><p>laptop -&gt; laptop's ethernet -&gt; hub device running ftp client -&gt; same hub device running the ftp server -&gt; same hub.</p><p>My laptop is a Dell XPS1530 running Windows 7 64bit, Wireshark 1.8.2. I'm using the built in ethernet port as well as another usb to ethernet adaptor (connected to another network). I've also disabled the laptop firewall completely.</p><p>The device running the ftp server transmits a periodic udp packet - these I see. However, nothing I do generates any other ethernet traffic. I would expect to see something when my windows ce device attempts to access the server. And I <em>know</em> it's generating tcp traffic.</p><p>Nothing.</p><p>Any hints as to what I'm doing wrong? I'm using the default setup, and I've used wireshark when it was ethereal with good and expected behavior. Not this time...</p></div><div id="question-tags" class="tags-container tags">ftp tcp</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>29 Oct '12, 11:39</strong></p><img src="https://secure.gravatar.com/avatar/3e7d713b41640a0764d40936b579650d?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Charles%20G&#39;s gravatar image" /><p>Charles G<br />
<span class="score" title="5 reputation points">5</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Charles G has no accepted answers">0%</span></p></div></div><div id="comments-container-15340" class="comments-container"><span id="15342"></span><div id="comment-15342" class="comment"><div id="post-15342-score" class="comment-score"></div><div class="comment-text"><p>Does this also happen when you only use the built in ethernet port and disconnect the USB adapter? Windows sometimes has a funny way of using network adapters you would not expect to be used...</p></div><div id="comment-15342-info" class="comment-info"><span class="comment-age">(29 Oct '12, 11:49)</span> Jasper ♦♦</div></div><span id="15343"></span><div id="comment-15343" class="comment"><div id="post-15343-score" class="comment-score"></div><div class="comment-text"><p>That's a great suggestion, never underestimate Windows to help you. I removed the USB, still nothing.</p><p>Now I did notice that somehow I had accumulated a number of entries in the capture filter. Removed them, still nothing. I need to do some more reading.</p></div><div id="comment-15343-info" class="comment-info"><span class="comment-age">(29 Oct '12, 13:31)</span> Charles G</div></div><span id="15501"></span><div id="comment-15501" class="comment"><div id="post-15501-score" class="comment-score"></div><div class="comment-text"><p>Okay, ebay to the rescue. I now have an OFFICIAL hub from netgear. Those suckers are hard to find. Lo and behold, I see TCP traffic now.</p><p>Thanks for all the help.</p></div><div id="comment-15501-info" class="comment-info"><span class="comment-age">(02 Nov '12, 07:23)</span> Charles G</div></div></div><div id="comment-tools-15340" class="comment-tools"></div><div class="clear"></div><div id="comment-15340-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

3 Answers:

</div>

</div>

<span id="15346"></span>

<div id="answer-container-15346" class="answer accepted-answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-15346-score" class="post-score" title="current number of votes">1</div></div></td><td><div class="item-right"><div class="answer-body"><p>So I'm assuming your setup has a hub into which:</p><ul><li>your laptop's Ethernet adapter;</li><li>the FTP client machine;</li><li>the FTP server machine</li></ul><p>are all plugged? If so, are you certain the hub really is a dumb hub rather than a switch? See, for example, the <a href="http://wiki.wireshark.org/HubReference">hub reference</a> on the Wireshark Wiki - and note also its note about dual-speed hubs. This sounds suspiciously like a switch - the periodic UDP packets might be broadcasts, which would be sent to all ports on a switch, but unicast packets, such as TCP segments, would only be sent to the port corresponding to the destination MAC address of the packet.</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>29 Oct '12, 16:51</strong></p><img src="https://secure.gravatar.com/avatar/f93de7000747ab5efb5acd3034b2ebd7?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Guy%20Harris&#39;s gravatar image" /><p>Guy Harris ♦♦<br />
<span class="score" title="17443 reputation points"><span>17.4k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="35 badges"><span class="silver">●</span><span class="badgecount">35</span></span><span title="196 badges"><span class="bronze">●</span><span class="badgecount">196</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Guy Harris has 216 accepted answers">19%</span></p></div></div><div id="comments-container-15346" class="comments-container"><span id="15361"></span><div id="comment-15361" class="comment"><div id="post-15361-score" class="comment-score"></div><div class="comment-text"><p>Guy,</p><p>All good points, yes, they are all plugged in. All network connections have IP addresses from the dhcp server. The hub comment is a good point - the ethernet chip is in an embedded system, so I'll have to check with the h/w engineer. We're not dealing with an external device.</p><p>Dual speed - they are all at 100, but I had not been aware of this.</p><p>thanks</p></div><div id="comment-15361-info" class="comment-info"><span class="comment-age">(30 Oct '12, 04:57)</span> Charles G</div></div></div><div id="comment-tools-15346" class="comment-tools"></div><div class="clear"></div><div id="comment-15346-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<span id="15350"></span>

<div id="answer-container-15350" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-15350-score" class="post-score" title="current number of votes">1</div></div></td><td><div class="item-right"><div class="answer-body"><p>Assuming that you can connect to the FTP server that sounds like a problem with the capture side of Wireshark.</p><p>A few ideas:</p><ol><li>Are you capturing in promiscous mode? (Verify with Capture -&gt; Options -&gt; [interface])</li><li>Is the WinPcap Driver properly installed and running with admin/system rights? Try <strong>sc query npf</strong> on the command line.</li><li>Do you have enough disk space? (I know, it sounds stupid. Apologies if the question offends you. Please check anyway)</li><li>Are the TCP packets recorded if you run dumpcap on the command line?</li></ol><p>Good hunting!</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>30 Oct '12, 01:34</strong></p><img src="https://secure.gravatar.com/avatar/3b60e92020a427bb24332efc0b560943?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="packethunter&#39;s gravatar image" /><p>packethunter<br />
<span class="score" title="2137 reputation points"><span>2.1k</span></span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="48 badges"><span class="bronze">●</span><span class="badgecount">48</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="packethunter has 8 accepted answers">8%</span></p></div></div><div id="comments-container-15350" class="comments-container"><span id="15362"></span><div id="comment-15362" class="comment"><div id="post-15362-score" class="comment-score"></div><div class="comment-text"><p>packethunter - my thoughts as well.</p><p>1) promiscuous - yes 2) sc query npf comes back with info, no errors. 3) disk space - no offense taken. Yes, plenty. 4) dumpcap - that I will have to try.</p></div><div id="comment-15362-info" class="comment-info"><span class="comment-age">(30 Oct '12, 05:01)</span> Charles G</div></div></div><div id="comment-tools-15350" class="comment-tools"></div><div class="clear"></div><div id="comment-15350-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<span id="15365"></span>

<div id="answer-container-15365" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-15365-score" class="post-score" title="current number of votes">0</div></div></td><td><div class="item-right"><div class="answer-body"><blockquote><p>hub device running ftp client</p></blockquote><p>'hub device'?</p><p>Are you sure this is a 'true' hub and not a 'switching hub (often printed on the backside of the product)? If it's a switching hub (actually a switch), you will only see broadcast traffic, unless you configure port mirroring.</p><p>What kind of traffic do you see, if you capture on that 'hub'?<br />
</p><p>Is it just ARP traffic and traffic to the broadcast addresses (ethernet broadcast: FF:FF:FF:FF:FF:FF and/or IP broadcast: x.x.x.255/24 or x.x.255.255/16)?</p><p>If so, the 'hub' is actually a switch and you need to replace it with a managed switch, that is able to do port mirroring (or with a real hub, or with a TAP).</p><blockquote><p><code>http://wiki.wireshark.org/CaptureSetup/Ethernet</code><br />
</p></blockquote><p>Regards<br />
Kurt</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>30 Oct '12, 05:31</strong></p><img src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Kurt%20Knochner&#39;s gravatar image" /><p>Kurt Knochner ♦<br />
<span class="score" title="24767 reputation points"><span>24.8k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">●</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">●</span><span class="badgecount">237</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Kurt Knochner has 344 accepted answers">15%</span> </br></br></p></div><div class="post-update-info post-update-info-edited"><p>edited 30 Oct '12, 05:35</p></div></div><div id="comments-container-15365" class="comments-container"><span id="15366"></span><div id="comment-15366" class="comment"><div id="post-15366-score" class="comment-score">2</div><div class="comment-text"><p>And the answer is... after working with it for 7 years... wait for it... and being told again and again and again it's a hub... yes folks, it's a switch. doh!</p><p>Okay off to learn about mirroring.</p></div><div id="comment-15366-info" class="comment-info"><span class="comment-age">(30 Oct '12, 06:45)</span> Charles G</div></div><span id="15379"></span><div id="comment-15379" class="comment"><div id="post-15379-score" class="comment-score">1</div><div class="comment-text"><blockquote><p>yes folks, it's a switch. doh!</p></blockquote><p>;-)</p></div><div id="comment-15379-info" class="comment-info"><span class="comment-age">(30 Oct '12, 09:46)</span> Kurt Knochner ♦</div></div><span id="15381"></span><div id="comment-15381" class="comment"><div id="post-15381-score" class="comment-score">1</div><div class="comment-text"><p>Don't feel bad, it can happen... but you might want to accept Guy's answer because he was the first to hint about this :-)</p></div><div id="comment-15381-info" class="comment-info"><span class="comment-age">(30 Oct '12, 09:57)</span> Jasper ♦♦</div></div><span id="15387"></span><div id="comment-15387" class="comment"><div id="post-15387-score" class="comment-score"></div><div class="comment-text"><p>yeah, but the h/w guy has been calling it a hub for a long time. Even when I said, "Is it a hub or a switch?"</p></div><div id="comment-15387-info" class="comment-info"><span class="comment-age">(30 Oct '12, 11:24)</span> Charles G</div></div><span id="15389"></span><div id="comment-15389" class="comment"><div id="post-15389-score" class="comment-score"></div><div class="comment-text"><p>Plenty of people use "hub" for small switches - after all, a "switch" is one of those big boxes that fits in a rack in the machine room, this is just a small box with 4 ports that you can put on a desk, so it's a hub, right? :-) You should tell the HW person that, <em>even if the manufacturer of the box calls it a hub</em>, it's really a switch, and explain what the distinction between a hub and a switch really is and why it's important in some cases (such as this case). Perhaps he'll tell his friends and co-workers, and eventually people will start using the terms more clearly....</p></div><div id="comment-15389-info" class="comment-info"><span class="comment-age">(30 Oct '12, 11:53)</span> Guy Harris ♦♦</div></div><span id="15392"></span><div id="comment-15392" class="comment not_top_scorer"><div id="post-15392-score" class="comment-score"></div><div class="comment-text"><blockquote><p>yeah, but the h/w guy has been calling it a hub for a long time. Even when I said, "Is it a hub or a switch?"</p></blockquote><p><strong>&lt;fun&gt;</strong><br />
If that's the case, your HW guy might need an update training on the latest network technologies ;-) Please ask him to follow this Q&amp;A site. There is a lot to learn.<br />
<strong>&lt;/fun&gt;</strong></p></div><div id="comment-15392-info" class="comment-info"><span class="comment-age">(30 Oct '12, 12:10)</span> Kurt Knochner ♦</div></div></div><div id="comment-tools-15365" class="comment-tools"><span class="comments-showing"> showing 5 of 6 </span> <a href="#" class="show-all-comments-link">show 1 more comments</a></div><div class="clear"></div><div id="comment-15365-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

