+++
type = "question"
title = "Remote User Disconnect - Log Review"
description = '''Hi Everyone, we have remote users who use a VPN and also Citrix to access our systems. Our remote users are randomly getting kicked off their VOIP calls to customers. I have setup a batch file to run on startup that will use dumpcap.exe to capture logs in 5 minute intervals to make log reviews easie...'''
date = "2016-09-12T13:09:00Z"
lastmod = "2016-09-12T13:09:00Z"
weight = 55495
keywords = [ "disconnect", "remote", "packetloss" ]
aliases = [ "/questions/55495" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [Remote User Disconnect - Log Review](/questions/55495/remote-user-disconnect-log-review)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-55495-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>Hi Everyone, we have remote users who use a VPN and also Citrix to access our systems. Our remote users are randomly getting kicked off their VOIP calls to customers. I have setup a batch file to run on startup that will use dumpcap.exe to capture logs in 5 minute intervals to make log reviews easier (hopefully).</p><p>Batch file looks like: "C:\Program Files\Wireshark\dumpcap.exe" -i 2 -b duration:300 -w C:\sharklogs\basefile.pcapng</p><p>I am currently only capturing logs from their network adapter, not the VPN virtual adapter for now.</p><p>I want to analyze the logs from an instance when a remote user gets disconnected.</p><p>The users VPN connection and Citrix do not drop, only the VOIP call and my VOIP vendor says their more sensitive to network issues then a VPN or Citrix.</p><p>So now that I have these logs being created, I am very unfamiliar with what I will actually need to look for in the logs, that verbiage I need to locate and what it means for hunting down network issues, packet loss etc. Any help would be immensely appreciated.</p></div><div id="question-tags" class="tags-container tags">disconnect remote packetloss</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>12 Sep '16, 13:09</strong></p><img src="https://secure.gravatar.com/avatar/b3a4cfbbdcb8b6c83e275540b703b1f8?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="RG-Admin&#39;s gravatar image" /><p>RG-Admin<br />
<span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="RG-Admin has no accepted answers">0%</span></p></div></div><div id="comments-container-55495" class="comments-container"><span id="55498"></span><div id="comment-55498" class="comment"><div id="post-55498-score" class="comment-score"></div><div class="comment-text"><p>Maybe its time to hire a networking professional, and force your VoIP vendor to cough up more details about what he means by being 'more sensitive to network issues'.</p></div><div id="comment-55498-info" class="comment-info"><span class="comment-age">(12 Sep '16, 15:43)</span> Jaap ♦</div></div><span id="55501"></span><div id="comment-55501" class="comment"><div id="post-55501-score" class="comment-score"></div><div class="comment-text"><p>The more details are as follows:</p><p>Latency and jitter for toll quality: &lt; 100 msecs total 100 msecs less 42 msecs allocated for the ShoreTel system yields a 58 msec budget for the network. When G.729a encoding is used, 100 msecs less 62 msecs allocation for the ShoreTel system yields a 38 msec budget for the network.</p><p>Latency and jitter for acceptable quality: &lt; 150 msecs total 150 msecs less 42 msecs allocated for the ShoreTel system yields a 108msec budget for the network. When G.729a encoding is used, 150 msecs less 62 msecs allocated for the ShoreTel system yields an 88 msec budget for the network</p><p>Packet loss: &lt; 1% for voice calls, and no packet loss for fax and modem calls</p></div><div id="comment-55501-info" class="comment-info"><span class="comment-age">(12 Sep '16, 15:51)</span> RG-Admin</div></div><span id="55604"></span><div id="comment-55604" class="comment"><div id="post-55604-score" class="comment-score"></div><div class="comment-text"><p>I have logging running full time one of my remote users PCs and have captured the logs for the disconnects. Now I need to determine how to read the logs to find relevant info. Does anyone have a link to a good guide on how to look through these to find answers?</p></div><div id="comment-55604-info" class="comment-info"><span class="comment-age">(16 Sep '16, 12:31)</span> RG-Admin</div></div><span id="55607"></span><div id="comment-55607" class="comment"><div id="post-55607-score" class="comment-score"></div><div class="comment-text"><p>I don't have any guide to link at but here are several thoughts:</p><blockquote><p>Our remote users are randomly getting kicked off their VOIP calls to customers.</p></blockquote><p>This does not seem to be related to latency or packet loss unless the latter is really heavy. Even if the audio quality is really bad (due to high packet loss or due to high "jitter" which means irregularity of latency), a VoIP call would continue until one of the parties would hang up unless the VoIP equipment monitors the voice transmission quality and actively terminates the call if the monitoring shows that a pre-set quality threshold is undershot.</p><p>In a lossy network, it may take long to set up and to hang up a call because the signalling messages get lost and have to be retransmitted, but during the call there is no <strong>mandatory</strong> signalling exchange whose failure would cause the calls to be actively dropped. However, some systems do exchange "keepalive" signalling messages mid-call only to verify that the remote party still knows about the call. But these are retransmitted using the same rules like the call set up and call hang up ones, and rarely sent more frequently than once every 5 minutes.</p><p>If people don't complain about call quality becoming terrible (not just bad) some time before the call drops, a loss of session keepalive messages is unlikely to be the reason.</p><p>So first of all ask your VoIP vendor whether the calls are dropped due to some quality monitoring system activity or session keepaliving activity. Their records should be clear about that.</p><blockquote><p>I am currently only capturing logs from their network adapter, not the VPN virtual adapter for now.</p></blockquote><p>Several points here:</p><ul><li><p>as you capture only at client end, you won't notice any eventual packet loss in the direction from client to the VPN access point</p></li><li><p>depending on your VPN type and setup, it may be hard to detect packet loss because unless the VPN uses TCP as transport, the protocol fields allowing you to identify packet relationships and sequential numbers are encrypted.</p></li><li><p>not all virtual network adapters created by the VPN client software support capturing well. On my Cisco VPN adaptor, I cannot capture anything useful although some packets can be seen. So look also for some logs of the softphone your agents run on their PCs, these might tell you something about the audio quality.</p></li></ul></div><div id="comment-55607-info" class="comment-info"><span class="comment-age">(16 Sep '16, 13:29)</span> sindy</div></div></div><div id="comment-tools-55495" class="comment-tools"></div><div class="clear"></div><div id="comment-55495-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

</div>

