+++
type = "question"
title = "RTMPT Analysis QOS"
description = '''Intro I have noticed there are analyzer tools for protocols such as RTP in the Telephony menu.  Unfortunately I have been tasks to troubleshoot a network onto which an RTMPT ( RTMP over HTTP) has been deployed. I can see the packets in the log and entries both for HTTP and RTMP. Many entries within ...'''
date = "2016-04-20T04:48:00Z"
lastmod = "2016-04-20T04:48:00Z"
weight = 51814
keywords = [ "rtmpt" ]
aliases = [ "/questions/51814" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [RTMPT Analysis QOS](/questions/51814/rtmpt-analysis-qos)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-51814-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><h1 id="intro">Intro</h1><p>I have noticed there are analyzer tools for protocols such as RTP in the Telephony menu.</p><p>Unfortunately I have been tasks to troubleshoot a network onto which an RTMPT ( RTMP over HTTP) has been deployed.</p><p>I can see the packets in the log and entries both for HTTP and RTMP. Many entries within wireshark are labelled as HTTP.</p><p>How do I extract meaningful QOS information from these "conversations" that take place between 2 IP addresses? We have delays and disconnections.</p><h1 id="clarification">Clarification</h1><p>One useful measurement is jitter but the only answer I have found is related to RTP: <a href="https://ask.wireshark.org/questions/12637/is-it-possible-to-analyze-jitter-from-the-captured-pcap-file">https://ask.wireshark.org/questions/12637/is-it-possible-to-analyze-jitter-from-the-captured-pcap-file</a></p><p><img src="http://i.imgur.com/SJbQKb5.png" alt="alt text" /></p></div><div id="question-tags" class="tags-container tags">rtmpt</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>20 Apr '16, 04:48</strong></p><img src="https://secure.gravatar.com/avatar/08f4e11a1e4b0d9c41236c50ef777e35?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="maythesource&#39;s gravatar image" /><p>maythesource<br />
<span class="score" title="6 reputation points">6</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="maythesource has no accepted answers">0%</span></p></img></div><div class="post-update-info post-update-info-edited"><p>edited 20 Apr '16, 05:15</p></div></div><div id="comments-container-51814" class="comments-container"><span id="51815"></span><div id="comment-51815" class="comment"><div id="post-51815-score" class="comment-score"></div><div class="comment-text"><p>What do you mean by "<strong>QOS</strong> information"?</p></div><div id="comment-51815-info" class="comment-info"><span class="comment-age">(20 Apr '16, 04:50)</span> Kurt Knochner ♦</div></div><span id="51816"></span><div id="comment-51816" class="comment"><div id="post-51816-score" class="comment-score"></div><div class="comment-text"><p>Well, anything that could explain why there are delays and disconnections. I'm most likely using QOS wrong but I'm a developer tasked with doing analysis. Jitter, Delay, Bit Rate, Error Rate, Throughput, Order of Delivery.</p></div><div id="comment-51816-info" class="comment-info"><span class="comment-age">(20 Apr '16, 05:05)</span> maythesource</div></div><span id="51821"></span><div id="comment-51821" class="comment"><div id="post-51821-score" class="comment-score">1</div><div class="comment-text"><p>An "ordinary" RTP prefers timely delivery to loss-free delivery of the data, therefore it uses UDP.</p><p>RTMPT uses TCP with its reliable delivery based on acknowledgements and retransmissions. Retransmissions are a more important source of jitter than the difference in delivery times of individual packets, and packet loss is a source of retransmissions.</p><p>So in your QoS analysis you should concentrate at the TCP layer, the layers above (HTTP, RTMPT) won't tell you much. If you won't lose packets on the way between source and destination, you'll get no retransmissions. If you get no retransmissions, it means you have no packet loss, and your only jitter comes from the difference of delivery times of individual packets.</p><p>Unfortunately, there is no function which would calculate jitter as a single number for a given TCP transmission, so you'll have to use <code>Statistics -&gt; I/O Graph</code> to see the regularity of TCP transmission graphically, or you'll have to use tshark to print packet timestamps and sizes into a text file and post-process that file (e.g. using a spreadsheet like Excel).</p><p>For most traditional voice codecs, RTP uses fixed packet size and the notion of jitter makes sense; with newer codecs, this may not be true, so you may have a tough time if you'd capture only at destination. Capturing at (or right next to) source and destination devices simultaneously can give you information about propagation delays of individual packets.</p><p>The last thing is that the playback device only tolerates some amount of jitter (actually, it only buffers some amount of received audio samples before actually playing them), so if the packet carrying the next data comes later than the buffer containing the current data has been exhausted, there is a gap in the playback audio; if packets come in reverse order (which may also happen), the delayed packet is usually not played at all. So what sounds like a packet loss may be just jitter, i.e. when analysing TCP at receiving side only, you also have to take care whether Seq numbers grow monotonously even if there are no retransmissions or loss.</p></div><div id="comment-51821-info" class="comment-info"><span class="comment-age">(20 Apr '16, 07:36)</span> sindy</div></div></div><div id="comment-tools-51814" class="comment-tools"></div><div class="clear"></div><div id="comment-51814-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

</div>

