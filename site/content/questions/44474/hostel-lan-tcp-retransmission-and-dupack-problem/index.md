+++
type = "question"
title = "Hostel lan TCP retransmission and DupACK problem"
description = '''I am at a college hostel. Internet service is provided by the college through HTTP proxies 10.1.1.18 and 10.1.1.19. My ip settings are IP address: 10.8.1.250 Subnet Mask: 255.255.255.0 Gateway: 10.8.1.1 The hostel network consists of distribution switches which connect the computers in a very unstru...'''
date = "2015-07-25T08:38:00Z"
lastmod = "2015-07-27T06:16:00Z"
weight = 44474
keywords = [ "lan", "retransmissions", "tcp", "packetloss" ]
aliases = [ "/questions/44474" ]
osqa_answers = 1
osqa_accepted = true
+++

<div class="headNormal">

# [Hostel lan TCP retransmission and DupACK problem](/questions/44474/hostel-lan-tcp-retransmission-and-dupack-problem)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-44474-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-44474-score" class="post-score" title="current number of votes">0</div><span id="post-44474-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>I am at a college hostel. Internet service is provided by the college through HTTP proxies 10.1.1.18 and 10.1.1.19. My ip settings are</p><p><code>IP address: 10.8.1.250 Subnet Mask: 255.255.255.0 Gateway: 10.8.1.1</code></p><p>The hostel network consists of distribution switches which connect the computers in a very unstructured manner. The (main) hostel distribution switch is connected to gateway. The proxy internet was working fine until recently when internet speed went down drastically. There is no problem with the proxies as other hostels networks using the same proxies and same structure are working fine. Also, for the same reason, broadcast packets are also not a problem.</p><p>Ironically, ping to the proxies improved when the problem occurred, earlier we used to get 3-5 ms during peak hours, but now we are getting constant &lt;1 ms. Maybe because of reduction in traffic.</p><p>There are no Computer Science students in our hostel, and we don't know much networking to solve it ourselves. What could be the problem? I started capturing packets after starting a download. I will upload the file as soon as i figure out how can it be done, until then here are some pictures</p><p>EDIT: Heres the capture <a href="https://www.cloudshark.org/captures/97f91707fccf">file</a> <img src="https://osqa-ask.wireshark.org/upfiles/Untitled_qEWGh80.png" alt="alt text" /></p><p><img src="https://osqa-ask.wireshark.org/upfiles/Untitled2_NRvWrSS.png" alt="alt text" /></p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-lan" rel="tag" title="see questions tagged &#39;lan&#39;">lan</span> <span class="post-tag tag-link-retransmissions" rel="tag" title="see questions tagged &#39;retransmissions&#39;">retransmissions</span> <span class="post-tag tag-link-tcp" rel="tag" title="see questions tagged &#39;tcp&#39;">tcp</span> <span class="post-tag tag-link-packetloss" rel="tag" title="see questions tagged &#39;packetloss&#39;">packetloss</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>25 Jul '15, 08:38</strong></p><img src="https://secure.gravatar.com/avatar/2e1559410596aabf0b48a17cf31b83fa?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Obliterator&#39;s gravatar image" /><p><span>Obliterator</span><br />
<span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="5 badges"><span class="bronze">●</span><span class="badgecount">5</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Obliterator has no accepted answers">0%</span></p></img></div><div class="post-update-info post-update-info-edited"><p><span> edited <strong>25 Jul '15, 08:44</strong> </span></p></div></div><div id="comments-container-44474" class="comments-container"><span id="44485"></span><div id="comment-44485" class="comment"><div id="post-44485-score" class="comment-score"></div><div class="comment-text"><p>Have you taken the trace at the host 10.8.1.250? Wireshark is missing some packets sometimes. So the most probable reasson is that packets are getting lost between proxy and 10.8.1.250. Also the ping shows a timeout sometimes. Seems that packet loss happens here, too.</p></div><div id="comment-44485-info" class="comment-info"><span class="comment-age">(25 Jul '15, 12:48)</span> <span class="comment-user userinfo">Christian_R</span></div></div><span id="44487"></span><div id="comment-44487" class="comment"><div id="post-44487-score" class="comment-score"></div><div class="comment-text"><p>Yes. The loss is very high. Looks like a hardware problem. I will try changing the ports and checking the input wire after I get permission from hostel warden.</p><p>Here is the trace:</p><p>C:\Users\Obliterator&gt;tracert -d 10.1.1.18</p><p>Tracing route to 10.1.1.18 over a maximum of 30 hops</p><p>1 &lt;1 ms &lt;1 ms &lt;1 ms 10.8.1.1</p><p>2 &lt;1 ms &lt;1 ms &lt;1 ms 10.0.0.1</p><p>3 * * * Request timed out.</p><p>4 &lt;1 ms * &lt;1 ms 10.1.1.18</p><p>Trace complete.</p><p>C:\Users\Obliterator&gt;tracert -d 10.1.1.19</p><p>Tracing route to 10.1.1.19 over a maximum of 30 hops</p><p>1 &lt;1 ms &lt;1 ms &lt;1 ms 10.8.1.1</p><p>2 &lt;1 ms &lt;1 ms &lt;1 ms 10.0.0.1</p><p>3 * &lt;1 ms * 10.1.1.19</p><p>4 1 ms &lt;1 ms 1 ms 10.1.1.19</p><p>Trace complete.</p></div><div id="comment-44487-info" class="comment-info"><span class="comment-age">(25 Jul '15, 13:40)</span> <span class="comment-user userinfo">Obliterator</span></div></div><span id="44488"></span><div id="comment-44488" class="comment"><div id="post-44488-score" class="comment-score"></div><div class="comment-text"><p>The traceroute says nothing, whre the loss occur.To do this you need a couple of same traceroutes. If the packet loss only occurs lets say after the second hop, than you can start your search. But The loss could still hapen at the first hops. -&gt; Just info.</p><p>Why are hop 3 and 4 identical to the host 10.1.1.19?</p></div><div id="comment-44488-info" class="comment-info"><span class="comment-age">(25 Jul '15, 14:25)</span> <span class="comment-user userinfo">Christian_R</span></div></div><span id="44490"></span><div id="comment-44490" class="comment"><div id="post-44490-score" class="comment-score"></div><div class="comment-text"><p>I did many traces and found that losses are fairly uniformly distributed at every hop. I suspect the problem is with first hop and the loss carries over to the other hops.</p><p>About identical hops. I don't know how it works but whenever the third packet to the proxy server(10.1.1.18 or 10.1.1.19) is lost, as in X ms X ms *, the hop repeats. This doesn't happen for hops other than the proxy server, or loss of packet other than the third one.</p></div><div id="comment-44490-info" class="comment-info"><span class="comment-age">(25 Jul '15, 16:12)</span> <span class="comment-user userinfo">Obliterator</span></div></div><span id="44491"></span><div id="comment-44491" class="comment"><div id="post-44491-score" class="comment-score"></div><div class="comment-text"><p>Can you provide a trace with the traceroutes inside?</p></div><div id="comment-44491-info" class="comment-info"><span class="comment-age">(26 Jul '15, 01:33)</span> <span class="comment-user userinfo">Christian_R</span></div></div></div><div id="comment-tools-44474" class="comment-tools"></div><div class="clear"></div><div id="comment-44474-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="44509"></span>

<div id="answer-container-44509" class="answer accepted-answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-44509-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-44509-score" class="post-score" title="current number of votes">1</div><span id="post-44509-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span class="accept-answer on" rel="nofollow" title="Obliterator has selected this answer as the correct answer"> </span></div></td><td><div class="item-right"><div class="answer-body"><p>Now I have looked a little bit deeper in your trace file and I am wondering why ARP Request for different subnets can be seen in the tracefile??? This is really strange to me, without deeper knowledge of your network.</p><p>And there could be duplicated IP Addresses for the following addresses: 10.12.121.5 (Cabletron(MAC: 00:E0:63:C2:70:7C) and Enterasy(MAC: 00:01:F4:A6:53:91)) and 192.168.1.1 (Cabletron (MAC: 00:E0:63:C2:70:7C) and Netgear (MAC: 20:E5:2A:E4:FC:CB))</p><p>This could be the failure if one of these addresses is a gateway. (Hottest tip so far).</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>26 Jul '15, 13:43</strong></p><img src="https://secure.gravatar.com/avatar/3b24b339fc62fb46dced6a443d3202ea?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Christian_R&#39;s gravatar image" /><p><span>Christian_R</span><br />
<span class="score" title="1830 reputation points"><span>1.8k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="6 badges"><span class="silver">●</span><span class="badgecount">6</span></span><span title="25 badges"><span class="bronze">●</span><span class="badgecount">25</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Christian_R has 25 accepted answers">16%</span></p></img></div><div class="post-update-info post-update-info-edited"><p><span> edited <strong>26 Jul '15, 13:43</strong> </span></p></div></div><div id="comments-container-44509" class="comments-container"><span id="44526"></span><div id="comment-44526" class="comment"><div id="post-44526-score" class="comment-score"></div><div class="comment-text"><p>Thanks Christian! Problem solved. Some new students had set their subnet masks to 255.255.252.0. We corrected it to 255.255.255.0 and its working smoothly now. Thanks for your valuable time.</p><p>Looks like strangers on the internet are more helpful than college authorities.</p><p>Cheers!</p></div><div id="comment-44526-info" class="comment-info"><span class="comment-age">(27 Jul '15, 06:16)</span> <span class="comment-user userinfo">Obliterator</span></div></div></div><div id="comment-tools-44509" class="comment-tools"></div><div class="clear"></div><div id="comment-44509-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

