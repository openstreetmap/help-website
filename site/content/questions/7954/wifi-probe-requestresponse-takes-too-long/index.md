+++
type = "question"
title = "wifi probe-request/response takes too long"
description = '''In my trace I can see few of probe responses until authentication request is sent. I was wondering why probe Request /Response takes around 3 seconds when there&#x27;s good signal between the client and the AP, while authentication Req/Resp and association Req/Resp packets take few mili seconds. The clie...'''
date = "2011-12-14T03:19:00Z"
lastmod = "2011-12-14T03:19:00Z"
weight = 7954
keywords = [ "802.11" ]
aliases = [ "/questions/7954" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [wifi probe-request/response takes too long](/questions/7954/wifi-probe-requestresponse-takes-too-long)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-7954-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>In my trace I can see few of probe responses until authentication request is sent. I was wondering why probe Request /Response takes around 3 seconds when there's good signal between the client and the AP, while authentication Req/Resp and association Req/Resp packets take few mili seconds.</p><p>The client is using ubuntu and iwconfig with the Ap's MAC address specified</p></div><div id="question-tags" class="tags-container tags">802.11</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>14 Dec '11, 03:19</strong></p><img src="https://secure.gravatar.com/avatar/5d64d21de6598960bf2db61f1ca705cc?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="ddayan&#39;s gravatar image" /><p>ddayan<br />
<span class="score" title="41 reputation points">41</span><span title="15 badges"><span class="badge1">●</span><span class="badgecount">15</span></span><span title="17 badges"><span class="silver">●</span><span class="badgecount">17</span></span><span title="20 badges"><span class="bronze">●</span><span class="badgecount">20</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="ddayan has no accepted answers">0%</span></p></div><div class="post-update-info post-update-info-edited"><p>edited 14 Dec '11, 03:26</p></div></div><div id="comments-container-7954" class="comments-container"><span id="7956"></span><div id="comment-7956" class="comment"><div id="post-7956-score" class="comment-score"></div><div class="comment-text"><p>do you see multiple probe requests before the probe response or is it just one probe request followed by probe response?</p></div><div id="comment-7956-info" class="comment-info"><span class="comment-age">(14 Dec '11, 03:30)</span> Landi</div></div><span id="7958"></span><div id="comment-7958" class="comment"><div id="post-7958-score" class="comment-score"></div><div class="comment-text"><p>Yea I can see multiple probe requests, the client sits next to the AP.</p></div><div id="comment-7958-info" class="comment-info"><span class="comment-age">(14 Dec '11, 03:50)</span> ddayan</div></div><span id="7960"></span><div id="comment-7960" class="comment"><div id="post-7960-score" class="comment-score"></div><div class="comment-text"><p>please check for the R-bit being set in 802.11 header for layer2 retransmissions if inside any of those requests. Is there a ~ 3 second delay between the <em>last</em> probe request and the probe response?</p></div><div id="comment-7960-info" class="comment-info"><span class="comment-age">(14 Dec '11, 04:05)</span> Landi</div></div><span id="7961"></span><div id="comment-7961" class="comment"><div id="post-7961-score" class="comment-score"></div><div class="comment-text"><p>nope delay is around 0.05 seconds</p></div><div id="comment-7961-info" class="comment-info"><span class="comment-age">(14 Dec '11, 04:11)</span> ddayan</div></div><span id="7962"></span><div id="comment-7962" class="comment"><div id="post-7962-score" class="comment-score"></div><div class="comment-text"><p>so I guess thats the probe request to which the AP responds by sending the probe response. Check the ones that were sent before for the Retransmission bit, that would explain everything</p></div><div id="comment-7962-info" class="comment-info"><span class="comment-age">(14 Dec '11, 04:31)</span> Landi</div></div><span id="7963"></span><div id="comment-7963" class="comment not_top_scorer"><div id="post-7963-score" class="comment-score"></div><div class="comment-text"><p>no retransmission bit, because probe request is a Broadcast packet...</p></div><div id="comment-7963-info" class="comment-info"><span class="comment-age">(14 Dec '11, 04:36)</span> ddayan</div></div><span id="7964"></span><div id="comment-7964" class="comment not_top_scorer"><div id="post-7964-score" class="comment-score"></div><div class="comment-text"><p>sorry my bad - of course you're right... anyways I would guess that the last probe request was the first to really get processed by the AP thus making the delay only those 0.05 sec you mentioned. No clue why the ones before got lost or whatever</p></div><div id="comment-7964-info" class="comment-info"><span class="comment-age">(14 Dec '11, 04:40)</span> Landi</div></div><span id="7965"></span><div id="comment-7965" class="comment not_top_scorer"><div id="post-7965-score" class="comment-score"></div><div class="comment-text"><p>I guess a trace from the AP would shade some light on this. However even after a probe response, another probe request is sent. Is it because the linux drivers wait to see if they can find a better AP?</p></div><div id="comment-7965-info" class="comment-info"><span class="comment-age">(14 Dec '11, 04:46)</span> ddayan</div></div><span id="7966"></span><div id="comment-7966" class="comment not_top_scorer"><div id="post-7966-score" class="comment-score"></div><div class="comment-text"><p>probe request are in any way sent out frequently - independent on your machine connecting or not connecting to a certain AP. In most cases that's the driver "preprobing" every visible SSID, so that certain parameters are already known either for faster connection or just for informational reasons e.g. displaying more information about the available APs in the GUI</p></div><div id="comment-7966-info" class="comment-info"><span class="comment-age">(14 Dec '11, 04:57)</span> Landi</div></div></div><div id="comment-tools-7954" class="comment-tools"><span class="comments-showing"> showing 5 of 9 </span> <a href="#" class="show-all-comments-link">show 4 more comments</a></div><div class="clear"></div><div id="comment-7954-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

</div>

