+++
type = "question"
title = "statistics - time interval problem"
description = '''Hello, I have 16 seconds trace file. I need see packets during 1 second. I use the following display filter: frame.time &amp;gt;= &quot;Nov 10, 2013 11:22:09.000000000&quot; and frame.time &amp;lt; &quot;Nov 10, 2013 11:22:10.000000000&quot; I verify the operation, I check first and last packets on the filtered list and I see ...'''
date = "2013-11-09T16:47:00Z"
lastmod = "2013-11-14T04:35:00Z"
weight = 26810
keywords = [ "intervals" ]
aliases = [ "/questions/26810" ]
osqa_answers = 1
osqa_accepted = false
+++

<div class="headNormal">

# [statistics - time interval problem](/questions/26810/statistics-time-interval-problem)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-26810-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-26810-score" class="post-score" title="current number of votes">0</div><span id="post-26810-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>Hello, I have 16 seconds trace file. I need see packets during 1 second. I use the following display filter:</p><p>frame.time &gt;= "Nov 10, 2013 11:22:09.000000000" and frame.time &lt; "Nov 10, 2013 11:22:10.000000000"</p><p>I verify the operation, I check first and last packets on the filtered list and I see correct Arrival Times:</p><blockquote><p>First packet: Nov 10, 2013 11:22:09.002234000<br />
Last packet: Nov 10, 2013 11:22:09.976237000</p></blockquote><p>I select Statistics-&gt;Summary and I see displayed Bytes: 2000000</p><p>Next I copy above filter to IO Graphs (I have settings: 1s Tick Interval). I would like to see one dot on the chart. But I see two dots. When I copy to CVS I see two values, one after the other:</p><blockquote><p>6056<br />
1993944</p></blockquote><p>The sum of these values gives good results: 2000000. But these two values are assigned to two consecutive seconds. It means that my all charts are wrong :( On the chart I should have 2000000 in one second (one dot) - not separated data to two different seconds.</p><p>Why IO Graphs does not understand my filter rule? IO Graphs think that I need 9th second from the beginning of trace file (Time column).</p><p>Please do not tell me that I must always export selected packets to new file and run IO Graphs after that :(</p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-intervals" rel="tag" title="see questions tagged &#39;intervals&#39;">intervals</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>09 Nov '13, 16:47</strong></p><img src="https://secure.gravatar.com/avatar/28071bd7cf93e424c03dec9086ffa60f?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="net16&#39;s gravatar image" /><p><span>net16</span><br />
<span class="score" title="46 reputation points">46</span><span title="6 badges"><span class="badge1">●</span><span class="badgecount">6</span></span><span title="7 badges"><span class="silver">●</span><span class="badgecount">7</span></span><span title="12 badges"><span class="bronze">●</span><span class="badgecount">12</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="net16 has no accepted answers">0%</span> </br></br></p></div><div class="post-update-info post-update-info-edited"><p><span> edited <strong>09 Nov '13, 16:57</strong> </span></p></div></div><div id="comments-container-26810" class="comments-container"></div><div id="comment-tools-26810" class="comment-tools"></div><div class="clear"></div><div id="comment-26810-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="26818"></span>

<div id="answer-container-26818" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-26818-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-26818-score" class="post-score" title="current number of votes">0</div><span id="post-26818-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span></div></td><td><div class="item-right"><div class="answer-body"><blockquote><p>Please do not tell me that I must always export selected packets to new file and run IO Graphs after that :(</p></blockquote><p>O.K. <strong>I won't tell you that</strong> ;-)</p><p><strong>Reason</strong> for your 'problem': The IO Graph values are calculated from the beginning of the file and not from the beginning of the first filtered frame. So, your filtered frames my fall into two 1-second calculation intervals.</p><p><strong>Solution:</strong> Set a '<a href="http://www.wireshark.org/docs/wsug_html_chunked/ChWorkTimeFormatsSection.html#ChWorkTimeReferencePacketSection">Time Reference</a>'.</p><ul><li>Apply the date/time display filter in Wireshark</li><li>Select the first filtered frame</li><li>Set a Time Reference on that frame: CTRL-T (accept any warnings) or Edit -&gt; Set/Unset Time Reference</li><li>Now draw the IO Graph</li></ul><p>As a result, the time interval for the IO Graph now starts at the Time Reference (with time delta 0) and you will get only one dot per 1-second interval.</p><p>Then clear the Time Reference (Edit -&gt; Unset All Time References) and repeat the steps with another display filter.</p><p>Regards<br />
Kurt</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>10 Nov '13, 03:25</strong></p><img src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Kurt%20Knochner&#39;s gravatar image" /><p><span>Kurt Knochner ♦</span><br />
<span class="score" title="24767 reputation points"><span>24.8k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">●</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">●</span><span class="badgecount">237</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Kurt Knochner has 344 accepted answers">15%</span> </br></p></div><div class="post-update-info post-update-info-edited"><p><span> edited <strong>10 Nov '13, 03:29</strong> </span></p></div></div><div id="comments-container-26818" class="comments-container"><span id="26823"></span><div id="comment-26823" class="comment"><div id="post-26823-score" class="comment-score"></div><div class="comment-text"><p>Dear Kurt, thank you again for your time and help nice words :)</p><p>I have tested your solution. Unfortunately it does not work as good as I need. It shows sum of bits (dot) on first second on the chart. I need compare results of both charts (main and one second) between 9 to 10 s - in IO Graphs.</p><p>I have long trace files. I need filter packets in based on their timestamps. Why I have to look into time of file beginning? I want to display specified packets with timestamps that were assigned by router:</p><p>frame.time &gt;= "Nov 10, 2013 11:22:09.000000000" and frame.time &lt; "Nov 10, 2013 11:22:10.000000000"</p><p>It should not have anything common with file time referencing. You should use another filter for it, something like that:</p><p>time &gt;= "00:00:09" and time &lt; "00:00:10"</p><p>But I am affraid that similar filter does not exist ;)</p><p>I have prepared a lot of results with filter in based on timestamps and I did not know that Wireshak does not know what does timestamps is :( I repeatedly filtered: first 1hour from 10hours, 30min from 1hour, next 10min, 1min, 1s from one trace file. How can I do this process correctly? Regards.</p></div><div id="comment-26823-info" class="comment-info"><span class="comment-age">(10 Nov '13, 14:48)</span> <span class="comment-user userinfo">net16</span></div></div><span id="26825"></span><div id="comment-26825" class="comment"><div id="post-26825-score" class="comment-score"></div><div class="comment-text"><p>Based on your last comment, I think I don't understand what you are trying to do.</p><p>Can you post a small sample capture file with a detailed description what you need and what you get (instead) by using IO graphs?</p></div><div id="comment-26825-info" class="comment-info"><span class="comment-age">(10 Nov '13, 15:03)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="26853"></span><div id="comment-26853" class="comment"><div id="post-26853-score" class="comment-score"></div><div class="comment-text"><p>Kurt, I cannot attach the sample because it is big file and it would be difficult for the problem demonstration. But I write the problem particularly. It is my pcap file:</p><p>1 0.000000 A B (arrival time 11:22:00.016544000)<br />
2 0.001200 C D (arrival time 11:22:00.017744000)<br />
3 0.005687 E F (arrival time 11:22:00.022231000)<br />
...<br />
1000 0.994555 I J (arrival time 11:22:01.010531000)<br />
1001 0.999555 G H (arrival time 11:22:01.011031000)<br />
1002 1.001222 K L (arrival time 11:22:01.011197700)<br />
</p><p>You can see that I have correct time reference (from 0.000000). Look that second sec. of timestamps (arrival time from 11:22:01 to 11:22:02) begin at no. 1000 of frame, eg. 0.994555 time of file. IO graph will show for second interval (from 1 to 2 arrival time) two dots: first - sum of bits from 0 to 1 for 1000 and 1001 frames and second - sum of bits from 1 to 2 (because it looks on time of frame as you wrote). I set "dot" in the style of graph.</p><p>Ok, I can use Time shift for all packets by -0.016544 and get:</p><p>1 0.000000 A B (arrival time 11:22:00.00000000)<br />
2 0.001200 C D (arrival time 11:22:00.001200000)<br />
3 0.005687 E F (arrival time 11:22:00.005687000)<br />
...<br />
1000 0.994555 I J (arrival time 11:22:00.994555000)<br />
1001 0.999555 G H (arrival time 11:22:00.999555000)<br />
1002 1.001222 K L (arrival time 11:22:01.000122000)<br />
</p><p>Now I have second sec. started from 11:22:01.000122000. It seems to be good. But it means 1001 frames during first interval (from 0 to 1) and incorrect sum of packets. In the original file I have 999 frames in this interval of arrival time.</p><p>Is it more clear?</p></div><div id="comment-26853-info" class="comment-info"><span class="comment-age">(11 Nov '13, 11:45)</span> <span class="comment-user userinfo">net16</span></div></div><span id="26880"></span><div id="comment-26880" class="comment"><div id="post-26880-score" class="comment-score"></div><div class="comment-text"><p>O.K. apparently the IO graph does not work as you might need it, although I can't really follow your example.</p><p>Why is it important if there are 999 or 1001 frames in a 1 second calculation interval?</p><p>Maybe we are talking about the wrong things. What are you trying to do? Maybe there is a better solution than using IO graphs.</p></div><div id="comment-26880-info" class="comment-info"><span class="comment-age">(12 Nov '13, 04:11)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="26908"></span><div id="comment-26908" class="comment"><div id="post-26908-score" class="comment-score"></div><div class="comment-text"><p>Kurt, I need to measure how many data were transmitted during such specified interval, let say 1 sec, in based on timestamp (arrival time). If I look on the packets I see their arrival times then I can count manually the sum of packets (for example 999). But I cannot add packets always manually, it should be automatic process. Therefore I use Copy button in the IO Graph, paste and see numbers of packets in each interval. And I obtain mistakes, for example 1001 packets as in my example. Wireshark does not understand what arrival time is. It think that I want to count from the beginning of trace file. Wireshark have no problem with correct displaying but graph and copying from IO Graph shows improper values. Both of these should be the same. I should not display another data and copy from IO Graph another data. It looks like software bug. Have you any idea how can I work around the problem?</p></div><div id="comment-26908-info" class="comment-info"><span class="comment-age">(12 Nov '13, 15:12)</span> <span class="comment-user userinfo">net16</span></div></div><span id="26910"></span><div id="comment-26910" class="comment not_top_scorer"><div id="post-26910-score" class="comment-score"></div><div class="comment-text"><blockquote><p>Kurt, I <strong>need to measure how many data were transmitted during such specified interval</strong>, let say 1 sec, in based on timestamp (arrival time).<br />
<strong>it should be automatic process.</strong></p></blockquote><p>O.K. then I suggest to use tshark to print the necessary values and then use a script or a spreadsheet software to calculate whatever you need, instead of doing the whole thing manually in the GUI with IO graphs!</p><blockquote><p>tshark -nr input.pcap -T fields -e frame.number -e frame.time -e frame.time_relative -e ip.src -e ip.dst -e frame.len -E header=y -E separator=; &gt; output.csv</p></blockquote><p>Now feed output.csv into your script (perl, python, whatever) or load it into a spreadsheet software and run your calculations.</p></div><div id="comment-26910-info" class="comment-info"><span class="comment-age">(12 Nov '13, 16:02)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="26965"></span><div id="comment-26965" class="comment not_top_scorer"><div id="post-26965-score" class="comment-score"></div><div class="comment-text"><blockquote><p>instead of doing the whole thing manually in the GUI with IO graphs!</p></blockquote><p>Kurt, sorry, but it is not true. IO Graphs is the best for these operations. I have IO Graph, I write such filter in the Graph2 field and another filter to in the Graph3 field, and simply click on Copy i paste to spreadsheet software. That's all :)</p><p>Wireshark has critical problem with IO Graphs. People do not know that their charts in IO Graphs are incorrect. IO Graphs misinterprets timestamps (arrival times) and cannot count packets if the filters are used. Or we do not know how we can do it properly ;)</p><p>Regards</p></div><div id="comment-26965-info" class="comment-info"><span class="comment-age">(13 Nov '13, 13:11)</span> <span class="comment-user userinfo">net16</span></div></div><span id="26991"></span><div id="comment-26991" class="comment not_top_scorer"><div id="post-26991-score" class="comment-score"></div><div class="comment-text"><blockquote><p>Kurt, sorry, but it is not true. IO Graphs is the best for these operations.</p></blockquote><p>well, it may be the best method <strong>for you</strong>. ;-)</p><p>I don't see why a <strong>manual process</strong> is better or faster than a scripted solution, where you can do all you need within a few seconds (printing values, calculation, creating spreadsheets and sending the results via e-mail) and with whatever accuracy you need.</p><blockquote><p>Wireshark has critical problem with IO Graphs.</p></blockquote><p>I don't think so. IO graphs are used for what their names indicates: graphing values to get a rough overview about traffic pattern. For me a graph is never an instrument for 110% accurate calculations ;-)</p><p>Furthermore I simply can't follow your sample (problem description) without some sample data. I've done my own tests and it worked in every case as I described it in my answer and as I had expected it to work.</p><p>But, never mind: If you want to solve your problem with IO graphs, go ahead and do that. There is no <strong>overall best solution</strong> for a certain class of problems, just the <strong>best solution</strong> in a certain environment ;-)</p></div><div id="comment-26991-info" class="comment-info"><span class="comment-age">(14 Nov '13, 04:35)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div></div><div id="comment-tools-26818" class="comment-tools"><span class="comments-showing"> showing 5 of 8 </span> <a href="#" class="show-all-comments-link">show 3 more comments</a></div><div class="clear"></div><div id="comment-26818-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

