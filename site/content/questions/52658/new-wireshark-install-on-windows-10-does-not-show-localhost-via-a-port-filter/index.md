+++
type = "question"
title = "New Wireshark Install on Windows 10 - does not show localhost via a port filter."
description = '''Hey, I just installed Wireshark after downloading 2.0.3 on Windows 10 x64 and I can&#x27;t figure out how to get it to capture packets on the local host of 192.168.xxx.xxx:myport If I build a filter after selecting my WiFi interface (the only interface with any traffic when WireShark monitors) for tcp.po...'''
date = "2016-05-16T23:12:00Z"
lastmod = "2016-06-02T15:15:00Z"
weight = 52658
keywords = [ "httpd", "localhost", "localip" ]
aliases = [ "/questions/52658" ]
osqa_answers = 2
osqa_accepted = false
+++

<div class="headNormal">

# [New Wireshark Install on Windows 10 - does not show localhost via a port filter.](/questions/52658/new-wireshark-install-on-windows-10-does-not-show-localhost-via-a-port-filter)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-52658-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-52658-score" class="post-score" title="current number of votes">0</div><span id="post-52658-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count">1</div></div></td><td><div id="item-right"><div class="question-body"><p>Hey,</p><p>I just installed Wireshark after downloading 2.0.3 on Windows 10 x64 and I can't figure out how to get it to capture packets on the local host of 192.168.xxx.xxx:myport</p><p>If I build a filter after selecting my WiFi interface (the only interface with any traffic when WireShark monitors) for tcp.port == myport it captures no packets. This port is running a http server on myport. The httpd is working and running and returning the requested URLs with code 200.</p><p>I can get it to capture packets though by typing in an incorrect local IP address on port 'myport' but oddly not by using the correct IP address on 'myport'.</p><p>I should add I know the localhost traffic on Port 7888 is not showing on the the WiFi interface I'm monitoring but Wireshark is not offering another network interface to monitor that has traffic on it. Without the filter I can see the local IP address' TCP traffic to the internet.</p><p>What am I doing wrong?</p><p>Thanks.</p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-httpd" rel="tag" title="see questions tagged &#39;httpd&#39;">httpd</span> <span class="post-tag tag-link-localhost" rel="tag" title="see questions tagged &#39;localhost&#39;">localhost</span> <span class="post-tag tag-link-localip" rel="tag" title="see questions tagged &#39;localip&#39;">localip</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>16 May '16, 23:12</strong></p><img src="https://secure.gravatar.com/avatar/3da823da7b4070dc124ec51c2df30a00?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="WireBananaSlug&#39;s gravatar image" /><p><span>WireBananaSlug</span><br />
<span class="score" title="6 reputation points">6</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="WireBananaSlug has no accepted answers">0%</span></p></div><div class="post-update-info post-update-info-edited"><p><span> edited <strong>16 May '16, 23:36</strong> </span></p></div></div><div id="comments-container-52658" class="comments-container"><span id="52692"></span><div id="comment-52692" class="comment"><div id="post-52692-score" class="comment-score"></div><div class="comment-text"><p>I've already install nCap &amp; it worked but maybe if it doesn't reveal the cause of the problem I'll try RawCap.</p><p>If I can have RawCap installed at the same time as nCap I will go ahead and insteall it.</p><p>I don't really now how to mark answer of the answers as valid but both nCap &amp; RawCap work for my problem and can be used.</p><p>Thanks.</p></div><div id="comment-52692-info" class="comment-info"><span class="comment-age">(17 May '16, 14:53)</span> <span class="comment-user userinfo">WireBananaSlug</span></div></div><span id="52695"></span><div id="comment-52695" class="comment"><div id="post-52695-score" class="comment-score">1</div><div class="comment-text"><p>They are both comments rather than answers, but we can make them answers so you can mark them as accepted. Which one is the "best" answer for you?</p><p>You can use both npcap and rawcap at the same time, but npcap can be used directly by Wireshark (if npcap is installed in "WinPcap" mode), whereas rawcap requires you to use another application to make the capture that you can then open in Wireshark. rawcap also has a number of other limitations on use as listed on it's <a href="http://www.netresec.com/?page=RawCap">website</a>.</p></div><div id="comment-52695-info" class="comment-info"><span class="comment-age">(17 May '16, 15:11)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="52697"></span><div id="comment-52697" class="comment"><div id="post-52697-score" class="comment-score"></div><div class="comment-text"><p>The 1st comment, grahamb's, as it allows we to use Wireshark still and has the link the the extra information that sinday was nice enough to tell me about.</p></div><div id="comment-52697-info" class="comment-info"><span class="comment-age">(17 May '16, 15:24)</span> <span class="comment-user userinfo">WireBananaSlug</span></div></div><span id="52701"></span><div id="comment-52701" class="comment"><div id="post-52701-score" class="comment-score"></div><div class="comment-text"><p>By the way, although my localhost httpd server was configured for an address on the 192 network Wireshark with nCap was able to capture the traffic on the 127 network.</p></div><div id="comment-52701-info" class="comment-info"><span class="comment-age">(17 May '16, 16:32)</span> <span class="comment-user userinfo">WireBananaSlug</span></div></div><span id="52704"></span><div id="comment-52704" class="comment"><div id="post-52704-score" class="comment-score"></div><div class="comment-text"><p><span></span><span>@WireBananaSlug</span>, I feel the above needs some clarification.</p><p>With npcap, you do not "capture on an IP address", you always capture on an interface. The operating system (or, more precisely, its networking stack) chooses the interface through which to send the packet depending on the packet's address (IP address in this case) when sending a packet to an external system. In case of local traffic, a special virtual interface exists in unix-like operating system, but not necessarily on Windows.</p><p>If the networking stack of Windows finds out that the packet's destination IP address matches one of its network interfaces, it delivers the packet "internally", bypassing any interface. In newer versions of Windows, this can be changed by creating the virtual interface and sending such traffic to it, which is what npcap does; the RawCap does another thing, it hooks to another place in the networking stack than the interfaces' NDIS slots for filters.</p><p>And in addition to IP addresses assigned to interfaces, there are also IP addresses with a special meaning, such as "0.0.0.0" which means "any of my interfaces' IP addresses, and "127.0.0.x" which means "myself".</p><p>Some servers can be configured to listen for new connections only on (a) particular IP address(es) if the machine they run at has several interfaces, but most of them listens on all of them (i.e. at 0.0.0.0); what exactly did you mean when you wrote</p><blockquote><p>my localhost httpd server was configured for an address on the 192 network</p></blockquote><p>?</p><p>And a second question, the capture you have posted in <a href="https://ask.wireshark.org/questions/52702/why-are-0-length-tcp-packets-returned-on-some-http-tcp-sessions">your other question</a> has been taken at the npcap - created local loop interface or using rawcap?</p></div><div id="comment-52704-info" class="comment-info"><span class="comment-age">(17 May '16, 22:19)</span> <span class="comment-user userinfo">sindy</span></div></div></div><div id="comment-tools-52658" class="comment-tools"></div><div class="clear"></div><div id="comment-52658-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

2 Answers:

</div>

</div>

<span id="52661"></span>

<div id="answer-container-52661" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-52661-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-52661-score" class="post-score" title="current number of votes">1</div><span id="post-52661-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span></div></td><td><div class="item-right"><div class="answer-body"><p>Are you sending requests to the server from a client application on the same machine?</p><p>If so, then this is an issue with capturing local loopback traffic on Windows, see the Wiki page on <a href="https://wiki.wireshark.org/CaptureSetup/Loopback">Loopback Capturing</a>.</p><p>Your options (as discussed on the Wiki page) are:</p><ol><li>Run the client application on another machine.</li><li>Uninstall the standard Windows capturing driver WinPcap, and install the, in development, replacement for it Npcap.</li></ol></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>17 May '16, 02:57</strong></p><img src="https://secure.gravatar.com/avatar/d2a7e24ca66604c749c7c88c1da8ff78?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="grahamb&#39;s gravatar image" /><p><span>grahamb ♦</span><br />
<span class="score" title="19834 reputation points"><span>19.8k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="30 badges"><span class="silver">●</span><span class="badgecount">30</span></span><span title="206 badges"><span class="bronze">●</span><span class="badgecount">206</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="grahamb has 274 accepted answers">22%</span></p></div></div><div id="comments-container-52661" class="comments-container"><span id="52664"></span><div id="comment-52664" class="comment"><div id="post-52664-score" class="comment-score">1</div><div class="comment-text"><p><span></span><span></span><span></span><span>@grahamb</span>, I'm afraid there is an issue I haven't reported to <span>@Yang Luo</span> yet, but Microsoft seems not to route packets whose destination is an IP address of some local NIC via npcap - installed loopback adapter which is the only place where npcap can capture them.</p><p>So, <span></span><span>@WireBananaSlug</span>, on top of what <span></span><span></span><span></span><span>@grahamb</span> wrote, you may have to send the http request to 127.0.0.1 rather than 192.168.x.y to be able to capture it using npcap.</p><p>This may have changed recently or may change in near future, but two weeks ago I had this issue.</p></div><div id="comment-52664-info" class="comment-info"><span class="comment-age">(17 May '16, 04:04)</span> <span class="comment-user userinfo">sindy</span></div></div><span id="52683"></span><div id="comment-52683" class="comment"><div id="post-52683-score" class="comment-score"></div><div class="comment-text"><p>Thanks very much.</p></div><div id="comment-52683-info" class="comment-info"><span class="comment-age">(17 May '16, 10:44)</span> <span class="comment-user userinfo">WireBananaSlug</span></div></div><span id="52712"></span><div id="comment-52712" class="comment"><div id="post-52712-score" class="comment-score"></div><div class="comment-text"><p><span></span><span>@sindy</span></p><p>I've confirmed, with npcap 0.07-r3 on Win 10, that packets sent to 127.0.0.1 are captured as such, packets to the "host.name" are captured with the <a href="https://en.wikipedia.org/wiki/Link-local_address">APIPA</a> address assigned to the npcap looback adaptor, and packets to a real local NIC IP are captured as such. In all cases, the source and destination MAC addresses are all zeros, and the source and dest IP addresses are the identical.</p><p>Note that the packets to "host.name" used the APIPA address regardless of whether the NetBIOS or DNS name was used. <code>ping -4 "host.name"</code> also uses the APIPA address.</p></div><div id="comment-52712-info" class="comment-info"><span class="comment-age">(18 May '16, 02:50)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="53149"></span><div id="comment-53149" class="comment"><div id="post-53149-score" class="comment-score"></div><div class="comment-text"><p><span>@sindy</span>, I'm curious what that issue is about "Microsoft seems not to route packets whose destination is an IP address of some local NIC via npcap"? I thought Npcap loopback adapter should have captured all the local packets.</p></div><div id="comment-53149-info" class="comment-info"><span class="comment-age">(02 Jun '16, 08:44)</span> <span class="comment-user userinfo">Yang Luo</span></div></div><span id="53156"></span><div id="comment-53156" class="comment"><div id="post-53156-score" class="comment-score"></div><div class="comment-text"><p><span>@Yang Luo</span>, my exact setup back then was two SIP softphones running on the same machine and connected to a remote PBX via Cisco Anyconnect VPN client also running on the same machine. The PBX did not insert itself into the media path so the softphones were sending media directly to each other, both indicating in their SDPs the local IP address assigned to the virtual Anyconnect interface. If I remember right, I was capturing on the loopback interface in parallel with the virtual one created by the Anyconnect, as I was interested in the SRTP between the two softphones, and I've seen no UDP there at all - while if the call was running between one of the softphones and a remote phone also accessible via the VPN, the SRTP could be captured on the virtual interface.</p><p>Unfortunately, I am unable to arrange that setup again in a short time. As soon as I can do that, I'll repeat the exercise and let you know directly by e-mail, as I think we've got quite far from the scope of this Question.</p><p>What I've done right before writing this was to capture in parallel at the loopback interface and on a wireless interface switched over to monitoring mode so that the frame encapsulation would be different on each of the two interfaces and set up a call between the two softphones locally, i.e. sending not only SRTP but even SIP directly between them. And I have seen both SIP and SRTP from 192.168.x.y to 192.168.x.y (which is the address of the wireless interface assigned before I've switched it over to monitoring mode).</p></div><div id="comment-53156-info" class="comment-info"><span class="comment-age">(02 Jun '16, 15:15)</span> <span class="comment-user userinfo">sindy</span></div></div></div><div id="comment-tools-52661" class="comment-tools"></div><div class="clear"></div><div id="comment-52661-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<span id="52685"></span>

<div id="answer-container-52685" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-52685-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-52685-score" class="post-score" title="current number of votes">1</div><span id="post-52685-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span></div></td><td><div class="item-right"><div class="answer-body"><p>You could also try using <a href="http://www.netresec.com/?page=RawCap">RawCap</a> instead; I've had good luck with it in the past.</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>17 May '16, 11:18</strong></p><img src="https://secure.gravatar.com/avatar/55158e2322c4e365a5e0a4a0ac3fbcef?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="cmaynard&#39;s gravatar image" /><p><span>cmaynard ♦♦</span><br />
<span class="score" title="9361 reputation points"><span>9.4k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="38 badges"><span class="silver">●</span><span class="badgecount">38</span></span><span title="142 badges"><span class="bronze">●</span><span class="badgecount">142</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="cmaynard has 108 accepted answers">20%</span></p></div></div><div id="comments-container-52685" class="comments-container"></div><div id="comment-tools-52685" class="comment-tools"></div><div class="clear"></div><div id="comment-52685-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

