+++
type = "question"
title = "Monitor TCP port 1 between computer and printer over ethernet"
description = '''Hello,  Please forgive me if Im a bit imprecise in my terminology, I am new to this arena. Im working with a networked RIP printing software in our University printing lab and we&#x27;ve run into a problem where the software sporadically but consistently fails to connect to the networked epson plotter. T...'''
date = "2014-02-07T05:15:00Z"
lastmod = "2014-02-07T05:57:00Z"
weight = 29526
keywords = [ "osx", "tcp" ]
aliases = [ "/questions/29526" ]
osqa_answers = 2
osqa_accepted = false
+++

<div class="headNormal">

# [Monitor TCP port 1 between computer and printer over ethernet](/questions/29526/monitor-tcp-port-1-between-computer-and-printer-over-ethernet)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-29526-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>Hello,</p><p>Please forgive me if Im a bit imprecise in my terminology, I am new to this arena.</p><p>Im working with a networked RIP printing software in our University printing lab and we've run into a problem where the software sporadically but consistently fails to connect to the networked epson plotter. The company that produces the software informs me that there must be some sort of network issue or software conflict to prevent the connection, and Im trying to diagnose what that conflict might be.</p><p>According to the provider, the RIP will ping the printer address 5 times to see if it can connect to the device. The print job itself is sent to the printer via TCP on port 1. In our case, if the software can't connect it throws an error, and only a complete system reboot seems to get things working again.</p><p>I'd like to know if Wireshark can help me ascertain if the issue Im running into is a problem on the printer side or on the workstation side, and I need something that will help me observe the problem in action as the fault is intermittent. If the issue is on the workstation side, I need to know what else might be operating on tcp port 1 that would prevent communication to the printer (is it possible for an app to hog a port like this?). Failing that I need to figure out if the RIP itself is just locking up and refusing to try again until after a reboot.</p><p>Also, is Wireshark the best tool for this kind of exploration, perhaps there is something simpler. Im a bit daunted by how feature rich it is, most of which I'm completely ignorant as to what it means/does.</p><p>This is what I know about the software/environment:</p><ul><li><p>The software is running on a OSX 10.8 workstation over a new gigabit ethernet network</p></li><li><p>The Epson plotter and the computer are on the same subdomain.</p></li><li><p>Our IT department assures me that there shouldn't be any firewall rules imposed at this moment to prevent communication between devices.</p></li><li><p>The problem exhibits itself when sending jobs to two separate printers of the same make purchased at different times ( suggesting its not a faulty network card on the printer).</p></li></ul><p>If your at all curious as what other steps I've taken to diagnose the problem read on. Otherwise many thanks for your thoughts.</p><p>What I've done to narrow down the issue with no success:</p><ul><li><p>Moved to a new building with a brand new giabit network</p></li><li><p>Confirmed with IT that there are no firewall rules that would conflict with workstation to work station comunication on any port</p></li><li><p>Had IT put the lab on its own subdomain within the school network</p></li><li><p>Printers and workstation have fixed IP addresses</p></li><li><p>Installed a second epson plotter of the same type to make sure it wasn't a faulty network card on the printer</p></li><li><p>Wiped a new workstation and just installed just the OS and the RIP software</p></li><li><p>Run a ping test from the terminal from workstation to printer to see if I could observe dropped packets or lack of response while the issue was happening. Yes I've learnt that Ping wont resolve TCP ports but hopefully a basic test of if the printer is generally reachable or not.</p></li></ul></div><div id="question-tags" class="tags-container tags">osx tcp</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>07 Feb '14, 05:15</strong></p><img src="https://secure.gravatar.com/avatar/3bea25e8e4b83535ecf78a86af73e441?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="orionrush&#39;s gravatar image" /><p>orionrush<br />
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="orionrush has no accepted answers">0%</span></p></div><div class="post-update-info post-update-info-edited"><p>edited 07 Feb '14, 05:16</p></div></div><div id="comments-container-29526" class="comments-container"></div><div id="comment-tools-29526" class="comment-tools"></div><div class="clear"></div><div id="comment-29526-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

2 Answers:

</div>

</div>

<span id="29528"></span>

<div id="answer-container-29528" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-29528-score" class="post-score" title="current number of votes">0</div></div></td><td><div class="item-right"><div class="answer-body"><blockquote><p>I need to know what else might be operating on tcp port 1</p></blockquote><p>TCP port 1 is actually assigned to <a href="http://tools.ietf.org/html/rfc1078">tcpmux (RFC 1078)</a>. But honestly, I have not seen that in any environment in the last 25 years!?! Are you sure it's TCP port 1?</p><p>If you wan to use Wireshark to analyze the problem, you should try to capture the traffic at both sides (client and printer) at the same time. See the <a href="http://wiki.wireshark.org/CaptureSetup/Ethernet">Ethernet Capture Setup Wiki</a> for instructions (switch mirror port, etc.). As soon as you have those two capture files, you can look at them yourself, or you can post the files somewhere (google drive, dropbox, cloudshark) and publish the link here, so we can have a look at them.</p><p><strong>Hint:</strong> If it is really TCP port 1 that's being used, there could be firewall issues as well, as that port is used rather seldom, and although it is possible to open firewall for that port, some firewalls might not be able to handle it correctly, i.e. an IDS/IPS module might believe there is an attack going on and thus it blocks the communication.</p><p>A Firewall can also be on the client itself in the form of a personal firewall, AV with IDS/IPS capabilities and Endpoint Security Software (Symantec and the like)!! Did you check that?</p><p>Regards<br />
Kurt</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>07 Feb '14, 05:30</strong></p><img src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Kurt%20Knochner&#39;s gravatar image" /><p>Kurt Knochner ♦<br />
<span class="score" title="24767 reputation points"><span>24.8k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">●</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">●</span><span class="badgecount">237</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Kurt Knochner has 344 accepted answers">15%</span> </br></p></div><div class="post-update-info post-update-info-edited"><p>edited 07 Feb '14, 05:33</p></div></div><div id="comments-container-29528" class="comments-container"><span id="29530"></span><div id="comment-29530" class="comment"><div id="post-29530-score" class="comment-score"></div><div class="comment-text"><p>I will go back and confirm with colorbyte, but it struck me as odd as well. I've just checked and sure enough in the compiled app there is a tcpmux unix executable. If Im understanding the memo you've linked to, tcpmux seems to be to create a custom service name or alias. Perhaps they are using it so their own printing protocol is not interfered with, or steps on any other services.</p></div><div id="comment-29530-info" class="comment-info"><span class="comment-age">(07 Feb '14, 06:16)</span> orionrush</div></div><span id="29531"></span><div id="comment-29531" class="comment"><div id="post-29531-score" class="comment-score"></div><div class="comment-text"><p>We're not using Endpoint, Symantec etc on the boxes themselves, though I do have the standard OSX fire wall in place, with stealth mode enabled. I'll try to disable these to see if there is any improvement. I wouldn't expect theses setting to sometimes work, sometimes not however.</p></div><div id="comment-29531-info" class="comment-info"><span class="comment-age">(07 Feb '14, 06:21)</span> orionrush</div></div><span id="29536"></span><div id="comment-29536" class="comment"><div id="post-29536-score" class="comment-score"></div><div class="comment-text"><blockquote><p>there is a tcpmux unix executable.</p></blockquote><p>well, then they are probably using really tcp port 1. Why not....</p><p>As I said, you need to capture in parallel at the client and in front of the printer (or print server), to figure out what's going wrong.</p></div><div id="comment-29536-info" class="comment-info"><span class="comment-age">(07 Feb '14, 08:14)</span> Kurt Knochner ♦</div></div><span id="29537"></span><div id="comment-29537" class="comment"><div id="post-29537-score" class="comment-score"></div><div class="comment-text"><blockquote><p>if the software can't connect <strong>it throws an error</strong>, and <strong>only a complete system reboot seems to get things working again</strong>.</p></blockquote><p>a system reboot of what exactly? The imageprint system or the networked printer or the print spooler system (if there is one)?</p><p>BTW: what is the error message?</p></div><div id="comment-29537-info" class="comment-info"><span class="comment-age">(07 Feb '14, 08:20)</span> Kurt Knochner ♦</div></div><span id="29539"></span><div id="comment-29539" class="comment"><div id="post-29539-score" class="comment-score"></div><div class="comment-text"><p>The error message is ImagePrint code 527, meaning the print spooler simply couldn't connect to the printer - Not very insightful. As far as a reboot, I should have been more clear, I meant the entire OS. Restarting the GUI for and RIP or its print spooler (these have separate interfaces) dosen't help. This hints to me that there is a process that has been spawned that continues to be locked up after the spooler GUI has been shut down. After the OS reboots you can fire up the RIP and get a few more prints through to the spooler, until it locks up again. Reboot, a few more prints. Reboot a few more prints - all day long. No fun at all!</p></div><div id="comment-29539-info" class="comment-info"><span class="comment-age">(07 Feb '14, 09:01)</span> orionrush</div></div></div><div id="comment-tools-29528" class="comment-tools"></div><div class="clear"></div><div id="comment-29528-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<span id="29529"></span>

<div id="answer-container-29529" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-29529-score" class="post-score" title="current number of votes">0</div></div></td><td><div class="item-right"><div class="answer-body"><p>Troubleshooting intermittent/sporadic problem/issue is never an easy task. The challenge is to catch it when it happens. Before you do anything, what I suggest to do is:</p><ol><li>Profile a normal behavior when it is operating normally to look at the expected traffic behavior when it is operating normally. That will give you a baseline to work with. You can do that by doing spanning the traffic on your machine side or printer side to a capture machine running (either running Wireshark or dumpcap or tshark).</li><li>To port span your traffic, you have options of doing the port span on the switch (which requires a network admin to help you with that). Or, if the end machine/printer/plotter can be taken offline for a bit, you can probably use the dualcomm tap and span out the traffic using the tap. (The dualcomm taps are pretty affordable). <a href="http://www.dual-comm.com/gigabit_port-mirroring-LAN_switch.htm">http://www.dual-comm.com/gigabit_port-mirroring-LAN_switch.htm</a></li><li>By using the same port span technique, you can then capture the traffic when the problem is happening.</li><li>Once you have both the normal "working" packet capture and "non-working" packet capture, then you can diagnose the problem more easily.</li></ol><p><strong>Hint:</strong> When capturing the traffic to profile the traffic, I would try to capture all traffic except for broadcast &amp; multicast and then slowly clean up the packet capture and not restrict the capture only to the printers alone. This is to make sure that you check if there is any other process (such as any DNS resolution, etc) that is actually happening at the background which might be related.</p><p>Just my 2 cents.</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>07 Feb '14, 05:57</strong></p><img src="https://secure.gravatar.com/avatar/c1ab41a3eb718abcabc86051c1bcd165?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="hunghoong&#39;s gravatar image" /><p>hunghoong<br />
<span class="score" title="11 reputation points">11</span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="hunghoong has no accepted answers">0%</span></p></div></div><div id="comments-container-29529" class="comments-container"><span id="29532"></span><div id="comment-29532" class="comment"><div id="post-29532-score" class="comment-score"></div><div class="comment-text"><p>The more I learn about the process, the more I realise Im probably not the best man for this job. My initial instinct when we moved into the lab was to try to operate everything on my own unmanaged switches, to totally separate from the network to see if there was in fact any wider firewall issues. Our IT folks went a bit nuclear when the subject came up however, so I put the switches on the floor, kicked them to the centre of the room and backed away slowly with hand's raised. . . . I just have to trust them I guess when they tell me that all the restrictions have been lifted for this initial setup.</p></div><div id="comment-29532-info" class="comment-info"><span class="comment-age">(07 Feb '14, 06:28)</span> orionrush</div></div></div><div id="comment-tools-29529" class="comment-tools"></div><div class="clear"></div><div id="comment-29529-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

