+++
type = "question"
title = "Bad audio for alaw RTP"
description = '''Hi, I use Wireshark for SIP/RTP debugging and the player under Telephony menu reproduce alas RTP streams very bad. I&#x27;m running Wireshark on OSX and tested all the releases, the issue started some month ago but I don&#x27;t know after what. Do someone have the same problem and a solution for that? Thank y...'''
date = "2013-11-26T05:57:00Z"
lastmod = "2013-11-27T06:29:00Z"
weight = 27421
keywords = [ "player", "rtp" ]
aliases = [ "/questions/27421" ]
osqa_answers = 0
osqa_accepted = false
+++

<div class="headNormal">

# [Bad audio for alaw RTP](/questions/27421/bad-audio-for-alaw-rtp)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-27421-score" class="post-score" title="current number of votes">0</div><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>Hi, I use Wireshark for SIP/RTP debugging and the player under Telephony menu reproduce alas RTP streams very bad. I'm running Wireshark on OSX and tested all the releases, the issue started some month ago but I don't know after what.</p><p>Do someone have the same problem and a solution for that?</p><p>Thank you very Much</p><p>Matteo</p></div><div id="question-tags" class="tags-container tags">player rtp</div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>26 Nov '13, 05:57</strong></p><img src="https://secure.gravatar.com/avatar/052cb80bbda52c8ad157031184ce3fc2?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Matteo%20Erba&#39;s gravatar image" /><p>Matteo Erba<br />
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Matteo Erba has no accepted answers">0%</span></p></div></div><div id="comments-container-27421" class="comments-container"><span id="27422"></span><div id="comment-27422" class="comment"><div id="post-27422-score" class="comment-score"></div><div class="comment-text"><blockquote><p>the issue started some month ago but I don't know after what.</p></blockquote><p>we need to figure out if the problem is related to the RTP data or to Wireshark. So, if you listen to the same stream on the <strong>telephone</strong>, how would you rate the quality there (please for the <strong>identical</strong> RTP stream!!)?</p></div><div id="comment-27422-info" class="comment-info"><span class="comment-age">(26 Nov '13, 06:04)</span> Kurt Knochner ♦</div></div><span id="27425"></span><div id="comment-27425" class="comment"><div id="post-27425-score" class="comment-score"></div><div class="comment-text"><p>The quality is perfect and I can reproduce the same stream on another computer. I have problems with all g.711 streams</p></div><div id="comment-27425-info" class="comment-info"><span class="comment-age">(26 Nov '13, 06:35)</span> Matteo Erba</div></div><span id="27427"></span><div id="comment-27427" class="comment"><div id="post-27427-score" class="comment-score"></div><div class="comment-text"><p>O.K., so you are saying the quality is only bad, if the stream is played with the internal player in Wireshark, right?</p><p>If so, can you please be more specific on the problem? What do you mean by: RTP streams <strong>very bad</strong>. What exactly is bad?</p></div><div id="comment-27427-info" class="comment-info"><span class="comment-age">(26 Nov '13, 06:37)</span> Kurt Knochner ♦</div></div><span id="27428"></span><div id="comment-27428" class="comment"><div id="post-27428-score" class="comment-score"></div><div class="comment-text"><p>Yes, exactly. I mean that the g.711 stream is a phone call but I can't hear the voice, it is like a robot. It's quite difficult to explayn. The graph is OK, I can hear a noise instead the voice of the call</p></div><div id="comment-27428-info" class="comment-info"><span class="comment-age">(26 Nov '13, 06:55)</span> Matteo Erba</div></div><span id="27430"></span><div id="comment-27430" class="comment"><div id="post-27430-score" class="comment-score"></div><div class="comment-text"><blockquote><p>but I can't hear the voice, it is like a robot</p></blockquote><p>So, you don't hear anything at all, or the voice sounds like a 'robot voice'?</p><p>you get the same effect on different systems running Wireshark? Different OS, different Wireshark version?</p></div><div id="comment-27430-info" class="comment-info"><span class="comment-age">(26 Nov '13, 07:08)</span> Kurt Knochner ♦</div></div><span id="27434"></span><div id="comment-27434" class="comment not_top_scorer"><div id="post-27434-score" class="comment-score"></div><div class="comment-text"><p>I can hear a noise, I just can understand the conversation if I know what the people says. Is difficult to explain. Try to imagine the a conversation with sounds like an old 33.6 modem I don't know if is possible here but I can upload a record of the sound I can hear. I had the same issue on another computer and was solved with a reinstallation of the OS</p></div><div id="comment-27434-info" class="comment-info"><span class="comment-age">(26 Nov '13, 07:55)</span> Matteo Erba</div></div><span id="27438"></span><div id="comment-27438" class="comment not_top_scorer"><div id="post-27438-score" class="comment-score"></div><div class="comment-text"><p>well, if it is possible to upload the file, please do so at one of the following sites: google drive, dropbox, mega.co.nz (or any other online file hoster). Hint: If you are also able to upload the capture file, that might help a lot for troubleshooting.</p></div><div id="comment-27438-info" class="comment-info"><span class="comment-age">(26 Nov '13, 10:21)</span> Kurt Knochner ♦</div></div><span id="27468"></span><div id="comment-27468" class="comment not_top_scorer"><div id="post-27468-score" class="comment-score"></div><div class="comment-text"><p>Here the files: <a href="https://www.dropbox.com/s/q6h84uhcpn8naov/record.m4a">https://www.dropbox.com/s/q6h84uhcpn8naov/record.m4a</a> <a href="https://www.dropbox.com/s/9898tqqg2u0c907/38.0.10.34_15-36-3.pcap">https://www.dropbox.com/s/9898tqqg2u0c907/38.0.10.34_15-36-3.pcap</a></p><p>Thank you</p></div><div id="comment-27468-info" class="comment-info"><span class="comment-age">(27 Nov '13, 00:33)</span> Matteo Erba</div></div></div><div id="comment-tools-27421" class="comment-tools"><span class="comments-showing"> showing 5 of 8 </span> <a href="#" class="show-all-comments-link">show 3 more comments</a></div><div class="clear"></div><div id="comment-27421-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="27490"></span>

<div id="answer-container-27490" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><div id="post-27490-score" class="post-score" title="current number of votes">0</div></div></td><td><div class="item-right"><div class="answer-body"><p>O.K. If I analyze the capture file (with Wireshark 1.11.0 on Windows),</p><blockquote><p>Telephony -&gt; VoIP calls -&gt; Player -&gt; Decode</p></blockquote><p>Then select one direction after the other</p><blockquote><p>check mark [] From .... and press "Play"</p></blockquote><p>I can clearly hear a ring and then somebody whistling (without much distortion).</p><p>How did you generate the m4a file?</p><p>Regards<br />
Kurt</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>27 Nov '13, 06:29</strong></p><img src="https://secure.gravatar.com/avatar/23b7bf5b13bc2c98b2e8aa9869ca5d75?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Kurt%20Knochner&#39;s gravatar image" /><p>Kurt Knochner ♦<br />
<span class="score" title="24767 reputation points"><span>24.8k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="39 badges"><span class="silver">●</span><span class="badgecount">39</span></span><span title="237 badges"><span class="bronze">●</span><span class="badgecount">237</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Kurt Knochner has 344 accepted answers">15%</span> </br></p></div><div class="post-update-info post-update-info-edited"><p>edited 27 Nov '13, 06:39</p></div></div><div id="comments-container-27490" class="comments-container"><span id="27494"></span><div id="comment-27494" class="comment"><div id="post-27494-score" class="comment-score"></div><div class="comment-text"><p>Quicktime on my OSX</p></div><div id="comment-27494-info" class="comment-info"><span class="comment-age">(27 Nov '13, 07:41)</span> Matteo Erba</div></div><span id="27496"></span><div id="comment-27496" class="comment"><div id="post-27496-score" class="comment-score"></div><div class="comment-text"><p>I mean how did you export the RTP data from Wireshark and how did you convert that to a M4A file?</p></div><div id="comment-27496-info" class="comment-info"><span class="comment-age">(27 Nov '13, 07:42)</span> Kurt Knochner ♦</div></div><span id="27501"></span><div id="comment-27501" class="comment"><div id="post-27501-score" class="comment-score"></div><div class="comment-text"><p>No, I played the file from wireshark player and recorded it with the mic. So, what you hear is what my computer plays</p></div><div id="comment-27501-info" class="comment-info"><span class="comment-age">(27 Nov '13, 08:02)</span> Matteo Erba</div></div><span id="27514"></span><div id="comment-27514" class="comment"><div id="post-27514-score" class="comment-score"></div><div class="comment-text"><p>O.K. if what I hear is the real 'content' (somebody whistling), the problem is neither related to Wireshark (tested with 1.11.0) nor to the RTP data. As a result it must be related to your system.</p></div><div id="comment-27514-info" class="comment-info"><span class="comment-age">(27 Nov '13, 13:08)</span> Kurt Knochner ♦</div></div><span id="27526"></span><div id="comment-27526" class="comment"><div id="post-27526-score" class="comment-score"></div><div class="comment-text"><p>Yes, the trace is good, the problem is my system but I'm using it since long time and never had problems. It started some weeks ago. So, nobody has the same problem I have?</p></div><div id="comment-27526-info" class="comment-info"><span class="comment-age">(28 Nov '13, 02:29)</span> Matteo Erba</div></div><span id="27530"></span><div id="comment-27530" class="comment not_top_scorer"><div id="post-27530-score" class="comment-score"></div><div class="comment-text"><p>You said:</p><blockquote><p>I <strong>had the same issue</strong> on another computer and <strong>was solved with a reinstallation of the OS</strong></p></blockquote><p>Wireshark uses <a href="http://portaudio.com/">PortAudio</a> to play the audio stream. So, if it does not work on a certain system, there must be something on your system that interferes with PortAudio or the audio system in general. That would also explain, why it works again after a reinstallation of the OS. Hard to diagnose from outside, sorry ....</p><p>What is you OS X version and Wireshark version?</p><p>Maybe it's related to a recent update of the OS in combination with a incompatibility of the PortAudio version used by Wireshark.</p></div><div id="comment-27530-info" class="comment-info"><span class="comment-age">(28 Nov '13, 04:56)</span> Kurt Knochner ♦</div></div><span id="27559"></span><div id="comment-27559" class="comment not_top_scorer"><div id="post-27559-score" class="comment-score"></div><div class="comment-text"><p>OSX 10.9 and Wireshark 1.10.3. Is there a way to reinstall the library or something like this, I reinstalled wireshark many times with different releases (also deleting manually all the files) but the problem is still present</p></div><div id="comment-27559-info" class="comment-info"><span class="comment-age">(29 Nov '13, 05:33)</span> Matteo Erba</div></div><span id="27561"></span><div id="comment-27561" class="comment not_top_scorer"><div id="post-27561-score" class="comment-score"></div><div class="comment-text"><p>I don't think this is related to Wireshark, but to some changes within the OS (or OS configuration) by another piece of software. So, reinstalling Wireshark will not help, whereas reinstalling the OS will help, as that removes the modification.</p><p>What you can do: try to find the software on your system that interferes with the audio subsystem, possibly something that <a href="http://portaudio.com/apps.html">also uses PortAudio</a>. If you've found it, try to uninstall that software and see if that changes anything.</p></div><div id="comment-27561-info" class="comment-info"><span class="comment-age">(29 Nov '13, 05:39)</span> Kurt Knochner ♦</div></div></div><div id="comment-tools-27490" class="comment-tools"><span class="comments-showing"> showing 5 of 8 </span> <a href="#" class="show-all-comments-link">show 3 more comments</a></div><div class="clear"></div><div id="comment-27490-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

