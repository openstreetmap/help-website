+++
type = "question"
title = "Could someone check this multipolygon outer/inner/outer relation?"
description = '''Hi I&#x27;ve made amendments to this relation in an attempt to get it to render correctly: https://www.openstreetmap.org/relation/7347417#map=18/51.02516/-3.93304 This doesn&#x27;t appear to be rendering the innermost (which has an outer role) polygon in this correctly in OSM-Carto. Note: Cycle &amp;amp; Transpor...'''
date = "2018-08-13T16:40:00Z"
lastmod = "2018-08-16T17:26:00Z"
weight = 65303
keywords = [ "rendering", "relations", "multipolygon" ]
aliases = [ "/questions/65303" ]
osqa_answers = 2
osqa_accepted = false
+++

<div class="headNormal">

# [Could someone check this multipolygon outer/inner/outer relation?](/questions/65303/could-someone-check-this-multipolygon-outerinnerouter-relation)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-65303-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-65303-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-65303-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
&#10;</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>Hi I've made amendments to this relation in an attempt to get it to render correctly: <a href="https://www.openstreetmap.org/relation/7347417#map=18/51.02516/-3.93304">https://www.openstreetmap.org/relation/7347417#map=18/51.02516/-3.93304</a></p>
<p>This doesn't appear to be rendering the innermost (which has an outer role) polygon in this correctly in OSM-Carto.</p>
<p>Note: Cycle &amp; Transport render it correctly (those renders are from before my updates) Note: I've changed the innermost polygon to landuse=residential to distinguish it from the wood. I'll swap back once sorted.</p>
<p><a href="https://wiki.openstreetmap.org/wiki/Relation:multipolygon#Island_within_a_hole">https://wiki.openstreetmap.org/wiki/Relation:multipolygon#Island_within_a_hole</a></p>
<p>Am I missing something or is there an OSM-Carto error?</p>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-rendering" rel="tag" title="see questions tagged &#39;rendering&#39;">rendering</span> <span class="post-tag tag-link-relations" rel="tag" title="see questions tagged &#39;relations&#39;">relations</span> <span class="post-tag tag-link-multipolygon" rel="tag" title="see questions tagged &#39;multipolygon&#39;">multipolygon</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>13 Aug '18, 16:40</strong></p>
<img src="https://secure.gravatar.com/avatar/c9c8b421ad22f51ddd62f23413717036?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="DaveF&#39;s gravatar image" />
<p><span>DaveF</span><br />
<span class="score" title="3264 reputation points"><span>3.3k</span></span><span title="84 badges"><span class="badge1">●</span><span class="badgecount">84</span></span><span title="98 badges"><span class="silver">●</span><span class="badgecount">98</span></span><span title="133 badges"><span class="bronze">●</span><span class="badgecount">133</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="DaveF has 17 accepted answers">16%</span></p>
</div>
</div>
<div id="comments-container-65303" class="comments-container">
&#10;</div>
<div id="comment-tools-65303" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-65303-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

2 Answers:

</div>

</div>

<span id="65306"></span>

<div id="answer-container-65306" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-65306-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-65306-score" class="post-score" title="current number of votes">
4
</div>
<span id="post-65306-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>The water should be turned into relation too - see <a href="https://www.openstreetmap.org/relation/8529025">https://www.openstreetmap.org/relation/8529025</a>. Otherwise it tries to cover all the area inside. The rendering should be updated soon.</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>13 Aug '18, 17:05</strong></p>
<img src="https://secure.gravatar.com/avatar/e228dd20b7da2a6c8f559e2118ce08d3?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="kocio&#39;s gravatar image" />
<p><span>kocio</span><br />
<span class="score" title="2054 reputation points"><span>2.1k</span></span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="23 badges"><span class="silver">●</span><span class="badgecount">23</span></span><span title="41 badges"><span class="bronze">●</span><span class="badgecount">41</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="kocio has 14 accepted answers">20%</span></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> edited <strong>14 Aug '18, 15:00</strong> </span></p>
<img src="https://secure.gravatar.com/avatar/0626be5f46f32fce501353e8a5ec399c?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Tordanik&#39;s gravatar image" />
<p><span>Tordanik</span><br />
<span class="score" title="11998 reputation points"><span>12.0k</span></span><span title="15 badges"><span class="badge1">●</span><span class="badgecount">15</span></span><span title="106 badges"><span class="silver">●</span><span class="badgecount">106</span></span><span title="147 badges"><span class="bronze">●</span><span class="badgecount">147</span></span></p>
</div>
</div>
<div id="comments-container-65306" class="comments-container">
<span id="65329"></span>
<div id="comment-65329" class="comment">
<div id="post-65329-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Apologies, <a href="https://help.openstreetmap.org/users/11332/kocio">@kocio</a>. I didn't fully read the wiki link I sent you, where it says an additional relation is required if the inner island needs to be rendered differently. This situations doesn't require that so I removed the tagging as well as the relation you added. It still doesn't render. Here is another example which I hadn't edited: <a href="https://www.openstreetmap.org/relation/6968441#map=19/51.60949/0.01005">https://www.openstreetmap.org/relation/6968441#map=19/51.60949/0.01005</a></p>
<p>I could have sworn it used to render accurately previously with just one relation in OSM-Carto.</p>
</div>
<div id="comment-65329-info" class="comment-info">
<span class="comment-age">(14 Aug '18, 13:53)</span> <span class="comment-user userinfo">DaveF</span>
</div>
</div>
<span id="65330"></span>
<div id="comment-65330" class="comment">
<div id="post-65330-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>I still think that <a href="https://www.openstreetmap.org/way/616701768">https://www.openstreetmap.org/way/616701768</a> should be turned into relation. It's water with a hole inside, where the island (islet) is, so it's not the whole area covered with water. Any shape with holes inside should be relation.</p>
<p>The water multipolygon is totally different problem than wood multipolygon - the water shape is independent from its role as a hole in the wood.</p>
</div>
<div id="comment-65330-info" class="comment-info">
<span class="comment-age">(14 Aug '18, 14:02)</span> <span class="comment-user userinfo">kocio</span>
</div>
</div>
<span id="65331"></span>
<div id="comment-65331" class="comment">
<div id="post-65331-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>When the water was relation, the tree symbols were rendered on the islet as expected. The only problem is why green background was not there, but this might be OSM Carto issue.</p>
</div>
<div id="comment-65331-info" class="comment-info">
<span class="comment-age">(14 Aug '18, 14:24)</span> <span class="comment-user userinfo">kocio</span>
</div>
</div>
</div>
<div id="comment-tools-65306" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-65306-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<span id="65333"></span>

<div id="answer-container-65333" class="answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-65333-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-65333-score" class="post-score" title="current number of votes">
2
</div>
<span id="post-65333-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>In the region you linked to, you have defined two areas. One, representing a forest, shaped like this:</p>
<p><img src="/upfiles/help-mp-forest.png" alt="Outline of the forest multipolygon" /></p>
<p>And one, representing a water body, shaped like this:</p>
<p><img src="/upfiles/help-mp-water.png" alt="Outline of the water polygon" /></p>
<p>There is nothing about the water area to indicate that it has an island. So according to your mapping, the location in the center is both part of the forest area and the water area.</p>
<p>To fix this, it would be best to restore the multipolygon relation <a href="https://www.openstreetmap.org/relation/8529025/history">8529025</a> that kocio originally created.</p>
<p>Apart from that issue, the forest multipolygon is correct, although the use of multiple outer members is unnecessary here. (The forest on the island could simply be a separate polygon.)</p>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>14 Aug '18, 15:16</strong></p>
<img src="https://secure.gravatar.com/avatar/0626be5f46f32fce501353e8a5ec399c?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Tordanik&#39;s gravatar image" />
<p><span>Tordanik</span><br />
<span class="score" title="11998 reputation points"><span>12.0k</span></span><span title="15 badges"><span class="badge1">●</span><span class="badgecount">15</span></span><span title="106 badges"><span class="silver">●</span><span class="badgecount">106</span></span><span title="147 badges"><span class="bronze">●</span><span class="badgecount">147</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Tordanik has 58 accepted answers">35%</span></p>
</img>
</div>
</div>
<div id="comments-container-65333" class="comments-container">
<span id="65387"></span>
<div id="comment-65387" class="comment">
<div id="post-65387-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>From the wiki link I posted: "A construct like this would previously have required different multipolygon relations, one with way 1 being outer and way 2 being inner, as well as one with way 2 being outer and way 3 being inner."</p>
<p>So now, MPs don't require a doubling up of relations.</p>
<p>Again, from the wiki: "Such cascading is still needed when the "island" in the middle is something else than the area on the outside, but where the "island" is the same stuff it can just be made a hole in the hole."</p>
<p>In this case it isn't different, it should be rendering as a wood.</p>
<p>It's interesting that other renderings manage to do it: <a href="https://www.openstreetmap.org/#map=18/51.02509/-3.93343&amp;layers=C">https://www.openstreetmap.org/#map=18/51.02509/-3.93343&amp;layers=C</a></p>
</div>
<div id="comment-65387-info" class="comment-info">
<span class="comment-age">(16 Aug '18, 16:27)</span> <span class="comment-user userinfo">DaveF</span>
</div>
</div>
<span id="65388"></span>
<div id="comment-65388" class="comment">
<div id="post-65388-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>That example describes an island in a hole, not an island in a lake. In that example, way #2 doesn't have any tags, so the area surrounding the island is an empty void. If you tag way #2 as natural=water, that filled polygon would override the island, since there's nothing describing the island as being an inner of way #2. That's why the second relation is required. TBH, the example in the wiki is misleading, because it doesn't work for an "island" in the geological sense (ie. land inside of water).</p>
</div>
<div id="comment-65388-info" class="comment-info">
<span class="comment-age">(16 Aug '18, 17:26)</span> <span class="comment-user userinfo">alester</span>
</div>
</div>
</div>
<div id="comment-tools-65333" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-65333-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

