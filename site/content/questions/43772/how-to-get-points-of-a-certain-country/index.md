+++
type = "question"
title = "How to get points of a certain country?"
description = '''Hello, i want to collect all points that have &quot;amenity=school&quot; as tag and i created the following raw data URL: http://overpass-api.de/api/interpreter?data=[out:json];(node[amenity=school];&amp;gt;;way[amenity=school];&amp;gt;;relation[amenity=school];&amp;gt;;);out; But it should show all schools in the world!...'''
date = "2015-06-25T09:14:00Z"
lastmod = "2015-07-04T11:10:00Z"
weight = 43772
keywords = [ "country", "amenity", "timeout", "area" ]
aliases = [ "/questions/43772" ]
osqa_answers = 1
osqa_accepted = true
+++

<div class="headNormal">

# [How to get points of a certain country?](/questions/43772/how-to-get-points-of-a-certain-country)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-43772-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-43772-score" class="post-score" title="current number of votes">
0
</div>
<span id="post-43772-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span>
<div id="favorite-count" class="favorite-count">
&#10;</div>
</div></td>
<td><div id="item-right">
<div class="question-body">
<p>Hello, i want to collect all points that have "amenity=school" as tag and i created the following raw data URL:</p>
<p><a href="http://overpass-api.de/api/interpreter?data=%5Bout:json%5D;(node%5Bamenity=school%5D;%3E;way%5Bamenity=school%5D;%3E;relation%5Bamenity=school%5D;%3E;);out;">http://overpass-api.de/api/interpreter?data=[out:json];(node[amenity=school];&gt;;way[amenity=school];&gt;;relation[amenity=school];&gt;;);out;</a></p>
<p>But it should show all schools in the world! How to set the search to a certain country?</p>
<p>I said "should" before because i get a timeout error and i can't see what is the output. Setting an area i could get rid of timeout error... am i right?</p>
</div>
<div id="question-tags" class="tags-container tags">
<span class="post-tag tag-link-country" rel="tag" title="see questions tagged &#39;country&#39;">country</span> <span class="post-tag tag-link-amenity" rel="tag" title="see questions tagged &#39;amenity&#39;">amenity</span> <span class="post-tag tag-link-timeout" rel="tag" title="see questions tagged &#39;timeout&#39;">timeout</span> <span class="post-tag tag-link-area" rel="tag" title="see questions tagged &#39;area&#39;">area</span>
</div>
<div id="question-controls" class="post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>asked <strong>25 Jun '15, 09:14</strong></p>
<img src="https://secure.gravatar.com/avatar/50334ab2e351e4f5af1917f7f6ef8dc8?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Andreanovenove&#39;s gravatar image" />
<p><span>Andreanovenove</span><br />
<span class="score" title="126 reputation points">126</span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="11 badges"><span class="silver">●</span><span class="badgecount">11</span></span><span title="18 badges"><span class="bronze">●</span><span class="badgecount">18</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Andreanovenove has no accepted answers">0%</span></p>
</div>
<div class="post-update-info post-update-info-edited">
<p><span> edited <strong>25 Jun '15, 09:14</strong> </span></p>
</div>
</div>
<div id="comments-container-43772" class="comments-container">
<span id="43834"></span>
<div id="comment-43834" class="comment">
<div id="post-43834-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>It is possible to increase the <a href="https://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL#timeout">timeout</a>.</p>
</div>
<div id="comment-43834-info" class="comment-info">
<span class="comment-age">(29 Jun '15, 07:39)</span> <span class="comment-user userinfo">scai ♦</span>
</div>
</div>
<span id="43977"></span>
<div id="comment-43977" class="comment">
<div id="post-43977-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>crosspost: <a href="http://stackoverflow.com/questions/31046501/how-to-get-points-from-openstreetmap-of-a-certain-country">http://stackoverflow.com/questions/31046501/how-to-get-points-from-openstreetmap-of-a-certain-country</a></p>
</div>
<div id="comment-43977-info" class="comment-info">
<span class="comment-age">(04 Jul '15, 11:10)</span> <span class="comment-user userinfo">scai ♦</span>
</div>
</div>
</div>
<div id="comment-tools-43772" class="comment-tools">
&#10;</div>
<div class="clear">
&#10;</div>
<div id="comment-43772-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="43775"></span>

<div id="answer-container-43775" class="answer accepted-answer">

<table style="width:100%;">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="width: 30px; vertical-align: top"><div class="vote-buttons">
<span id="post-43775-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span>
<div id="post-43775-score" class="post-score" title="current number of votes">
3
</div>
<span id="post-43775-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span class="accept-answer on" rel="nofollow" title="Andreanovenove has selected this answer as the correct answer"> </span>
</div></td>
<td><div class="item-right">
<div class="answer-body">
<p>Overpass Turbo can filter the results to a bbox, or to the result of a nominatim query. <a href="https://wiki.openstreetmap.org/wiki/Overpass_turbo/Extended_Overpass_Queries">Read more here</a>.</p>
<p>For your example I think if you use this Overpass Turbo query it will find all schools in Boliva. Adjust for the country you want:</p>
<pre><code>[out:json];{{geocodeArea:Bolivia}}-&gt;.searchArea;(node[amenity=school](area.searchArea);&gt;;way[amenity=school](area.searchArea);&gt;;relation[amenity=school](area.searchArea);&gt;;);out;</code></pre>
</div>
<div class="answer-controls post-controls">
&#10;</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p>answered <strong>25 Jun '15, 10:43</strong></p>
<img src="https://secure.gravatar.com/avatar/16e12e337f6edc3750681492656097ed?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="rorym&#39;s gravatar image" />
<p><span>rorym</span><br />
<span class="score" title="5358 reputation points"><span>5.4k</span></span><span title="14 badges"><span class="badge1">●</span><span class="badgecount">14</span></span><span title="49 badges"><span class="silver">●</span><span class="badgecount">49</span></span><span title="100 badges"><span class="bronze">●</span><span class="badgecount">100</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="rorym has 18 accepted answers">11%</span></p>
</div>
</div>
<div id="comments-container-43775" class="comments-container">
<span id="43776"></span>
<div id="comment-43776" class="comment">
<div id="post-43776-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>It seems to work and it doesn't give problems about timeout. Why?</p>
</div>
<div id="comment-43776-info" class="comment-info">
<span class="comment-age">(25 Jun '15, 11:04)</span> <span class="comment-user userinfo">Andreanovenove</span>
</div>
</div>
<span id="43777"></span>
<div id="comment-43777" class="comment">
<div id="post-43777-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Since you're only loading data from one country, the query will take much less time to execute, so probably doesn't hit the Overpass Turbo timeout limit?</p>
</div>
<div id="comment-43777-info" class="comment-info">
<span class="comment-age">(25 Jun '15, 11:05)</span> <span class="comment-user userinfo">rorym</span>
</div>
</div>
<span id="43780"></span>
<div id="comment-43780" class="comment">
<div id="post-43780-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>Looks like URL encoding of all the newlines and spaces. Maybe try to remove them?</p>
</div>
<div id="comment-43780-info" class="comment-info">
<span class="comment-age">(25 Jun '15, 12:54)</span> <span class="comment-user userinfo">rorym</span>
</div>
</div>
<span id="43825"></span>
<div id="comment-43825" class="comment not_top_scorer">
<div id="post-43825-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>It collects even nodes without any references to "amenity:school" tag. These nodes contain just <code>type</code>, <code>id</code>, <code>lat</code> and <code>lon</code> tags. Why?</p>
</div>
<div id="comment-43825-info" class="comment-info">
<span class="comment-age">(27 Jun '15, 15:24)</span> <span class="comment-user userinfo">Andreanovenove</span>
</div>
</div>
<span id="43833"></span>
<div id="comment-43833" class="comment">
<div id="post-43833-score" class="comment-score">
3
</div>
<div class="comment-text">
<p>Because it also collects ways (and relations) tagged with "amenity=school". The geometry of a way is defined by its referenced nodes. For more info read the section about <a href="https://wiki.openstreetmap.org/wiki/Elements">OSM's basic elements</a>.</p>
</div>
<div id="comment-43833-info" class="comment-info">
<span class="comment-age">(29 Jun '15, 07:38)</span> <span class="comment-user userinfo">scai ♦</span>
</div>
</div>
<span id="43950"></span>
<div id="comment-43950" class="comment not_top_scorer">
<div id="post-43950-score" class="comment-score">
&#10;</div>
<div class="comment-text">
<p>To parse it i had to create a recursive function in my PHP code that sometime seems not to work. Do you know any workaround to query OSM to get nodes/ways without "duplicates"?</p>
</div>
<div id="comment-43950-info" class="comment-info">
<span class="comment-age">(03 Jul '15, 11:45)</span> <span class="comment-user userinfo">Andreanovenove</span>
</div>
</div>
<span id="43951"></span>
<div id="comment-43951" class="comment">
<div id="post-43951-score" class="comment-score">
1
</div>
<div class="comment-text">
<p>There shouldn't be any duplicates in the data returned. Maybe your parser is broken. The best is to create a new question, provide the data you are trying to parse, explain us your parser and tell us which data is supposed to be duplicated according to your parser. But maybe that's a little bit too much for this help system and a forum or mailing list would be better.</p>
</div>
<div id="comment-43951-info" class="comment-info">
<span class="comment-age">(03 Jul '15, 11:54)</span> <span class="comment-user userinfo">scai ♦</span>
</div>
</div>
</div>
<div id="comment-tools-43775" class="comment-tools">
<span class="comments-showing"> showing 5 of 7 </span> <a href="#" class="show-all-comments-link">show 2 more comments</a>
</div>
<div class="clear">
&#10;</div>
<div id="comment-43775-form-container" class="comment-form-container">
&#10;</div>
<div class="clear">
&#10;</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

