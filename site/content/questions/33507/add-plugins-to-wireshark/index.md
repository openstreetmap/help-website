+++
type = "question"
title = "Add plugins to wireshark"
description = '''How can we add our plugins to wireshark?'''
date = "2014-06-06T07:24:00Z"
lastmod = "2014-06-11T11:06:00Z"
weight = 33507
keywords = [ "plugins", "wireshark" ]
aliases = [ "/questions/33507" ]
osqa_answers = 1
osqa_accepted = true
+++

<div class="headNormal">

# [Add plugins to wireshark](/questions/33507/add-plugins-to-wireshark)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-33507-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-33507-score" class="post-score" title="current number of votes">0</div><span id="post-33507-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>How can we add our plugins to wireshark?</p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-plugins" rel="tag" title="see questions tagged &#39;plugins&#39;">plugins</span> <span class="post-tag tag-link-wireshark" rel="tag" title="see questions tagged &#39;wireshark&#39;">wireshark</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>06 Jun '14, 07:24</strong></p><img src="https://secure.gravatar.com/avatar/a9a254ac482208f766093c0f9c144364?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="aman&#39;s gravatar image" /><p><span>aman</span><br />
<span class="score" title="36 reputation points">36</span><span title="15 badges"><span class="badge1">●</span><span class="badgecount">15</span></span><span title="16 badges"><span class="silver">●</span><span class="badgecount">16</span></span><span title="20 badges"><span class="bronze">●</span><span class="badgecount">20</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="aman has no accepted answers">0%</span></p></div></div><div id="comments-container-33507" class="comments-container"></div><div id="comment-tools-33507" class="comment-tools"></div><div class="clear"></div><div id="comment-33507-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="33508"></span>

<div id="answer-container-33508" class="answer accepted-answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-33508-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-33508-score" class="post-score" title="current number of votes">1</div><span id="post-33508-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span class="accept-answer on" rel="nofollow" title="aman has selected this answer as the correct answer"> </span></div></td><td><div class="item-right"><div class="answer-body"><p>Look in the doc directory of the source, <a href="https://code.wireshark.org/review/gitweb?p=wireshark.git;a=blob_plain;f=doc/README.plugins">README.plugins</a>.</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>06 Jun '14, 08:08</strong></p><img src="https://secure.gravatar.com/avatar/d2a7e24ca66604c749c7c88c1da8ff78?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="grahamb&#39;s gravatar image" /><p><span>grahamb ♦</span><br />
<span class="score" title="19834 reputation points"><span>19.8k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="30 badges"><span class="silver">●</span><span class="badgecount">30</span></span><span title="206 badges"><span class="bronze">●</span><span class="badgecount">206</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="grahamb has 274 accepted answers">22%</span></p></div></div><div id="comments-container-33508" class="comments-container"><span id="33514"></span><div id="comment-33514" class="comment"><div id="post-33514-score" class="comment-score"></div><div class="comment-text"><p>when I run autogen.sh after making al the changes I get:</p><p>Welcome to Git (version 1.8.3-preview20130601)</p><p>Run 'git help git' to display the help index. Run 'git help &lt;command&gt;' to display help for specific commands. C:\Development\wireshark\autogen.sh: line 55: autoconf: command not found</p><pre><code>    You must have autoconf 2.60 or later installed to compile Wireshark.
    Download the appropriate package for your distribution/OS,
    or get the source tarball at ftp://ftp.gnu.org/pub/gnu/autoconf/</code></pre><p>C:\Development\wireshark\autogen.sh: line 69: automake: command not found</p><pre><code>    You must have automake 1.9 or later installed to compile Wireshark.
    Download the appropriate package for your distribution/OS,
    or get the source tarball at ftp://ftp.gnu.org/pub/gnu/automake/</code></pre><p>C:\Development\wireshark\autogen.sh: line 99: libtool: command not found</p><pre><code>    You must have libtool 1.4 or later installed to compile Wireshark.
    Download the appropriate package for your distribution/OS,
    or get the source tarball at ftp://ftp.gnu.org/pub/gnu/libtool/</code></pre><p>If I download libtool 1.4 or later version, how do I use it and solve this problem?</p></div><div id="comment-33514-info" class="comment-info"><span class="comment-age">(06 Jun '14, 10:27)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33515"></span><div id="comment-33515" class="comment"><div id="post-33515-score" class="comment-score"></div><div class="comment-text"><p>I though you were building on windows, no need for autoconf on windows.</p></div><div id="comment-33515-info" class="comment-info"><span class="comment-age">(06 Jun '14, 11:06)</span> <span class="comment-user userinfo">Anders ♦</span></div></div><span id="33516"></span><div id="comment-33516" class="comment"><div id="post-33516-score" class="comment-score"></div><div class="comment-text"><p>I have done all steps till point 3 as said in the readme file. Do I need to perform step 4 and 5 also to install? as I am getting the above error in step 4.</p></div><div id="comment-33516-info" class="comment-info"><span class="comment-age">(06 Jun '14, 11:07)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33517"></span><div id="comment-33517" class="comment"><div id="post-33517-score" class="comment-score"></div><div class="comment-text"><p>Ya I am doing on windows. I am done till Step 3, what do I do after that to install my plugins ?</p></div><div id="comment-33517-info" class="comment-info"><span class="comment-age">(06 Jun '14, 11:08)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33518"></span><div id="comment-33518" class="comment not_top_scorer"><div id="post-33518-score" class="comment-score"></div><div class="comment-text"><p>Step 4, as it says is for unix. On Windows, after making all changes execute <code>nmake- f Makefile.nmake</code> on the top level directory of your Wireshark sources, exactly as you did before to build Wireshark, except the build will now include your plugin.</p></div><div id="comment-33518-info" class="comment-info"><span class="comment-age">(06 Jun '14, 11:29)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33521"></span><div id="comment-33521" class="comment not_top_scorer"><div id="post-33521-score" class="comment-score"></div><div class="comment-text"><p><code>Creating library ipa.lib and object ipa.exp packet-ipa.obj : error LNK2019: unresolved external symbol _tvb_get_ephemeral_string referenced in function _dissect_complete_phone_summary packet-ipa.obj : error LNK2019: unresolved external symbol _tvb_bytes_to_str referenced in function _dissect_arp_cache_dump ipa.dll : fatal error LNK1120: 2 unresolved externals NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\BIN\link.EXE"' : return code '0x460' Stop. NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\BIN\nmake.exe"' : return code '0x2' Stop. NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\BIN\nmake.exe"' : return code '0x2' Stop. NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\BIN\nmake.exe"' : return code '0x2' Stop.</code></p></div><div id="comment-33521-info" class="comment-info"><span class="comment-age">(06 Jun '14, 11:39)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33523"></span><div id="comment-33523" class="comment not_top_scorer"><div id="post-33523-score" class="comment-score"></div><div class="comment-text"><p>The plugin has older code in it. Look in <code>epan\tvbuff.h</code> to find the current set of tvbuff accessors.</p><p>I think <code>tvb_bytes_to_str()</code> is replaced with <code>tvb_bytes_to_ep_str()</code> and <code>tvb_get_ephemeral_string()</code> with <code>tvb_get_str_enc()</code>. You may have to adjust the parameters for the new functions . Look at the definitions in tvbuff.h and also README.dissector for more info.</p></div><div id="comment-33523-info" class="comment-info"><span class="comment-age">(06 Jun '14, 12:00)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33526"></span><div id="comment-33526" class="comment not_top_scorer"><div id="post-33526-score" class="comment-score"></div><div class="comment-text"><p>yes I have tvb_bytes_to_str() replaced with tvb_bytes_to_ep_str() in epan\tvbuff.h file so shall I update the parameters in packet-ipa.c file according to the current set?</p></div><div id="comment-33526-info" class="comment-info"><span class="comment-age">(06 Jun '14, 12:19)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33530"></span><div id="comment-33530" class="comment not_top_scorer"><div id="post-33530-score" class="comment-score"></div><div class="comment-text"><p>That seems appropriate.</p></div><div id="comment-33530-info" class="comment-info"><span class="comment-age">(06 Jun '14, 13:36)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33578"></span><div id="comment-33578" class="comment not_top_scorer"><div id="post-33578-score" class="comment-score"></div><div class="comment-text"><p><span>@grahamb</span> : I did the change but still getting the same error.</p></div><div id="comment-33578-info" class="comment-info"><span class="comment-age">(09 Jun '14, 06:40)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33580"></span><div id="comment-33580" class="comment not_top_scorer"><div id="post-33580-score" class="comment-score"></div><div class="comment-text"><p>Have you done an <code>nmake -f Makefile.nmake clean</code> ?</p></div><div id="comment-33580-info" class="comment-info"><span class="comment-age">(09 Jun '14, 07:16)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33581"></span><div id="comment-33581" class="comment not_top_scorer"><div id="post-33581-score" class="comment-score"></div><div class="comment-text"><p>Ya I did it.. still Same problem.:(</p><p><code>packet-ipa.c packet-ipa.c(677) : warning C4013: 'tvb_get_ephemeral_string' undefined; assuming extern returning int packet-ipa.c(689) : warning C4013: 'ether_to_str' undefined; assuming extern returning int packet-ipa.c(858) : warning C4013: 'tvb_bytes_to_str' undefined; assuming extern returning int</code></p><p><code></code></p><pre><code>    link -dll /out:ipa.dll /NOLOGO /INCREMENTAL:no /MACHINE:I386 /DEBUG /MACHINE:x86 /SafeSEH /DYNAMICBASE /FIXED:no packet-ipa.obj ....\epan\libwireshark.lib  c:\development\Wireshark\Wireshark-win32-libs\gtk2\lib\glib-2.0.lib  c:\development\Wireshark\Wireshark-win32-libs\gtk2\lib\gmodule-2.0.lib  c:\development\Wireshark\Wireshark-win32-libs\gtk2\lib\gobject-2.0.lib</code></pre><code></code><p><code>Creating library ipa.lib and object ipa.exp packet-ipa.obj : error LNK2019: unresolved external symbol _tvb_get_ephemeral_string referenced in function _dissect_complete_phone_summary packet-ipa.obj : error LNK2019: unresolved external symbol _tvb_bytes_to_str referenced in function _dissect_arp_cache_dump ipa.dll : fatal error LNK1120: 2 unresolved externals NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\BIN\link.EXE"' : return code '0x460' Stop. NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\BIN\nmake.exe"' : return code '0x2' Stop. NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\BIN\nmake.exe"' : return code '0x2' Stop. NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\BIN\nmake.exe"' : return code '0x2' Stop.</code></p></div><div id="comment-33581-info" class="comment-info"><span class="comment-age">(09 Jun '14, 07:47)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33582"></span><div id="comment-33582" class="comment not_top_scorer"><div id="post-33582-score" class="comment-score"></div><div class="comment-text"><p>It says you just replied 1 min ago and I cant see your comment there..</p></div><div id="comment-33582-info" class="comment-info"><span class="comment-age">(09 Jun '14, 07:54)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33583"></span><div id="comment-33583" class="comment not_top_scorer"><div id="post-33583-score" class="comment-score"></div><div class="comment-text"><p>The first three warnings are because you still have code in the plugin using the old functions, at the line numbers indicated and the compiler can't find the functions in the header files as they no longer exist.</p><p>The two errors are caused by the linker finding the same bits of code and is unable to link them as they don't exist.</p><p>You need to fix all of your plugin, replacing all calls to the renamed functions.</p></div><div id="comment-33583-info" class="comment-info"><span class="comment-age">(09 Jun '14, 07:54)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33612"></span><div id="comment-33612" class="comment not_top_scorer"><div id="post-33612-score" class="comment-score"></div><div class="comment-text"><p>the first replacement worked but second one still gives the error. The plugins is tested but its not being installed here. What do I do to check the linking?</p><p><code>packet-ipa.c packet-ipa.c(677) : warning C4013: 'tvb_get_str_enc' undefined; assuming extern returning int packet-ipa.c(689) : warning C4013: 'ether_to_str' undefined; assuming extern returning int</code></p><p><code></code></p><p><code>link -dll /out:ipa.dll /NOLOGO /INCREMENTAL:no /MACHINE:I386 /DEBUG /MACHINE:x86 /SafeSEH /DYNAMICBASE /FIXED:no packet-ipa.obj ....\epan\libwireshark.lib  c:\development\Wireshark\Wireshark-win32-libs\gtk2\lib\glib-2.0.lib  c:\development\Wireshark\Wireshark-win32-libs\gtk2\lib\gmodule-2.0.lib  c:\development\Wireshark\Wireshark-win32-libs\gtk2\lib\gobject-2.0.lib</code></p><code></code><p><code>Creating library ipa.lib and object ipa.exp packet-ipa.obj : error LNK2019: unresolved external symbol _tvb_get_str_enc referenced in function _dissect_complete_phone_summary ipa.dll : fatal error LNK1120: 1 unresolved externals NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 12.0 \VC\BIN\link.EXE"' : return code '0x460' Stop.</code></p></div><div id="comment-33612-info" class="comment-info"><span class="comment-age">(10 Jun '14, 07:00)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33613"></span><div id="comment-33613" class="comment not_top_scorer"><div id="post-33613-score" class="comment-score"></div><div class="comment-text"><p>cant see your comment.</p></div><div id="comment-33613-info" class="comment-info"><span class="comment-age">(10 Jun '14, 07:20)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33614"></span><div id="comment-33614" class="comment not_top_scorer"><div id="post-33614-score" class="comment-score"></div><div class="comment-text"><p>I made a mistake above, you should be using <code>tvb_get_string_enc()</code>.</p><p>However this just shows that you haven't looked at tvbuff.h as you should have seen it there when adjusting the parameters.</p><p>For <code>ether_to_str()</code> your source file packet-ipa.c should <code>#include &lt;epan/to_str.h&gt;</code></p></div><div id="comment-33614-info" class="comment-info"><span class="comment-age">(10 Jun '14, 07:25)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33615"></span><div id="comment-33615" class="comment not_top_scorer"><div id="post-33615-score" class="comment-score"></div><div class="comment-text"><p>Thanks, it worked for ether_to_str() but the tvb_get_string_enc() is still giving the same unresolved error. the parameters seem ok for it. and I dont have this function in tvbuff.h</p></div><div id="comment-33615-info" class="comment-info"><span class="comment-age">(10 Jun '14, 07:47)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33616"></span><div id="comment-33616" class="comment not_top_scorer"><div id="post-33616-score" class="comment-score"></div><div class="comment-text"><p>Where did you get your sources from, a zip or via git?</p><p>If git, presuming you are on the master branch then you need to update them with a <code>git pull</code>.</p><p>If a zip, then what version did you get?</p></div><div id="comment-33616-info" class="comment-info"><span class="comment-age">(10 Jun '14, 08:01)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33618"></span><div id="comment-33618" class="comment not_top_scorer"><div id="post-33618-score" class="comment-score"></div><div class="comment-text"><p>wireshark sources I got from git clone Version 1.99.0 and my code from zip//</p></div><div id="comment-33618-info" class="comment-info"><span class="comment-age">(10 Jun '14, 08:12)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33619"></span><div id="comment-33619" class="comment not_top_scorer"><div id="post-33619-score" class="comment-score"></div><div class="comment-text"><p>OK, you need to do a <code>git pull</code> to update your clone to the main repo.<br />
</p><p>Confirm you're using the master branch with <code>git branch --list</code>, there should be a "*" against master in the list.</p></div><div id="comment-33619-info" class="comment-info"><span class="comment-age">(10 Jun '14, 08:36)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33620"></span><div id="comment-33620" class="comment not_top_scorer"><div id="post-33620-score" class="comment-score"></div><div class="comment-text"><p>the pull and branch --list should be done via bash or git extensions?</p></div><div id="comment-33620-info" class="comment-info"><span class="comment-age">(10 Jun '14, 08:52)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33621"></span><div id="comment-33621" class="comment not_top_scorer"><div id="post-33621-score" class="comment-score"></div><div class="comment-text"><p>Via whatever git executable you feel comfortable with. The commands I listed are for command line git (actually the Windows version but the cygwin version would run the same). I don't know what they translate to for git extensions.</p></div><div id="comment-33621-info" class="comment-info"><span class="comment-age">(10 Jun '14, 08:54)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33623"></span><div id="comment-33623" class="comment not_top_scorer"><div id="post-33623-score" class="comment-score"></div><div class="comment-text"><p>After pull command I rebuilt the cmd env and I get this..</p><p>C:\Development\wireshark&gt;nmake -f makefile.nmake</p><p>Microsoft (R) Program Maintenance Utility Version 12.00.21005.1 Copyright (C) Microsoft Corporation. All rights reserved.</p><p>ERROR: The contents of 'C:\development\Wireshark\Wireshark-win32-libs\current_ta g.txt' is 2014-05-16. It should be 2014-06-05.</p><p>? Wireshark Libraries not up-to-date ? ? Do you need to run nmake -f Makefile.nmake setup ?</p><p>NMAKE : fatal error U1077: 'exit' : return code '0x1' Stop.</p></div><div id="comment-33623-info" class="comment-info"><span class="comment-age">(10 Jun '14, 10:11)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33626"></span><div id="comment-33626" class="comment not_top_scorer"><div id="post-33626-score" class="comment-score"></div><div class="comment-text"><p>I tried to rebuild it but it still gives the same error..:(</p></div><div id="comment-33626-info" class="comment-info"><span class="comment-age">(10 Jun '14, 11:54)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33627"></span><div id="comment-33627" class="comment not_top_scorer"><div id="post-33627-score" class="comment-score"></div><div class="comment-text"><blockquote><p>Do you need to run nmake -f Makefile.nmake setup ?</p></blockquote><p>Try nmake -f Makefile.nmake setup The printout is telling you that your libraries is out of date and you need to dowload fresh ones...</p></div><div id="comment-33627-info" class="comment-info"><span class="comment-age">(10 Jun '14, 12:04)</span> <span class="comment-user userinfo">Anders ♦</span></div></div><span id="33628"></span><div id="comment-33628" class="comment not_top_scorer"><div id="post-33628-score" class="comment-score"></div><div class="comment-text"><p>I have done setup, distclean, all and packaging again.. still it shows the same error.</p></div><div id="comment-33628-info" class="comment-info"><span class="comment-age">(10 Jun '14, 12:07)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33636"></span><div id="comment-33636" class="comment not_top_scorer"><div id="post-33636-score" class="comment-score"></div><div class="comment-text"><p>What is the error exactly? Since Graham asked you to replace the call to tvb_get_str_enc() by tvb_get_string_enc() you have not showed us what errors you get.</p></div><div id="comment-33636-info" class="comment-info"><span class="comment-age">(10 Jun '14, 22:16)</span> <span class="comment-user userinfo">Pascal Quantin</span></div></div><span id="33640"></span><div id="comment-33640" class="comment not_top_scorer"><div id="post-33640-score" class="comment-score"></div><div class="comment-text"><p>I get this error on replacing the said code:</p><p><code> packet-ipa.c packet-ipa.c(678) : warning C4133: 'function' : incompatible types - from 'tvbuff_t ' to 'wmem_allocator_t ' packet-ipa.c(678) : warning C4047: 'function' : 'tvbuff_t ' differs in levels of indirection from 'gint' packet-ipa.c(678) : warning C4024: 'tvb_get_string_enc' : different types for formal and actual parameter 2 packet-ipa.c(678) : error C2198: 'tvb_get_string_enc' : too few arguments for call packet-ipa.c(680) : warning C4133: 'function' : incompatible types - from 'tvbuff_t ' to 'wmem_allocator_t ' packet-ipa.c(680) : warning C4047: 'function' : 'tvbuff_t ' differs in levels of indirection from 'gint' packet-ipa.c(680) : warning C4024: 'tvb_get_string_enc' : different types for formal and actual parameter 2 packet-ipa.c(680) : error C2198: 'tvb_get_string_enc' : too few arguments for call packet-ipa.c(682) : warning C4133: 'function' : incompatible types - from 'tvbuff_t ' to 'wmem_allocator_t ' packet-ipa.c(682) : warning C4047: 'function' : 'tvbuff_t ' differs in levels of indirection from 'gint' packet-ipa.c(743) : warning C4047: 'function' : 'tvbuff_t ' differs in levels of indirection from 'int' packet-ipa.c(743) : warning C4024: 'tvb_get_string_enc' : different types for formal and actual parameter 2 packet-ipa.c(743) : error C2198: 'tvb_get_string_enc' : too few arguments for call packet-ipa.c(1093) : warning C4133: 'function' : incompatible types - from 'tvbuff_t ' to 'wmem_allocator_t ' packet-ipa.c(1093) : warning C4047: 'function' : 'tvbuff_t *' differs in levelsof indirection from 'gint' packet-ipa.c(1093) : warning C4024: 'tvb_get_string_enc' : different types for formal and actual parameter 2 packet-ipa.c(1093) : error C2198: 'tvb_get_string_enc' : too few arguments for call</code></p></div><div id="comment-33640-info" class="comment-info"><span class="comment-age">(11 Jun '14, 05:55)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33642"></span><div id="comment-33642" class="comment not_top_scorer"><div id="post-33642-score" class="comment-score"></div><div class="comment-text"><p>Firstly that's not the error you reported and that <span>@Anders</span> and <span>@Pascal Quantin</span> were trying to help you with, please try to be consistent about reporting errors.</p><p>Those errors are because you haven't correctly adjusted the parameters you are providing to <code>tvb_get_string_enc()</code>. As we can't see you code (unless you post it somewhere public) any help will be guesses.</p><p>The first parameter to the function must be of type <code>wmem_allocator_t</code>, that defines the scope (or lifetime) of the memory allocation for the string. Usually <code>wmem_packet_scope()</code> is sufficient unless you're stashing the string away for other purposes.</p><p>The second parameter is the tvb, this should be the same as the original call to <code>tvb_get_ephemeral_string()</code>.</p><p>Similarly for the 3rd and 4th parameters, offset and length they should be as per the original call.</p><p>The 5th parameter is the encoding for the string, only you know how the string is encoded, if you aren't sure try <code>ENC_ASCII</code>.</p></div><div id="comment-33642-info" class="comment-info"><span class="comment-age">(11 Jun '14, 06:33)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33645"></span><div id="comment-33645" class="comment not_top_scorer"><div id="post-33645-score" class="comment-score"></div><div class="comment-text"><p>My error is same, the above one is the case when I replace tvb_get_str_enc() with tvb_get_string_enc().</p><p>by using tvb_get_str_enc() I get</p><p>packet-ipa.c(677) : warning C4013: 'tvb_get_str_enc' undefined; assuming extern returning int Creating library ipa.lib and object ipa.exp packet-ipa.obj : error LNK2019: unresolved external symbol _tvb_get_str_enc referenced in function _dissect_complete_phone_summary ipa.dll : fatal error LNK1120: 1 unresolved externals NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 12.0 \VC\BIN\link.EXE"' : return code '0x460' Stop. Shall I share the code of my plugin or the tvbuff.h file?</p></div><div id="comment-33645-info" class="comment-info"><span class="comment-age">(11 Jun '14, 09:06)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33648"></span><div id="comment-33648" class="comment not_top_scorer"><div id="post-33648-score" class="comment-score"></div><div class="comment-text"><p>There is no function <code>tvb_get_str_enc()</code>, I made a mistake, you must not use that.</p><p>The reason for the errors you are getting with <code>tvb_get_string_enc()</code> is because you aren't giving it the correct parameters as I attempted to explain above. You must fix the parameters to allow it to compile and link correctly.</p><p>You'll need to share the code of the plugin, as we all already have access to tvbuff.h</p></div><div id="comment-33648-info" class="comment-info"><span class="comment-age">(11 Jun '14, 09:30)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33654"></span><div id="comment-33654" class="comment not_top_scorer"><div id="post-33654-score" class="comment-score"></div><div class="comment-text"><p><code> static void dissect_phone_dn(tvbuff_t tvb, packet_info pinfo, proto_tree *tree) {   //Dissects info relating to the phone's directory number   gint offset_operation = 8;   gint offset_dn_type = 9;   gint offset_length_dn = 10;   gint offset_directory_number = 11;   gint offset_mac = 31;</code></p><p><code></code></p><p><code>proto_tree_add_text(ipa_tree1, tvb, offset_operation, 1, "Operation: %s",      val_to_str(tvb_get_guint8(tvb, offset_operation), operationtypenames, "Unknown"));   proto_tree_add_text(ipa_tree1, tvb, offset_dn_type, 1, "Directory Number Type: %s",      val_to_str(tvb_get_guint8(tvb, offset_dn_type), DNtypenames, "Unknown"));   proto_tree_add_text(ipa_tree1, tvb, offset_length_dn, 1, "Directory Number Length: %d",      tvb_get_guint8(tvb, offset_length_dn));   proto_tree_add_text(ipa_tree1, tvb, offset_directory_number, 20, "Directory Number: %s",      tvb_get_str_enc(tvb, offset_directory_number, 20));   proto_tree_add_ether_format(ipa_tree1 ,hf_ipa_pdu_type_phone_mac,tvb,offset_mac,6,     tvb_get_ptr(tvb, offset_mac, 6),"MAC address : %s",ether_to_str(tvb_get_ptr(tvb, offset_mac, 6))); }</code></p><p>This is the function I am trying to work on.</p></div><div id="comment-33654-info" class="comment-info"><span class="comment-age">(11 Jun '14, 10:28)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33656"></span><div id="comment-33656" class="comment"><div id="post-33656-score" class="comment-score">1</div><div class="comment-text"><p>The code isn't the best way to do all that, but the line you need to change is:</p><p><code>proto_tree_add_text(ipa_tree1, tvb, offset_directory_number, 20, "Directory Number: %s",      tvb_get_str_enc(tvb, offset_directory_number, 20));</code></p><p>changing it to:</p><p><code>proto_tree_add_text(ipa_tree1, tvb, offset_directory_number, 20, "Directory Number: %s",      tvb_get_string_enc(wmem_packet_scope(), tvb, offset_directory_number, 20, ENC_ASCII));</code></p></div><div id="comment-33656-info" class="comment-info"><span class="comment-age">(11 Jun '14, 10:32)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33659"></span><div id="comment-33659" class="comment not_top_scorer"><div id="post-33659-score" class="comment-score"></div><div class="comment-text"><p>I have changed it and the nmake command now runs successfully, but I cant see my plugin in Help-&gt; about wireshark -&gt; plugins section..</p></div><div id="comment-33659-info" class="comment-info"><span class="comment-age">(11 Jun '14, 11:03)</span> <span class="comment-user userinfo">aman</span></div></div><span id="33660"></span><div id="comment-33660" class="comment not_top_scorer"><div id="post-33660-score" class="comment-score"></div><div class="comment-text"><p>I think you should start a new question for that as it's a different issue.</p></div><div id="comment-33660-info" class="comment-info"><span class="comment-age">(11 Jun '14, 11:05)</span> <span class="comment-user userinfo">grahamb ♦</span></div></div><span id="33661"></span><div id="comment-33661" class="comment not_top_scorer"><div id="post-33661-score" class="comment-score"></div><div class="comment-text"><p>ok. thanks for your help. I will start a new question for it.</p></div><div id="comment-33661-info" class="comment-info"><span class="comment-age">(11 Jun '14, 11:06)</span> <span class="comment-user userinfo">aman</span></div></div></div><div id="comment-tools-33508" class="comment-tools"><span class="comments-showing"> showing 5 of 37 </span> <a href="#" class="show-all-comments-link">show 32 more comments</a></div><div class="clear"></div><div id="comment-33508-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

