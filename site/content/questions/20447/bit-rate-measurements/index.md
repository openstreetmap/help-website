+++
type = "question"
title = "Bit Rate Measurements"
description = '''A software engineer in my group is using Wireshark to help in some CAN bus performance testing. He tells me that the bit rate as reported by Wireshark exceeds the CAN bus configured bit rate, For example, the CAN bus configured bit rate is 100 Kbps and the measured bit rate (as reported by Wireshark...'''
date = "2013-04-15T21:52:00Z"
lastmod = "2013-04-16T19:57:00Z"
weight = 20447
keywords = [ "bit", "bitrate" ]
aliases = [ "/questions/20447" ]
osqa_answers = 1
osqa_accepted = false
+++

<div class="headNormal">

# [Bit Rate Measurements](/questions/20447/bit-rate-measurements)

</div>

<div id="main-body">

<div id="askform">

<table id="question-table" style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-20447-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-20447-score" class="post-score" title="current number of votes">0</div><span id="post-20447-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span> <span id="favorite-mark" class="ajax-command favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </span><div id="favorite-count" class="favorite-count"></div></div></td><td><div id="item-right"><div class="question-body"><p>A software engineer in my group is using Wireshark to help in some CAN bus performance testing. He tells me that the bit rate as reported by Wireshark exceeds the CAN bus configured bit rate, For example, the CAN bus configured bit rate is 100 Kbps and the measured bit rate (as reported by Wireshark) is 111 Kbps. How can this be?</p></div><div id="question-tags" class="tags-container tags"><span class="post-tag tag-link-bit" rel="tag" title="see questions tagged &#39;bit&#39;">bit</span> <span class="post-tag tag-link-bitrate" rel="tag" title="see questions tagged &#39;bitrate&#39;">bitrate</span></div><div id="question-controls" class="post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>asked <strong>15 Apr '13, 21:52</strong></p><img src="https://secure.gravatar.com/avatar/52caf9f454aa6149f3fb2c77248af3d6?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="smilnor&#39;s gravatar image" /><p><span>smilnor</span><br />
<span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="smilnor has no accepted answers">0%</span></p></div><div class="post-update-info post-update-info-edited"><p><span> edited <strong>16 Apr '13, 00:23</strong> </span></p><img src="https://secure.gravatar.com/avatar/f93de7000747ab5efb5acd3034b2ebd7?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Guy%20Harris&#39;s gravatar image" /><p><span>Guy Harris ♦♦</span><br />
<span class="score" title="17443 reputation points"><span>17.4k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="35 badges"><span class="silver">●</span><span class="badgecount">35</span></span><span title="196 badges"><span class="bronze">●</span><span class="badgecount">196</span></span></p></div></div><div id="comments-container-20447" class="comments-container"><span id="20449"></span><div id="comment-20449" class="comment"><div id="post-20449-score" class="comment-score"></div><div class="comment-text"><p>Whitout knowing the protocol or implementation - perhaps some meta data in the packets wireshark reads is counted too?</p></div><div id="comment-20449-info" class="comment-info"><span class="comment-age">(15 Apr '13, 21:54)</span> <span class="comment-user userinfo">Anders ♦</span></div></div><span id="20464"></span><div id="comment-20464" class="comment"><div id="post-20464-score" class="comment-score"></div><div class="comment-text"><blockquote><p>and the measured bit rate (as reported by Wireshark) is 111 Kbps.</p></blockquote><p>which 'module' of Wireshark shows that value (how did you generate that report)?</p></div><div id="comment-20464-info" class="comment-info"><span class="comment-age">(16 Apr '13, 04:17)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="20486"></span><div id="comment-20486" class="comment"><div id="post-20486-score" class="comment-score"></div><div class="comment-text"><p>The statistics module for iograph was used to plot bits/tick with tick set at 1 second. The captured data came from the CAN dev interface on a 12.04 Linux desktop.</p></div><div id="comment-20486-info" class="comment-info"><span class="comment-age">(16 Apr '13, 15:51)</span> <span class="comment-user userinfo">Mark Maestas</span></div></div><span id="20487"></span><div id="comment-20487" class="comment"><div id="post-20487-score" class="comment-score"></div><div class="comment-text"><p>O.K. then see the answer of <span>@Guy Harris</span>.</p></div><div id="comment-20487-info" class="comment-info"><span class="comment-age">(16 Apr '13, 15:52)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="20488"></span><div id="comment-20488" class="comment"><div id="post-20488-score" class="comment-score"></div><div class="comment-text"><p>The Peak USB to CAN adapter was configured as a NET device so we could use Wireshark to capture data</p></div><div id="comment-20488-info" class="comment-info"><span class="comment-age">(16 Apr '13, 15:52)</span> <span class="comment-user userinfo">Mark Maestas</span></div></div><span id="20489"></span><div id="comment-20489" class="comment not_top_scorer"><div id="post-20489-score" class="comment-score"></div><div class="comment-text"><p>I agree that metadata is causing the higher than expected results but after looking through the data I do not see where it is coming from.</p></div><div id="comment-20489-info" class="comment-info"><span class="comment-age">(16 Apr '13, 15:53)</span> <span class="comment-user userinfo">Mark Maestas</span></div></div><span id="20490"></span><div id="comment-20490" class="comment not_top_scorer"><div id="post-20490-score" class="comment-score"></div><div class="comment-text"><p>The delta between the bit rate in Wireshark and the bus, comes from the difference how the bit rate was calculated: net values for the CAN bus, gross values for Wireshark (protocol overhead).</p></div><div id="comment-20490-info" class="comment-info"><span class="comment-age">(16 Apr '13, 15:55)</span> <span class="comment-user userinfo">Kurt Knochner ♦</span></div></div><span id="20493"></span><div id="comment-20493" class="comment not_top_scorer"><div id="post-20493-score" class="comment-score"></div><div class="comment-text"><p>When the CAN bus is configured at 100 Kbps, it can only transmit at 100 Kbps - whether it is payload information or payload plus overhead.</p><p>I could see the payload plus overhead being reported at the full wirespeed of 100 Kbps, and the payload reported at something less than 100 Kbps. But to report anything going more than the 100 Kbps does not make sense to me.</p><p>Still confused ....</p></div><div id="comment-20493-info" class="comment-info"><span class="comment-age">(16 Apr '13, 19:29)</span> <span class="comment-user userinfo">smilnor</span></div></div><span id="20494"></span><div id="comment-20494" class="comment not_top_scorer"><div id="post-20494-score" class="comment-score"></div><div class="comment-text"><p>Wireshark's calculated bit rate is not real. See my updated answer.</p></div><div id="comment-20494-info" class="comment-info"><span class="comment-age">(16 Apr '13, 19:57)</span> <span class="comment-user userinfo">Guy Harris ♦♦</span></div></div></div><div id="comment-tools-20447" class="comment-tools"><span class="comments-showing"> showing 5 of 9 </span> <a href="#" class="show-all-comments-link">show 4 more comments</a></div><div class="clear"></div><div id="comment-20447-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

------------------------------------------------------------------------

<div class="tabBar">

<span id="sort-top"></span>

<div class="headQuestions">

One Answer:

</div>

</div>

<span id="20476"></span>

<div id="answer-container-20476" class="answer">

<table style="width:100%;"><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="width: 30px; vertical-align: top"><div class="vote-buttons"><span id="post-20476-upvote" class="ajax-command post-vote up" rel="nofollow" title="I like this post (click again to cancel)"> </span><div id="post-20476-score" class="post-score" title="current number of votes">0</div><span id="post-20476-downvote" class="ajax-command post-vote down" rel="nofollow" title="I dont like this post (click again to cancel)"> </span></div></td><td><div class="item-right"><div class="answer-body"><p>Looking at a CANbus capture (done with the "virtual" CANbus on a (virtual :-)) Linux box), the packets have:</p><ul><li>a 4-byte field with an identifier and some flag bits</li><li>a 1-byte frame length</li><li>a 1-byte field that's not dissected</li></ul><p>followed by payload data.</p><p><a href="https://en.wikipedia.org/wiki/Canbus#Frames">The "Frames" section of the Wikipedia page about CANbus</a> shows the frame header as having a start-of-frame bit, an 11-bit identifier, two flags from the aforementioned 4-byte field, a reserved bit, a 4-bit length code, a data field, a 15-bit CRC, a 1-bit CRC delimiter, a 1-bit ACK slot, a 1-bit ACK delimiter, and a 7-bit EOF.</p><p>So a frame with <em>n</em> bytes of payload data would, on the wire, have 19 bits of header, <em>n</em>*8 bits of payload data, 16 bits of CRC, 2 bits of ACK stuff, and 7 bits of EOF, for a total of 44 + <em>n</em>*8 bits, and would, in the capture, have 32 bits of flags+identifier, 8 bits of frame length, 8 bits of whatever, and <em>n</em>*8 bits of payload data, for a total of 48 + <em>n</em>*8 bits.</p><p>I.e., the frame from which Wireshark calculates the bit rate has 4 more bits than it would have on the wire, and thus would exceed the actual on-the-wire bit rate.</p></div><div class="answer-controls post-controls"></div><div class="post-update-info-container"><div class="post-update-info post-update-info-user"><p>answered <strong>16 Apr '13, 11:52</strong></p><img src="https://secure.gravatar.com/avatar/f93de7000747ab5efb5acd3034b2ebd7?s=32&amp;d=identicon&amp;r=g" class="gravatar" width="32" height="32" alt="Guy%20Harris&#39;s gravatar image" /><p><span>Guy Harris ♦♦</span><br />
<span class="score" title="17443 reputation points"><span>17.4k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="35 badges"><span class="silver">●</span><span class="badgecount">35</span></span><span title="196 badges"><span class="bronze">●</span><span class="badgecount">196</span></span><br />
<span class="accept_rate" title="Rate of the user&#39;s accepted answers">accept rate:</span> <span title="Guy Harris has 216 accepted answers">19%</span></p></div><div class="post-update-info post-update-info-edited"><p><span> edited <strong>16 Apr '13, 19:56</strong> </span></p></div></div><div id="comments-container-20476" class="comments-container"></div><div id="comment-tools-20476" class="comment-tools"></div><div class="clear"></div><div id="comment-20476-form-container" class="comment-form-container"></div><div class="clear"></div></div></td></tr></tbody></table>

</div>

<div class="paginator-container-left">

</div>

</div>

</div>

